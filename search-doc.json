[{"title":"Introduction","type":0,"sectionRef":"#","url":"/docs/","content":"","keywords":""},{"title":"Buck2 Documentation Website Links​","type":1,"pageTitle":"Introduction","url":"/docs/#buck2-documentation-website-links","content":""},{"title":"For end users​","type":1,"pageTitle":"Introduction","url":"/docs/#for-end-users","content":"Benefits - the benefits of using Buck2. "},{"title":"For people writing rules​","type":1,"pageTitle":"Introduction","url":"/docs/#for-people-writing-rules","content":"Writing Rules - how to write rules to support new languages.Rule APIs - gives the API available when writing rules.Starlark Types - rules are written in Starlark (which is approximately Python), but our version adds types. "},{"title":"For people integrating with Buck2​","type":1,"pageTitle":"Introduction","url":"/docs/#for-people-integrating-with-buck2","content":"Extending Buck via BXL - powerful Starlark scripts for introspection of buck2's graphs "},{"title":"Benefits When Compared to Buck1","type":0,"sectionRef":"#","url":"/docs/benefits/","content":"","keywords":""},{"title":"Benefits for end users​","type":1,"pageTitle":"Benefits When Compared to Buck1","url":"/docs/benefits/#benefits-for-end-users","content":"&quot;buck2 build SOME_TARGET_I_ALREADY_BUILT_BEFORE is basically instantaneous and is a super delightful experience. 🙂&quot; - End user experience  &quot;Buck2 is largely faster and more memory efficient than buck1, and where I’ve seen counter-examples, the buck2 team quickly optimizes and fixes that.🙂&quot; - Sofware Engineer feedback For people who use Buck on a daily basis (such as using Buck build as part of their development inner loop), switching to Buck2 provides the following benefits: Performance - the performance of Buck2 is better in four ways: Fast things are fast - in Buck1, simply typing buck build when there is nothing to do can be expensive (23 seconds in some benchmarks). In Buck2, the same build action takes 0.1 seconds. Actions that should be fast are fast, which enables developers to use Buck more freely, without trying to work around the build system.Slow things are faster - when there is real work to do, Buck2 is significantly closer to the critical path. Benchmarks range from 5%/10s faster for changing a header file (lots of parallel C++ computations, Buck1 already nearly at the critical path) to 42%/145s faster (changing a Thrift file in a large project).Users contribute to the shared cache - with Buck1, only trusted CI builds write to the network cache, while with Buck2 everyone writes to the cache through sandboxed remote execution. This increases the chance of cache hits, saving capacity and time.CI builds go faster - these numbers vary day by day, but most projects are 2-4x faster. This means spending less time waiting for CI and saving some capacity at the same time. Correctness - in Buck2, rules are hermetic by default. Missing dependencies are errors. These restrictions apply to both the user-written BUCK files and the language rules. During the process of migrating to Buck2, a huge number of missing dependencies have been fixed. However, during the same process, several Buck1 issues were identified that are not going to be fixed in Buck1 (such as missing headers, genrules without dependencies, and OCaml rules don’t track all deps). The end result is that Buck2 gives the right answer more often, cutting down on user surprises. Rule features - the rules in Buck2, especially for less commonly used languages (such as Haskell, OCaml, and Rust) support features above and beyond those in Buck1. Examples: dependencies can be given as arguments to prebuilt_ocaml_library, Haskell enables the use of stub headers from C++, and Rust has experimental pipelining support. Actively developed - the Meta build team is putting all its efforts behind Buck2; it's vastly easier to develop than Buck1. While Buck2 is already ahead of Buck1 in many important aspects, the difference is only going to grow with several improvements in the pipeline.Support - Meta can provide much better support to those having difficulties with Buck2 than to those using Buck1. "},{"title":"Benefits for Rule Authors​","type":1,"pageTitle":"Benefits When Compared to Buck1","url":"/docs/benefits/#benefits-for-rule-authors","content":"If you write language-specific rules, then Buck2 is in a different league to Buck1. &quot;This is all rather fun! Buck2 rules are so much more hackable than Buck1.&quot; - Software Engineer feedback There are a number of reasons why Buck2 excels for Rule Authors: Faster developer cycle - in Buck1, the time from changing a rule to seeing the impact is many minutes: you first have to compile Buck1, invalidate the dependency cache (and so on), and perhaps work between multiple OSs. With Buck2, it takes seconds, you don’t even need to restart the daemon.Simple API - Buck2 rules use a small and documented Starlark API, which is dependency-correct by construction. In Buck1, the rules must obey a lot of subtle side conditions with a much larger API.Easier deployment - for Buck2, deployment is just checking the rules in, with an atomic commit changing associated macros (when required). For Buck1, you have to make the repo work with the old and new rules and wait for a Buck version bump to ship your changes, perhaps a few days later.Low barrier to entry - writing rules in Buck2 is vastly easier than Buck1, significantly increasing the developer pool. This means that writing rules is now accessible to language experts, not just Buck experts. "},{"title":"Benefits for Integrators​","type":1,"pageTitle":"Benefits When Compared to Buck1","url":"/docs/benefits/#benefits-for-integrators","content":"For those people who integrate Buck2 into larger systems, in addition to many of the above benefits apply, Buck2 provides the following benefits: Faster queries - many integrators make extensive use of buck uquery and cquery. In Buck2, these commands are faster and use less memory. For example, on CI target determination (a bunch of targets/queries), Buck2 is 25% faster at P50 (moving to 40% faster at P95) with 25% less memory (saving over 20Gb, and crossing below the 64Gb threshold). Profiling - Buck2 already ships with five types of profiling for both loading and analysis (flame graphs, statement breakdown, heap profiles etc). With Buck2, these tools are much more easily accessible to people not on the Build Infra team. "},{"title":"The downside​","type":1,"pageTitle":"Benefits When Compared to Buck1","url":"/docs/benefits/#the-downside","content":"While there are many benefits, it would be remiss not to include a small list of temporary issues: Stability - Buck2 is under active development, which means the risk of regression is correspondingly higher. There may be issues, but they will be fixed as quickly as possible (and lessons learned) through the through Meta's SEV-review process.Corner cases - Buck1 has been battle-tested for nearly a decade, which has included attention to events such as error messages in unlikely corner cases. Only time and user feedback will enable Meta to bring Buck2 to the same level. Please share all such feedback! "},{"title":"Commands","type":0,"sectionRef":"#","url":"/docs/commands/","content":"Commands To get help for a given buck2 subcommand, use buck2 $SUBCOMMAND --help, e.g. buck2 build --help.","keywords":""},{"title":"Daemon (buckd)","type":0,"sectionRef":"#","url":"/docs/concepts/daemon/","content":"","keywords":""},{"title":"Killing or disabling the Buck daemon​","type":1,"pageTitle":"Daemon (buckd)","url":"/docs/concepts/daemon/#killing-or-disabling-the-buck-daemon","content":"The Buck daemon process is killed if buck2 clean or buck2 killcommands are run. Note that they won't kill te daemon associated with custom isolation dirs. To do that, run using the --isolation-dir option (buck2 --isolation-dir &lt;dir&gt; &lt;command&gt;) "},{"title":"Concept Map","type":0,"sectionRef":"#","url":"/docs/concepts/concept_map/","content":"Concept Map The Concept Map provides an at-a-glance overview of the relationships between widely used Buck2 concepts. It is meant to be a tool to help those onboarding to Buck2 to quickly gain an understanding of the Buck2 environment. note The Concept Map is for reference only and is not intended to be 100% accurate nor complete.","keywords":""},{"title":"Glossary of Terms","type":0,"sectionRef":"#","url":"/docs/concepts/glossary/","content":"Glossary of Terms .buckconfig​ The root of your project must contain a configuration file named .buckconfig. Before executing, Buck2 reads this file to incorporate specified customizations. For more information, refer to the Legacy docs. Action​ An individual, cacheable, ideally hermetic command that's run during the build. It takes artifacts as inputs and produces other artifacts as outputs. An example command could be gcc -o main main.c, which takes the artifact main.c (a source file) and produces the artifact called main (the compiled binary). Action graph​ The dependency graph of all actions belonging to a target: it can be queried with buck2 aquery. Artifact​ A single input or output of an action. These are files that participate as inputs or outputs of a build and can be source files or build outputs. For more information, see the Artifact API. Attribute​ Declared by a rule and used to express the properties of a particular instance of a rule to create a target. For example, srcs, deps and copts, which declare a target's source files, dependencies, and custom compiler options, respectively. The available attributes for a target depend on its rule type. BUCK file​ A BUCK file (the name is configurable, some projects use TARGETS) is the main configuration file that tells Buck2 what to build, what their dependencies are, and how to build them. Buck2 takes a BUCK file as input and evaluates the file to declare targets, which are then used to create a graph of dependencies and to derive the actions that must be completed to build intermediate and final software outputs. A BUCK file marks a directory and any sub-directories not containing a BUCK file as a package. BXL​ BXL (Buck eXtension Language) scripts are written in Starlark, a restricted subset of Python, and give integrators the ability to inspect and interact directly with the buck2 graph. BXL scripts can query the action graph, configured graph, and unconfigured graph. They can also create actions and trigger builds. Cell​ The directory tree of one or more Buck2 packages. A Buck2 build can involve multiple cells. The cell root always contains a .buckconfig, although the presence of a .buckconfig file doesn't in itself define a cell. Rather, the cells involved in a build are defined at the time Buck2 is invoked; they are specified in the .buckconfig for the Buck project. Configuration​ note 🚧 THIS SECTION IS UNDER CONSTRUCTION Daemon​ The Daemon process lives between invocations and is designed to allow for cache reuse between Buck2 invocations, which can considerably speed up builds. For more information, see Daemon (buckd). Dependency​ A directed edge between two targets. A target A can have a dependency on target B, for example, if any dep attribute of A mentions B. A target's dependence on another target is determined by the visibility of the latter. Execution platform​ A type of rule that includes information such as what execution types a target supports, which can be remote, local, and hybrid execution. Also, whether it supports cache uploads, which allows users to get cache hits for things that executed locally. Hybrid execution​ Enables shifting work to the local host when available parallelism in the build is low. This enables users to save on remote execution roundtrips to enable faster builds. Isolation dir​ Instances of Buck2 share a daemon if and only if their isolation directory is identical. The isolation directory also influences the output paths provided by Buck2. Package​ A directory that contains a Buck2 build file and all source files belonging to the same directory as the build file, or any of its subdirectories that do not contain a build file themselves. Project​ The Outermost directory where there is a .buckconfig: also known as the root cell. The .buckconfig for the project specifies the cells that constitute the Buck2 project. Specifically, these cells are specified in the '[repositories]' section of the .buckconfig. All command invocations are executed from the project root. Provider​ Data returned from a rule function. It's the only way that information from this rule is available to other rules that depend on it (see dependency). Every rule must return at least the DefaultInfo provider. A common case is to also return either RunInfo (because they are executable) or custom providers that the dependents rule can use. For more information, see Providers. Remote execution (RE)​ Distributed execution of actions on remote workers. It can speed up builds significantly by scaling the nodes available for parallel actions, and by caching action outputs across Buck2 users. Rule​ A rule consists of an attribute spec and an implementation, which is a Starlark function. The attribute spec declares what attributes the rule expects to receive. The rule implementation receives the attributes of a target and the providers of its dependencies. It can declare new actions and artifacts and must return providers that can be used to pass data to its dependents or to Buck2 itself. Rules are instantiated in build files to declare targets and set their attributes. The rule implementation is called when Buck2 needs its providers, which can happen when the target is built, or when one of its dependents is. As an example, the cxx_binary rule could be used to create a C++ binary, but android_binary rule would be used to create an Android APK Source file​ note 🚧 THIS SECTION IS UNDER CONSTRUCTION Starlark​ note 🚧 THIS SECTION IS UNDER CONSTRUCTION Target​ An object that is defined in a build file. Targets represent the buildable units of a build from the perspective of the end user. Declared by instantiating a rule with attributes. A target has dependencies, which are references to other targets. Target label​ The identifier for a target. Structured as cellAlias//path/to/package:target, where cellAlias// maps to a cell root path (as defined in the ./buckconfig of the cell this target belongs to), path/to/package is the package directory that contains the build file declaring the target (relative to the mapped cell alias), and :target is the target's name. Target pattern​ A string that resolves to a set of targets. They can be used as arguments to commands such as buck2 build and buck2 uquery. They can also be used in the visibility argument of a rule. For more information, see Target pattern. Transition​ Allows the configuration to change across a dependency edge. That is, normally, if target A depends on target B, then if the configuration for A is X, then B is configured using X too. By using a transition, you can produce X to configure B instead. Unconfigured graph​ A graph of targets before configurations are applied. Can be queried via buck2 uquery. Visibility​ Determines whether a target can include another target as its dependency. For more information, see Visibility.","keywords":""},{"title":"Target Pattern","type":0,"sectionRef":"#","url":"/docs/concepts/target_pattern/","content":"","keywords":""},{"title":"Build target patterns are not allowed in the deps argument​","type":1,"pageTitle":"Target Pattern","url":"/docs/concepts/target_pattern/#build-target-patterns-are-not-allowed-in-the-deps-argument","content":"Build target patterns cannot be used with the deps argument of a build rule. Buck requires that you specify all dependencies explicitly as either fully-qualified or relative build targets. "},{"title":"Target aliases​","type":1,"pageTitle":"Target Pattern","url":"/docs/concepts/target_pattern/#target-aliases","content":"Buck supports the ability to define aliases for build targets; using aliases can improve brevity when specifying targets on the Buck command line. To see which aliases exist, use buck2 audit config alias. "},{"title":"Visibility","type":0,"sectionRef":"#","url":"/docs/concepts/visibility/","content":"","keywords":""},{"title":"Examples​","type":1,"pageTitle":"Visibility","url":"/docs/concepts/visibility/#examples","content":"A common library like Guava should be able to be included by any build rule: prebuilt_jar( name = 'guava', binary_jar = 'guava-14.0.1.jar', visibility = ['PUBLIC'] )  It is common to restrict the visibility of Android resources to the Java code that uses it: android_resource( name = 'ui_res', res = 'res', package = 'com.example', visibility = ['//java/com/example/ui:ui'] )  Or it may be simpler to make it visible to the entire directory in case additional build rules are added to java/com/example/ui/BUCK: android_resource( name = 'ui_res', res = 'res', package = 'com.example', visibility = ['//java/com/example/ui:'] )  Also, it is common to limit code for testing to be visible only to tests. If you define all of your Java unit tests in a folder named javatests/ in the root of your project, then you could define the following rule to ensure that only build rules under javatests/ can depend on JUnit: prebuilt_jar( name = 'junit', binary_jar = 'junit-4.11.jar', visibility = ['//javatests/...'] )  Finally, restricting the view of a target can be useful for preventing dependency creep: java_library( name = 'example', visibility = ['PUBLIC',], within_view = ['//foo:bar','//hello:world'] )  "},{"title":"Buck2 Telemetry","type":0,"sectionRef":"#","url":"/docs/developers/architecture/buck2_telemetry/","content":"Buck2 Telemetry note 🚧 THIS PAGE IS UNDER CONSTRUCTION","keywords":""},{"title":"Buck1 vs Buck2","type":0,"sectionRef":"#","url":"/docs/developers/architecture/buck1_vs_buck2/","content":"","keywords":""},{"title":"At a glance​","type":1,"pageTitle":"Buck1 vs Buck2","url":"/docs/developers/architecture/buck1_vs_buck2/#at-a-glance","content":"The following table provides an at-a-glance comparison of Buck1 and Buck2. Buck1\tBuck2Build files in Starlark\tBuild files in Starlark Macros in Starlark\tMacros in Starlark Rules in Java\tRules in Starlark Rules and Macros are logically similar\tRules and Macros are logically similar Rules and Core are not well abstracted\tRules and Core are strongly separated Core in Java\tCore in Rust Remote Execution (RE) not well supported\tAll rules support remote execution by default Varying degrees of incrementality / parallelism\tUnified incrementality / parallelism "},{"title":"Top-down vs Bottom-up - understanding the implications of the difference in execution models between Buck1 and Buck2​","type":1,"pageTitle":"Buck1 vs Buck2","url":"/docs/developers/architecture/buck1_vs_buck2/#top-down-vs-bottom-up---understanding-the-implications-of-the-difference-in-execution-models-between-buck1-and-buck2","content":"It is often said that Buck1 does 'top down' and Buck2 does 'bottom up' building. This results in cases where some topics that seem conceptually trivial in Buck1 are hard problems in Buck2, or vice versa. "},{"title":"What are the differences?​","type":1,"pageTitle":"Buck1 vs Buck2","url":"/docs/developers/architecture/buck1_vs_buck2/#what-are-the-differences","content":"Scenario: Imagine you are building A, which depends on both B and C, but where neither B nor C have any dependencies. For the sake of simplicity, imagine B and C are C++ compilations (that produce object files), and A is a link (that consumes them and produces a shared library). Building A with Buck1​ Following is an oversimplified view of what happens: Buck1 computes the 'rulekey' for B. This consists of mixing together the hashes of the C++ file being compiled, as well as all C++ compiler flags, and so on. Buck1 then does the same for C.Buck1 then computes the rulekey for A. This consist of mixing together the rulekeys of B and C, as well as linker flags used by A. for example. Buck1 then looks up the rulekey for A in the cache. If there's a hit, then Buck1 downloads the output and its job done.If there's a cache miss, continue. Buck1 then queries the cache for the rulekeys of B and C: If there's a hit, then the output is downloaded.If there's a miss, then Buck1 runs the commands needed to produce the object file that was missed. Regardless of whether those commands run locally or on RE, Buck1 downloads the output of B and C. Buck1 then runs the command for A to produce the shared library. At this point, Buck1 may actually do another cache lookup with a different rulekey, which is called an input based rulekey. This rulekey is derived from the inputs of the action that needs executing, which at this point of the build are known (since they were just built)! Building A with Buck2​ In contrast, if you ask Buck2 to build A, here is what happens: Buck2 produce the action to compile B and computes the hash of the action. This is the 'action digest', which consists of mixing the hashes of all the inputs (such as the C++ file), as well as the command line (so, implicitly, the compiler flags). Buck2 queries the action cache for the action digest hash. If there's a hit, Buck2 obtains the hash of the resulting object file (that is, the output of B).If there's a miss, Buck2 runs the action on RE (or potentially locally) and obtains the hash of the object file. If the action runs remotely, Buck2 will not download the output. Buck2 does the same thing for C.Buck2 produces the action to link A. This consists of mixing together all the hashes of the input files (which were retrieved earlier) and the command line to produce an action digest, then querying the cache and potentially running the action. Once Buck2 produces A (again, on RE), then, since this output was requested by the user (unlike the intermediary outputs B and C), Buck2 downloads A. "},{"title":"Some implications​","type":1,"pageTitle":"Buck1 vs Buck2","url":"/docs/developers/architecture/buck1_vs_buck2/#some-implications","content":"Rulekeys vs Action digests​ The closest thing to Buck1’s rulekey in Buck2 is the action digest, but they are very different! Since it’s a product of the (transitive) inputs of an action, the (default) rulekey can be computed without running anything or querying any caches. However, the action digest cannot: it requires the actual inputs of an action, which means you need to build all the dependencies first. This means that: In Buck1, you can ask for rulekeys for a target.In Buck2, you’d have to run the build first then ask for the action digests (this is what the buck2 log what-ran would show you). Buck2 queries many more caches​ Buck1 will not descend further down a tree of dependency when it gets a cache hit.Buck2 will always walk up all your dependencies, regardless of whether you get cache hits or not. Materialization​ When Buck1 gets a cache miss, it downloads the outputs.Buck2, by contract, does not download outputs as part of a build (this is called 'deferred materialization'). Note that Buck2 does download the outputs if the user asked for them (that is, they were the targets the user put on the command line). "},{"title":"Second-order implications​","type":1,"pageTitle":"Buck1 vs Buck2","url":"/docs/developers/architecture/buck1_vs_buck2/#second-order-implications","content":"Non-determinism​ Non-determinism in a build affects Buck2 and Buck1 differently. One scenario that often works fine in Buck1 but can work catastrophically bad in Buck2 is a codegen step, driven by a Python binary. In certain configurations/modes, Python binaries are non-deterministic, because they are XARs and that is always non-deterministic, which is bad! In Buck1, that doesn’t really matter, because you can get a cache hit on the codegen output without ever visiting the XAR (as long as the input files haven’t changed).In Buck2, you need the XAR to check the action cache for the codegen step. However, binaries are often not cached in certain configurations/modes, so your XAR isn’t cached.Therefore, since your XAR build is non-deterministic, you’ll always miss in the action cache and the codegen step will always have to run in every build. It can get worse! If the Python binary produces non-deterministic codegen, then the entire build might become uncacheable. Cache misses don’t necessarily propagate​ Say that, in Buck2, you’re trying to build a chain of actions like codegen -&gt; compile -&gt; link. Even if your codegen step isn’t cached (say, because its action inputs are non-deterministic as mentioned above), as long as the codegen output is deterministic, you can still get cache hits from compile and link steps. Hybrid execution​ If you squint, you’ll note that Buck1’s build could be viewed as 'local first', whereas Buck2’s would be better viewed as 'remote first': When Buck1 builds something remotely or gets a cache hit, the outputs are always downloaded.When Buck2 builds something remotely or gets a cache hit, the outputs are never downloaded. In turn, this has some important implications: When Buck1 builds something locally, the inputs are always already present.When Buck2 builds something locally, the inputs have to be downloaded, unless they were built locally (which if you’re doing any RE, is usually not the case), or if another command caused them to be downloaded. This means that, in Buck1, running something locally when you have spare resources is usually a no-brainer, because it’s always ready to go, and you’ll save on not having to download the output from RE (though you might have to upload the output if you need to run actions depending on it later). On the flip side, with Buck2, that’s not necessarily the case. To run an action locally, you need to download inputs that you might otherwise not have needed, which will tax your network connection. "},{"title":"FAQs","type":0,"sectionRef":"#","url":"/docs/developers/bxl_faqs/","content":"","keywords":""},{"title":"When should I use BXL over Buck2 API/CLI?​","type":1,"pageTitle":"FAQs","url":"/docs/developers/bxl_faqs/#when-should-i-use-bxl-over-buck2-apicli","content":"There are many overlaps between BXL and Buck2 (for example, both can run cquery and both can build targets). It’s possible that one use case could be handled by both BXL and Buck2. Following are some specific recommendations to help decide when to use BXL over regular Buck2: Use/inspect resolved attributes that are not exposed/accessible to users via normal Buck2 operations. This includes introspecting the Starlark object of providers, analyzing the Starlark object of a rule’s attr before and after coercing and resolution, and introspecting intermediate query results. Reduce/eliminate the need to make several Buck2 calls within your program, such as running several subprocesses to call cquery several times. With BXL, you can just call the BXL script once in a subprocess, potentially reducing the amount of code you need to write in your program. Reduce/eliminate the need to manually parse Buck2 output format within your program, and any bugs that may come with manual parsing. Some languages are more verbose than others when it comes to string parsing.BXL scripts are written in Starlark, which is basically a deterministic, immutable Python, and are able to directly introspect Starlark objects (such as rules and target nodes, and so on) and call methods on these objects instead of parsing them over Buck2’s output. "},{"title":"When is my BXL script cached?​","type":1,"pageTitle":"FAQs","url":"/docs/developers/bxl_faqs/#when-is-my-bxl-script-cached","content":"The entire BXL script is represented as a single node on the DICE graph (Buck2’s internal dependency graph). When the script’s input changes, the entire node is invalidated and needs to be recomputed. For example, if a BXL function calls uquery, then uses the result to do a cquery and then a build, if Buck2 detects that any of the recorded calls to uquery, cquery, and build changes, then the entire BXL script will be reran. The computations themselves (uquery, cquery, and build) will still be incrementally evaluated via DICE, so we are not rerunning every computation entirely within the BXL. When the BXL script creates artifacts and ensures them, those artifacts are cached separately in an action outside of of the BXL execution. This means that the artifacts produced by BXL are cached separately from the BXL script itself, much like the computations within a BXL. During 2023, there is a plan to add finer grain incrementality to make better use of DICE’s existing incrementality support. "},{"title":"What’s the difference between ctx.output.print() and print()?​","type":1,"pageTitle":"FAQs","url":"/docs/developers/bxl_faqs/#whats-the-difference-between-ctxoutputprint-and-print","content":"ctx.output.print() writes items to stdout by buck2 even when the script is cached. Items written to the output stream are considered to be the results of a BXL script, which will be displayed to stdout by buck2 even when the script is cached.print() is offered by Starlark via the stdlib. This prints anything you want but won’t be provided to stdout at the end of a BXL script. These can be used to print to stderr. NOTE: print() statements don't show up if the script has been cached. "},{"title":"What do I need to know about ensured artifacts​","type":1,"pageTitle":"FAQs","url":"/docs/developers/bxl_faqs/#what-do-i-need-to-know-about-ensured-artifacts","content":"An ensured_artifact prints out the relative or absolute path via ctx.output.print(), depending on if called with abs_path() or rel_path(), but will print out &lt;ensured artifact bound to &lt;some path&gt;&gt; via print(). This is intentional because when the ensured artifact is created with BXL within BXL, it has not been materialized yet. It will be materialized after the BXL script finishes executing, and Buck2 core performs some additional actions after the BXL script. This is a safeguard to prevent people from misusing the artifact path and passing it into an action without the artifact having been materialized or passing an absolute path into RE, which can actually mess up RE and render the action not shareable across users. In addition, it makes these actions separately cacheable from the BXL execution. "},{"title":"Architectural Model","type":0,"sectionRef":"#","url":"/docs/developers/architecture/buck2/","content":"","keywords":""},{"title":"High-level Overview​","type":1,"pageTitle":"Architectural Model","url":"/docs/developers/architecture/buck2/#high-level-overview","content":"Buck2 is a build system whose core is written in Rust. Starlark, which is a deterministic, immutable version of Python, is used to extend the Buck2 build system, enabling Buck2 to be language-agnostic. The high-level flow starts with a user creating a build file (a BUCK file) containing one or more targets, which is specified by the target label, its inputs (sources, attributes, configurations, and dependencies), and the type of macro or rule to use. Briefly, a macro is a wrapper around a rule, which runs necessary commands to generate what’s needed for a target (for example, for a cxx_binary target, generate the header map and run necessary clang commands). Macros can be used to reduce boilerplate code for users (such as to supply the same set of attributes for a rule for all targets). Macros and rules are both written in Starlark and are specified by input sources, attributes, and the implementation function. If the target type is a macro, then the macro will fill in some details (for example, for a cxx_binary target, these are the compilation, debug flags to use, this is the clang to use). If the target type is a rule, then the macro layer is skipped altogether. This is all orchestrated by the core, which performs operations such as executing Buck2 CLI args, generating/updating the dependency graph (which contains the configured target nodes, unconfigured target nodes, action nodes, among other types of nodes that all allow for incrementality and execution), and materializing the artifacts. The core is written in Rust. The following diagram shows the high-level overview.  The Buck2 CLI runs in a client process, which sends commands to the Buck2 daemon via gRPC. The daemon goes through several phases after receiving a request from the client: evaluation, configuration, analysis, execution, and materialization (see Execution Model, below). When using buck2 test, there is a final stage for testing. Note that these are the phases that a build goes through, but they are not always sequential. After finishing all phases, the daemon will send the response back to the client via gRPC. "},{"title":"Execution Model​","type":1,"pageTitle":"Architectural Model","url":"/docs/developers/architecture/buck2/#execution-model","content":"The following diagram shows the Execution Model, which consists of 5 phases and states.  Each of the phases and states shown in the Execution Model, are detailed in the following sub-sections. "},{"title":"State 0 - Build Files​","type":1,"pageTitle":"Architectural Model","url":"/docs/developers/architecture/buck2/#state-0---build-files","content":"Build files (commonly referred to as BUCK files, their default name) are the main input to Buck2 and are syntactically Python. Each build file is uniquely identified by the directory in which it's located. Since all build files have the same name, there cannot be two build files in the same directory. This is usually represented as the relative path from the root of the project (the directory where the .buckconfig file is). Each build file has a set of targets. These describe the things the user wants Buck2 to know about. Each target has a type and a set of named attributes, including at least a name (also known as the label) identifying it. Additional attributes depend on the type of the target. "},{"title":"Phase A: Evaluation​","type":1,"pageTitle":"Architectural Model","url":"/docs/developers/architecture/buck2/#phase-a-evaluation","content":"First, Buck2 evaluates a build file, and then constructs an unconfigured target graph. Buck2 performs directory listings to discover packages, then evaluates the build files that were found, expands any macros detected into their underlying rules, and then will take rule attributes and convert them from Starlark to Rust types to construct a target node, and insert it into the unconfigured target graph, which is a smaller portion of Buck2’s larger dependency graph. The target node consists of a reference to rule implementation, and the set of attributes and sources. The result of evaluation is a list of targets read from the build file mapped to a target node in Buck2 unconfigured target graph. "},{"title":"State 1 - Unconfigured Target Graph is generated​","type":1,"pageTitle":"Architectural Model","url":"/docs/developers/architecture/buck2/#state-1---unconfigured-target-graph-is-generated","content":"At this point, the unconfigured target graph is available for the next stage of transformation, which is to configure the target nodes within the graph. "},{"title":"Phase B: Configuration​","type":1,"pageTitle":"Architectural Model","url":"/docs/developers/architecture/buck2/#phase-b-configuration","content":"At the end of evaluation, the target nodes are not yet configured. Configuration means applying a list of constraints (such as resolving selects to specify the right CPU) to make sure the target can be run where it needs to. This is also known as target platform resolution, and can be configured within the target, the buckconfig, propagated from dependencies, or passed into the CLI. After applying configurations, the target nodes are transformed into configured target nodes within the Buck2 configured target graph, which is a smaller portion of Buck2’s larger dependency graph. "},{"title":"State 2 - Configured Target Graph is generated​","type":1,"pageTitle":"Architectural Model","url":"/docs/developers/architecture/buck2/#state-2---configured-target-graph-is-generated","content":"At this point, the configured target graph is available for the analysis stage to generate the action graph. "},{"title":"Phase C: Analysis​","type":1,"pageTitle":"Architectural Model","url":"/docs/developers/architecture/buck2/#phase-c-analysis","content":"In the analysis phase, Buck2 constructs a context object (ctx) which contains relevant information (such as attributes pulled from the configuration stage), all converted into Starlark types and made available to the rule. For example, the target’s dependencies are turned into a ProviderCollection, source files are converted into StarlarkArtifacts, and String attributes are turned into a StarlarkString. This ctx object is backed by Buck2’s dependency graph for computation and rules use it to tell Buck2 to run actions, create dynamic actions, or create new files. The rule will return a list of providers, which is data that the rule wants to expose to its dependents (that is, can flow through the dependency graph), such as output artifact information (such as file paths and file hashes). Providers could be actions, source files, or attributes. Within the returned list, DefaultInfo always needs to be returned, which indicates what the default outputs are. Some other common built-in providers include RunInfo, TestInfo, and InstallInfo. The end result is a list of providers and actions (inserted into the action graph) that Buck2 needs to execute to produce the desired outputs, known as 'bound artifacts'. "},{"title":"State 3 - Action Graph and Providers are generated​","type":1,"pageTitle":"Architectural Model","url":"/docs/developers/architecture/buck2/#state-3---action-graph-and-providers-are-generated","content":"At this point, the action graph and providers are available to be processed by the execution stage. "},{"title":"Phase D: Execute​","type":1,"pageTitle":"Architectural Model","url":"/docs/developers/architecture/buck2/#phase-d-execute","content":"Execution is where Buck2 takes all the providers (input files from the targets, args from the command line), runs the actions, and then outputs the computed results. The critical path is the theoretical lower bound for the duration of a build, which are the slowest set of actions. Buck2 can be run locally or on remote execution, or in a hybrid manner. For each action, an input action digest is created from the action (hash of command line and all of the action’s inputs), uploaded, and cached within RE. This is known as the RE action cache. If there is a cache hit, then Buck2 does not need to run the command for the action, and RE returns the output action digest. This is known as remote execution. If there is not a cache hit, then local execution has to be done, where all the action’s input files are retrieved from the filesystem (most likely from EdenFS), computation is run on these source files, and then outputted to buck-out using I/O operations in the filesystem. Hybrid execution allows Buck2 to race local and remote execution and return the returns of whichever finishes first for a performance speedup. These action digests are how Buck2 communicates with RE. The action outputs, including final/build artifacts, intermediaries, file, directories, and symlinks related to the build, are then materialized (downloaded to disk), and can be found in the buck-out path. There are different configurations that a user can set to control how materialization is handled. "},{"title":"State 4 - Build outputs are generated​","type":1,"pageTitle":"Architectural Model","url":"/docs/developers/architecture/buck2/#state-4---build-outputs-are-generated","content":"At this point, the build is complete. If a user ran buck2 test, then there is a final transformation for Buck2 to construct a command for TPX to execute the actual test. "},{"title":"Phase E: Test with TPX​","type":1,"pageTitle":"Architectural Model","url":"/docs/developers/architecture/buck2/#phase-e-test-with-tpx","content":"For more detail on testing, review Test Execution. "},{"title":"Getting Started","type":0,"sectionRef":"#","url":"/docs/developers/bxl_getting_started/","content":"","keywords":""},{"title":"Writing a BXL​","type":1,"pageTitle":"Getting Started","url":"/docs/developers/bxl_getting_started/#writing-a-bxl","content":"To create a BXL, first, create a script somewhere in the repository ending in .bxl. (Note that you can define a single bxl per file, or multiple BXLs per file like in Starlark rules). In it, define a BXL function as follows: def _your_implementation(ctx): # ... pass your_function_name = bxl( impl = _your_implementatation, cli_args = { # cli args that you want to receive from the command line &quot;bool_arg&quot;: cli_args.bool(), &quot;list_type&quot;: cli_args.list(cli_args.int()), &quot;optional&quot;: cli_args.option(cli_args.string()), &quot;target&quot;: cli_args.target_label(), }, )  This exposes your_function_name as a function, with whatever arguments you defined it, so that on the command line you can invoke: buck2 bxl //myscript.bxl:your_function_name -- --bool_arg true --list_type 1 --list_type 2 --target //foo:bar`  You can also add helpdocs to the cli args and get them to show up in cli via --help: def _your_implementation(ctx): # ... pass your_function_name = bxl( impl = _your_implementation, cli_args = { &quot;my_bool&quot;: cli_args.bool(True, &quot;this will be printed as part of `--help`&quot;) }, )  The implementation function takes a single context as parameter (see the documentation for BxlContext). Using it, you'll be able to access functions that enable you to perform queries, analysis, builds, and even create your own actions within BXL to build artifacts as part of a BXL function. The primary method to return information from BXL is to either print them, or build some artifact (for details, see the OutputStream documentation, available as part of ctx.output). At high level, ctx.output.print(..) prints results to stdout, and ctx.output.ensure(artifact) marks artifacts as to be materialized into buck-out by the end of the BXL function, returning an object that lets you print the output path via ctx.output.print(ensured). "},{"title":"Running a BXL​","type":1,"pageTitle":"Getting Started","url":"/docs/developers/bxl_getting_started/#running-a-bxl","content":"To run a BXL function, invoke the buck2 command: buck2 bxl &lt;bxl function&gt; -- &lt;function args&gt;  Where &lt;bxl function&gt; is of the form &lt;cell path to function&gt;:&lt;function name&gt;, and &lt;function args&gt; are the arguments that the function accepts from the command line. The documentation for a BXL function can be seen by running:  buck2 bxl &lt;bxl function&gt; -- --help`  Note that this is different from buck2 bxl --help, which generates the help for the buck2 command instead of the function. "},{"title":"BXL Testimonials","type":0,"sectionRef":"#","url":"/docs/developers/bxl_testimonials/","content":"","keywords":""},{"title":"C++ LSP​","type":1,"pageTitle":"BXL Testimonials","url":"/docs/developers/bxl_testimonials/#c-lsp","content":"&quot;On top of the 2x performance improvement we already have with buck1 -&gt; buck2, BXL brought another 3x ~ 4x improvement. With those added together, generating compilation database in Buck2 will be 6x ~ 8x faster than Buck1.&quot; "},{"title":"XCode project generation​","type":1,"pageTitle":"BXL Testimonials","url":"/docs/developers/bxl_testimonials/#xcode-project-generation","content":"&quot;It’s faster and much easier to work with than the equivalent stack in Python. In Python, we’d have to issue a query, parse the output into BuildTarget objects, process them, perform additional queries or build targets/subtargets, etc. Doing the equivalent in BXL removed a lot of inefficiencies and made working with configured targets much easier.&quot; For Rust Analyzer: &quot;It was my first time using BXL, and it allowed me to get rid of about 800 lines of Rust code and replace it with about 60 lines of BXL. It's really handy.&quot; "},{"title":"Pyre​","type":1,"pageTitle":"BXL Testimonials","url":"/docs/developers/bxl_testimonials/#pyre","content":"&quot;We found that our new BXL-based Buck-invoking logic outperformed its predecessor significantly, especially on incremental checks. P95 of Buck build time during Pyre incremental check is reduced by 95.7% for FBCode overall, after the release of the new logic, going from 332 seconds down to 14.3 seconds. That is a ~23x speed improvement! As a result, P95 of the overall time it takes for Pyre to respond after each incremental file save in FBCode has dropped from 193ms to 28ms.&quot; "},{"title":"Why BXL","type":0,"sectionRef":"#","url":"/docs/developers/bxl/","content":"","keywords":""},{"title":"Buck2 Extension Language (BXL)​","type":1,"pageTitle":"Why BXL","url":"/docs/developers/bxl/#buck2-extension-language-bxl","content":"BXL is a Starlark-based script that enables integrators to inspect and interact with the Buck2 graph. Integrators are able to: Write Starlark code that queries, analyzes and builds the Buck2 graph.Interact with the Buck2 graph structures natively, via Starlark, in a safe, controlled manner. "},{"title":"Common How-Tos","type":0,"sectionRef":"#","url":"/docs/developers/bxl_how_tos/","content":"","keywords":""},{"title":"Passing in and using CLI args​","type":1,"pageTitle":"Common How-Tos","url":"/docs/developers/bxl_how_tos/#passing-in-and-using-cli-args","content":"A BXL function can accept a cli_args attribute where args names and types are specified to use within your script, as shown in the following example: Example: def _impl_example(ctx): # ... pass example = bxl( impl = _impl_example, cli_args = { # cli args that you want to receive from the command line &quot;bool_arg&quot;: cli_args.bool(), &quot;list_type&quot;: cli_args.list(cli_args.int()), &quot;optional&quot;: cli_args.option(cli_args.string()), &quot;target&quot;: cli_args.target_label(), }, )  On the command line, you can invoke the arguments as follows: buck2 bxl //myscript.bxl:example -- --bool_arg true --list_type 1 --list_type 2 --target //foo:bar  For BXL functions, to read the arguments, use them as attributes from the cli_args attribute on the BXL ctx object, as follows: def _impl_example(ctx): my_bool_arg = ctx.cli_args.bool_arg  "},{"title":"Running actions​","type":1,"pageTitle":"Common How-Tos","url":"/docs/developers/bxl_how_tos/#running-actions","content":"You can create actions within BXL via the action_factory(). This is called once globally then used on demand: def _impl_example(ctx): actions = ctx.bxl_actions.action_factory() # call once, reuse wherever needed output = actions.write(&quot;my_output&quot;, &quot;out&quot;)  "},{"title":"Getting providers from an analysis​","type":1,"pageTitle":"Common How-Tos","url":"/docs/developers/bxl_how_tos/#getting-providers-from-an-analysis","content":"After calling analysis(), you can get the providers collection from providers(): def _impl_example(ctx): my_providers = ctx.analysis(my_target).providers()  "},{"title":"Get a specific provider from an analysis​","type":1,"pageTitle":"Common How-Tos","url":"/docs/developers/bxl_how_tos/#get-a-specific-provider-from-an-analysis","content":"After calling analysis(), you can also get the providers collection from providers() then grab whatever specific provider you need: def _impl_example(ctx): default_info = ctx.analysis(my_target).providers()[DefaultInfo] ctx.output.print(default_info)  "},{"title":"Build a subtarget​","type":1,"pageTitle":"Common How-Tos","url":"/docs/developers/bxl_how_tos/#build-a-subtarget","content":"Once you have a provider, you can get its subtargets by using the sub_targets attribute on the struct to get a dict of provider labels to provider collections: def _impl_example(ctx): subtarget = ctx.analysis(my_target).providers()[DefaultInfo].sub_targets[“my_subtarget”] ctx.output.print(subtarget)  "},{"title":"Getting attributes or resolved attributes efficiently​","type":1,"pageTitle":"Common How-Tos","url":"/docs/developers/bxl_how_tos/#getting-attributes-or-resolved-attributes-efficiently","content":"If you need to use all of the attrs/resolved_attrs, then initializing the eager variant once would be best. If you only need a few of the attrs, then initializing the lazy variant is better. There’s not really a hard line, it depends on the target node, and which attrs you are looking for. If performance is key to your BXL script, the best way to determine this is to use the BXL profiler. Regardless, if you use eager or lazy versions of getting attributes, you should cache the attrs object: def _impl_example(ctx): lazy = ctx.attrs_lazy() # call once and reuse wherever is necessary eager = ctx.attrs_eager() # call once and reuse wherever is necessary  "},{"title":"Inspecting a struct​","type":1,"pageTitle":"Common How-Tos","url":"/docs/developers/bxl_how_tos/#inspecting-a-struct","content":"You can use dir(my_struct) to inspect a struct. You can also use getattr(my_struct, “my_attr”) to grab individual attributes, which is equivalent to my_struct.my_attr. These are available as part of the Starlark language spec. "},{"title":"Set addition/subtraction on a target_set​","type":1,"pageTitle":"Common How-Tos","url":"/docs/developers/bxl_how_tos/#set-additionsubtraction-on-a-target_set","content":"There are a few BXL actions that return a target_set (such as a cquery eval()). The target_set supports set subtraction and addition (you can use - and + directly in Starlark). "},{"title":"Profiling, Testing, and Debugging a BXL script​","type":1,"pageTitle":"Common How-Tos","url":"/docs/developers/bxl_how_tos/#profiling-testing-and-debugging-a-bxl-script","content":"You can use buck2 bxl profiler, with various measurements, to determine where the script is least efficient. To time individual pieces of the script, you can use BXL’s timestamp methods: def _impl_example(ctx): now = ctx.now() # call once and reuse wherever is necessary start = now.elapsed_millis() # do something time intensive here end = now.elapsed_millis()  BXL does not have a debugger available nor a robust testing framework for mocking. Debug - the main method to debug a BXL script is with print statements (print() and ctx.output.print()).Test - the main method to test a BXL script is to actually invoke it with required inputs then verify the outputs. "},{"title":"Buck 2 specific options","type":0,"sectionRef":"#","url":"/docs/developers/options/","content":"Buck 2 specific options Buck 2 introduces some options that don't exist in v1 and are accessed in the root cell: project.watchman_merge_base: defines the merge base to use for SCM-aware queries to Watchman. This is read when the daemon starts and cannot be changed later without a restart.test.v2_test_executor: defines the program to invoke as the test executor in buck test. This is read every time a test command executes.","keywords":""},{"title":"Request for Comments","type":0,"sectionRef":"#","url":"/docs/developers/request_for_comments/","content":"","keywords":""},{"title":"Drafts​","type":1,"pageTitle":"Request for Comments","url":"/docs/developers/request_for_comments/#drafts","content":"@configuration syntaxbxl actions and Build APIDigest Kinds "},{"title":"Accepted​","type":1,"pageTitle":"Request for Comments","url":"/docs/developers/request_for_comments/#accepted","content":"configured_aliasBuck Extension Language (BXL)Bxl Support for performing analysis on targetsPackage-local values "},{"title":"Implemented​","type":1,"pageTitle":"Request for Comments","url":"/docs/developers/request_for_comments/#implemented","content":"ProviderCollection[] "},{"title":"Parity Testing","type":0,"sectionRef":"#","url":"/docs/developers/parity_script/","content":"","keywords":""},{"title":"Overview​","type":1,"pageTitle":"Parity Testing","url":"/docs/developers/parity_script/#overview","content":"The buck_replay script is meant to test parity between v1 and v2 implementations of commands by querying for logs of the repo and execution state (args, directory) of v2 command invocations, reproducing it locally, making the necessary conversions from v2 to v1 args, and then running both versions of the command so output can be checked/compared. When output differs/parity testing fails, the results are logged into a Scuba table for future reference/analysis. "},{"title":"Flags​","type":1,"pageTitle":"Parity Testing","url":"/docs/developers/parity_script/#flags","content":"The following is a list of arguments/flags currently supported by the list: --verbose - supplying this turns on debug logging. By default, the replay script logs updates on script progress and any errors that happen. When --verbose is given, debug logging will also provide updates on commit and directory changes while parity testing.--dry-run - toggles logging to a test Scuba table instead of the production one. Useful if you're making edits/testing the script itself.--epoch - the time after which to query Scuba for logs of commands for, as a Unix timestamp. If not supplied, it defaults to the last 24 hours.--limit - limits the number of rows queried from Scuba. The default limit is 100000 rows. "},{"title":"Running the script​","type":1,"pageTitle":"Parity Testing","url":"/docs/developers/parity_script/#running-the-script","content":"The script can be run with buck: buck run //buck2/scripts/buck_replay:buck_replay  Example with flags: buck run //buck2/scripts/buck_replay:buck_replay -- --verbose --dry-run --epoch 1626739329 --limit 100000  "},{"title":"Development​","type":1,"pageTitle":"Parity Testing","url":"/docs/developers/parity_script/#development","content":"The script does not yet support commands beyond audit config. Because of differences in flags (different names, new/dropped flags, and so on) in v1 and v2 implementations of commands, there needs to be some conversion when going from one set of arguments to the other. As such, support for a command requires the implementation of a Command class for that command, and with it, several methods: format_common_args, format_args_v1, format_args_v2 - to format the flags/arguments in common between the v1 and v2 versions of a command as well as the ones specific to v1 and v2, respectively.run_v1 and run_v2 - meant to run the v1 and v2 commands and capture the relevant output.test_parity - meant to compare the output the v1 and v2 outputs (note that the standard for what's &quot;equal&quot; may change between commands) and log whatever is necessary. You can also work on features surrounding the replay script; specifically, adding logging to more commands (since in v2 only audit config logging is supported) and Ingress tailer support (currently command logging is handled by CommandReporterProcessor). "},{"title":"Starlark Language Specification","type":0,"sectionRef":"#","url":"/docs/developers/starlark_language_spec/","content":"Starlark Language Specification The Starlark language spec can be found in the Bazel GitHub repository.","keywords":""},{"title":"Starlark in Rust","type":0,"sectionRef":"#","url":"/docs/developers/starlark_rust/","content":"Starlark in Rust note 🚧 THIS PAGE IS UNDER CONSTRUCTION","keywords":""},{"title":"Finding Commands That Buck2 Ran","type":0,"sectionRef":"#","url":"/docs/developers/what-ran/","content":"","keywords":""},{"title":"What Ran output format​","type":1,"pageTitle":"Finding Commands That Buck2 Ran","url":"/docs/developers/what-ran/#what-ran-output-format","content":"This will output a table showing all the commands that were executed, and how they were executed. The structure is as follows: REASON &lt;TAB&gt; TARGET &lt;TAB&gt; IDENTIFIER &lt;TAB&gt; EXECUTOR &lt;TAB&gt; REPRODUCER  Which should be used as follows: REASON - value is either build (for building a thing) or test (for running a test).TARGET - the name of the build target that declared an action.IDENTIFIER - depends on the target but will usually be something like a file name or a module.EXECUTOR - value is either cache, re or local.REPRODUCER - how you can re-run this yourself. "},{"title":"Using the What Ran output​","type":1,"pageTitle":"Finding Commands That Buck2 Ran","url":"/docs/developers/what-ran/#using-the-what-ran-output","content":"Use What Ran as follows: Start by identifying the command you're looking for: You can grep the output for a given target.You can then grep by identifier if necessary. For example, if you're after C++ compilation, try grepping for the basename of your file (for example, for fbcode/my/stuff.cpp, grep for stuff.cpp). Once you found it, reproduce as follows: If the executor was local, the command is in the output, so just run it. It's expected that you'll do this from the root of your project (use buck2 root --kind project to find where that is).If the executor was re or cache, you're provided a RE digest of the form HASH:SIZE. Run frecli cas download-action HASH:SIZE to retrieve the action, then follow the instructions to run it. "},{"title":"Examples​","type":1,"pageTitle":"Finding Commands That Buck2 Ran","url":"/docs/developers/what-ran/#examples","content":"The following ran locally: build fbcode//scripts/torozco/getenv:getenv-san-conf-__generated-lib__ (archive_thin libgetenv-san-conf-__generated-lib__.pic.a) local fbcode/third-party-buck/platform010/build/llvm-fb/bin/llvm-ar qcsTD buck-out/v2/gen/fbcode/d839c731f5505c62/scripts/torozco/getenv/__getenv-san-conf-__generated-lib____/libgetenv-san-conf-__generated-lib__.pic.a buck-out/v2/gen/fbcode/d839c731f5505c62/scripts/torozco/getenv/__getenv-san-conf-__generated-lib____/__objects__/san-conf.c.pic.o  To repro, you'd run: fbcode/third-party-buck/platform010/build/llvm-fb/bin/llvm-ar qcsTD buck-out/v2/gen/fbcode/d839c731f5505c62/scripts/torozco/getenv/__getenv-san-conf-__generated-lib____/libgetenv-san-conf-__generated-lib__.pic.a buck-out/v2/gen/fbcode/d839c731f5505c62/scripts/torozco/getenv/__getenv-san-conf-__generated-lib____/__objects__/san-conf.c.pic.  The following ran on RE: build fbcode//common/init:kill (cxx_compile Kill.cpp (pic)) re 97feca9d014155a80ec55fe27e6bb17f9d2f8574:94  To repro, you'd run: frecli cas download-action 97feca9d014155a80ec55fe27e6bb17f9d2f8574:94  "},{"title":"Expired Digests​","type":1,"pageTitle":"Finding Commands That Buck2 Ran","url":"/docs/developers/what-ran/#expired-digests","content":"Note that if the action was a cache hit on RE, you might get an error when downloading it, indicating that it's not found. If that happens, it's because the cache entry is there but the inputs have expired. If this happens to you, run your build with --upload-all-actions. "},{"title":"action","type":0,"sectionRef":"#","url":"/docs/generated/bxl/action/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"action","url":"/docs/generated/bxl/action/#members","content":"Member\tDescription\tType owner Gets the owning configured target label for an action. () -&gt; &quot;configured_target_label&quot;  "},{"title":"owner​","type":1,"pageTitle":"action","url":"/docs/generated/bxl/action/#owner","content":"def owner() -&gt; &quot;configured_target_label&quot;  Gets the owning configured target label for an action. "},{"title":"Details​","type":1,"pageTitle":"action","url":"/docs/generated/bxl/action/#details","content":"Sample usage: def _impl_action(ctx): action = ctx.audit().output(&quot;buck-out/path/to/__target__/artifact&quot;, &quot;your_target_platform&quot;) ctx.output.print(action.owner())  "},{"title":"Windows Cheat Sheet","type":0,"sectionRef":"#","url":"/docs/developers/windows_cheat_sheet/","content":"","keywords":""},{"title":"CMD, Powershell, Bash Command Comparison​","type":1,"pageTitle":"Windows Cheat Sheet","url":"/docs/developers/windows_cheat_sheet/#cmd-powershell-bash-command-comparison","content":"Bash\tPowershell\tCMD\tWhat does it docd\tcd\tcd\tChange the current directory mkdir\tmkdir\tmkdir / md\tCreate a directory ls\tls\tdir\tList contents of a directory export var=&quot;value&quot;\t$env:var=&quot;value&quot;\tset var=value\tTo set environment variables $ENV_VAR\t$env:ENV_VAR\t%ENV_VAR%\tRead environment variable echo &quot;Hello world&quot;\techo &quot;Hello world&quot;\techo Hello world\tTo print something on the screen rm\trm\tdel\tDelete a file rm -rf\trmdir\trmdir\tDelete a directory cat\tcat\ttype\tPrint file content to console "},{"title":"Symlinks​","type":1,"pageTitle":"Windows Cheat Sheet","url":"/docs/developers/windows_cheat_sheet/#symlinks","content":"In Windows, there are two types of symlinks: file and directory. You can find out which type of symlink is being created using: dir /AL /S &lt;path&gt;. The command lists all of the symbolic links in the &lt;path&gt; directory: ^&lt;SYMLINKD^&gt; is a Directory SymLink^&lt;SYMLINK^&gt; is a File SymLink "},{"title":"Target names​","type":1,"pageTitle":"Windows Cheat Sheet","url":"/docs/developers/windows_cheat_sheet/#target-names","content":"Escaping the '=' symbol on Windows is quite complicated: make sure none of the targets being built contain this symbol as it could cause build breakages. "},{"title":"analysis_result","type":0,"sectionRef":"#","url":"/docs/generated/bxl/analysis_result/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"analysis_result","url":"/docs/generated/bxl/analysis_result/#members","content":"Member\tDescription\tType providers Access the providers of the rule. Returns a [ProviderCollection] the same as accessing providers of dependencies within a rule implementation. () -&gt; &quot;&quot;  "},{"title":"providers​","type":1,"pageTitle":"analysis_result","url":"/docs/generated/bxl/analysis_result/#providers","content":"def providers() -&gt; &quot;&quot;  Access the providers of the rule. Returns a [ProviderCollection] the same as accessing providers of dependencies within a rule implementation. "},{"title":"Details​","type":1,"pageTitle":"analysis_result","url":"/docs/generated/bxl/analysis_result/#details","content":"Sample usage: def _impl_providers(ctx): node = ctx.configured_targets(&quot;root//bin:the_binary&quot;) providers = ctx.analysis(node).providers() ctx.output.print(providers[FooInfo]) providers = ctx.analysis(&quot;//:bin&quot;).providers() ctx.output.print(providers[FooInfo])  "},{"title":"audit_ctx","type":0,"sectionRef":"#","url":"/docs/generated/bxl/audit_ctx/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"audit_ctx","url":"/docs/generated/bxl/audit_ctx/#members","content":"Member\tDescription\tType output Returns either: - The StarlarkAction which created the buck-out path, if exists. - The StarlarkTargetLabel (unconfigured target label) constructed from the buck-out path, if the configuration hashes do not match. - None, if the configuration hash of the buck-out path matches the one passed into this function, or the default target configuration, but no action could be found that generated the buck-out path. ( output_path: str.type, target_platform: &quot;&quot; = None ) -&gt; [None, &quot;&quot;]  "},{"title":"output​","type":1,"pageTitle":"audit_ctx","url":"/docs/generated/bxl/audit_ctx/#output","content":"def output(output_path: str.type, target_platform: &quot;&quot; = None) -&gt; [None, &quot;&quot;]  Returns either: - The StarlarkAction which created the buck-out path, if exists. - The StarlarkTargetLabel (unconfigured target label) constructed from the buck-out path, if the configuration hashes do not match. - None, if the configuration hash of the buck-out path matches the one passed into this function, or the default target configuration, but no action could be found that generated the buck-out path. "},{"title":"Details​","type":1,"pageTitle":"audit_ctx","url":"/docs/generated/bxl/audit_ctx/#details","content":"Takes in an optional target platform, otherwise will use the default target platform. Sample usage: def _impl_audit_output(ctx): target_platform = &quot;foo&quot; result = ctx.audit().output(&quot;buck-out/v2/gen/fbcode/some_cfg_hash/path/to/__target__/artifact&quot;, target_platform) ctx.output.print(result)  "},{"title":"bxl_actions","type":0,"sectionRef":"#","url":"/docs/generated/bxl/bxl_actions/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"bxl_actions","url":"/docs/generated/bxl/bxl_actions/#members","content":"Member\tDescription\tType action_factory Returns the analysis registry [AnalysisRegistry] to create and register actions for this bxl function. This will have the same functionality as the actions for rules. () -&gt; &quot;&quot;  "},{"title":"action_factory​","type":1,"pageTitle":"bxl_actions","url":"/docs/generated/bxl/bxl_actions/#action_factory","content":"def action_factory() -&gt; &quot;&quot;  Returns the analysis registry [AnalysisRegistry] to create and register actions for this bxl function. This will have the same functionality as the actions for rules. "},{"title":"Details​","type":1,"pageTitle":"bxl_actions","url":"/docs/generated/bxl/bxl_actions/#details","content":"Actions created by bxl will not be built by default. Instead, they are marked to be built by ctx.output.ensure(artifact) on the output module of the [BxlContext]. Only artifacts marked by ensure will be built. Sample usage: def _impl_write_action(ctx): actions = ctx.bxl_actions.action_factory() output = actions.write(&quot;my_output&quot;, &quot;my_content&quot;) ensured = ctx.output.ensure(output) ctx.output.print(ensured)  "},{"title":"bxl_build_result","type":0,"sectionRef":"#","url":"/docs/generated/bxl/bxl_build_result/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"bxl_build_result","url":"/docs/generated/bxl/bxl_build_result/#members","content":"Member\tDescription\tType artifacts Returns an optional iterable of artifacts that was successfully built. () -&gt; [None, &quot;bxl_built_artifacts_iterable&quot;] failures Returns an optional of iterable of artifacts that failed to be built. () -&gt; [None, &quot;bxl_failed_artifacts_iterable&quot;]  "},{"title":"artifacts​","type":1,"pageTitle":"bxl_build_result","url":"/docs/generated/bxl/bxl_build_result/#artifacts","content":"def artifacts() -&gt; [None, &quot;bxl_built_artifacts_iterable&quot;]  Returns an optional iterable of artifacts that was successfully built. "},{"title":"Details​","type":1,"pageTitle":"bxl_build_result","url":"/docs/generated/bxl/bxl_build_result/#details","content":"Sample usage: def _impl(ctx): outputs = {} for target, value in ctx.build(ctx.cli_args.target).items(): ctx.output.print(value.artifacts())   "},{"title":"failures​","type":1,"pageTitle":"bxl_build_result","url":"/docs/generated/bxl/bxl_build_result/#failures","content":"def failures() -&gt; [None, &quot;bxl_failed_artifacts_iterable&quot;]  Returns an optional of iterable of artifacts that failed to be built. "},{"title":"Details​","type":1,"pageTitle":"bxl_build_result","url":"/docs/generated/bxl/bxl_build_result/#details-1","content":"Sample usage: def _impl(ctx): outputs = {} for target, value in ctx.build(ctx.cli_args.target).items(): ctx.output.print(value.failures())  "},{"title":"bxl_output_stream","type":0,"sectionRef":"#","url":"/docs/generated/bxl/bxl_output_stream/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"bxl_output_stream","url":"/docs/generated/bxl/bxl_output_stream/#members","content":"Member\tDescription\tType ensure Marks the artifact as an artifact that should be available to the users at the end of the bxl invocation. Any artifacts that do not get registered via this call is not accessible by users at the end of bxl script. ( artifact: &quot;&quot; ) -&gt; &quot;ensured_artifact&quot; ensure_multiple Same as ensure, but for multiple artifacts. Will preserve the shape of the inputs (i.e. if the resulting Dict of a ctx.build() is passed in, the output will be a Dict where the key is preserved, and the values are converted to EnsuredArtifacts). ( artifacts: &quot;&quot; ) -&gt; &quot;&quot; print Outputs results to the console via stdout. These outputs are considered to be the results of a bxl script, which will be displayed to stdout by buck2 even when the script is cached. Accepts an optional separator that defaults to &quot; &quot;. ( *args: UNKNOWN, sep: str.type = None ) -&gt; None print_json Outputs results to the console via stdout as a json. These outputs are considered to be the results of a bxl script, which will be displayed to stdout by buck2 even when the script is cached. ( value: &quot;&quot; ) -&gt; None  "},{"title":"ensure​","type":1,"pageTitle":"bxl_output_stream","url":"/docs/generated/bxl/bxl_output_stream/#ensure","content":"def ensure(artifact: &quot;&quot;) -&gt; &quot;ensured_artifact&quot;  Marks the artifact as an artifact that should be available to the users at the end of the bxl invocation. Any artifacts that do not get registered via this call is not accessible by users at the end of bxl script. "},{"title":"Details​","type":1,"pageTitle":"bxl_output_stream","url":"/docs/generated/bxl/bxl_output_stream/#details","content":"This function returns an ensured_artifact type that can be printed via ctx.output.print()to print its actual path on disk. Sample usage: def _impl_ensure(ctx): actions = ctx.bxl_actions.action_factory() output = actions.write(&quot;my_output&quot;, &quot;my_content&quot;) ensured = ctx.output.ensure(output) ctx.output.print(ensured)   "},{"title":"ensure_multiple​","type":1,"pageTitle":"bxl_output_stream","url":"/docs/generated/bxl/bxl_output_stream/#ensure_multiple","content":"def ensure_multiple(artifacts: &quot;&quot;) -&gt; &quot;&quot;  Same as ensure, but for multiple artifacts. Will preserve the shape of the inputs (i.e. if the resulting Dict of a ctx.build() is passed in, the output will be a Dict where the key is preserved, and the values are converted to EnsuredArtifacts). "},{"title":"Details​","type":1,"pageTitle":"bxl_output_stream","url":"/docs/generated/bxl/bxl_output_stream/#details-1","content":"Note that is slower to loop through objects and ensure them one by one than it is to call ensure_multiple()on all the objects at once (if possible). So, it is suggested to use this method when you are only ensuring a few individual artifacts that are not stored in an iterable. Sample usage: def _impl_ensure_multiple(ctx): outputs = {} for target, value in ctx.build(ctx.cli_args.target).items(): outputs.update({target.raw_target(): ctx.output.ensure_multiple(value.artifacts())}) ctx.output.print_json(outputs)   "},{"title":"print​","type":1,"pageTitle":"bxl_output_stream","url":"/docs/generated/bxl/bxl_output_stream/#print","content":"def print(*args: UNKNOWN, sep: str.type = None) -&gt; None  Outputs results to the console via stdout. These outputs are considered to be the results of a bxl script, which will be displayed to stdout by buck2 even when the script is cached. Accepts an optional separator that defaults to &quot; &quot;. "},{"title":"Details​","type":1,"pageTitle":"bxl_output_stream","url":"/docs/generated/bxl/bxl_output_stream/#details-2","content":"Prints that are not result of the bxl should be printed via stderr via the stdlib printand pprint. Sample usage: def _impl_print(ctx): ctx.output.print(&quot;test&quot;)   "},{"title":"print_json​","type":1,"pageTitle":"bxl_output_stream","url":"/docs/generated/bxl/bxl_output_stream/#print_json","content":"def print_json(value: &quot;&quot;) -&gt; None  Outputs results to the console via stdout as a json. These outputs are considered to be the results of a bxl script, which will be displayed to stdout by buck2 even when the script is cached. "},{"title":"Details​","type":1,"pageTitle":"bxl_output_stream","url":"/docs/generated/bxl/bxl_output_stream/#details-3","content":"Prints that are not result of the bxl should be printed via stderr via the stdlib printand pprint. Sample usage: def _impl_print_json(ctx): outputs = {} outputs.update({&quot;foo&quot;: bar}) ctx.output.print_json(&quot;test&quot;)  "},{"title":"configured_attr_val","type":0,"sectionRef":"#","url":"/docs/generated/bxl/configured_attr_val/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"configured_attr_val","url":"/docs/generated/bxl/configured_attr_val/#members","content":"Member\tDescription\tType type Returns the type name of the attribute str.type value Returns the value of this attribute. The value here is not fully resolved like in rules. () -&gt; &quot;&quot;  "},{"title":"type : str.type​","type":1,"pageTitle":"configured_attr_val","url":"/docs/generated/bxl/configured_attr_val/#type--strtype","content":"Returns the type name of the attribute Sample usage: def _impl_type(ctx): node = ctx.cquery().owner(&quot;bin/TARGETS&quot;)[0] attrs = node.attrs_eager() ctx.output.print(attrs.name.type)   "},{"title":"value​","type":1,"pageTitle":"configured_attr_val","url":"/docs/generated/bxl/configured_attr_val/#value","content":"def value() -&gt; &quot;&quot;  Returns the value of this attribute. The value here is not fully resolved like in rules. "},{"title":"Details​","type":1,"pageTitle":"configured_attr_val","url":"/docs/generated/bxl/configured_attr_val/#details","content":"Sample usage: def _impl_value(ctx): node = ctx.cquery().owner(&quot;bin/TARGETS&quot;)[0] attrs = node.attrs_eager() ctx.output.print(attrs.name.value())  "},{"title":"configured_sub_target","type":0,"sectionRef":"#","url":"/docs/generated/bxl/configured_sub_target/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"configured_sub_target","url":"/docs/generated/bxl/configured_sub_target/#members","content":"Member\tDescription\tType configured_sub_target Converts a TargetLabel into its corresponding ProvidersLabel given the subtarget name which is a list for each layer of subtarget ( target: &quot;configured_target_label&quot;, subtarget_name: &quot;&quot; = [] ) -&gt; &quot;label&quot;  "},{"title":"configured_sub_target​","type":1,"pageTitle":"configured_sub_target","url":"/docs/generated/bxl/configured_sub_target/#configured_sub_target-1","content":"def configured_sub_target(target: &quot;configured_target_label&quot;, subtarget_name: &quot;&quot; = []) -&gt; &quot;label&quot;  Converts a TargetLabel into its corresponding ProvidersLabel given the subtarget name which is a list for each layer of subtarget "},{"title":"Details​","type":1,"pageTitle":"configured_sub_target","url":"/docs/generated/bxl/configured_sub_target/#details","content":"Sample usage: def _impl_sub_target(ctx): owners = ctx.cquery().owner(&quot;bin/TARGETS.fixture&quot;) for owner in owners: configured_label = owner.label ctx.output.print(configured_sub_target(configured_label)) ctx.output.print(configured_sub_target(configured_label, &quot;subtarget1&quot;)) ctx.output.print(configured_sub_target(configured_label, [&quot;subtarget1&quot;, &quot;subtarget2&quot;))  "},{"title":"bxl_ctx","type":0,"sectionRef":"#","url":"/docs/generated/bxl/bxl_ctx/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"bxl_ctx","url":"/docs/generated/bxl/bxl_ctx/#members","content":"Member\tDescription\tType analysis Runs analysis on the given labels, accepting an optional target_platform which is the target platform configuration used to resolve configurations of any unconfigured target nodes, and an optional skip_incompatible boolean that indicates whether to skip analysis of nodes that are incompatible with the target platform. The target_platform is either a string that can be parsed as a target label, or a target label. ( labels: &quot;&quot;, target_platform: &quot;&quot; = None, skip_incompatible: bool.type = None ) -&gt; &quot;&quot; audit Returns the [StarlarkAuditCtx] that holds all the audit functions. () -&gt; &quot;audit_ctx&quot; build Runs a build on the given labels, accepting an optional target_platform which is the target platform configuration used to resolve configurations. ( spec: &quot;&quot;, target_platform: &quot;&quot; = None ) -&gt; &quot;&quot; bxl_actions Returns the action context [BxlActionsCtx] for creating and running actions. &quot;bxl_actions&quot; cli_args A struct of the command line args as declared using the [cli_args] module. These command lines are resolved per the users input on the cli when invoking the bxl script. &quot;&quot; configured_targets Gets the target nodes for the labels, accepting an optional target_platform which is the target platform configuration used to resolve configurations of any unconfigured target nodes. The target_platform is either a string that can be parsed as a target label, or a target label. ( labels: &quot;&quot;, target_platform: &quot;&quot; = None ) -&gt; &quot;&quot; cquery Returns the [StarlarkCQueryCtx] that holds all the cquery functions. This function takes an optional parameter target_platform, which is the target platform configuration used to configured any unconfigured target nodes. ( target_platform: &quot;&quot; = None ) -&gt; &quot;cqueryctx&quot; cquery_legacy Please do not use this at the moment. We need to fix how cell resolution is done within cquery. ( target_platform: &quot;&quot; = None ) -&gt; &quot;cqueryctx&quot; fs Returns the [BxlFilesystem] for performing a basic set of filesystem operations within bxl &quot;fs&quot; output Gets the output stream to the console via stdout. Items written to the output stream are considered to be the results of a bxl script, which will be displayed to stdout by buck2 even when the script is cached. &quot;&quot; root Returns the absolute path to the root of the repository () -&gt; str.type unconfigured_targets Gets the unconfigured target nodes for the labels ( labels: &quot;&quot; ) -&gt; &quot;&quot; uquery Returns the [StarlarkUQueryCtx] that holds all uquery functions. () -&gt; &quot;uqueryctx&quot; uquery_legacy Please do not use this at the moment. We need to fix how cell resolution is done within cquery. () -&gt; &quot;uqueryctx&quot;  "},{"title":"analysis​","type":1,"pageTitle":"bxl_ctx","url":"/docs/generated/bxl/bxl_ctx/#analysis","content":"def analysis(labels: &quot;&quot;, target_platform: &quot;&quot; = None, skip_incompatible: bool.type = None) -&gt; &quot;&quot;  Runs analysis on the given labels, accepting an optional target_platform which is the target platform configuration used to resolve configurations of any unconfigured target nodes, and an optional skip_incompatible boolean that indicates whether to skip analysis of nodes that are incompatible with the target platform. The target_platform is either a string that can be parsed as a target label, or a target label. "},{"title":"Details​","type":1,"pageTitle":"bxl_ctx","url":"/docs/generated/bxl/bxl_ctx/#details","content":"The given labels is a providers expression, which is either: - a single string that is a `target pattern`. - a single target node or label, configured or unconfigured - a single sub target label, configured or unconfigured - a list of the two options above.  This returns either a single [StarlarkAnalysisResult] if the given labels is &quot;singular&quot;, or a dict keyed by sub target labels of [StarlarkAnalysisResult] if the given labelsis list-like  "},{"title":"audit​","type":1,"pageTitle":"bxl_ctx","url":"/docs/generated/bxl/bxl_ctx/#audit","content":"def audit() -&gt; &quot;audit_ctx&quot;  Returns the [StarlarkAuditCtx] that holds all the audit functions.  "},{"title":"build​","type":1,"pageTitle":"bxl_ctx","url":"/docs/generated/bxl/bxl_ctx/#build","content":"def build(spec: &quot;&quot;, target_platform: &quot;&quot; = None) -&gt; &quot;&quot;  Runs a build on the given labels, accepting an optional target_platform which is the target platform configuration used to resolve configurations. "},{"title":"Details​","type":1,"pageTitle":"bxl_ctx","url":"/docs/generated/bxl/bxl_ctx/#details-1","content":"The given labels is a providers expression, which is either: - a single string that is a `target pattern`. - a single target node or label, configured or unconfigured - a single provider label, configured or unconfigured - a list of the two options above.  This returns a dict keyed by sub target labels of [StarlarkBuildResult] if the given labels is list-like  "},{"title":"bxl_actions : \"bxl_actions\"​","type":1,"pageTitle":"bxl_ctx","url":"/docs/generated/bxl/bxl_ctx/#bxl_actions--bxl_actions","content":"Returns the action context [BxlActionsCtx] for creating and running actions.  "},{"title":"cli_args : \"\"​","type":1,"pageTitle":"bxl_ctx","url":"/docs/generated/bxl/bxl_ctx/#cli_args--","content":"A struct of the command line args as declared using the [cli_args] module. These command lines are resolved per the users input on the cli when invoking the bxl script.  "},{"title":"configured_targets​","type":1,"pageTitle":"bxl_ctx","url":"/docs/generated/bxl/bxl_ctx/#configured_targets","content":"def configured_targets(labels: &quot;&quot;, target_platform: &quot;&quot; = None) -&gt; &quot;&quot;  Gets the target nodes for the labels, accepting an optional target_platform which is the target platform configuration used to resolve configurations of any unconfigured target nodes. The target_platform is either a string that can be parsed as a target label, or a target label. "},{"title":"Details​","type":1,"pageTitle":"bxl_ctx","url":"/docs/generated/bxl/bxl_ctx/#details-2","content":"The given labels is a [TargetExpr], which is either: - a single string that is a `target pattern`. - a single target node or label, configured or unconfigured - a list of the two options above.  Note that this function does not accept Label (which is a configured provider label), since this is the label of a subtarget. You can get the underlying configured target label on the Labelusing configured_targets() (ex: my_label.configured_target()). This returns either a single [StarlarkConfiguredTargetNode] if the given labelsis &quot;singular&quot;, a dict keyed by target labels of [StarlarkConfiguredTargetNode] if the given labels is list-like  "},{"title":"cquery​","type":1,"pageTitle":"bxl_ctx","url":"/docs/generated/bxl/bxl_ctx/#cquery","content":"def cquery(target_platform: &quot;&quot; = None) -&gt; &quot;cqueryctx&quot;  Returns the [StarlarkCQueryCtx] that holds all the cquery functions. This function takes an optional parameter target_platform, which is the target platform configuration used to configured any unconfigured target nodes. "},{"title":"Details​","type":1,"pageTitle":"bxl_ctx","url":"/docs/generated/bxl/bxl_ctx/#details-3","content":"The target_platform is a target label, or a string that is a target label.  "},{"title":"cquery_legacy​","type":1,"pageTitle":"bxl_ctx","url":"/docs/generated/bxl/bxl_ctx/#cquery_legacy","content":"def cquery_legacy(target_platform: &quot;&quot; = None) -&gt; &quot;cqueryctx&quot;  Please do not use this at the moment. We need to fix how cell resolution is done within cquery.  "},{"title":"fs : \"fs\"​","type":1,"pageTitle":"bxl_ctx","url":"/docs/generated/bxl/bxl_ctx/#fs--fs","content":"Returns the [BxlFilesystem] for performing a basic set of filesystem operations within bxl  "},{"title":"output : \"\"​","type":1,"pageTitle":"bxl_ctx","url":"/docs/generated/bxl/bxl_ctx/#output--","content":"Gets the output stream to the console via stdout. Items written to the output stream are considered to be the results of a bxl script, which will be displayed to stdout by buck2 even when the script is cached. Prints that are not result of the bxl should be printed via stderr via the stdlib printand pprint.  "},{"title":"root​","type":1,"pageTitle":"bxl_ctx","url":"/docs/generated/bxl/bxl_ctx/#root","content":"def root() -&gt; str.type  Returns the absolute path to the root of the repository  "},{"title":"unconfigured_targets​","type":1,"pageTitle":"bxl_ctx","url":"/docs/generated/bxl/bxl_ctx/#unconfigured_targets","content":"def unconfigured_targets(labels: &quot;&quot;) -&gt; &quot;&quot;  Gets the unconfigured target nodes for the labels "},{"title":"Details​","type":1,"pageTitle":"bxl_ctx","url":"/docs/generated/bxl/bxl_ctx/#details-4","content":"The given labels is either: - a single string that is a `target pattern`. - a single unconfigured target node or label - a list of the two options above.  This returns either a single [StarlarkTargetNode] if the given labelsis &quot;singular&quot;, a dict keyed by target labels of [StarlarkTargetNode] if the given labels is list-like  "},{"title":"uquery​","type":1,"pageTitle":"bxl_ctx","url":"/docs/generated/bxl/bxl_ctx/#uquery","content":"def uquery() -&gt; &quot;uqueryctx&quot;  Returns the [StarlarkUQueryCtx] that holds all uquery functions.  "},{"title":"uquery_legacy​","type":1,"pageTitle":"bxl_ctx","url":"/docs/generated/bxl/bxl_ctx/#uquery_legacy","content":"def uquery_legacy() -&gt; &quot;uqueryctx&quot;  Please do not use this at the moment. We need to fix how cell resolution is done within cquery. "},{"title":"ensured_artifact_group","type":0,"sectionRef":"#","url":"/docs/generated/bxl/ensured_artifact_group/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"ensured_artifact_group","url":"/docs/generated/bxl/ensured_artifact_group/#members","content":"Member\tDescription\tType abs_path Converts each artifact in this artifact group to be printed by its absolute path. Note that this will only print out the absolute path via ctx.output.print(). Starlark's print() will print out the display info for an ensured artifact group. () -&gt; &quot;&quot; rel_path Converts each artifact in this artifact group to be printed by its path relative to the project root. Note that this will only print out the relative path via ctx.output.print(). Starlark's print() will print out the display info for an ensured artifact group. () -&gt; &quot;&quot;  "},{"title":"abs_path​","type":1,"pageTitle":"ensured_artifact_group","url":"/docs/generated/bxl/ensured_artifact_group/#abs_path","content":"def abs_path() -&gt; &quot;&quot;  Converts each artifact in this artifact group to be printed by its absolute path. Note that this will only print out the absolute path via ctx.output.print(). Starlark's print() will print out the display info for an ensured artifact group. "},{"title":"Details​","type":1,"pageTitle":"ensured_artifact_group","url":"/docs/generated/bxl/ensured_artifact_group/#details","content":"Sample usage: def _impl_abs_path(ctx): # some target with RunInfo outputs result = ctx.analysis(&quot;root//bin/kind:target_with_outputs&quot;) ensured = ctx.output.ensure_multiple(result.providers()[RunInfo]) # currently defaults to creating an EnsuredArtifactGroup with a relative path ensured_with_abs_path = ensured.abs_path() # create a new EnsuredArtifactGroup with absolute path to reuse print(ensured_with_abs_path) # should return something like &lt;ensured group ... &gt; ctx.output.print(ensured_with_abs_path) # should return the absolute path of the artifact   "},{"title":"rel_path​","type":1,"pageTitle":"ensured_artifact_group","url":"/docs/generated/bxl/ensured_artifact_group/#rel_path","content":"def rel_path() -&gt; &quot;&quot;  Converts each artifact in this artifact group to be printed by its path relative to the project root. Note that this will only print out the relative path via ctx.output.print(). Starlark's print() will print out the display info for an ensured artifact group. "},{"title":"Details​","type":1,"pageTitle":"ensured_artifact_group","url":"/docs/generated/bxl/ensured_artifact_group/#details-1","content":"Sample usage: def _impl_rel_path(ctx): # some target with RunInfo outputs result = ctx.analysis(&quot;root//bin/kind:target_with_outputs&quot;) ensured = ctx.output.ensure_multiple(result.providers()[RunInfo]) # currently defaults to creating an EnsuredArtifactGroup with a relative path ensured_with_rel_path = ensured.rel_path() # create a new EnsuredArtifact with relative path to reuse print(ensured_with_rel_path) # should return something like &lt;ensured group ... &gt; ctx.output.print(ensured_with_rel_path) # should return the relative path of the artifact  "},{"title":"ensured_artifact","type":0,"sectionRef":"#","url":"/docs/generated/bxl/ensured_artifact/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"ensured_artifact","url":"/docs/generated/bxl/ensured_artifact/#members","content":"Member\tDescription\tType abs_path Converts this artifact to be printed by its absolute path. Note that this will only print out the absolute path via ctx.output.print(). Starlark's print() will print out the display info for an ensured artifact. () -&gt; &quot;&quot; rel_path Converts this artifact to be printed by its path relative to the project root. Note that this will only print out the relative path via ctx.output.print(). Starlark's print() will print out the display info for an ensured artifact. () -&gt; &quot;&quot;  "},{"title":"abs_path​","type":1,"pageTitle":"ensured_artifact","url":"/docs/generated/bxl/ensured_artifact/#abs_path","content":"def abs_path() -&gt; &quot;&quot;  Converts this artifact to be printed by its absolute path. Note that this will only print out the absolute path via ctx.output.print(). Starlark's print() will print out the display info for an ensured artifact. "},{"title":"Details​","type":1,"pageTitle":"ensured_artifact","url":"/docs/generated/bxl/ensured_artifact/#details","content":"Sample usage: def _impl_abs_path(ctx): actions = ctx.bxl_actions.action_factory() output = actions.write(&quot;my_output&quot;, &quot;my_content&quot;) ensured = ctx.output.ensure(output) # currently defaults to creating an EnsuredArtifact with a relative path ensured_with_abs_path = ensured.abs_path() # create a new EnsuredArtifact with absolute path to reuse print(ensured_with_abs_path) # should return something like &lt;ensured artifact ... &gt; ctx.output.print(ensured_with_abs_path) # should return the absolute path of the artifact   "},{"title":"rel_path​","type":1,"pageTitle":"ensured_artifact","url":"/docs/generated/bxl/ensured_artifact/#rel_path","content":"def rel_path() -&gt; &quot;&quot;  Converts this artifact to be printed by its path relative to the project root. Note that this will only print out the relative path via ctx.output.print(). Starlark's print() will print out the display info for an ensured artifact. "},{"title":"Details​","type":1,"pageTitle":"ensured_artifact","url":"/docs/generated/bxl/ensured_artifact/#details-1","content":"Sample usage: def _impl_rel_path(ctx): actions = ctx.bxl_actions.action_factory() output = actions.write(&quot;my_output&quot;, &quot;my_content&quot;) ensured = ctx.output.ensure(output) # currently defaults to creating an EnsuredArtifact with a relative path ensured_with_rel_path = ensured.rel_path() # create a new EnsuredArtifact with relative path to reuse print(ensured_with_rel_path) # should return something like &lt;ensured artifact ... &gt; ctx.output.print(ensured_with_rel_path) # should return the relative path of the artifact  "},{"title":"fs","type":0,"sectionRef":"#","url":"/docs/generated/bxl/fs/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"fs","url":"/docs/generated/bxl/fs/#members","content":"Member\tDescription\tType exists Check if a path exists on disk, taking advantage of Buck's cached filesystem. Takes in a literal, a source artifact (via [StarlarkArtifact]), or a [StarlarkFileNode]. ( expr: [str.type, &quot;artifact&quot;] ) -&gt; bool.type is_dir Returns whether the provided path is a dir. Returns false is the dir does not exist. The input is a either a literal, a source artifact (via [StarlarkArtifact]), or a [StarlarkFileNode]. ( expr: [str.type, &quot;artifact&quot;] ) -&gt; bool.type is_file Returns whether the provided path is a file. Returns false is the file does not exist. The input is a either a literal, a source artifact (via [StarlarkArtifact]), or a [StarlarkFileNode]. ( expr: [str.type, &quot;artifact&quot;] ) -&gt; bool.type list Returns all the contents of the given input that points to a directory. Errors if the given path is a file. Takes an optional boolean dirs_only to only return directories, defaults to false. ( expr: [str.type, &quot;artifact&quot;], *, dirs_only: bool.type = None ) -&gt; &quot;read_dir_set&quot;  "},{"title":"exists​","type":1,"pageTitle":"fs","url":"/docs/generated/bxl/fs/#exists","content":"def exists(expr: [str.type, &quot;artifact&quot;]) -&gt; bool.type  Check if a path exists on disk, taking advantage of Buck's cached filesystem. Takes in a literal, a source artifact (via [StarlarkArtifact]), or a [StarlarkFileNode]. "},{"title":"Details​","type":1,"pageTitle":"fs","url":"/docs/generated/bxl/fs/#details","content":"Sample usage: def _impl_exists(ctx): ctx.output.print(ctx.fs.exists(&quot;bin&quot;))   "},{"title":"is_dir​","type":1,"pageTitle":"fs","url":"/docs/generated/bxl/fs/#is_dir","content":"def is_dir(expr: [str.type, &quot;artifact&quot;]) -&gt; bool.type  Returns whether the provided path is a dir. Returns false is the dir does not exist. The input is a either a literal, a source artifact (via [StarlarkArtifact]), or a [StarlarkFileNode]. "},{"title":"Details​","type":1,"pageTitle":"fs","url":"/docs/generated/bxl/fs/#details-1","content":"Sample usage: def _impl_is_dir(ctx): ctx.output.print(ctx.fs.is_dir(&quot;bin&quot;))   "},{"title":"is_file​","type":1,"pageTitle":"fs","url":"/docs/generated/bxl/fs/#is_file","content":"def is_file(expr: [str.type, &quot;artifact&quot;]) -&gt; bool.type  Returns whether the provided path is a file. Returns false is the file does not exist. The input is a either a literal, a source artifact (via [StarlarkArtifact]), or a [StarlarkFileNode]. "},{"title":"Details​","type":1,"pageTitle":"fs","url":"/docs/generated/bxl/fs/#details-2","content":"Sample usage: def _impl_is_file(ctx): ctx.output.print(ctx.fs.is_dir(&quot;bin&quot;))   "},{"title":"list​","type":1,"pageTitle":"fs","url":"/docs/generated/bxl/fs/#list","content":"def list(expr: [str.type, &quot;artifact&quot;], *, dirs_only: bool.type = None) -&gt; &quot;read_dir_set&quot;  Returns all the contents of the given input that points to a directory. Errors if the given path is a file. Takes an optional boolean dirs_only to only return directories, defaults to false. "},{"title":"Details​","type":1,"pageTitle":"fs","url":"/docs/generated/bxl/fs/#details-3","content":"The input is a either a literal, a source artifact (via [StarlarkArtifact]), or a [StarlarkFileNode]. Sample usage: def _impl_list(ctx): list_results = ctx.fs.list(&quot;bin&quot;) for result in list_results: ctx.output.print(result)  "},{"title":"get_path_without_materialization","type":0,"sectionRef":"#","url":"/docs/generated/bxl/get_path_without_materialization/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"get_path_without_materialization","url":"/docs/generated/bxl/get_path_without_materialization/#members","content":"Member\tDescription\tType get_path_without_materialization The output path of a source or build artifact. Takes an optional boolean to print the absolute or relative path. Note that this method returns an artifact path without asking for the artifact to be materialized, (i.e. it may not actually exist on the disk yet). ( this: &quot;artifact&quot;, ctx: &quot;bxl_ctx&quot;, *, abs: bool.type = None ) -&gt; str.type  "},{"title":"get_path_without_materialization​","type":1,"pageTitle":"get_path_without_materialization","url":"/docs/generated/bxl/get_path_without_materialization/#get_path_without_materialization-1","content":"def get_path_without_materialization(this: &quot;artifact&quot;, ctx: &quot;bxl_ctx&quot;, *, abs: bool.type = None) -&gt; str.type  The output path of a source or build artifact. Takes an optional boolean to print the absolute or relative path. Note that this method returns an artifact path without asking for the artifact to be materialized, (i.e. it may not actually exist on the disk yet). "},{"title":"Details​","type":1,"pageTitle":"get_path_without_materialization","url":"/docs/generated/bxl/get_path_without_materialization/#details","content":"This is a risky function to call because you may accidentally pass this path to further BXL actions that expect the artifact to be materialized. If this happens, the BXL script will error out. If you want the path without materialization for other uses that don’t involve passing them into further actions, then it’s safe. Sample usage: def _impl_get_path_without_materialization(ctx): owner = ctx.cquery().owner(&quot;cell//path/to/file&quot;)[0] artifact = owner.get_source(&quot;cell//path/to/file&quot;, ctx) source_artifact_project_rel_path = get_path_without_materialization(artifact, ctx) ctx.output.print(source_artifact_project_rel_path) # Note this artifact is NOT ensured or materialized  "},{"title":"get_paths_without_materialization","type":0,"sectionRef":"#","url":"/docs/generated/bxl/get_paths_without_materialization/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"get_paths_without_materialization","url":"/docs/generated/bxl/get_paths_without_materialization/#members","content":"Member\tDescription\tType get_paths_without_materialization The output paths of a cmd_args() inputs. The output paths will be returned as a list. Takes an optional boolean to print the absolute or relative path. Note that this method returns an artifact path without asking for the artifact to be materialized, (i.e. it may not actually exist on the disk yet). ( this: &quot;&quot;, ctx: &quot;bxl_ctx&quot;, *, abs: bool.type = None ) -&gt; &quot;&quot;  "},{"title":"get_paths_without_materialization​","type":1,"pageTitle":"get_paths_without_materialization","url":"/docs/generated/bxl/get_paths_without_materialization/#get_paths_without_materialization-1","content":"def get_paths_without_materialization(this: &quot;&quot;, ctx: &quot;bxl_ctx&quot;, *, abs: bool.type = None) -&gt; &quot;&quot;  The output paths of a cmd_args() inputs. The output paths will be returned as a list. Takes an optional boolean to print the absolute or relative path. Note that this method returns an artifact path without asking for the artifact to be materialized, (i.e. it may not actually exist on the disk yet). "},{"title":"Details​","type":1,"pageTitle":"get_paths_without_materialization","url":"/docs/generated/bxl/get_paths_without_materialization/#details","content":"This is a risky function to call because you may accidentally pass this path to further BXL actions that expect the artifact to be materialized. If this happens, the BXL script will error out. If you want the path without materialization for other uses that don’t involve passing them into further actions, then it’s safe. Sample usage: def _impl_get_paths_without_materialization(ctx): node = ctx.configured_targets(&quot;root//bin:the_binary&quot;) providers = ctx.analysis(node).providers() path = get_paths_without_materialization(providers[RunInfo], abs=True) # Note this artifact is NOT ensured or materialized ctx.output.print(path)  "},{"title":"cqueryctx","type":0,"sectionRef":"#","url":"/docs/generated/bxl/cqueryctx/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"cqueryctx","url":"/docs/generated/bxl/cqueryctx/#members","content":"Member\tDescription\tType allpaths The allpaths query for computing all dependency paths. ( from: &quot;&quot;, to: &quot;&quot; ) -&gt; &quot;target_set&quot; attrfilter The attrfilter query for rule attribute filtering. ( attr: str.type, value: str.type, targets: &quot;&quot; ) -&gt; &quot;target_set&quot; attrregexfilter The attrregexfilter query for rule attribute filtering with regex. ( attribute: str.type, value: str.type, targets: &quot;&quot; ) -&gt; &quot;target_set&quot; buildfile Find the build file(s) that defines a target or a target set. ( targets: &quot;&quot; ) -&gt; &quot;file_set&quot; deps The deps query for finding the transitive closure of dependencies. ( universe: &quot;&quot;, depth: [None, int.type] = None, filter: [None, str.type] = None ) -&gt; &quot;target_set&quot; eval Evaluates some general query string. ( query: str.type, query_args: [str.type] = None, target_universe: [None, [str.type]] = None ) -&gt; &quot;&quot; filter The filter query for filtering targets by name. ( regex: str.type, targets: &quot;&quot; ) -&gt; &quot;target_set&quot; inputs The inputs query for finding input files. ( targets: &quot;&quot; ) -&gt; &quot;file_set&quot; kind The kind query for filtering targets by rule type. ( regex: str.type, targets: &quot;&quot; ) -&gt; &quot;target_set&quot; owner The owner query for finding targets that own specified files. ( files: [str.type, &quot;file_set&quot;] ) -&gt; &quot;target_set&quot; rdeps The rdeps query for finding the transitive closure of reverse dependencies. Takes in an optional depth parameter. If no depth is passed in, then all rdeps found will be returned. ( universe: &quot;&quot;, from: &quot;&quot;, depth: [None, int.type] = None ) -&gt; &quot;target_set&quot; somepaths ( from: &quot;&quot;, to: &quot;&quot; ) -&gt; &quot;target_set&quot; testsof The testsof query for lising the tests of the specified targets. ( targets: &quot;&quot; ) -&gt; &quot;target_set&quot;  "},{"title":"allpaths​","type":1,"pageTitle":"cqueryctx","url":"/docs/generated/bxl/cqueryctx/#allpaths","content":"def allpaths(from: &quot;&quot;, to: &quot;&quot;) -&gt; &quot;target_set&quot;  The allpaths query for computing all dependency paths.  "},{"title":"attrfilter​","type":1,"pageTitle":"cqueryctx","url":"/docs/generated/bxl/cqueryctx/#attrfilter","content":"def attrfilter(attr: str.type, value: str.type, targets: &quot;&quot;) -&gt; &quot;target_set&quot;  The attrfilter query for rule attribute filtering.  "},{"title":"attrregexfilter​","type":1,"pageTitle":"cqueryctx","url":"/docs/generated/bxl/cqueryctx/#attrregexfilter","content":"def attrregexfilter(attribute: str.type, value: str.type, targets: &quot;&quot;) -&gt; &quot;target_set&quot;  The attrregexfilter query for rule attribute filtering with regex. "},{"title":"Details​","type":1,"pageTitle":"cqueryctx","url":"/docs/generated/bxl/cqueryctx/#details","content":"Sample usage: def _impl_attrregexfilter(ctx): filtered = ctx.cquery().attrregexfilter(&quot;foo&quot;, &quot;he.lo&quot;, &quot;bin/kind/...&quot;) ctx.output.print(filtered)   "},{"title":"buildfile​","type":1,"pageTitle":"cqueryctx","url":"/docs/generated/bxl/cqueryctx/#buildfile","content":"def buildfile(targets: &quot;&quot;) -&gt; &quot;file_set&quot;  Find the build file(s) that defines a target or a target set. "},{"title":"Details​","type":1,"pageTitle":"cqueryctx","url":"/docs/generated/bxl/cqueryctx/#details-1","content":"Sample usage: def _buildfile_impl(ctx): owner = ctx.cquery().owner([&quot;bin/TARGET&quot;, &quot;bin/kind&quot;]) result = ctx.cquery().buildfile(owner) ctx.output.print(result)   "},{"title":"deps​","type":1,"pageTitle":"cqueryctx","url":"/docs/generated/bxl/cqueryctx/#deps","content":"def deps(universe: &quot;&quot;, depth: [None, int.type] = None, filter: [None, str.type] = None) -&gt; &quot;target_set&quot;  The deps query for finding the transitive closure of dependencies. "},{"title":"Details​","type":1,"pageTitle":"cqueryctx","url":"/docs/generated/bxl/cqueryctx/#details-2","content":"Sample usage: def _impl_deps(ctx): result = ctx.cquery().deps(&quot;root//bin:the_binary&quot;, 1) ctx.output.print(result)   "},{"title":"eval​","type":1,"pageTitle":"cqueryctx","url":"/docs/generated/bxl/cqueryctx/#eval","content":"def eval(query: str.type, query_args: [str.type] = None, target_universe: [None, [str.type]] = None) -&gt; &quot;&quot;  Evaluates some general query string. "},{"title":"Details​","type":1,"pageTitle":"cqueryctx","url":"/docs/generated/bxl/cqueryctx/#details-3","content":"Sample usage: def _impl_eval(ctx): result = ctx.cquery().eval(&quot;inputs(root//bin:the_binary)&quot;) ctx.output.print(result)   "},{"title":"filter​","type":1,"pageTitle":"cqueryctx","url":"/docs/generated/bxl/cqueryctx/#filter","content":"def filter(regex: str.type, targets: &quot;&quot;) -&gt; &quot;target_set&quot;  The filter query for filtering targets by name. "},{"title":"Details​","type":1,"pageTitle":"cqueryctx","url":"/docs/generated/bxl/cqueryctx/#details-4","content":"Sample usage: def _impl_filter(ctx): result = ctx.cquery().filter(&quot;.*the_binary&quot;, &quot;root//...&quot;) ctx.output.print(result)   "},{"title":"inputs​","type":1,"pageTitle":"cqueryctx","url":"/docs/generated/bxl/cqueryctx/#inputs","content":"def inputs(targets: &quot;&quot;) -&gt; &quot;file_set&quot;  The inputs query for finding input files. "},{"title":"Details​","type":1,"pageTitle":"cqueryctx","url":"/docs/generated/bxl/cqueryctx/#details-5","content":"Sample usage: def _impl_inputs(ctx): result = ctx.cquery().inputs(&quot;root//bin:the_binary&quot;) ctx.output.print(result)   "},{"title":"kind​","type":1,"pageTitle":"cqueryctx","url":"/docs/generated/bxl/cqueryctx/#kind","content":"def kind(regex: str.type, targets: &quot;&quot;) -&gt; &quot;target_set&quot;  The kind query for filtering targets by rule type. "},{"title":"Details​","type":1,"pageTitle":"cqueryctx","url":"/docs/generated/bxl/cqueryctx/#details-6","content":"Sample usage: def _impl_kind(ctx): kind = ctx.cquery().kind(&quot;.*1&quot;, &quot;bin/kind/...&quot;) ctx.output.print(kind)   "},{"title":"owner​","type":1,"pageTitle":"cqueryctx","url":"/docs/generated/bxl/cqueryctx/#owner","content":"def owner(files: [str.type, &quot;file_set&quot;]) -&gt; &quot;target_set&quot;  The owner query for finding targets that own specified files. "},{"title":"Details​","type":1,"pageTitle":"cqueryctx","url":"/docs/generated/bxl/cqueryctx/#details-7","content":"Sample usage: def _owner_impl(ctx): owner = ctx.cquery().owner(&quot;bin/TARGETS.fixture&quot;) ctx.output.print(owner)   "},{"title":"rdeps​","type":1,"pageTitle":"cqueryctx","url":"/docs/generated/bxl/cqueryctx/#rdeps","content":"def rdeps(universe: &quot;&quot;, from: &quot;&quot;, depth: [None, int.type] = None) -&gt; &quot;target_set&quot;  The rdeps query for finding the transitive closure of reverse dependencies. Takes in an optional depth parameter. If no depth is passed in, then all rdeps found will be returned. "},{"title":"Details​","type":1,"pageTitle":"cqueryctx","url":"/docs/generated/bxl/cqueryctx/#details-8","content":"Sample usage: def _impl_rdeps(ctx): result = ctx.cquery().rdeps(&quot;root//bin:the_binary&quot;, &quot;//lib:file1&quot;, 100) ctx.output.print(result)   "},{"title":"somepaths​","type":1,"pageTitle":"cqueryctx","url":"/docs/generated/bxl/cqueryctx/#somepaths","content":"def somepaths(from: &quot;&quot;, to: &quot;&quot;) -&gt; &quot;target_set&quot;   "},{"title":"testsof​","type":1,"pageTitle":"cqueryctx","url":"/docs/generated/bxl/cqueryctx/#testsof","content":"def testsof(targets: &quot;&quot;) -&gt; &quot;target_set&quot;  The testsof query for lising the tests of the specified targets. "},{"title":"instant","type":0,"sectionRef":"#","url":"/docs/generated/bxl/instant/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"instant","url":"/docs/generated/bxl/instant/#members","content":"Member\tDescription\tType elapsed_millis Elapsed time in millis as a float () -&gt; &quot;&quot; elapsed_secs Elapsed time in secs as a float () -&gt; &quot;&quot;  "},{"title":"elapsed_millis​","type":1,"pageTitle":"instant","url":"/docs/generated/bxl/instant/#elapsed_millis","content":"def elapsed_millis() -&gt; &quot;&quot;  Elapsed time in millis as a float "},{"title":"Details​","type":1,"pageTitle":"instant","url":"/docs/generated/bxl/instant/#details","content":"Sample usage: def _impl_elapsed_millis(ctx): now = now() time_a = now.elapsed_millis() # do something that takes a long time time_b = now.elapsed_millis() ctx.output.print(time_a) ctx.output.print(time_b)   "},{"title":"elapsed_secs​","type":1,"pageTitle":"instant","url":"/docs/generated/bxl/instant/#elapsed_secs","content":"def elapsed_secs() -&gt; &quot;&quot;  Elapsed time in secs as a float "},{"title":"Details​","type":1,"pageTitle":"instant","url":"/docs/generated/bxl/instant/#details-1","content":"Sample usage: def _impl_elapsed_secs(ctx): now = now() time_a = now.elapsed_secs() # do something that takes a long time time_b = now.elapsed_secs() ctx.output.print(time_a) ctx.output.print(time_b)  "},{"title":"lazy_resolved_attrs","type":0,"sectionRef":"#","url":"/docs/generated/bxl/lazy_resolved_attrs/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"lazy_resolved_attrs","url":"/docs/generated/bxl/lazy_resolved_attrs/#members","content":"Member\tDescription\tType get Gets a single resolved attribute. Returns an optional configured attribute. ( attr: str.type ) -&gt; [None, &quot;&quot;]  "},{"title":"get​","type":1,"pageTitle":"lazy_resolved_attrs","url":"/docs/generated/bxl/lazy_resolved_attrs/#get","content":"def get(attr: str.type) -&gt; [None, &quot;&quot;]  Gets a single resolved attribute. Returns an optional configured attribute. "},{"title":"Details​","type":1,"pageTitle":"lazy_resolved_attrs","url":"/docs/generated/bxl/lazy_resolved_attrs/#details","content":"Gets a single attribute. def _impl_resolved_attrs_lazy(ctx): node = ctx.cquery().owner(&quot;cell//path/to/TARGETS&quot;)[0]attrs = node.resolved_attrs_lazy() # cache once ctx.output.print(attrs.get(&quot;some_attribute&quot;).value()) ctx.output.print(attrs.get(&quot;some_attribute&quot;).label)   "},{"title":"lazy_attrs","type":0,"sectionRef":"#","url":"/docs/generated/bxl/lazy_attrs/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"lazy_attrs","url":"/docs/generated/bxl/lazy_attrs/#members","content":"Member\tDescription\tType get Gets a single attribute. Returns an optional [StarlarkConfiguredValue]. ( attr: str.type ) -&gt; [None, &quot;configured_attr_val&quot;]  "},{"title":"get​","type":1,"pageTitle":"lazy_attrs","url":"/docs/generated/bxl/lazy_attrs/#get","content":"def get(attr: str.type) -&gt; [None, &quot;configured_attr_val&quot;]  Gets a single attribute. Returns an optional [StarlarkConfiguredValue]. "},{"title":"Details​","type":1,"pageTitle":"lazy_attrs","url":"/docs/generated/bxl/lazy_attrs/#details","content":"def _impl_attrs_lazy(ctx): node = ctx.cquery().owner(&quot;cell//path/to/TARGETS&quot;)[0]attrs = node.attrs_lazy() # cache once ctx.output.print(attrs.get(&quot;some_attributes&quot;).value()) ctx.output.print(attrs.get(&quot;some_attribute&quot;).label)   "},{"title":"sub_target","type":0,"sectionRef":"#","url":"/docs/generated/bxl/sub_target/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"sub_target","url":"/docs/generated/bxl/sub_target/#members","content":"Member\tDescription\tType sub_target Converts a TargetLabel into its corresponding ProvidersLabel given the subtarget names, which is a list for each layer of subtarget ( target: &quot;target_label&quot;, subtarget_name: &quot;&quot; = [] ) -&gt; &quot;providers_label&quot;  "},{"title":"sub_target​","type":1,"pageTitle":"sub_target","url":"/docs/generated/bxl/sub_target/#sub_target-1","content":"def sub_target(target: &quot;target_label&quot;, subtarget_name: &quot;&quot; = []) -&gt; &quot;providers_label&quot;  Converts a TargetLabel into its corresponding ProvidersLabel given the subtarget names, which is a list for each layer of subtarget "},{"title":"Details​","type":1,"pageTitle":"sub_target","url":"/docs/generated/bxl/sub_target/#details","content":"Sample usage: def _impl_sub_target(ctx): owners = ctx.cquery().owner(&quot;bin/TARGETS.fixture&quot;) for owner in owners: configured_label = owner.label unconfigured_label = configured_label.raw_target() ctx.output.print(sub_target(unconfigured_label)) ctx.output.print(sub_target(unconfigured_label, &quot;subtarget1&quot;)) ctx.output.print(sub_target(unconfigured_label, [&quot;subtarget1&quot;, &quot;subtarget2&quot;))  "},{"title":"target_set","type":0,"sectionRef":"#","url":"/docs/generated/bxl/target_set/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"target_set","url":"/docs/generated/bxl/target_set/#members","content":"Member\tDescription\tType target_set Creates an empty target set. () -&gt; &quot;target_set&quot;  "},{"title":"target_set​","type":1,"pageTitle":"target_set","url":"/docs/generated/bxl/target_set/#target_set-1","content":"def target_set() -&gt; &quot;target_set&quot;  Creates an empty target set. "},{"title":"Details​","type":1,"pageTitle":"target_set","url":"/docs/generated/bxl/target_set/#details","content":"Sample usage: def _impl_target_set(ctx): targets = target_set() ctx.output.print(type(targets)) ctx.output.print(len(targets))  "},{"title":"target_node","type":0,"sectionRef":"#","url":"/docs/generated/bxl/target_node/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"target_node","url":"/docs/generated/bxl/target_node/#members","content":"Member\tDescription\tType attrs_eager Returns a struct of all the attributes of this target node. The structs fields are the attributes names, and the values are [StarlarkConfiguredValue]. () -&gt; &quot;&quot; attrs_lazy Gets a StarlarkLazyAttrs for getting attrs lazily. Returns a StarlarkLazyAttrs object that you can call get() on that gets an attr one at a time. () -&gt; &quot;lazy_attrs&quot; get_source Gets the SourceArtifact that corresponds to the given path given a context ( path: str.type, ctx: &quot;bxl_ctx&quot; ) -&gt; [None, &quot;artifact&quot;] label Gets the configured target label of this target node. &quot;configured_target_label&quot; resolved_attrs_eager Returns a struct of all the resolved attributes of this target node. The structs fields are the attributes names, and the values are Starlark [Value]. ( ctx: &quot;bxl_ctx&quot; ) -&gt; &quot;&quot; resolved_attrs_lazy Gets a StarlarkLazyResolvedAttrs for getting resolved attrs lazily. Returns a StarlarkLazyResolvedAttrs object that you can call get() on that gets a resolved attr one at a time. ( ctx: &quot;bxl_ctx&quot; ) -&gt; &quot;lazy_resolved_attrs&quot; rule_type Gets the targets' corresponding rule's name. This is the fully qualified rule name including the import path. str.type sources Returns a List of all the sources used by this node. () -&gt; [&quot;artifact&quot;]  "},{"title":"attrs_eager​","type":1,"pageTitle":"target_node","url":"/docs/generated/bxl/target_node/#attrs_eager","content":"def attrs_eager() -&gt; &quot;&quot;  Returns a struct of all the attributes of this target node. The structs fields are the attributes names, and the values are [StarlarkConfiguredValue]. "},{"title":"Details​","type":1,"pageTitle":"target_node","url":"/docs/generated/bxl/target_node/#details","content":"If you need to access many or all attrs on the same node, then this is the preferred way. Otherwise, using attrs_lazy() would be a better option for only accessing only a few attrs, although this really depends on what kind of attrs are on the node. Benchmarking performance will give you the best indication on which method to use. You should store the result of this function call for further usage in the code rather than callingattrs_eager() each time you need to access the attrs. Sample usage: def _impl_attrs_eager(ctx): node = ctx.cquery().owner(&quot;cell//path/to/TARGETS&quot;)[0] attrs = node.attrs_eager() # cache once ctx.output.print(attrs) # do more stuff with attrs   "},{"title":"attrs_lazy​","type":1,"pageTitle":"target_node","url":"/docs/generated/bxl/target_node/#attrs_lazy","content":"def attrs_lazy() -&gt; &quot;lazy_attrs&quot;  Gets a StarlarkLazyAttrs for getting attrs lazily. Returns a StarlarkLazyAttrs object that you can call get() on that gets an attr one at a time. "},{"title":"Details​","type":1,"pageTitle":"target_node","url":"/docs/generated/bxl/target_node/#details-1","content":"If you need to access only few attrs on the same node, then this is the preferred way. Otherwise, using attrs_eager() would be a better option for accessing many or all attrs, although this really depends on what kind of attrs are on the node. Benchmarking performance will give you the best indication on which method to use. You should store the result of this function call for further usage in the code rather than callingattrs_lazy() each time to get the StarlarkLazyAttrs object. Note that if the get() is NoneType, then any methods called on NoneType will result in an error. Sample usage: def _impl_attrs_lazy(ctx): node = ctx.cquery().owner(&quot;cell//path/to/TARGETS&quot;)[0] attrs = node.attrs_lazy() # cache once ctx.output.print(attrs.get(&quot;some_attributes&quot;).value()) ctx.output.print(attrs.get(&quot;some_attribute&quot;).label)   "},{"title":"get_source​","type":1,"pageTitle":"target_node","url":"/docs/generated/bxl/target_node/#get_source","content":"def get_source(path: str.type, ctx: &quot;bxl_ctx&quot;) -&gt; [None, &quot;artifact&quot;]  Gets the SourceArtifact that corresponds to the given path given a context "},{"title":"Details​","type":1,"pageTitle":"target_node","url":"/docs/generated/bxl/target_node/#details-2","content":"Sample usage: def _impl_get_source(ctx): owner = ctx.cquery().owner(&quot;cell/relative/path/to/file&quot;)[0] artifact = owner.sources()[0] ctx.output.print(artifact)   "},{"title":"label : \"configured_target_label\"​","type":1,"pageTitle":"target_node","url":"/docs/generated/bxl/target_node/#label--configured_target_label","content":"Gets the configured target label of this target node. Note that you cannot get a non-configured label from a configured target node because the configured target node is not uniquely identified a non-configured label, only by the configured target label. Sample usage: def _impl_label(ctx): node = ctx.configured_targets(&quot;my_cell//bin:the_binary&quot;) ctx.output.print(node.label)   "},{"title":"resolved_attrs_eager​","type":1,"pageTitle":"target_node","url":"/docs/generated/bxl/target_node/#resolved_attrs_eager","content":"def resolved_attrs_eager(ctx: &quot;bxl_ctx&quot;) -&gt; &quot;&quot;  Returns a struct of all the resolved attributes of this target node. The structs fields are the attributes names, and the values are Starlark [Value]. "},{"title":"Details​","type":1,"pageTitle":"target_node","url":"/docs/generated/bxl/target_node/#details-3","content":"If you need to access many or all resolved attrs on the same node, then this is the preferred way. Otherwise, using resolved_attrs_lazy() would be a better option for accessing only a few resolved attrs, although this really depends on what kind of resolved attrs are on the node. Benchmarking performance will give you the best indication on which method to use. You should store the result of this function call for further usage in the code rather than callingresolved_attrs_eager() each time you need all the resolved attrs. Sample usage: def _impl_resolved_attrs_eager(ctx): node = ctx.cquery().owner(&quot;cell//path/to/TARGETS&quot;)[0] attrs = node.resolved_attrs_eager() # cache once ctx.output.print(attrs) # do more stuff with attrs   "},{"title":"resolved_attrs_lazy​","type":1,"pageTitle":"target_node","url":"/docs/generated/bxl/target_node/#resolved_attrs_lazy","content":"def resolved_attrs_lazy(ctx: &quot;bxl_ctx&quot;) -&gt; &quot;lazy_resolved_attrs&quot;  Gets a StarlarkLazyResolvedAttrs for getting resolved attrs lazily. Returns a StarlarkLazyResolvedAttrs object that you can call get() on that gets a resolved attr one at a time. "},{"title":"Details​","type":1,"pageTitle":"target_node","url":"/docs/generated/bxl/target_node/#details-4","content":"If you need to access only few resolved attrs on the same node, then this is the preferred way. Otherwise, using resolved_attrs_eager() would be a better option for accessing many or all resolved attrs, although this really depends on what kind of resolved attrs are on the node. Benchmarking performance will give you the best indication on which method to use. You should store the result of this function call for further usage in the code rather than callingresolved_attrs_lazy() each time to get the StarlarkResolvedLazyAttrs object. Note that if the get() is NoneType, then any methods called on NoneType will result in an error. Sample usage: def _impl_resolved_attrs_lazy(ctx): node = ctx.cquery().owner(&quot;cell//path/to/TARGETS&quot;)[0] attrs = node.resolved_attrs_lazy() # cache once ctx.output.print(attrs.get(&quot;some_attributes&quot;).value()) ctx.output.print(attrs.get(&quot;some_attribute&quot;).label)   "},{"title":"rule_type : str.type​","type":1,"pageTitle":"target_node","url":"/docs/generated/bxl/target_node/#rule_type--strtype","content":"Gets the targets' corresponding rule's name. This is the fully qualified rule name including the import path. Sample usage: def _impl_rule_type(ctx): node = ctx.configured_targets(&quot;my_cell//bin:the_binary&quot;) ctx.output.print(node.rule_type)   "},{"title":"sources​","type":1,"pageTitle":"target_node","url":"/docs/generated/bxl/target_node/#sources","content":"def sources() -&gt; [&quot;artifact&quot;]  Returns a List of all the sources used by this node. "},{"title":"Details​","type":1,"pageTitle":"target_node","url":"/docs/generated/bxl/target_node/#details-5","content":"Sample usage: def _impl_sources(ctx): node = ctx.configured_targets(&quot;my_cell//bin:the_binary&quot;) ctx.output.print(node.sources())  "},{"title":"unconfigured_target_node","type":0,"sectionRef":"#","url":"/docs/generated/bxl/unconfigured_target_node/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"unconfigured_target_node","url":"/docs/generated/bxl/unconfigured_target_node/#members","content":"Member\tDescription\tType attributes Gets the coerced attributes from the unconfigured target node. Returns an iterable starlark_attributes object. &quot;&quot; label Gets the label from the unconfigured target node. &quot;target_label&quot;  "},{"title":"attributes : \"\"​","type":1,"pageTitle":"unconfigured_target_node","url":"/docs/generated/bxl/unconfigured_target_node/#attributes--","content":"Gets the coerced attributes from the unconfigured target node. Returns an iterable starlark_attributes object. Sample usage: def _impl_attributes(ctx): target_node = ctx.uquery().eval(&quot;owner('path/to/file')&quot;)[0] for attr in target_node.attributes: ctx.output.print(attr)   "},{"title":"label : \"target_label\"​","type":1,"pageTitle":"unconfigured_target_node","url":"/docs/generated/bxl/unconfigured_target_node/#label--target_label","content":"Gets the label from the unconfigured target node. Sample usage: def _impl_label(ctx): target_node = ctx.uquery().eval(&quot;owner('path/to/file')&quot;)[0] ctx.output.print(target_node.label)  "},{"title":"uqueryctx","type":0,"sectionRef":"#","url":"/docs/generated/bxl/uqueryctx/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"uqueryctx","url":"/docs/generated/bxl/uqueryctx/#members","content":"Member\tDescription\tType eval Evaluates some general query string ( query: str.type, query_args: [str.type] = None ) -&gt; &quot;&quot;  "},{"title":"eval​","type":1,"pageTitle":"uqueryctx","url":"/docs/generated/bxl/uqueryctx/#eval","content":"def eval(query: str.type, query_args: [str.type] = None) -&gt; &quot;&quot;  Evaluates some general query string "},{"title":"Details​","type":1,"pageTitle":"uqueryctx","url":"/docs/generated/bxl/uqueryctx/#details","content":"Sample usage: def _impl_eval(ctx): result = ctx.uquery().eval(&quot;inputs(cell//path/to/file:target)&quot;) ctx.output.print(result)  "},{"title":"Artifact","type":0,"sectionRef":"#","url":"/docs/generated/native/Artifact/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"Artifact","url":"/docs/generated/native/Artifact/#members","content":"Member\tDescription\tType as_output Returns a StarlarkOutputArtifact instance, or fails if the artifact is either an Artifact, or is a bound Artifact (You cannot bind twice) () -&gt; &quot;output_artifact&quot; basename The base name of this artifact. e.g. for an artifact at foo/bar, this is bar str.type extension The file extension of this artifact. e.g. for an artifact at foo/bar.sh, this is .sh. If no extension is present, &quot;&quot; is returned. str.type is_source Whether the artifact represents a source file bool.type owner The Label of the rule that originally created this artifact. May also be None in the case of source files, or if the artifact has not be used in an action, or if the action was not created by a rule. [None, &quot;label&quot;] project ( path: str.type, *, hide_prefix: bool.type = None ) -&gt; &quot;artifact&quot; short_path The interesting part of the path, relative to somewhere in the output directory. For an artifact declared as foo/bar, this is foo/bar. str.type without_associated_artifacts () -&gt; &quot;artifact&quot;  "},{"title":"as_output​","type":1,"pageTitle":"Artifact","url":"/docs/generated/native/Artifact/#as_output","content":"def as_output() -&gt; &quot;output_artifact&quot;  Returns a StarlarkOutputArtifact instance, or fails if the artifact is either an Artifact, or is a bound Artifact (You cannot bind twice)  "},{"title":"basename : str.type​","type":1,"pageTitle":"Artifact","url":"/docs/generated/native/Artifact/#basename--strtype","content":"The base name of this artifact. e.g. for an artifact at foo/bar, this is bar  "},{"title":"extension : str.type​","type":1,"pageTitle":"Artifact","url":"/docs/generated/native/Artifact/#extension--strtype","content":"The file extension of this artifact. e.g. for an artifact at foo/bar.sh, this is .sh. If no extension is present, &quot;&quot; is returned.  "},{"title":"is_source : bool.type​","type":1,"pageTitle":"Artifact","url":"/docs/generated/native/Artifact/#is_source--booltype","content":"Whether the artifact represents a source file  "},{"title":"owner : [None, \"label\"]​","type":1,"pageTitle":"Artifact","url":"/docs/generated/native/Artifact/#owner--none-label","content":"The Label of the rule that originally created this artifact. May also be None in the case of source files, or if the artifact has not be used in an action, or if the action was not created by a rule.  "},{"title":"project​","type":1,"pageTitle":"Artifact","url":"/docs/generated/native/Artifact/#project","content":"def project(path: str.type, *, hide_prefix: bool.type = None) -&gt; &quot;artifact&quot;   "},{"title":"short_path : str.type​","type":1,"pageTitle":"Artifact","url":"/docs/generated/native/Artifact/#short_path--strtype","content":"The interesting part of the path, relative to somewhere in the output directory. For an artifact declared as foo/bar, this is foo/bar.  "},{"title":"without_associated_artifacts​","type":1,"pageTitle":"Artifact","url":"/docs/generated/native/Artifact/#without_associated_artifacts","content":"def without_associated_artifacts() -&gt; &quot;artifact&quot;  "},{"title":"build","type":0,"sectionRef":"#","url":"/docs/generated/native/build/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#members","content":"Member\tDescription\tType CommandExecutorConfig ( local_enabled: bool.type, remote_enabled: bool.type, *, remote_cache_enabled: [None, bool.type] = None, remote_execution_properties: &quot;&quot; = None, remote_execution_action_key: &quot;&quot; = None, remote_execution_max_input_files_mebibytes: [None, int.type] = None, remote_execution_queue_time_threshold_s: [None, int.type] = None, remote_execution_use_case: &quot;&quot; = None, use_limited_hybrid: bool.type = None, allow_limited_hybrid_fallbacks: bool.type = None, allow_hybrid_fallbacks_on_failure: bool.type = None, use_windows_path_separators: bool.type = None, allow_cache_uploads: bool.type = None, max_cache_upload_mebibytes: [None, int.type] = None, experimental_low_pass_filter: bool.type = None, remote_output_paths: [None, str.type] = None ) -&gt; &quot;&quot; cmd_args ( *args: UNKNOWN, delimiter: [None, str.type] = None, format: [None, str.type] = None, prepend: [None, str.type] = None, quote: [None, str.type] = None ) -&gt; &quot;cmd_args&quot; dedupe Remove duplicates in a list. Uses identity of value (pointer), rather than by equality. ( val: &quot;&quot; ) -&gt; &quot;&quot; get_base_path () -&gt; str.type get_cell_name () -&gt; str.type glob ( include: [str.type], *, exclude: [None, [str.type]] = None ) -&gt; &quot;&quot; host_info () -&gt; &quot;&quot; implicit_package_symbol ( name: str.type, default: [None, &quot;&quot;] = None ) -&gt; &quot;&quot; load_symbols ( symbols: {&quot;&quot;: &quot;&quot;} ) -&gt; None oncall Called in a BUCK file to declare the oncall contact details for all the targets defined. Must be called at most once, before any targets have been declared. Errors if called from a .bzl file. ( name: str.type ) -&gt; None package ( *, inherit: bool.type = None, visibility: [str.type] = None, within_view: [str.type] = None ) -&gt; None package_name () -&gt; str.type provider ( doc: str.type = None, fields: [[str.type], {str.type: str.type}] ) -&gt; &quot;provider_callable&quot; read_config ( section: str.type, key: str.type, default: [None, &quot;&quot;] = None ) -&gt; &quot;&quot; read_package_value Read value specified in the PACKAGE file. ( key: str.type ) -&gt; &quot;&quot; read_root_config ( section: str.type, key: str.type, default: [None, str.type] = None ) -&gt; [None, str.type] regex_match ( regex: str.type, str: str.type ) -&gt; bool.type repository_name () -&gt; str.type rule ( *, impl: &quot;&quot;, attrs: {str.type: &quot;attribute&quot;}, cfg: [None, &quot;&quot;] = None, doc: str.type = None, is_configuration_rule: bool.type = None, is_toolchain_rule: bool.type = None ) -&gt; &quot;&quot; rule_exists This should be called &quot;target exists&quot;, not &quot;rule exists&quot; (if this should exist at all). ( name: str.type ) -&gt; bool.type select ( d: &quot;&quot; ) -&gt; &quot;selector&quot; select_equal_internal Tests that two selects are equal to each other. For testing use only. ( left: &quot;&quot;, right: &quot;&quot; ) -&gt; bool.type select_map Applies a mapping function to a selector. See [StarlarkSelector::select_map]. ( d: &quot;&quot;, func: &quot;&quot; ) -&gt; &quot;&quot; select_test Applies a test function to a selector. See [StarlarkSelector::select_test]. ( d: &quot;&quot;, func: &quot;&quot; ) -&gt; bool.type sha256 Computes a sha256 digest for a string. Returns the hex representation of the digest. ( val: str.type ) -&gt; str.type transition ( *, impl: &quot;&quot;, refs: {str.type: str.type}, attrs: [None, [str.type]] = None, split: bool.type = None ) -&gt; &quot;transition&quot; transitive_set ( args_projections: [None, {str.type: &quot;&quot;}] = None, json_projections: [None, {str.type: &quot;&quot;}] = None, reductions: [None, {str.type: &quot;&quot;}] = None ) -&gt; &quot;transitive_set_definition&quot; warning Produce a warning. ( x: str.type ) -&gt; None write_package_value Set the value to be accessible in the nested PACKAGE files. ( key: str.type, value: &quot;&quot;, *, overwrite: bool.type = None ) -&gt; None  "},{"title":"CommandExecutorConfig​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#commandexecutorconfig","content":"def CommandExecutorConfig( local_enabled: bool.type, remote_enabled: bool.type, *, remote_cache_enabled: [None, bool.type] = None, remote_execution_properties: &quot;&quot; = None, remote_execution_action_key: &quot;&quot; = None, remote_execution_max_input_files_mebibytes: [None, int.type] = None, remote_execution_queue_time_threshold_s: [None, int.type] = None, remote_execution_use_case: &quot;&quot; = None, use_limited_hybrid: bool.type = None, allow_limited_hybrid_fallbacks: bool.type = None, allow_hybrid_fallbacks_on_failure: bool.type = None, use_windows_path_separators: bool.type = None, allow_cache_uploads: bool.type = None, max_cache_upload_mebibytes: [None, int.type] = None, experimental_low_pass_filter: bool.type = None, remote_output_paths: [None, str.type] = None ) -&gt; &quot;&quot;   "},{"title":"cmd_args​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#cmd_args","content":"def cmd_args(*args: UNKNOWN, delimiter: [None, str.type] = None, format: [None, str.type] = None, prepend: [None, str.type] = None, quote: [None, str.type] = None) -&gt; &quot;cmd_args&quot;   "},{"title":"dedupe​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#dedupe","content":"def dedupe(val: &quot;&quot;) -&gt; &quot;&quot;  Remove duplicates in a list. Uses identity of value (pointer), rather than by equality.  "},{"title":"get_base_path​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#get_base_path","content":"def get_base_path() -&gt; str.type   "},{"title":"get_cell_name​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#get_cell_name","content":"def get_cell_name() -&gt; str.type   "},{"title":"glob​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#glob","content":"def glob(include: [str.type], *, exclude: [None, [str.type]] = None) -&gt; &quot;&quot;   "},{"title":"host_info​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#host_info","content":"def host_info() -&gt; &quot;&quot;   "},{"title":"implicit_package_symbol​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#implicit_package_symbol","content":"def implicit_package_symbol(name: str.type, default: [None, &quot;&quot;] = None) -&gt; &quot;&quot;   "},{"title":"load_symbols​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#load_symbols","content":"def load_symbols(symbols: {&quot;&quot;: &quot;&quot;}) -&gt; None   "},{"title":"oncall​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#oncall","content":"def oncall(name: str.type) -&gt; None  Called in a BUCK file to declare the oncall contact details for all the targets defined. Must be called at most once, before any targets have been declared. Errors if called from a .bzl file.  "},{"title":"package​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#package","content":"def package(*, inherit: bool.type = None, visibility: [str.type] = None, within_view: [str.type] = None) -&gt; None   "},{"title":"package_name​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#package_name","content":"def package_name() -&gt; str.type   "},{"title":"provider​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#provider","content":"def provider(doc: str.type = None, fields: [[str.type], {str.type: str.type}]) -&gt; &quot;provider_callable&quot;   "},{"title":"read_config​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#read_config","content":"def read_config(section: str.type, key: str.type, default: [None, &quot;&quot;] = None) -&gt; &quot;&quot;   "},{"title":"read_package_value​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#read_package_value","content":"def read_package_value(key: str.type) -&gt; &quot;&quot;  Read value specified in the PACKAGE file. "},{"title":"Details​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#details","content":"Returns None if value is not set.  "},{"title":"read_root_config​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#read_root_config","content":"def read_root_config(section: str.type, key: str.type, default: [None, str.type] = None) -&gt; [None, str.type]   "},{"title":"regex_match​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#regex_match","content":"def regex_match(regex: str.type, str: str.type) -&gt; bool.type   "},{"title":"repository_name​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#repository_name","content":"def repository_name() -&gt; str.type   "},{"title":"rule​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#rule","content":"def rule( *, impl: &quot;&quot;, attrs: {str.type: &quot;attribute&quot;}, cfg: [None, &quot;&quot;] = None, doc: str.type = None, is_configuration_rule: bool.type = None, is_toolchain_rule: bool.type = None ) -&gt; &quot;&quot;   "},{"title":"rule_exists​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#rule_exists","content":"def rule_exists(name: str.type) -&gt; bool.type  This should be called &quot;target exists&quot;, not &quot;rule exists&quot; (if this should exist at all).  "},{"title":"select​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#select","content":"def select(d: &quot;&quot;) -&gt; &quot;selector&quot;   "},{"title":"select_equal_internal​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#select_equal_internal","content":"def select_equal_internal(left: &quot;&quot;, right: &quot;&quot;) -&gt; bool.type  Tests that two selects are equal to each other. For testing use only.  "},{"title":"select_map​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#select_map","content":"def select_map(d: &quot;&quot;, func: &quot;&quot;) -&gt; &quot;&quot;  Applies a mapping function to a selector. See [StarlarkSelector::select_map].  "},{"title":"select_test​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#select_test","content":"def select_test(d: &quot;&quot;, func: &quot;&quot;) -&gt; bool.type  Applies a test function to a selector. See [StarlarkSelector::select_test].  "},{"title":"sha256​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#sha256","content":"def sha256(val: str.type) -&gt; str.type  Computes a sha256 digest for a string. Returns the hex representation of the digest.  "},{"title":"transition​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#transition","content":"def transition(*, impl: &quot;&quot;, refs: {str.type: str.type}, attrs: [None, [str.type]] = None, split: bool.type = None) -&gt; &quot;transition&quot;   "},{"title":"transitive_set​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#transitive_set","content":"def transitive_set(args_projections: [None, {str.type: &quot;&quot;}] = None, json_projections: [None, {str.type: &quot;&quot;}] = None, reductions: [None, {str.type: &quot;&quot;}] = None) -&gt; &quot;transitive_set_definition&quot;   "},{"title":"warning​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#warning","content":"def warning(x: str.type) -&gt; None  Produce a warning.  "},{"title":"write_package_value​","type":1,"pageTitle":"build","url":"/docs/generated/native/build/#write_package_value","content":"def write_package_value(key: str.type, value: &quot;&quot;, *, overwrite: bool.type = None) -&gt; None  Set the value to be accessible in the nested PACKAGE files. "},{"title":"cmd_args","type":0,"sectionRef":"#","url":"/docs/generated/native/cmd_args/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"cmd_args","url":"/docs/generated/native/cmd_args/#members","content":"Member\tDescription\tType absolute_prefix ( prefix: str.type ) -&gt; &quot;&quot; absolute_suffix ( suffix: str.type ) -&gt; &quot;&quot; add ( *args: UNKNOWN ) -&gt; &quot;&quot; copy () -&gt; &quot;cmd_args&quot; hidden ( *args: UNKNOWN ) -&gt; &quot;&quot; ignore_artifacts () -&gt; &quot;&quot; inputs Collect all the inputs (including hidden) referenced by this command line. &quot;command_line_inputs&quot; outputs Collect all the outputs (including hidden) referenced by this command line. [&quot;output_artifact&quot;] parent For all the artifacts listed in this cmd_args, use their parent directory. ( count: int.type = None ) -&gt; &quot;&quot; relative_to ( directory: &quot;&quot;, parent: int.type = None ) -&gt; &quot;&quot; replace_regex ( pattern: str.type, replacement: str.type ) -&gt; &quot;&quot;  "},{"title":"absolute_prefix​","type":1,"pageTitle":"cmd_args","url":"/docs/generated/native/cmd_args/#absolute_prefix","content":"def absolute_prefix(prefix: str.type) -&gt; &quot;&quot;   "},{"title":"absolute_suffix​","type":1,"pageTitle":"cmd_args","url":"/docs/generated/native/cmd_args/#absolute_suffix","content":"def absolute_suffix(suffix: str.type) -&gt; &quot;&quot;   "},{"title":"add​","type":1,"pageTitle":"cmd_args","url":"/docs/generated/native/cmd_args/#add","content":"def add(*args: UNKNOWN) -&gt; &quot;&quot;   "},{"title":"copy​","type":1,"pageTitle":"cmd_args","url":"/docs/generated/native/cmd_args/#copy","content":"def copy() -&gt; &quot;cmd_args&quot;   "},{"title":"hidden​","type":1,"pageTitle":"cmd_args","url":"/docs/generated/native/cmd_args/#hidden","content":"def hidden(*args: UNKNOWN) -&gt; &quot;&quot;   "},{"title":"ignore_artifacts​","type":1,"pageTitle":"cmd_args","url":"/docs/generated/native/cmd_args/#ignore_artifacts","content":"def ignore_artifacts() -&gt; &quot;&quot;   "},{"title":"inputs : \"command_line_inputs\"​","type":1,"pageTitle":"cmd_args","url":"/docs/generated/native/cmd_args/#inputs--command_line_inputs","content":"Collect all the inputs (including hidden) referenced by this command line.  "},{"title":"outputs : [\"output_artifact\"]​","type":1,"pageTitle":"cmd_args","url":"/docs/generated/native/cmd_args/#outputs--output_artifact","content":"Collect all the outputs (including hidden) referenced by this command line.  "},{"title":"parent​","type":1,"pageTitle":"cmd_args","url":"/docs/generated/native/cmd_args/#parent","content":"def parent(count: int.type = None) -&gt; &quot;&quot;  For all the artifacts listed in this cmd_args, use their parent directory. "},{"title":"Details​","type":1,"pageTitle":"cmd_args","url":"/docs/generated/native/cmd_args/#details","content":"Typically used when the file name is passed one way, and the directory another, e.g. cmd_args(artifact, format=&quot;-L{}&quot;).parent().  "},{"title":"relative_to​","type":1,"pageTitle":"cmd_args","url":"/docs/generated/native/cmd_args/#relative_to","content":"def relative_to(directory: &quot;&quot;, parent: int.type = None) -&gt; &quot;&quot;   "},{"title":"replace_regex​","type":1,"pageTitle":"cmd_args","url":"/docs/generated/native/cmd_args/#replace_regex","content":"def replace_regex(pattern: str.type, replacement: str.type) -&gt; &quot;&quot;  "},{"title":"builtins","type":0,"sectionRef":"#","url":"/docs/generated/native/builtins/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#members","content":"Member\tDescription\tType abs ( x: int.type ) -&gt; int.type all all: returns true if all values in the iterable object have a truth value of true. ( x: iter(&quot;&quot;) ) -&gt; bool.type any any: returns true if any value in the iterable object have a truth value of true. ( x: iter(&quot;&quot;) ) -&gt; bool.type bool bool: returns the truth value of any starlark value. ( x: [None, &quot;&quot;] = None ) -&gt; bool.type breakpoint () -&gt; None chr chr: returns a string encoding a codepoint. ( i: [int.type, bool.type] ) -&gt; str.type debug Print the value with full debug formatting. The result may not be stable over time, mostly intended for debugging purposes. ( val: &quot;&quot; ) -&gt; str.type dict dict: creates a dictionary. ( *args: UNKNOWN, **kwargs: UNKNOWN ) -&gt; {&quot;&quot;: &quot;&quot;} dir dir: list attributes of a value. ( x: &quot;&quot; ) -&gt; [str.type] enum ( *args: UNKNOWN ) -&gt; &quot;&quot; enumerate enumerate: return a list of (index, element) from an iterable. ( it: iter(&quot;&quot;), start: int.type = None ) -&gt; [(int.type, &quot;&quot;)] experimental_regex Creates a regex which can be used for matching ( regex: str.type ) -&gt; &quot;regex&quot; fail fail: fail the execution ( *args: UNKNOWN ) -&gt; None field Creates a field record. ( typ: &quot;&quot;, default: [None, &quot;&quot;] = None ) -&gt; &quot;field&quot; filter ( func: &quot;&quot;, seq: iter(&quot;&quot;) ) -&gt; [&quot;&quot;] float float: interprets its argument as a floating-point number. ( a: [str.type, int.type, float.type, bool.type] = None ) -&gt; float.type getattr getattr: returns the value of an attribute ( a: &quot;&quot;, attr: str.type, default: [None, &quot;&quot;] = None ) -&gt; &quot;&quot; hasattr hasattr: test if an object has an attribute ( a: &quot;&quot;, attr: str.type ) -&gt; bool.type hash hash: returns the hash number of a value. ( a: str.type ) -&gt; int.type int int: convert a value to integer. ( a: [None, &quot;&quot;] = None, base: [int.type, bool.type] = None ) -&gt; int.type len len: get the length of a sequence ( a: &quot;&quot; ) -&gt; int.type list list: construct a list. ( a: iter(&quot;&quot;) = None ) -&gt; [&quot;&quot;] map ( func: &quot;&quot;, seq: iter(&quot;&quot;) ) -&gt; [&quot;&quot;] max max: returns the maximum of a sequence. ( *args: UNKNOWN, key: [None, &quot;&quot;] = None ) -&gt; &quot;&quot; min min: returns the minimum of a sequence. ( *args: UNKNOWN, key: [None, &quot;&quot;] = None ) -&gt; &quot;&quot; ord ord: returns the codepoint of a character ( a: str.type ) -&gt; int.type partial ( func: &quot;&quot;, *args: UNKNOWN, **kwargs: {&quot;&quot;: &quot;&quot;} ) -&gt; &quot;function&quot; pprint ( *args: UNKNOWN ) -&gt; None print ( *args: UNKNOWN ) -&gt; None range range: return a range of integers ( a1: int.type, a2: [None, int.type] = None, step: int.type = None ) -&gt; &quot;range&quot; record ( **kwargs: {str.type: &quot;&quot;} ) -&gt; &quot;function&quot; repr repr: formats its argument as a string. ( a: &quot;&quot; ) -&gt; str.type reversed reversed: reverse a sequence ( a: iter(&quot;&quot;) ) -&gt; [&quot;&quot;] sorted sorted: sort a sequence ( x: iter(&quot;&quot;), *, key: [None, &quot;&quot;] = None, reverse: bool.type = None ) -&gt; [&quot;&quot;] str str: formats its argument as a string. ( a: &quot;&quot; ) -&gt; str.type struct ( *args: UNKNOWN, **kwargs: UNKNOWN ) -&gt; &quot;struct&quot; tuple tuple: returns a tuple containing the elements of the iterable x. ( a: iter(&quot;&quot;) = None ) -&gt; &quot;&quot; type type: returns a string describing the type of its operand. ( a: &quot;&quot; ) -&gt; str.type zip zip: zip several iterables together ( *args: UNKNOWN ) -&gt; [&quot;&quot;]  "},{"title":"abs​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#abs","content":"def abs(x: int.type) -&gt; int.type   "},{"title":"all​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#all","content":"def all(x: iter(&quot;&quot;)) -&gt; bool.type  all: returns true if all values in the iterable object have a truth value of true. "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details","content":"Examples: all([1, True]) == True all([1, 1]) == True all([0, 1, True]) == False all([True, 1, True]) == True all([0, 0]) == False all([0, False]) == False all([True, 0]) == False all([1, False]) == False   "},{"title":"any​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#any","content":"def any(x: iter(&quot;&quot;)) -&gt; bool.type  any: returns true if any value in the iterable object have a truth value of true. "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-1","content":"Examples: any([0, True]) == True any([0, 1]) == True any([0, 1, True]) == True any([0, 0]) == False any([0, False]) == False   "},{"title":"bool​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#bool","content":"def bool(x: [None, &quot;&quot;] = None) -&gt; bool.type  bool: returns the truth value of any starlark value. "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-2","content":"Examples: bool() == False bool([]) == False bool([1]) == True bool(True) == True bool(False) == False bool(None) == False bool(bool) == True bool(1) == True bool(0) == False bool({}) == False bool({1:2}) == True bool(()) == False bool((1,)) == True bool(&quot;&quot;) == False bool(&quot;1&quot;) == True   "},{"title":"breakpoint​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#breakpoint","content":"def breakpoint() -&gt; None   "},{"title":"chr​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#chr","content":"def chr(i: [int.type, bool.type]) -&gt; str.type  chr: returns a string encoding a codepoint. "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-3","content":"chr(i) returns a returns a string that encodes the single Unicode code point whose value is specified by the integer i. chr fails unless 0 ≤ i ≤ 0x10FFFF. Examples: chr(65) == 'A' chr(1049) == 'Й' chr(0x1F63F) == '😿'   "},{"title":"debug​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#debug","content":"def debug(val: &quot;&quot;) -&gt; str.type  Print the value with full debug formatting. The result may not be stable over time, mostly intended for debugging purposes.  "},{"title":"dict​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#dict","content":"def dict(*args: UNKNOWN, **kwargs: UNKNOWN) -&gt; {&quot;&quot;: &quot;&quot;}  dict: creates a dictionary. "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-4","content":"dict creates a dictionary. It accepts up to one positional argument, which is interpreted as an iterable of two-element sequences (pairs), each specifying a key/value pair in the resulting dictionary. dict also accepts any number of keyword arguments, each of which specifies a key/value pair in the resulting dictionary; each keyword is treated as a string. Examples: dict() == {} dict(**{'a': 1}) == {'a': 1} dict({'a': 1}) == {'a': 1} dict([(1, 2), (3, 4)]) == {1: 2, 3: 4} dict([(1, 2), ['a', 'b']]) == {1: 2, 'a': 'b'} dict(one=1, two=2) == {'one': 1, 'two': 2} dict([(1, 2)], x=3) == {1: 2, 'x': 3} dict([('x', 2)], x=3) == {'x': 3} x = {'a': 1} y = dict([('x', 2)], **x) x == {'a': 1} and y == {'x': 2, 'a': 1}   "},{"title":"dir​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#dir","content":"def dir(x: &quot;&quot;) -&gt; [str.type]  dir: list attributes of a value. "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-5","content":"dir(x) returns a list of the names of the attributes (fields and methods) of its operand. The attributes of a value x are the namesf such that x.f is a valid expression. Examples: &quot;capitalize&quot; in dir(&quot;abc&quot;)   "},{"title":"enum​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#enum","content":"def enum(*args: UNKNOWN) -&gt; &quot;&quot;   "},{"title":"enumerate​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#enumerate","content":"def enumerate(it: iter(&quot;&quot;), start: int.type = None) -&gt; [(int.type, &quot;&quot;)]  enumerate: return a list of (index, element) from an iterable. "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-6","content":"enumerate(x) returns a list of (index, value) pairs, each containing successive values of the iterable sequence and the index of the value within the sequence. The optional second parameter, start, specifies an integer value to add to each index. Examples: enumerate([&quot;zero&quot;, &quot;one&quot;, &quot;two&quot;]) == [(0, &quot;zero&quot;), (1, &quot;one&quot;), (2, &quot;two&quot;)] enumerate([&quot;one&quot;, &quot;two&quot;], 1) == [(1, &quot;one&quot;), (2, &quot;two&quot;)]   "},{"title":"experimental_regex​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#experimental_regex","content":"def experimental_regex(regex: str.type) -&gt; &quot;regex&quot;  Creates a regex which can be used for matching  "},{"title":"fail​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#fail","content":"def fail(*args: UNKNOWN) -&gt; None  fail: fail the execution "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-7","content":"Examples: fail(&quot;this is an error&quot;) # fail: this is an error fail(&quot;oops&quot;, 1, False) # fail: oops 1 False   "},{"title":"field​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#field","content":"def field(typ: &quot;&quot;, default: [None, &quot;&quot;] = None) -&gt; &quot;field&quot;  Creates a field record. "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-8","content":"Examples: rec_type = record(host=field(str.type), port=field(int.type), mask=field(int.type, default=255)) rec = rec_type(host=&quot;localhost&quot;, port=80) rec.port == 80 rec.mask == 255   "},{"title":"filter​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#filter","content":"def filter(func: &quot;&quot;, seq: iter(&quot;&quot;)) -&gt; [&quot;&quot;]   "},{"title":"float​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#float","content":"def float(a: [str.type, int.type, float.type, bool.type] = None) -&gt; float.type  float: interprets its argument as a floating-point number. "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-9","content":"If x is a float, the result is x. if x is an int, the result is the nearest floating point value to x. If x is a string, the string is interpreted as a floating-point literal. With no arguments, float() returns 0.0. float() == 0.0 float(1) == 1.0 float('1') == 1.0 float('1.0') == 1.0 float('.25') == 0.25 float('1e2') == 100.0 float(False) == 0.0 float(True) == 1.0 float(&quot;hello&quot;) # error: not a valid number float([]) # error: argument must be a string, a number, or a boolean   "},{"title":"getattr​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#getattr","content":"def getattr(a: &quot;&quot;, attr: str.type, default: [None, &quot;&quot;] = None) -&gt; &quot;&quot;  getattr: returns the value of an attribute "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-10","content":"getattr(x, name) returns the value of the attribute (field or method) of x named name. It is a dynamic error if x has no such attribute. getattr(x, &quot;f&quot;) is equivalent to x.f. getattr(&quot;banana&quot;, &quot;split&quot;)(&quot;a&quot;) == [&quot;b&quot;, &quot;n&quot;, &quot;n&quot;, &quot;&quot;] # equivalent to &quot;banana&quot;.split(&quot;a&quot;)   "},{"title":"hasattr​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#hasattr","content":"def hasattr(a: &quot;&quot;, attr: str.type) -&gt; bool.type  hasattr: test if an object has an attribute "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-11","content":"hasattr(x, name) reports whether x has an attribute (field or method) named name.  "},{"title":"hash​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#hash","content":"def hash(a: str.type) -&gt; int.type  hash: returns the hash number of a value. "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-12","content":"hash(x)`` returns an integer hash value for x such that x == yimplieshash(x) == hash(y)``. hash fails if x, or any value upon which its hash depends, is unhashable. hash(&quot;hello&quot;) != hash(&quot;world&quot;)   "},{"title":"int​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#int","content":"def int(a: [None, &quot;&quot;] = None, base: [int.type, bool.type] = None) -&gt; int.type  int: convert a value to integer. "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-13","content":"int(x[, base]) interprets its argument as an integer. If x is an int, the result is x. If x is a float, the result is the integer value nearest to x, truncating towards zero; it is an error if x is not finite (NaN,+Inf, -Inf). If x is a bool, the result is 0 for False or 1 for True. If x is a string, it is interpreted like a string literal; an optional base prefix (0, 0b, 0B, 0x, 0X) determines which base to use. The string may specify an arbitrarily large integer, whereas true integer literals are restricted to 64 bits. If a non-zero base argument is provided, the string is interpreted in that base and no base prefix is permitted; the base argument may specified by name. int() with no arguments returns 0. int() == 0 int(1) == 1 int(False) == 0 int(True) == 1 int('1') == 1 int('16') == 16 int('16', 10) == 16 int('16', 8) == 14 int('16', 16) == 22 int(0.0) == 0 int(3.14) == 3 int(-12345.6789) == -12345 int(2e9) == 2000000000 int(&quot;hello&quot;) # error: not a valid number int(1e100) # error: overflow int(float(&quot;nan&quot;)) # error: cannot convert NaN to int int(float(&quot;inf&quot;)) # error: cannot convert infinity to int   "},{"title":"len​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#len","content":"def len(a: &quot;&quot;) -&gt; int.type  len: get the length of a sequence "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-14","content":"len(x) returns the number of elements in its argument. It is a dynamic error if its argument is not a sequence. len(()) == 0 len({}) == 0 len([]) == 0 len([1]) == 1 len([1,2]) == 2 len({'16': 10}) == 1 len(True) # error: not supported   "},{"title":"list​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#list","content":"def list(a: iter(&quot;&quot;) = None) -&gt; [&quot;&quot;]  list: construct a list. "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-15","content":"list(x) returns a new list containing the elements of the iterable sequence x. With no argument, list() returns a new empty list. list() == [] list((1,2,3)) == [1, 2, 3] list(&quot;strings are not iterable&quot;) # error: not supported   "},{"title":"map​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#map","content":"def map(func: &quot;&quot;, seq: iter(&quot;&quot;)) -&gt; [&quot;&quot;]   "},{"title":"max​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#max","content":"def max(*args: UNKNOWN, key: [None, &quot;&quot;] = None) -&gt; &quot;&quot;  max: returns the maximum of a sequence. "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-16","content":"max(x) returns the greatest element in the iterable sequence x. It is an error if any element does not support ordered comparison, or if the sequence is empty. The optional named parameter key specifies a function to be applied to each element prior to comparison. max([3, 1, 4, 1, 5, 9]) == 9 max(&quot;two&quot;, &quot;three&quot;, &quot;four&quot;) == &quot;two&quot; # the lexicographically greatest max(&quot;two&quot;, &quot;three&quot;, &quot;four&quot;, key=len) == &quot;three&quot; # the longest   "},{"title":"min​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#min","content":"def min(*args: UNKNOWN, key: [None, &quot;&quot;] = None) -&gt; &quot;&quot;  min: returns the minimum of a sequence. "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-17","content":"min(x) returns the least element in the iterable sequence x. It is an error if any element does not support ordered comparison, or if the sequence is empty. min([3, 1, 4, 1, 5, 9]) == 1 min(&quot;two&quot;, &quot;three&quot;, &quot;four&quot;) == &quot;four&quot; # the lexicographically least min(&quot;two&quot;, &quot;three&quot;, &quot;four&quot;, key=len) == &quot;two&quot; # the shortest   "},{"title":"ord​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#ord","content":"def ord(a: str.type) -&gt; int.type  ord: returns the codepoint of a character "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-18","content":"ord(s) returns the integer value of the sole Unicode code point encoded by the string s. If s does not encode exactly one Unicode code point, ord fails. Each invalid code within the string is treated as if it encodes the Unicode replacement character, U+FFFD. Example: ord(&quot;A&quot;) == 65 ord(&quot;Й&quot;) == 1049 ord(&quot;😿&quot;) == 0x1F63F   "},{"title":"partial​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#partial","content":"def partial(func: &quot;&quot;, *args: UNKNOWN, **kwargs: {&quot;&quot;: &quot;&quot;}) -&gt; &quot;function&quot;   "},{"title":"pprint​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#pprint","content":"def pprint(*args: UNKNOWN) -&gt; None   "},{"title":"print​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#print","content":"def print(*args: UNKNOWN) -&gt; None   "},{"title":"range​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#range","content":"def range(a1: int.type, a2: [None, int.type] = None, step: int.type = None) -&gt; &quot;range&quot;  range: return a range of integers "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-19","content":"range returns a tuple of integers defined by the specified interval and stride. range(stop) # equivalent to range(0, stop) range(start, stop) # equivalent to range(start, stop, 1) range(start, stop, step)  range requires between one and three integer arguments. With one argument, range(stop) returns the ascending sequence of non-negative integers less than stop. With two arguments, range(start, stop) returns only integers not less than start. With three arguments, range(start, stop, step) returns integers formed by successively adding step to start until the value meets or passes stop. A call to range fails if the value of step is zero. list(range(10)) == [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] list(range(3, 10)) == [3, 4, 5, 6, 7, 8, 9] list(range(3, 10, 2)) == [3, 5, 7, 9] list(range(10, 3, -2)) == [10, 8, 6, 4]   "},{"title":"record​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#record","content":"def record(**kwargs: {str.type: &quot;&quot;}) -&gt; &quot;function&quot;   "},{"title":"repr​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#repr","content":"def repr(a: &quot;&quot;) -&gt; str.type  repr: formats its argument as a string. "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-20","content":"All strings in the result are double-quoted. repr(1) == '1' repr(&quot;x&quot;) == &quot;\\&quot;x\\&quot;&quot; repr([1, &quot;x&quot;]) == &quot;[1, \\&quot;x\\&quot;]&quot; repr(&quot;test \\&quot;'&quot;) == &quot;\\&quot;test \\\\\\&quot;'\\&quot;&quot; repr(&quot;x\\&quot;y😿 \\\\'&quot;) == &quot;\\&quot;x\\\\\\&quot;y\\\\U0001f63f \\\\\\\\'\\&quot;&quot; &quot;#);   "},{"title":"reversed​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#reversed","content":"def reversed(a: iter(&quot;&quot;)) -&gt; [&quot;&quot;]  reversed: reverse a sequence "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-21","content":"reversed(x) returns a new list containing the elements of the iterable sequence x in reverse order. reversed(['a', 'b', 'c']) == ['c', 'b', 'a'] reversed(range(5)) == [4, 3, 2, 1, 0] reversed(&quot;stressed&quot;.elems()) == [&quot;d&quot;, &quot;e&quot;, &quot;s&quot;, &quot;s&quot;, &quot;e&quot;, &quot;r&quot;, &quot;t&quot;, &quot;s&quot;] reversed({&quot;one&quot;: 1, &quot;two&quot;: 2}.keys()) == [&quot;two&quot;, &quot;one&quot;]   "},{"title":"sorted​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#sorted","content":"def sorted(x: iter(&quot;&quot;), *, key: [None, &quot;&quot;] = None, reverse: bool.type = None) -&gt; [&quot;&quot;]  sorted: sort a sequence "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-22","content":"sorted(x) returns a new list containing the elements of the iterable sequence x, in sorted order. The sort algorithm is stable. The optional named parameter reverse, if true, causes sorted to return results in reverse sorted order. The optional named parameter key specifies a function of one argument to apply to obtain the value's sort key. The default behavior is the identity function. sorted([3, 1, 4, 1, 5, 9]) == [1, 1, 3, 4, 5, 9] sorted([3, 1, 4, 1, 5, 9], reverse=True) == [9, 5, 4, 3, 1, 1] sorted([&quot;two&quot;, &quot;three&quot;, &quot;four&quot;], key=len) == [&quot;two&quot;, &quot;four&quot;, &quot;three&quot;] # shortest to longest sorted([&quot;two&quot;, &quot;three&quot;, &quot;four&quot;], key=len, reverse=True) == [&quot;three&quot;, &quot;four&quot;, &quot;two&quot;] # longest to shortest   "},{"title":"str​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#str","content":"def str(a: &quot;&quot;) -&gt; str.type  str: formats its argument as a string. "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-23","content":"If x is a string, the result is x (without quotation). All other strings, such as elements of a list of strings, are double-quoted. str(1) == '1' str(&quot;x&quot;) == 'x' str([1, &quot;x&quot;]) == &quot;[1, \\&quot;x\\&quot;]&quot;   "},{"title":"struct​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#struct","content":"def struct(*args: UNKNOWN, **kwargs: UNKNOWN) -&gt; &quot;struct&quot;   "},{"title":"tuple​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#tuple","content":"def tuple(a: iter(&quot;&quot;) = None) -&gt; &quot;&quot;  tuple: returns a tuple containing the elements of the iterable x. "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-24","content":"With no arguments, tuple() returns the empty tuple. tuple() == () tuple([1,2,3]) == (1, 2, 3)   "},{"title":"type​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#type","content":"def type(a: &quot;&quot;) -&gt; str.type  type: returns a string describing the type of its operand. "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-25","content":"type(None) == &quot;NoneType&quot; type(0) == &quot;int&quot; type(1) == &quot;int&quot; type(()) == &quot;tuple&quot; type(&quot;hello&quot;) == &quot;string&quot;   "},{"title":"zip​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#zip","content":"def zip(*args: UNKNOWN) -&gt; [&quot;&quot;]  zip: zip several iterables together "},{"title":"Details​","type":1,"pageTitle":"builtins","url":"/docs/generated/native/builtins/#details-26","content":"zip() returns a new list of n-tuples formed from corresponding elements of each of the n iterable sequences provided as arguments tozip. That is, the first tuple contains the first element of each of the sequences, the second element contains the second element of each of the sequences, and so on. The result list is only as long as the shortest of the input sequences. zip() == [] zip(range(5)) == [(0,), (1,), (2,), (3,), (4,)] zip(range(5), &quot;abc&quot;.elems()) == [(0, &quot;a&quot;), (1, &quot;b&quot;), (2, &quot;c&quot;)]  "},{"title":"ctx","type":0,"sectionRef":"#","url":"/docs/generated/native/ctx/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"ctx","url":"/docs/generated/native/ctx/#members","content":"Member\tDescription\tType actions &quot;actions&quot; attrs &quot;&quot; label &quot;&quot;  "},{"title":"actions : \"actions\"​","type":1,"pageTitle":"ctx","url":"/docs/generated/native/ctx/#actions--actions","content":" "},{"title":"attrs : \"\"​","type":1,"pageTitle":"ctx","url":"/docs/generated/native/ctx/#attrs--","content":" "},{"title":"label : \"\"​","type":1,"pageTitle":"ctx","url":"/docs/generated/native/ctx/#label--","content":""},{"title":"ctx.actions","type":0,"sectionRef":"#","url":"/docs/generated/native/ctx.actions/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"ctx.actions","url":"/docs/generated/native/ctx.actions/#members","content":"Member\tDescription\tType anon_target Generate an anonymous target ( rule: &quot;rule&quot;, attrs: {str.type: &quot;&quot;} ) -&gt; &quot;promise&quot; anon_targets Generate a series of anonymous targets ( rules: [(&quot;rule&quot;, {str.type: &quot;&quot;})] ) -&gt; &quot;promise&quot; artifact_tag Allocate a new input tag () -&gt; &quot;&quot; cas_artifact ( output: &quot;&quot;, digest: str.type, use_case: str.type, *, expires_after_timestamp: int.type, is_executable: bool.type = None, is_tree: bool.type = None, is_directory: bool.type = None ) -&gt; &quot;&quot; copied_dir ( output: &quot;&quot;, srcs: &quot;&quot; ) -&gt; &quot;&quot; copy_dir ( dest: &quot;&quot;, src: &quot;&quot; ) -&gt; &quot;&quot; copy_file ( dest: &quot;&quot;, src: &quot;&quot; ) -&gt; &quot;&quot; declare_output ( prefix: str.type, filename: [None, str.type] = None, *, dir: bool.type = None ) -&gt; &quot;artifact&quot; download_file ( output: &quot;&quot;, url: str.type, *, sha1: [None, str.type] = None, sha256: [None, str.type] = None, is_executable: bool.type = None, is_deferrable: bool.type = None ) -&gt; &quot;&quot; dynamic_output ( *, dynamic: [&quot;artifact&quot;], inputs: [&quot;artifact&quot;], outputs: [&quot;output_artifact&quot;], f: &quot;&quot; ) -&gt; None run ( arguments: &quot;&quot;, *, category: str.type, identifier: [None, str.type] = None, env: [None, {str.type: &quot;&quot;}] = None, local_only: bool.type = None, prefer_local: bool.type = None, always_print_stderr: bool.type = None, weight: [None, int.type] = None, weight_percentage: [None, int.type] = None, dep_files: [None, {str.type: &quot;&quot;}] = None, metadata_env_var: [None, str.type] = None, metadata_path: [None, str.type] = None, no_outputs_cleanup: bool.type = None, allow_cache_upload: bool.type = None, force_full_hybrid_if_capable: bool.type = None ) -&gt; None symlink_dir ( dest: &quot;&quot;, src: &quot;&quot; ) -&gt; &quot;&quot; symlink_file ( dest: &quot;&quot;, src: &quot;&quot; ) -&gt; &quot;&quot; symlinked_dir ( output: &quot;&quot;, srcs: &quot;&quot; ) -&gt; &quot;&quot; tset ( definition: &quot;&quot;, value: [None, &quot;&quot;] = None, children: [None, &quot;&quot;] = None ) -&gt; &quot;&quot; write ( output: &quot;&quot;, content: &quot;&quot;, *, is_executable: bool.type = None, allow_args: bool.type = None, with_inputs: bool.type = None ) -&gt; &quot;&quot; write_json ( output: &quot;&quot;, content: &quot;&quot;, *, with_inputs: bool.type = None ) -&gt; &quot;&quot;  "},{"title":"anon_target​","type":1,"pageTitle":"ctx.actions","url":"/docs/generated/native/ctx.actions/#anon_target","content":"def anon_target(rule: &quot;rule&quot;, attrs: {str.type: &quot;&quot;}) -&gt; &quot;promise&quot;  Generate an anonymous target  "},{"title":"anon_targets​","type":1,"pageTitle":"ctx.actions","url":"/docs/generated/native/ctx.actions/#anon_targets","content":"def anon_targets(rules: [(&quot;rule&quot;, {str.type: &quot;&quot;})]) -&gt; &quot;promise&quot;  Generate a series of anonymous targets  "},{"title":"artifact_tag​","type":1,"pageTitle":"ctx.actions","url":"/docs/generated/native/ctx.actions/#artifact_tag","content":"def artifact_tag() -&gt; &quot;&quot;  Allocate a new input tag  "},{"title":"cas_artifact​","type":1,"pageTitle":"ctx.actions","url":"/docs/generated/native/ctx.actions/#cas_artifact","content":"def cas_artifact( output: &quot;&quot;, digest: str.type, use_case: str.type, *, expires_after_timestamp: int.type, is_executable: bool.type = None, is_tree: bool.type = None, is_directory: bool.type = None ) -&gt; &quot;&quot;   "},{"title":"copied_dir​","type":1,"pageTitle":"ctx.actions","url":"/docs/generated/native/ctx.actions/#copied_dir","content":"def copied_dir(output: &quot;&quot;, srcs: &quot;&quot;) -&gt; &quot;&quot;   "},{"title":"copy_dir​","type":1,"pageTitle":"ctx.actions","url":"/docs/generated/native/ctx.actions/#copy_dir","content":"def copy_dir(dest: &quot;&quot;, src: &quot;&quot;) -&gt; &quot;&quot;   "},{"title":"copy_file​","type":1,"pageTitle":"ctx.actions","url":"/docs/generated/native/ctx.actions/#copy_file","content":"def copy_file(dest: &quot;&quot;, src: &quot;&quot;) -&gt; &quot;&quot;   "},{"title":"declare_output​","type":1,"pageTitle":"ctx.actions","url":"/docs/generated/native/ctx.actions/#declare_output","content":"def declare_output(prefix: str.type, filename: [None, str.type] = None, *, dir: bool.type = None) -&gt; &quot;artifact&quot;   "},{"title":"download_file​","type":1,"pageTitle":"ctx.actions","url":"/docs/generated/native/ctx.actions/#download_file","content":"def download_file( output: &quot;&quot;, url: str.type, *, sha1: [None, str.type] = None, sha256: [None, str.type] = None, is_executable: bool.type = None, is_deferrable: bool.type = None ) -&gt; &quot;&quot;   "},{"title":"dynamic_output​","type":1,"pageTitle":"ctx.actions","url":"/docs/generated/native/ctx.actions/#dynamic_output","content":"def dynamic_output(*, dynamic: [&quot;artifact&quot;], inputs: [&quot;artifact&quot;], outputs: [&quot;output_artifact&quot;], f: &quot;&quot;) -&gt; None   "},{"title":"run​","type":1,"pageTitle":"ctx.actions","url":"/docs/generated/native/ctx.actions/#run","content":"def run( arguments: &quot;&quot;, *, category: str.type, identifier: [None, str.type] = None, env: [None, {str.type: &quot;&quot;}] = None, local_only: bool.type = None, prefer_local: bool.type = None, always_print_stderr: bool.type = None, weight: [None, int.type] = None, weight_percentage: [None, int.type] = None, dep_files: [None, {str.type: &quot;&quot;}] = None, metadata_env_var: [None, str.type] = None, metadata_path: [None, str.type] = None, no_outputs_cleanup: bool.type = None, allow_cache_upload: bool.type = None, force_full_hybrid_if_capable: bool.type = None ) -&gt; None   "},{"title":"symlink_dir​","type":1,"pageTitle":"ctx.actions","url":"/docs/generated/native/ctx.actions/#symlink_dir","content":"def symlink_dir(dest: &quot;&quot;, src: &quot;&quot;) -&gt; &quot;&quot;   "},{"title":"symlink_file​","type":1,"pageTitle":"ctx.actions","url":"/docs/generated/native/ctx.actions/#symlink_file","content":"def symlink_file(dest: &quot;&quot;, src: &quot;&quot;) -&gt; &quot;&quot;   "},{"title":"symlinked_dir​","type":1,"pageTitle":"ctx.actions","url":"/docs/generated/native/ctx.actions/#symlinked_dir","content":"def symlinked_dir(output: &quot;&quot;, srcs: &quot;&quot;) -&gt; &quot;&quot;   "},{"title":"tset​","type":1,"pageTitle":"ctx.actions","url":"/docs/generated/native/ctx.actions/#tset","content":"def tset(definition: &quot;&quot;, value: [None, &quot;&quot;] = None, children: [None, &quot;&quot;] = None) -&gt; &quot;&quot;   "},{"title":"write​","type":1,"pageTitle":"ctx.actions","url":"/docs/generated/native/ctx.actions/#write","content":"def write(output: &quot;&quot;, content: &quot;&quot;, *, is_executable: bool.type = None, allow_args: bool.type = None, with_inputs: bool.type = None) -&gt; &quot;&quot;   "},{"title":"write_json​","type":1,"pageTitle":"ctx.actions","url":"/docs/generated/native/ctx.actions/#write_json","content":"def write_json(output: &quot;&quot;, content: &quot;&quot;, *, with_inputs: bool.type = None) -&gt; &quot;&quot;  "},{"title":"regex","type":0,"sectionRef":"#","url":"/docs/generated/native/extension/regex/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"regex","url":"/docs/generated/native/extension/regex/#members","content":"Member\tDescription\tType match ( str: str.type ) -&gt; bool.type  "},{"title":"match​","type":1,"pageTitle":"regex","url":"/docs/generated/native/extension/regex/#match","content":"def match(str: str.type) -&gt; bool.type  "},{"title":"function","type":0,"sectionRef":"#","url":"/docs/generated/native/extension/function/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"function","url":"/docs/generated/native/extension/function/#members","content":"Member\tDescription\tType type &quot;&quot; values () -&gt; &quot;&quot;  "},{"title":"type : \"\"​","type":1,"pageTitle":"function","url":"/docs/generated/native/extension/function/#type--","content":" "},{"title":"values​","type":1,"pageTitle":"function","url":"/docs/generated/native/extension/function/#values","content":"def values() -&gt; &quot;&quot;  "},{"title":"promise","type":0,"sectionRef":"#","url":"/docs/generated/native/promise/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"promise","url":"/docs/generated/native/promise/#members","content":"Member\tDescription\tType join Join a set of promises together into a single promise. ( *args: UNKNOWN ) -&gt; &quot;promise&quot; map Given a promise, apply a function to the value it contains, producing a promise with the resulting value. ( func: &quot;&quot; ) -&gt; &quot;promise&quot;  "},{"title":"join​","type":1,"pageTitle":"promise","url":"/docs/generated/native/promise/#join","content":"def join(*args: UNKNOWN) -&gt; &quot;promise&quot;  Join a set of promises together into a single promise. "},{"title":"Details​","type":1,"pageTitle":"promise","url":"/docs/generated/native/promise/#details","content":"Given a series of promises, p4 = p1.join(p2, p3) will produce a promise where the value is promise that resolves to a tuple containing the three values, those from p1, p2 and p3 respectively.  "},{"title":"map​","type":1,"pageTitle":"promise","url":"/docs/generated/native/promise/#map","content":"def map(func: &quot;&quot;) -&gt; &quot;promise&quot;  Given a promise, apply a function to the value it contains, producing a promise with the resulting value. "},{"title":"ConfigurationInfo","type":0,"sectionRef":"#","url":"/docs/generated/native/providers/ConfigurationInfo/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"ConfigurationInfo","url":"/docs/generated/native/providers/ConfigurationInfo/#members","content":"Member\tDescription\tType constraints {&quot;target_label&quot;: &quot;ConstraintValueInfo&quot;} values {str.type: str.type}  "},{"title":"constraints : {\"target_label\": \"ConstraintValueInfo\"}​","type":1,"pageTitle":"ConfigurationInfo","url":"/docs/generated/native/providers/ConfigurationInfo/#constraints--target_label-constraintvalueinfo","content":" "},{"title":"values : {str.type: str.type}​","type":1,"pageTitle":"ConfigurationInfo","url":"/docs/generated/native/providers/ConfigurationInfo/#values--strtype-strtype","content":""},{"title":"label","type":0,"sectionRef":"#","url":"/docs/generated/native/label/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"label","url":"/docs/generated/native/label/#members","content":"Member\tDescription\tType cell str.type cell_root &quot;&quot; configured_target Returns the underlying configured target label, dropping the sub target () -&gt; &quot;configured_target_label&quot; name str.type package str.type path &quot;&quot; raw_target Returns the unconfigured underlying target label. () -&gt; &quot;target_label&quot; sub_target [None, [str.type]]  "},{"title":"cell : str.type​","type":1,"pageTitle":"label","url":"/docs/generated/native/label/#cell--strtype","content":" "},{"title":"cell_root : \"\"​","type":1,"pageTitle":"label","url":"/docs/generated/native/label/#cell_root--","content":" "},{"title":"configured_target​","type":1,"pageTitle":"label","url":"/docs/generated/native/label/#configured_target","content":"def configured_target() -&gt; &quot;configured_target_label&quot;  Returns the underlying configured target label, dropping the sub target  "},{"title":"name : str.type​","type":1,"pageTitle":"label","url":"/docs/generated/native/label/#name--strtype","content":" "},{"title":"package : str.type​","type":1,"pageTitle":"label","url":"/docs/generated/native/label/#package--strtype","content":" "},{"title":"path : \"\"​","type":1,"pageTitle":"label","url":"/docs/generated/native/label/#path--","content":" "},{"title":"raw_target​","type":1,"pageTitle":"label","url":"/docs/generated/native/label/#raw_target","content":"def raw_target() -&gt; &quot;target_label&quot;  Returns the unconfigured underlying target label.  "},{"title":"sub_target : [None, [str.type]]​","type":1,"pageTitle":"label","url":"/docs/generated/native/label/#sub_target--none-strtype","content":""},{"title":"ConstraintSettingInfo","type":0,"sectionRef":"#","url":"/docs/generated/native/providers/ConstraintSettingInfo/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"ConstraintSettingInfo","url":"/docs/generated/native/providers/ConstraintSettingInfo/#members","content":"Member\tDescription\tType label &quot;target_label&quot;  "},{"title":"label : \"target_label\"​","type":1,"pageTitle":"ConstraintSettingInfo","url":"/docs/generated/native/providers/ConstraintSettingInfo/#label--target_label","content":""},{"title":"ConstraintValueInfo","type":0,"sectionRef":"#","url":"/docs/generated/native/providers/ConstraintValueInfo/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"ConstraintValueInfo","url":"/docs/generated/native/providers/ConstraintValueInfo/#members","content":"Member\tDescription\tType label &quot;target_label&quot; setting &quot;ConstraintSettingInfo&quot;  "},{"title":"label : \"target_label\"​","type":1,"pageTitle":"ConstraintValueInfo","url":"/docs/generated/native/providers/ConstraintValueInfo/#label--target_label","content":" "},{"title":"setting : \"ConstraintSettingInfo\"​","type":1,"pageTitle":"ConstraintValueInfo","url":"/docs/generated/native/providers/ConstraintValueInfo/#setting--constraintsettinginfo","content":""},{"title":"ExecutionPlatformInfo","type":0,"sectionRef":"#","url":"/docs/generated/native/providers/ExecutionPlatformInfo/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"ExecutionPlatformInfo","url":"/docs/generated/native/providers/ExecutionPlatformInfo/#members","content":"Member\tDescription\tType configuration The configuration of the execution platform &quot;ConfigurationInfo&quot; executor_config The executor config &quot;command_executor_config&quot; label label of the defining rule, used in informative messages &quot;target_label&quot;  "},{"title":"configuration : \"ConfigurationInfo\"​","type":1,"pageTitle":"ExecutionPlatformInfo","url":"/docs/generated/native/providers/ExecutionPlatformInfo/#configuration--configurationinfo","content":"The configuration of the execution platform  "},{"title":"executor_config : \"command_executor_config\"​","type":1,"pageTitle":"ExecutionPlatformInfo","url":"/docs/generated/native/providers/ExecutionPlatformInfo/#executor_config--command_executor_config","content":"The executor config  "},{"title":"label : \"target_label\"​","type":1,"pageTitle":"ExecutionPlatformInfo","url":"/docs/generated/native/providers/ExecutionPlatformInfo/#label--target_label","content":"label of the defining rule, used in informative messages "},{"title":"DefaultInfo","type":0,"sectionRef":"#","url":"/docs/generated/native/providers/DefaultInfo/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"DefaultInfo","url":"/docs/generated/native/providers/DefaultInfo/#members","content":"Member\tDescription\tType default_outputs A list of Artifacts that are built by default if this rule is requested explicitly, or depended on as as a &quot;source&quot;. [&quot;artifact&quot;] other_outputs A list of ArtifactTraversable. The underlying Artifacts they define will be built by default if this rule is requested, but not when it's depended on as as a &quot;source&quot;. ArtifactTraversable can be an Artifact (which yields itself), or cmd_args, which expand to all their inputs. [&quot;artifact&quot;] sub_targets A mapping of names to ProviderCollections. The keys are used when resolving the ProviderName portion of a ProvidersLabel. These collections can contain, and actually /must/ contain a DefaultInfo provider. However, nested label syntax is not supported. That is, cell//foo:bar[baz] is valid, cell//foo:bar[baz][quz] is not. {str.type: &quot;provider_collection&quot;}  "},{"title":"default_outputs : [\"artifact\"]​","type":1,"pageTitle":"DefaultInfo","url":"/docs/generated/native/providers/DefaultInfo/#default_outputs--artifact","content":"A list of Artifacts that are built by default if this rule is requested explicitly, or depended on as as a &quot;source&quot;.  "},{"title":"other_outputs : [\"artifact\"]​","type":1,"pageTitle":"DefaultInfo","url":"/docs/generated/native/providers/DefaultInfo/#other_outputs--artifact","content":"A list of ArtifactTraversable. The underlying Artifacts they define will be built by default if this rule is requested, but not when it's depended on as as a &quot;source&quot;. ArtifactTraversable can be an Artifact (which yields itself), or cmd_args, which expand to all their inputs.  "},{"title":"sub_targets : {str.type: \"provider_collection\"}​","type":1,"pageTitle":"DefaultInfo","url":"/docs/generated/native/providers/DefaultInfo/#sub_targets--strtype-provider_collection","content":"A mapping of names to ProviderCollections. The keys are used when resolving the ProviderName portion of a ProvidersLabel. These collections can contain, and actually /must/ contain a DefaultInfo provider. However, nested label syntax is not supported. That is, cell//foo:bar[baz] is valid, cell//foo:bar[baz][quz] is not. "},{"title":"ExecutionPlatformRegistrationInfo","type":0,"sectionRef":"#","url":"/docs/generated/native/providers/ExecutionPlatformRegistrationInfo/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"ExecutionPlatformRegistrationInfo","url":"/docs/generated/native/providers/ExecutionPlatformRegistrationInfo/#members","content":"Member\tDescription\tType fallback UNKNOWN platforms [&quot;ExecutionPlatformInfo&quot;]  "},{"title":"fallback : UNKNOWN​","type":1,"pageTitle":"ExecutionPlatformRegistrationInfo","url":"/docs/generated/native/providers/ExecutionPlatformRegistrationInfo/#fallback--unknown","content":" "},{"title":"platforms : [\"ExecutionPlatformInfo\"]​","type":1,"pageTitle":"ExecutionPlatformRegistrationInfo","url":"/docs/generated/native/providers/ExecutionPlatformRegistrationInfo/#platforms--executionplatforminfo","content":""},{"title":"InstallInfo","type":0,"sectionRef":"#","url":"/docs/generated/native/providers/InstallInfo/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"InstallInfo","url":"/docs/generated/native/providers/InstallInfo/#members","content":"Member\tDescription\tType files {str.type: &quot;artifact&quot;} installer &quot;label&quot;  "},{"title":"files : {str.type: \"artifact\"}​","type":1,"pageTitle":"InstallInfo","url":"/docs/generated/native/providers/InstallInfo/#files--strtype-artifact","content":" "},{"title":"installer : \"label\"​","type":1,"pageTitle":"InstallInfo","url":"/docs/generated/native/providers/InstallInfo/#installer--label","content":""},{"title":"ExternalRunnerTestInfo","type":0,"sectionRef":"#","url":"/docs/generated/native/providers/ExternalRunnerTestInfo/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"ExternalRunnerTestInfo","url":"/docs/generated/native/providers/ExternalRunnerTestInfo/#members","content":"Member\tDescription\tType command A Starlark value representing the command for this test. The external test runner is what gives meaning to this command. This is of type [[str.type, &quot;_arglike&quot;]] [[str.type, &quot;&quot;]] contacts A starlark value representing the contacts for this test. This is largely expected to be an oncall, though it's not validated in any way. This is of type [str.type] [str.type] default_executor Defaul executor to use to run tests. This is of type CommandExecutorConfig. If none is passed we will default to the execution platform. &quot;command_executor_config&quot; env A Starlark value representing the environment for this test. Here again, the external test runner is what will this meaning. This is of type {str.type: _arglike} {str.type: &quot;&quot;} executor_overrides Executors that Tpx can use to override the default executor. This is of type {str.type: CommandExecutorConfig} {str.type: &quot;command_executor_config&quot;} labels A starlark value representing the labels for this test. This is of type [str.type] [str.type] run_from_project_root Whether this test should run from the project root, as opposed to the cell root. The default is not to. This is of type [bool.type] [bool.type] test_type A Starlark value representing the type of this test. This is of type str.type str.type use_project_relative_paths Whether this test should use relative paths. The default is not to. This is of type [bool.type] [bool.type]  "},{"title":"command : [[str.type, \"\"]]​","type":1,"pageTitle":"ExternalRunnerTestInfo","url":"/docs/generated/native/providers/ExternalRunnerTestInfo/#command--strtype-","content":"A Starlark value representing the command for this test. The external test runner is what gives meaning to this command. This is of type [[str.type, &quot;_arglike&quot;]]  "},{"title":"contacts : [str.type]​","type":1,"pageTitle":"ExternalRunnerTestInfo","url":"/docs/generated/native/providers/ExternalRunnerTestInfo/#contacts--strtype","content":"A starlark value representing the contacts for this test. This is largely expected to be an oncall, though it's not validated in any way. This is of type [str.type]  "},{"title":"default_executor : \"command_executor_config\"​","type":1,"pageTitle":"ExternalRunnerTestInfo","url":"/docs/generated/native/providers/ExternalRunnerTestInfo/#default_executor--command_executor_config","content":"Defaul executor to use to run tests. This is of type CommandExecutorConfig. If none is passed we will default to the execution platform.  "},{"title":"env : {str.type: \"\"}​","type":1,"pageTitle":"ExternalRunnerTestInfo","url":"/docs/generated/native/providers/ExternalRunnerTestInfo/#env--strtype-","content":"A Starlark value representing the environment for this test. Here again, the external test runner is what will this meaning. This is of type {str.type: _arglike}  "},{"title":"executor_overrides : {str.type: \"command_executor_config\"}​","type":1,"pageTitle":"ExternalRunnerTestInfo","url":"/docs/generated/native/providers/ExternalRunnerTestInfo/#executor_overrides--strtype-command_executor_config","content":"Executors that Tpx can use to override the default executor. This is of type {str.type: CommandExecutorConfig}  "},{"title":"labels : [str.type]​","type":1,"pageTitle":"ExternalRunnerTestInfo","url":"/docs/generated/native/providers/ExternalRunnerTestInfo/#labels--strtype","content":"A starlark value representing the labels for this test. This is of type [str.type]  "},{"title":"run_from_project_root : [bool.type]​","type":1,"pageTitle":"ExternalRunnerTestInfo","url":"/docs/generated/native/providers/ExternalRunnerTestInfo/#run_from_project_root--booltype","content":"Whether this test should run from the project root, as opposed to the cell root. The default is not to. This is of type [bool.type]  "},{"title":"test_type : str.type​","type":1,"pageTitle":"ExternalRunnerTestInfo","url":"/docs/generated/native/providers/ExternalRunnerTestInfo/#test_type--strtype","content":"A Starlark value representing the type of this test. This is of type str.type  "},{"title":"use_project_relative_paths : [bool.type]​","type":1,"pageTitle":"ExternalRunnerTestInfo","url":"/docs/generated/native/providers/ExternalRunnerTestInfo/#use_project_relative_paths--booltype","content":"Whether this test should use relative paths. The default is not to. This is of type [bool.type] "},{"title":"PlatformInfo","type":0,"sectionRef":"#","url":"/docs/generated/native/providers/PlatformInfo/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"PlatformInfo","url":"/docs/generated/native/providers/PlatformInfo/#members","content":"Member\tDescription\tType configuration &quot;ConfigurationInfo&quot; label str.type  "},{"title":"configuration : \"ConfigurationInfo\"​","type":1,"pageTitle":"PlatformInfo","url":"/docs/generated/native/providers/PlatformInfo/#configuration--configurationinfo","content":" "},{"title":"label : str.type​","type":1,"pageTitle":"PlatformInfo","url":"/docs/generated/native/providers/PlatformInfo/#label--strtype","content":""},{"title":"RunInfo","type":0,"sectionRef":"#","url":"/docs/generated/native/providers/RunInfo/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"RunInfo","url":"/docs/generated/native/providers/RunInfo/#members","content":"Member\tDescription\tType args The command to run, stored as CommandLine &quot;cmd_args&quot;  "},{"title":"args : \"cmd_args\"​","type":1,"pageTitle":"RunInfo","url":"/docs/generated/native/providers/RunInfo/#args--cmd_args","content":"The command to run, stored as CommandLine "},{"title":"TemplatePlaceholderInfo","type":0,"sectionRef":"#","url":"/docs/generated/native/providers/TemplatePlaceholderInfo/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"TemplatePlaceholderInfo","url":"/docs/generated/native/providers/TemplatePlaceholderInfo/#members","content":"Member\tDescription\tType keyed_variables UNKNOWN unkeyed_variables UNKNOWN  "},{"title":"keyed_variables : UNKNOWN​","type":1,"pageTitle":"TemplatePlaceholderInfo","url":"/docs/generated/native/providers/TemplatePlaceholderInfo/#keyed_variables--unknown","content":" "},{"title":"unkeyed_variables : UNKNOWN​","type":1,"pageTitle":"TemplatePlaceholderInfo","url":"/docs/generated/native/providers/TemplatePlaceholderInfo/#unkeyed_variables--unknown","content":""},{"title":"dict","type":0,"sectionRef":"#","url":"/docs/generated/native/standard/dict/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"dict","url":"/docs/generated/native/standard/dict/#members","content":"Member\tDescription\tType clear dict.clear: clear a dictionary () -&gt; None get dict.get: return an element from the dictionary. ( key: &quot;&quot;, default: [None, &quot;&quot;] = None ) -&gt; &quot;&quot; items dict.items: get list of (key, value) pairs. () -&gt; [(&quot;&quot;, &quot;&quot;)] keys dict.keys: get the list of keys of the dictionary. () -&gt; [&quot;&quot;] pop dict.pop: return an element and remove it from a dictionary. ( key: &quot;&quot;, default: [None, &quot;&quot;] = None ) -&gt; &quot;&quot; popitem dict.popitem: returns and removes the first key/value pair of a dictionary. () -&gt; (&quot;&quot;, &quot;&quot;) setdefault dict.setdefault: get a value from a dictionary, setting it to a new value if not present. ( key: &quot;&quot;, default: [None, &quot;&quot;] = None ) -&gt; &quot;&quot; update dict.update: update values in the dictionary. ( pairs: [None, &quot;&quot;] = None, **kwargs: {&quot;&quot;: &quot;&quot;} ) -&gt; None values dict.values: get the list of values of the dictionary. () -&gt; [&quot;&quot;]  "},{"title":"clear​","type":1,"pageTitle":"dict","url":"/docs/generated/native/standard/dict/#clear","content":"def clear() -&gt; None  dict.clear: clear a dictionary "},{"title":"Details​","type":1,"pageTitle":"dict","url":"/docs/generated/native/standard/dict/#details","content":"D.clear() removes all the entries of dictionary D and returns None. It fails if the dictionary is frozen or if there are active iterators. dict·clear is not provided by the Java implementation. Examples: x = {&quot;one&quot;: 1, &quot;two&quot;: 2} x.clear() x == {}   "},{"title":"get​","type":1,"pageTitle":"dict","url":"/docs/generated/native/standard/dict/#get","content":"def get(key: &quot;&quot;, default: [None, &quot;&quot;] = None) -&gt; &quot;&quot;  dict.get: return an element from the dictionary. "},{"title":"Details​","type":1,"pageTitle":"dict","url":"/docs/generated/native/standard/dict/#details-1","content":"D.get(key[, default]) returns the dictionary value corresponding to the given key. If the dictionary contains no such value, getreturns None, or the value of the optional default parameter if present. get fails if key is unhashable. Examples: x = {&quot;one&quot;: 1, &quot;two&quot;: 2} x.get(&quot;one&quot;) == 1 x.get(&quot;three&quot;) == None x.get(&quot;three&quot;, 0) == 0   "},{"title":"items​","type":1,"pageTitle":"dict","url":"/docs/generated/native/standard/dict/#items","content":"def items() -&gt; [(&quot;&quot;, &quot;&quot;)]  dict.items: get list of (key, value) pairs. "},{"title":"Details​","type":1,"pageTitle":"dict","url":"/docs/generated/native/standard/dict/#details-2","content":"D.items() returns a new list of key/value pairs, one per element in dictionary D, in the same order as they would be returned by a forloop. Examples: x = {&quot;one&quot;: 1, &quot;two&quot;: 2} x.items() == [(&quot;one&quot;, 1), (&quot;two&quot;, 2)]   "},{"title":"keys​","type":1,"pageTitle":"dict","url":"/docs/generated/native/standard/dict/#keys","content":"def keys() -&gt; [&quot;&quot;]  dict.keys: get the list of keys of the dictionary. "},{"title":"Details​","type":1,"pageTitle":"dict","url":"/docs/generated/native/standard/dict/#details-3","content":"D.keys() returns a new list containing the keys of dictionary D, in the same order as they would be returned by a for loop. Examples: x = {&quot;one&quot;: 1, &quot;two&quot;: 2} x.keys() == [&quot;one&quot;, &quot;two&quot;]   "},{"title":"pop​","type":1,"pageTitle":"dict","url":"/docs/generated/native/standard/dict/#pop","content":"def pop(key: &quot;&quot;, default: [None, &quot;&quot;] = None) -&gt; &quot;&quot;  dict.pop: return an element and remove it from a dictionary. "},{"title":"Details​","type":1,"pageTitle":"dict","url":"/docs/generated/native/standard/dict/#details-4","content":"D.pop(key[, default]) returns the value corresponding to the specified key, and removes it from the dictionary. If the dictionary contains no such value, and the optional default parameter is present, popreturns that value; otherwise, it fails. pop fails if key is unhashable, or the dictionary is frozen or has active iterators. Examples: x = {&quot;one&quot;: 1, &quot;two&quot;: 2} x.pop(&quot;one&quot;) == 1 x == {&quot;two&quot;: 2} x.pop(&quot;three&quot;, 0) == 0 x.pop(&quot;three&quot;, None) == None  Failure: {'one': 1}.pop('four') # error: not found   "},{"title":"popitem​","type":1,"pageTitle":"dict","url":"/docs/generated/native/standard/dict/#popitem","content":"def popitem() -&gt; (&quot;&quot;, &quot;&quot;)  dict.popitem: returns and removes the first key/value pair of a dictionary. "},{"title":"Details​","type":1,"pageTitle":"dict","url":"/docs/generated/native/standard/dict/#details-5","content":"D.popitem() returns the first key/value pair, removing it from the dictionary. popitem fails if the dictionary is empty, frozen, or has active iterators. Examples: x = {&quot;one&quot;: 1, &quot;two&quot;: 2} x.popitem() == (&quot;one&quot;, 1) x.popitem() == (&quot;two&quot;, 2) x == {}  Failure: {}.popitem() # error: empty dict   "},{"title":"setdefault​","type":1,"pageTitle":"dict","url":"/docs/generated/native/standard/dict/#setdefault","content":"def setdefault(key: &quot;&quot;, default: [None, &quot;&quot;] = None) -&gt; &quot;&quot;  dict.setdefault: get a value from a dictionary, setting it to a new value if not present. "},{"title":"Details​","type":1,"pageTitle":"dict","url":"/docs/generated/native/standard/dict/#details-6","content":"D.setdefault(key[, default]) returns the dictionary value corresponding to the given key. If the dictionary contains no such value, setdefault, like get, returns None or the value of the optional default parameter if present; setdefault additionally inserts the new key/value entry into the dictionary. setdefault fails if the key is unhashable or if the dictionary is frozen. Examples: x = {&quot;one&quot;: 1, &quot;two&quot;: 2} x.setdefault(&quot;one&quot;) == 1 x.setdefault(&quot;three&quot;, 0) == 0 x == {&quot;one&quot;: 1, &quot;two&quot;: 2, &quot;three&quot;: 0} x.setdefault(&quot;four&quot;) == None x == {&quot;one&quot;: 1, &quot;two&quot;: 2, &quot;three&quot;: 0, &quot;four&quot;: None}   "},{"title":"update​","type":1,"pageTitle":"dict","url":"/docs/generated/native/standard/dict/#update","content":"def update(pairs: [None, &quot;&quot;] = None, **kwargs: {&quot;&quot;: &quot;&quot;}) -&gt; None  dict.update: update values in the dictionary. "},{"title":"Details​","type":1,"pageTitle":"dict","url":"/docs/generated/native/standard/dict/#details-7","content":"D.update([pairs][, name=value[, ...]) makes a sequence of key/value insertions into dictionary D, then returns None. If the positional argument pairs is present, it must be None, another dict, or some other iterable. If it is another dict, then its key/value pairs are inserted into D. If it is an iterable, it must provide a sequence of pairs (or other iterables of length 2), each of which is treated as a key/value pair to be inserted into D. For each name=value argument present, the name is converted to a string and used as the key for an insertion into D, with its corresponding value being value. update fails if the dictionary is frozen. Examples: x = {} x.update([(&quot;a&quot;, 1), (&quot;b&quot;, 2)], c=3) x.update({&quot;d&quot;: 4}) x.update(e=5) x == {&quot;a&quot;: 1, &quot;b&quot;: 2, &quot;c&quot;: 3, &quot;d&quot;: 4, &quot;e&quot;: 5}   "},{"title":"values​","type":1,"pageTitle":"dict","url":"/docs/generated/native/standard/dict/#values","content":"def values() -&gt; [&quot;&quot;]  dict.values: get the list of values of the dictionary. "},{"title":"Details​","type":1,"pageTitle":"dict","url":"/docs/generated/native/standard/dict/#details-8","content":"D.values() returns a new list containing the dictionary's values, in the same order as they would be returned by a for loop over the dictionary. Examples: x = {&quot;one&quot;: 1, &quot;two&quot;: 2} x.values() == [1, 2]  "},{"title":"list","type":0,"sectionRef":"#","url":"/docs/generated/native/standard/list/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"list","url":"/docs/generated/native/standard/list/#members","content":"Member\tDescription\tType append list.append: append an element to a list. ( el: &quot;&quot; ) -&gt; None clear list.clear: clear a list () -&gt; None extend list.extend: extend a list with another iterable's content. ( other: iter(&quot;&quot;) ) -&gt; None index list.index: get the index of an element in the list. ( needle: &quot;&quot;, start: [None, int.type] = None, end: [None, int.type] = None ) -&gt; int.type insert list.insert: insert an element in a list. ( index: int.type, el: &quot;&quot; ) -&gt; None pop list.pop: removes and returns the last element of a list. ( index: [None, &quot;&quot;] = None ) -&gt; &quot;&quot; remove list.remove: remove a value from a list ( needle: &quot;&quot; ) -&gt; None  "},{"title":"append​","type":1,"pageTitle":"list","url":"/docs/generated/native/standard/list/#append","content":"def append(el: &quot;&quot;) -&gt; None  list.append: append an element to a list. "},{"title":"Details​","type":1,"pageTitle":"list","url":"/docs/generated/native/standard/list/#details","content":"L.append(x) appends x to the list L, and returns None. append fails if the list is frozen or has active iterators. Examples: x = [] x.append(1) x.append(2) x.append(3) x == [1, 2, 3]   "},{"title":"clear​","type":1,"pageTitle":"list","url":"/docs/generated/native/standard/list/#clear","content":"def clear() -&gt; None  list.clear: clear a list "},{"title":"Details​","type":1,"pageTitle":"list","url":"/docs/generated/native/standard/list/#details-1","content":"L.clear() removes all the elements of the list L and returns None. It fails if the list is frozen or if there are active iterators. Examples: x = [1, 2, 3] x.clear() x == []   "},{"title":"extend​","type":1,"pageTitle":"list","url":"/docs/generated/native/standard/list/#extend","content":"def extend(other: iter(&quot;&quot;)) -&gt; None  list.extend: extend a list with another iterable's content. "},{"title":"Details​","type":1,"pageTitle":"list","url":"/docs/generated/native/standard/list/#details-2","content":"L.extend(x) appends the elements of x, which must be iterable, to the list L, and returns None. extend fails if x is not iterable, or if the list L is frozen or has active iterators. Examples: x = [] x.extend([1, 2, 3]) x.extend([&quot;foo&quot;]) x == [1, 2, 3, &quot;foo&quot;]   "},{"title":"index​","type":1,"pageTitle":"list","url":"/docs/generated/native/standard/list/#index","content":"def index(needle: &quot;&quot;, start: [None, int.type] = None, end: [None, int.type] = None) -&gt; int.type  list.index: get the index of an element in the list. "},{"title":"Details​","type":1,"pageTitle":"list","url":"/docs/generated/native/standard/list/#details-3","content":"L.index(x[, start[, end]]) finds x within the list L and returns its index. The optional start and end parameters restrict the portion of list L that is inspected. If provided and not None, they must be list indices of type int. If an index is negative, len(L) is effectively added to it, then if the index is outside the range [0:len(L)], the nearest value within that range is used; see Indexing. index fails if x is not found in L, or if start or endis not a valid index (int or None). Examples: x = [&quot;b&quot;, &quot;a&quot;, &quot;n&quot;, &quot;a&quot;, &quot;n&quot;, &quot;a&quot;] x.index(&quot;a&quot;) == 1 # bAnana x.index(&quot;a&quot;, 2) == 3 # banAna x.index(&quot;a&quot;, -2) == 5 # bananA   "},{"title":"insert​","type":1,"pageTitle":"list","url":"/docs/generated/native/standard/list/#insert","content":"def insert(index: int.type, el: &quot;&quot;) -&gt; None  list.insert: insert an element in a list. "},{"title":"Details​","type":1,"pageTitle":"list","url":"/docs/generated/native/standard/list/#details-4","content":"L.insert(i, x) inserts the value x in the list L at index i, moving higher-numbered elements along by one. It returns None. As usual, the index i must be an int. If its value is negative, the length of the list is added, then its value is clamped to the nearest value in the range [0:len(L)] to yield the effective index. insert fails if the list is frozen or has active iterators. Examples: x = [&quot;b&quot;, &quot;c&quot;, &quot;e&quot;] x.insert(0, &quot;a&quot;) x.insert(-1, &quot;d&quot;) x == [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;]   "},{"title":"pop​","type":1,"pageTitle":"list","url":"/docs/generated/native/standard/list/#pop","content":"def pop(index: [None, &quot;&quot;] = None) -&gt; &quot;&quot;  list.pop: removes and returns the last element of a list. "},{"title":"Details​","type":1,"pageTitle":"list","url":"/docs/generated/native/standard/list/#details-5","content":"L.pop([index]) removes and returns the last element of the list L, or, if the optional index is provided, at that index. pop fails if the index is negative or not less than the length of the list, of if the list is frozen or has active iterators. Examples: x = [1, 2, 3] x.pop() == 3 x.pop() == 2 x == [1]   "},{"title":"remove​","type":1,"pageTitle":"list","url":"/docs/generated/native/standard/list/#remove","content":"def remove(needle: &quot;&quot;) -&gt; None  list.remove: remove a value from a list "},{"title":"Details​","type":1,"pageTitle":"list","url":"/docs/generated/native/standard/list/#details-6","content":"L.remove(x) removes the first occurrence of the value x from the list L, and returns None. remove fails if the list does not contain x, is frozen, or has active iterators. Examples: x = [1, 2, 3, 2] x.remove(2) x == [1, 3, 2] x.remove(2) x == [1, 3]  A subsequent call to x.remove(2) would yield an error because the element won't be found. x = [1, 2, 3, 2] x.remove(2) x.remove(2) x.remove(2) # error: not found  "},{"title":"Environments","type":0,"sectionRef":"#","url":"/docs/generated/starlark_rust_docs/environment/","content":"","keywords":""},{"title":"Global Environment​","type":1,"pageTitle":"Environments","url":"/docs/generated/starlark_rust_docs/environment/#global-environment","content":"The global environment is always frozen and consists of functions and type-values. All things in the global environment are accessed by name. Type-values are things like list.append, which is used when you do either list.append(xs, 1) or xs.append(1), assuming xs is of type list. The available methods for a type can be queried (for example, dir(list)). There are also global functions, such as len, range, and str. "},{"title":"Slots​","type":1,"pageTitle":"Environments","url":"/docs/generated/starlark_rust_docs/environment/#slots","content":"To optimise evaluation, all variables are accessed by integers, which are known as 'slots'. Many variables can be converted to slots statically during compilation, and those which can't have their slot looked up by name at runtime. The Slots data type is defined as: enum Slots { Frozen(FrozenSlots), Slots(Rc&lt;RefCell&lt;Vec&lt;Option&lt;Value&gt;&gt;&gt;&gt;), } struct FrozenSlots(Arc&lt;Vec&lt;Option&lt;FrozenValue&gt;&gt;&gt;);  As featured in the above code: A set of slots are either Frozen, which came from another module behind Arc or just normal Slots, which can be manipulated by the current scope (behind a Rc/RefCell for single-threaded use and mutation).Vec is accessed by the slot index.Option refers to whether the slot has been assigned yet (to detect variables referenced before assignment). "},{"title":"Module Environment​","type":1,"pageTitle":"Environments","url":"/docs/generated/starlark_rust_docs/environment/#module-environment","content":"The module environment is where the module executes, namely where x is defined above. The module environment can have values added in the following standards-conforming ways: Assignment statements (such as x = 1 or x += 1).For loops (such as the x in for x in []:).Via the load(&quot;a.bzl&quot;, &quot;foo&quot;), which imports foo frozen.Via def foo():, which defines foo in the module environment. Whether a def is frozen or not, when it's executed, its local variables are not frozen. In addition, two non-standards-conforming ways of defining variables are supported: Some modules can be injected as bindings in advance. Given a module foo that is injected, all the bindings of foo will be inserted in this module as frozen.The function load_symbols injects a dictionary of bindings into the module environment. Note that a module has a fixed set of variables (from the standards-conforming ways), a pre-execution set (from the injections) and yet more variables at runtime (via load_symbols). To support that structure, the mapping from name to slot index is tracked in a struct: enum Names { Frozen(FrozenNames), Names(Rc&lt;RefCell&lt;HashMap&lt;String, usize&gt;&gt;&gt;), } struct FrozenNames(Arc&lt;HashMap&lt;String, usize&gt;&gt;);  Each name is given an entry in the map with an increasing slot index. A name will only be assigned a slot once, reusing it thereafter. A corresponding Slots data type provides the values associated with those names. Importantly, the Slots can be extended at runtime by the load_symbols function. As with Slots, you can either share things behind an Arc or mutate them behind an Rc/RefCell. "},{"title":"Function Environment​","type":1,"pageTitle":"Environments","url":"/docs/generated/starlark_rust_docs/environment/#function-environment","content":"A function can have variables introduced via assignments, for loops, and parameters. No additional variables can be discovered at runtime, so all names can be erased at compile time. A function can also access variables from the functions it is statically nested within, and from the variables at the root of the module. To support this structure, at runtime we pass around the context, defined as: struct Context { names: Names, slots: Vec&lt;Slots&gt;, }  The above code contains the mapping of names for the module and the slots for the module and each function. When executed, the inner-most Slots (at the end of slots:) will never be frozen, as that represents the local variables: but any other may be. When a function value is captured in a frozen module, use FrozenContext: struct FrozenContext { names: FrozenNames, slots: Vec&lt;FrozenSlots&gt;, } ## List comprehension environments A list comprehension can be defined as: ```python [x for x in [1,2,3]]  In the above code: The statement defines a variable x that is immediately initialised and shadows any other variables x in scope.The variable x cannot be assigned to, other than in the list comprehension, as it only lives inside the comprehension and the comprehension does not permit assignment statements (only expressions). Such names are not available at the top-level, even when defined in the root of a module. List comprehensions are implemented by adding additional entries into the Slots data type. Even when added at the root of a module, such names are not added to Names. "},{"title":"Optimisations​","type":1,"pageTitle":"Environments","url":"/docs/generated/starlark_rust_docs/environment/#optimisations","content":"There are a number of optimisations made to the scheme: When freezing a Names or Slots structure, it's important to only freeze a particular mutable variant once, or you duplicate memory unnecessarily. Therefore, the Slots to be Rc&lt;RefCell&lt;(_, Option&lt;FrozenSlots&gt;)&gt;&gt; are augmented, and, similarly, the Names. When freeze is called, the original value is consumed, and the Some variant is added.Note: it is unsafe to ever access the slots after the freeze. Programs can only assign to the inner-most Slots, and that slots must always be mutable. Therefore, define a local Slots that is always mutable, and a separate AST node for referring to it. For modules, it is important that this mutable local Slots is also in scope since the scope is used to retrieve unknown variables. "},{"title":"A Moving Garbage Collector","type":0,"sectionRef":"#","url":"/docs/generated/starlark_rust_docs/gc/","content":"","keywords":""},{"title":"A worked example​","type":1,"pageTitle":"A Moving Garbage Collector","url":"/docs/generated/starlark_rust_docs/gc/#a-worked-example","content":"Given a heap with the following layout: X := Data(&quot;world&quot;) Y := Data(&quot;hello&quot;, X, Y) Z := Data(&quot;universe&quot;)  All of X, Y and Z are memory locations. The Y memory location has both some data of its own (&quot;hello&quot;) and two pointers (X and Y itself). The pointers from outside the heap into the heap are known as roots. Assuming, in the above example, that Y is the only root, then, since Y is used from outside, Y must be moved to the new memory block. Consequently, the data X needs to be copied, but Z can be dropped. Following are the required steps for using a garbage collector: To copy Y, allocate a value in the new heap A with a sentinel value in it (that that sentinel is called a Blackhole). Then, turn Y into a Forward(A) pointer, so that if anyone else in this cycle tries to collect Y they immediately &quot;forward&quot; to the new value and the data from Y is grabbed so its pointers can be traversed. That results in the following: X := Data(&quot;world&quot;) Y := Forward(A) Z := Data(&quot;universe&quot;) A := Blackhole With Data(&quot;hello&quot;, X, Y) as the current item being processed. Walk the pointers of the current value, performing a garbage collection on each of them. To copy Y, it can be seen that Y points at a Forward(A) node, so there's no need to do anything. To copy X, follow the process starting at step 1, but for X (which ends up at B). Performing that move leads to the following: X := Forward(B) Y := Forward(A) Z := Data(&quot;universe&quot;) A := Blackhole B := Data(&quot;world&quot;) Replace all the pointers with the forwarded value, and write it back over the Blackhole in A. This gives the following: X := Forward(B) Y := Forward(A) Z := Data(&quot;universe&quot;) A := Data(&quot;hello&quot;, B, A) B := Data(&quot;world&quot;) Adjust any roots pointing at Y to point at A and throw away the original heap, which produces the following: A := Data(&quot;hello&quot;, B, A) B := Data(&quot;world&quot;)  These above four steps successfully garbage collects a cyclic data structure, while preserving the cycles and getting rid of the unused data. "},{"title":"Heaps and Heap References","type":0,"sectionRef":"#","url":"/docs/generated/starlark_rust_docs/heaps/","content":"","keywords":""},{"title":"Heaps​","type":1,"pageTitle":"Heaps and Heap References","url":"/docs/generated/starlark_rust_docs/heaps/#heaps","content":"In Starlark, there are three interesting heap-related points of interest: A Heap has Value's allocated on it and cannot be cloned or shared.A FrozenHeap has FrozenValue's allocated on it and cannot be cloned or shared.A FrozenHeapRef is a FrozenHeap that is now read-only and can now be cloned and shared. A FrozenHeapRef keeps a heap alive. While you have a FrozenValue, it is important that you have either the FrozenHeap itself, or more usually, a FrozenHeapRef to it. A FrozenHeap may contains a set of FrozenHeapRef's to keep the FrozenHeaps it references alive. "},{"title":"Heap Containers​","type":1,"pageTitle":"Heaps and Heap References","url":"/docs/generated/starlark_rust_docs/heaps/#heap-containers","content":"Heaps are included in other data types: A Module contains a Heap (where normal values are allocated) and a FrozenHeap (stores references to other frozen heaps and has compilation constants allocated on it). The Heap portion is garbage collected. At the end, when you call freeze, Value's referenced by name in the Module are moved to the FrozenHeap and then then FrozenHeap is sealed to produce a FrozenHeapRef.A FrozenModule contains a FrozenHeapRef.A GlobalsBuilder contains a FrozenHeap onto which values are allocated.A Globals contains a FrozenHeapRef. "},{"title":"Heap References​","type":1,"pageTitle":"Heaps and Heap References","url":"/docs/generated/starlark_rust_docs/heaps/#heap-references","content":"It is important that when a FrozenValue X is referenced by a Value or FrozenValue (for example, included in a list), the heap where X originates is added as a reference to the heap where the new value is being created. As a concrete example in pseudo-code: let h1 = FrozenHeap::new(); let s = &quot;test&quot;.alloc(h1); let h1 : FrozenHeapRef = h1.into_ref(); let h2 = Heap::new(); h2.add_reference(h1); vec![s].alloc(h2);  In the above code, the following steps are taken: Create a FrozenHeap then allocate something in it.Turn the heap into a reference.Use the allocated value s from h1 when constructing a value in h2.For that to be legal, and for the heap h1 to not disappear while it is being allocated, it is important to call add_reference. Note that this API can only point at a FrozenValue from another heap, and only after that heap has been turned into a reference, so it will not be allocated in anymore. These restrictions are deliberate and mean that most programs only have one 'active heap' at a time. Following are some places where heap references are added by Starlark: Before evaluation is started, a reference is added to the Globals from the Module, so it can access the global functions.When evaluating a load statement, a reference is added to the FrozenModule that is being loaded.When freezing a module, the FrozenHeap, in the Module, is moved to the FrozenModule, preserving the references that were added. "},{"title":"OwnedFrozenValue​","type":1,"pageTitle":"Heaps and Heap References","url":"/docs/generated/starlark_rust_docs/heaps/#ownedfrozenvalue","content":"When you get a value from a FrozenModule, it will be a OwnedFrozenValue. This structure is a pair of a FrozenHeapRef and a FrozenValue, where the ref keeps the value alive. You can move that OwnedFrozenValue into the value of a module with code such as: fn move&lt;'v&gt;(from: &amp;FrozenModule, to: &amp;'v Module) { let x : OwnedFrozenValue = from.get(&quot;value&quot;).unwrap(); let v : Value&lt;'v&gt; = x.owned_value(&amp;to); to.set(&quot;value&quot;, v); }  In general, you can use the OwnedFrozenValue in one of three ways: Operate on it directly - with methods like unpack_int or to_str.Extract it safely - using methods like owned_frozen_value, which takes a FrozenHeap to which the heap reference is added and returns a naked FrozenValue. After that, it is then safe for the FrozenHeap you passed in to use the FrozenValue. With owned_value, there is lifetime checking that the right heap is passed, but with FrozenValue, there isn't.Be careful to pass the right heap, although given most programs only have one active heap at a time, it should mostly work out. Extract it unsafely - using methods unchecked_frozen_value, which gives you the underlying FrozenValue without adding any references. Be careful to make sure there is a good reason the FrozenValue remains valid. "},{"title":"Starlark Types","type":0,"sectionRef":"#","url":"/docs/generated/starlark_rust_docs/types/","content":"","keywords":""},{"title":"What does a type mean?​","type":1,"pageTitle":"Starlark Types","url":"/docs/generated/starlark_rust_docs/types/#what-does-a-type-mean","content":"A type is just an arbitrary expression that evaluates to a value; that value is then treated as a type, which is matched against values: When fib(3) is called, the value 3 is passed to fib as parameter i.When the execution of fib is started, the expression int.type is evaluated to &quot;int&quot;.A check is then made that the value 3 matches the type represented by &quot;int&quot;. If the value doesn't match, it is a runtime error. Similarly, on return statements, or the end of the function, a check is made that result type matches int.type. Types match using the following rules: The type &quot;&quot; means anything.The type &quot;foo&quot; means any value of type foo, where the type of x is computed by doing type(x). That means that &quot;int&quot;, &quot;bool&quot; and &quot;string&quot; are common types.Most constructor functions provide a .type property to obtain the type they produce, allowing int.type, bool.type and str.type etc.Any string starting with an underscore _ (for example, &quot;_a&quot; means anything) but the name is often used as a hint to say where types go in polymorphic functions.The type None means the result must be None.The singleton list [t] means a list where each element must be of type t. If you want a list of any types, use [&quot;&quot;].Multiple element lists [t1,t2] are OR types, where the value must be either type t1 OR type t2.A tuple (t1, t2, t3) matches tuples of the same length (3 in this case), where each element of the value must match the corresponding element of the tuple.A singleton dictionary {k: v} means a dictionary where all the keys have type k, and all the values have type v.It is possible to define functions that return types. For example, def StrDict(t): return {str.type: t} would mean StrDict(int.type) was a valid type. The goals of this type system are: Reuse the existing machinery of Starlark as much as possible, avoiding inventing a special class of type values. As a consequence, any optimisations for values like string/list are reused.Provide a pleasing syntax.Some degree of compatibility with Python, which allows types as expressions in the same places Buck2 allows them (but with different meaning and different checking).And finally, a non-goal is to provide a complete type system capable of representing every type invariant: it's intended to be a lossy approximation. In addition to these built-in types, records and enumerations are provided as special concepts. "},{"title":"Record types​","type":1,"pageTitle":"Starlark Types","url":"/docs/generated/starlark_rust_docs/types/#record-types","content":"A record type represents a set of named values, each with their own type. For example: MyRecord = record(host=str.type, port=int.type)  This above statement defines a record MyRecord with 2 fields, the first named host that must be of type str.type, and the second named port that must be of type int.type. Now MyRecord is defined, it's possible to do the following: Create values of this type with MyRecord(host=&quot;localhost&quot;, port=80). It is a runtime error if any arguments are missed, of the wrong type, or if any unexpected arguments are given.Get the type of the record suitable for a type annotation with MyRecord.type.Get the fields of the record. For example, v = MyRecord(host=&quot;localhost&quot;, port=80) will provide v.host == &quot;localhost&quot; and v.port == 80. Similarly, dir(v) == [&quot;host&quot;, &quot;port&quot;]. It is also possible to specify default values for parameters using the field function. For example: MyRecord = record(host=str.type, port=field(int.type, 80))  Now the port field can be omitted, defaulting to 80 is not present (for example, MyRecord(host=&quot;localhost&quot;).port == 80). Records are stored deduplicating their field names, making them more memory efficient than dictionaries. "},{"title":"Enum types​","type":1,"pageTitle":"Starlark Types","url":"/docs/generated/starlark_rust_docs/types/#enum-types","content":"The enum type represents one value picked from a set of values. For example: MyEnum = enum(&quot;option1&quot;, &quot;option2&quot;, True)  This statement defines an enumeration MyEnum that consists of the three values &quot;option1&quot;, &quot;option2&quot; and True. Now MyEnum is defined, it's possible to do the following: Create values of this type with MyEnum(&quot;option2&quot;). It is a runtime error if the argument is not one of the predeclared values of the enumeration.Get the type of the enum suitable for a type annotation with MyEnum.type.Given a value of the enum (for example, v = MyEnum(&quot;option2&quot;)), get the underlying value v.value == &quot;option2&quot; or the index in the enumeration v.index = 1.Get a list of the values that make up the array with MyEnum.values() == [&quot;option1&quot;, &quot;option2&quot;, True].Treat MyEnum a bit like an array, with len(MyEnum) == 3, MyEnum[1] == MyEnum(&quot;option2&quot;) and iteration over enums [x.value for x in MyEnum] == [&quot;option1&quot;, &quot;option2&quot;, True]. Enumeration types store each value once, which are then efficiently referenced by enumeration values. "},{"title":"Value Representation","type":0,"sectionRef":"#","url":"/docs/generated/starlark_rust_docs/values/","content":"","keywords":""},{"title":"Frozen vs unfrozen values​","type":1,"pageTitle":"Value Representation","url":"/docs/generated/starlark_rust_docs/values/#frozen-vs-unfrozen-values","content":"Values that are frozen are segregated from those that are not: Frozen values are those you import, and (assuming no GC) are to be ref-counted atomically (so they can be shared by multiple threads) and never changed.Unfrozen values are those which are local to the module, and, since modules execute single threaded, can be non-atomically ref-counted and mutated. Once a module has finished executing, it's values are frozen and can be reused freely. "},{"title":"Thaw-on-write​","type":1,"pageTitle":"Value Representation","url":"/docs/generated/starlark_rust_docs/values/#thaw-on-write","content":"It's not uncommon to return list literals from functions. For example: def my_list(x): return ([1,2,3], x)  This above code returns the unfrozen list [1,2,3]. But while the list is unfrozen, and could be mutated by the caller, it probably won't be. To optimise this pattern, construct a frozen list when compiling my_list and insert a shared reference to it in the result. If anyone tries to mutate the list, it's explicitly unfrozen by copying it into a mutable variant (known as thawing the value). "},{"title":"Immutable containers of mutable data​","type":1,"pageTitle":"Value Representation","url":"/docs/generated/starlark_rust_docs/values/#immutable-containers-of-mutable-data","content":"There are some data types (such as functions and tuples) that are themselves immutable but contain mutable data. Importantly, all types that can be invoked as functions (for example, lambda, def, and a.b()) fall into this category. These types can be non-atomically ref-counted but can't be mutated. "},{"title":"Implementation in Rust​","type":1,"pageTitle":"Value Representation","url":"/docs/generated/starlark_rust_docs/values/#implementation-in-rust","content":"Putting all these above concepts together results in the following: enum FrozenValue { None(NoneType), Bool(bool), Int(i64), Obj(Arc&lt;dyn StarlarkValue&gt;), } enum Value { Immutable(FrozenValue), Pseudo(Rc&lt;dyn ComplexValue&gt;) Mutable(Rc&lt;RefCell&lt;Mutable&gt;&gt;), } enum Mutable { Mutable(Box&lt;dyn ComplexValue&gt;), ThawOnWrite(Arc&lt;dyn StarlarkValue&gt;), }  In the above code, both of the traits dyn SimpleValue and dyn ComplexValue enable you to convert to the other and have shared general value-like methods. There are four types of value: ImmutablePseudo - immutable containers of mutable values.Mutable/MutableMutable/ThawOnWrite - immutable now but can be replaced with Mutable/Mutable if needed. There are two root types: FrozenValue - imported.Value - defined locally. "},{"title":"string","type":0,"sectionRef":"#","url":"/docs/generated/native/standard/string/","content":"","keywords":""},{"title":"Members​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#members","content":"Member\tDescription\tType capitalize string.capitalize: returns a copy of string S, where the first character (if any) is converted to uppercase; all other characters are converted to lowercase. () -&gt; str.type codepoints string.codepoints: returns an iterable of the unicode codepoint of a string. () -&gt; iter(str.type) count string.count: count the number of occurrences of a string in another string. ( needle: str.type, start: [None, int.type] = None, end: [None, int.type] = None ) -&gt; int.type elems string.elems: returns an iterable of the bytes values of a string. () -&gt; iter(str.type) endswith string.endswith: determine if a string ends with a given suffix. ( suffix: [str.type, &quot;tuple&quot;] ) -&gt; bool.type find string.find: find a substring in a string. ( needle: str.type, start: [None, int.type] = None, end: [None, int.type] = None ) -&gt; int.type format string.format: format a string. ( *args: UNKNOWN, **kwargs: UNKNOWN ) -&gt; str.type index string.index: search a substring inside a string, failing on not found. ( needle: str.type, start: [None, int.type] = None, end: [None, int.type] = None ) -&gt; int.type isalnum string.isalnum: test if a string is composed only of letters and digits. () -&gt; bool.type isalpha string.isalpha: test if a string is composed only of letters. () -&gt; bool.type isdigit string.isdigit: test if a string is composed only of digits. () -&gt; bool.type islower string.islower: test if all letters of a string are lowercase. () -&gt; bool.type isspace string.isspace: test if all characters of a string are whitespaces. () -&gt; bool.type istitle string.istitle: test if the string is title cased. () -&gt; bool.type isupper string.isupper: test if all letters of a string are uppercase. () -&gt; bool.type join string.join: join elements with a separator. ( to_join: iter(str.type) ) -&gt; str.type lower string.lower: test if all letters of a string are lowercased. () -&gt; str.type lstrip string.lstrip: trim leading whitespaces. ( chars: [None, str.type] = None ) -&gt; str.type partition string.partition: partition a string in 3 components ( needle: str.type ) -&gt; (str.type, str.type, str.type) removeprefix string.removeprefix: remove a prefix from a string. Not part of standard Starlark. ( prefix: str.type ) -&gt; str.type removesuffix string.removesuffix: remove a prefix from a string. Not part of standard Starlark. ( suffix: str.type ) -&gt; str.type replace string.replace: replace all occurences of a subtring. ( old: str.type, new: str.type, count: [None, int.type] = None ) -&gt; str.type rfind string.rfind: find the last index of a substring. ( needle: str.type, start: [None, int.type] = None, end: [None, int.type] = None ) -&gt; int.type rindex string.rindex: find the last index of a substring, failing on not found. ( needle: str.type, start: [None, int.type] = None, end: [None, int.type] = None ) -&gt; int.type rpartition string.rpartition: partition a string in 3 elements. ( needle: str.type ) -&gt; (str.type, str.type, str.type) rsplit string.rsplit: splits a string into substrings. ( sep: [None, str.type] = None, maxsplit: [None, int.type] = None ) -&gt; [str.type] rstrip string.rstrip: trim trailing whitespace. ( chars: [None, str.type] = None ) -&gt; str.type split string.split: split a string in substrings. ( sep: [None, str.type] = None, maxsplit: [None, int.type] = None ) -&gt; [str.type] splitlines string.splitlines: return the list of lines of a string. ( keepends: bool.type = None ) -&gt; [str.type] startswith string.startswith: test wether a string starts with a given prefix. ( prefix: [str.type, &quot;tuple&quot;] ) -&gt; bool.type strip string.strip: trim leading and trailing whitespaces. ( chars: [None, str.type] = None ) -&gt; str.type title string.title: convert a string to title case. () -&gt; str.type upper string.upper: convert a string to all uppercase. () -&gt; str.type  "},{"title":"capitalize​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#capitalize","content":"def capitalize() -&gt; str.type  string.capitalize: returns a copy of string S, where the first character (if any) is converted to uppercase; all other characters are converted to lowercase. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details","content":"Examples: &quot;hello, world!&quot;.capitalize() == &quot;Hello, world!&quot; &quot;Hello, World!&quot;.capitalize() == &quot;Hello, world!&quot; &quot;&quot;.capitalize() == &quot;&quot;   "},{"title":"codepoints​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#codepoints","content":"def codepoints() -&gt; iter(str.type)  string.codepoints: returns an iterable of the unicode codepoint of a string. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-1","content":"S.codepoints() returns an iterable value containing the sequence of integer Unicode code points encoded by the string S. Each invalid code within the string is treated as if it encodes the Unicode replacement character, U+FFFD. By returning an iterable, not a list, the cost of decoding the string is deferred until actually needed; apply list(...) to the result to materialize the entire sequence. Example: Examples: list(&quot;Hello, 世界&quot;.codepoints()) == [72, 101, 108, 108, 111, 44, 32, 19990, 30028]   "},{"title":"count​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#count","content":"def count(needle: str.type, start: [None, int.type] = None, end: [None, int.type] = None) -&gt; int.type  string.count: count the number of occurrences of a string in another string. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-2","content":"S.count(sub[, start[, end]]) returns the number of occcurences ofsub within the string S, or, if the optional substring indicesstart and end are provided, within the designated substring of S. They are interpreted according to Skylark's indexing conventions. This implementation does not count occurence of sub in the string Sthat overlap other occurence of S (which can happen if some suffix of S is a prefix of S). For instance, &quot;abababa&quot;.count(&quot;aba&quot;) returns 2 for [aba]a[aba], not counting the middle occurence: ab[aba]ba(this is following Python behavior). Examples: &quot;hello, world!&quot;.count(&quot;o&quot;) == 2 &quot;abababa&quot;.count(&quot;aba&quot;) == 2 &quot;hello, world!&quot;.count(&quot;o&quot;, 7, 12) == 1 # in &quot;world&quot;   "},{"title":"elems​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#elems","content":"def elems() -&gt; iter(str.type)  string.elems: returns an iterable of the bytes values of a string. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-3","content":"S.elems() returns an iterable value containing the sequence of numeric bytes values in the string S. To materialize the entire sequence of bytes, apply list(...) to the result. Example: Examples: list(&quot;Hello, 世界&quot;.elems()) == [ &quot;H&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot;, &quot;,&quot;, &quot; &quot;, &quot;世&quot;, &quot;界&quot;]   "},{"title":"endswith​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#endswith","content":"def endswith(suffix: [str.type, &quot;tuple&quot;]) -&gt; bool.type  string.endswith: determine if a string ends with a given suffix. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-4","content":"S.endswith(suffix) reports whether the string S has the specified suffix. Examples: &quot;filename.sky&quot;.endswith(&quot;.sky&quot;) == True   "},{"title":"find​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#find","content":"def find(needle: str.type, start: [None, int.type] = None, end: [None, int.type] = None) -&gt; int.type  string.find: find a substring in a string. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-5","content":"S.find(sub[, start[, end]]) returns the index of the first occurrence of the substring sub within S. If either or both of start or end are specified, they specify a subrange of S to which the search should be restricted. They are interpreted according to Skylark's indexing conventions. If no occurrence is found, found returns -1. Examples: &quot;bonbon&quot;.find(&quot;on&quot;) == 1 &quot;bonbon&quot;.find(&quot;on&quot;, 2) == 4 &quot;bonbon&quot;.find(&quot;on&quot;, 2, 5) == -1   "},{"title":"format​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#format","content":"def format(*args: UNKNOWN, **kwargs: UNKNOWN) -&gt; str.type  string.format: format a string. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-6","content":"S.format(*args, **kwargs) returns a version of the format string S in which bracketed portions {...} are replaced by arguments from args and kwargs. Within the format string, a pair of braces {{ or }} is treated as a literal open or close brace. Each unpaired open brace must be matched by a close brace }. The optional text between corresponding open and close braces specifies which argument to use and how to format it, and consists of three components, all optional: a field name, a conversion preceded by '!', and a format specifier preceded by ':'. {field} {field:spec} {field!conv} {field!conv:spec}  The field name may be either a decimal number or a keyword. A number is interpreted as the index of a positional argument; a keyword specifies the value of a keyword argument. If all the numeric field names form the sequence 0, 1, 2, and so on, they may be omitted and those values will be implied; however, the explicit and implicit forms may not be mixed. The conversion specifies how to convert an argument value x to a string. It may be either !r, which converts the value usingrepr(x), or !s, which converts the value using str(x) and is the default. The format specifier, after a colon, specifies field width, alignment, padding, and numeric precision. Currently it must be empty, but it is reserved for future use. Examples: &quot;a {} c&quot;.format(3) == &quot;a 3 c&quot; &quot;a{x}b{y}c{}&quot;.format(1, x=2, y=3) == &quot;a2b3c1&quot; &quot;a{}b{}c&quot;.format(1, 2) == &quot;a1b2c&quot; &quot;({1}, {0})&quot;.format(&quot;zero&quot;, &quot;one&quot;) == &quot;(one, zero)&quot; &quot;Is {0!r} {0!s}?&quot;.format(&quot;heterological&quot;) == &quot;Is \\&quot;heterological\\&quot; heterological?&quot;   "},{"title":"index​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#index","content":"def index(needle: str.type, start: [None, int.type] = None, end: [None, int.type] = None) -&gt; int.type  string.index: search a substring inside a string, failing on not found. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-7","content":"S.index(sub[, start[, end]]) returns the index of the first occurrence of the substring sub within S, like S.find, except that if the substring is not found, the operation fails. Examples: &quot;bonbon&quot;.index(&quot;on&quot;) == 1 &quot;bonbon&quot;.index(&quot;on&quot;, 2) == 4 &quot;bonbon&quot;.index(&quot;on&quot;, 2, 5) # error: not found   "},{"title":"isalnum​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#isalnum","content":"def isalnum() -&gt; bool.type  string.isalnum: test if a string is composed only of letters and digits. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-8","content":"S.isalnum() reports whether the string S is non-empty and consists only Unicode letters and digits. Examples: &quot;base64&quot;.isalnum() == True &quot;Catch-22&quot;.isalnum() == False   "},{"title":"isalpha​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#isalpha","content":"def isalpha() -&gt; bool.type  string.isalpha: test if a string is composed only of letters. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-9","content":"S.isalpha() reports whether the string S is non-empty and consists only of Unicode letters. Examples: &quot;ABC&quot;.isalpha() == True &quot;Catch-22&quot;.isalpha() == False &quot;&quot;.isalpha() == False   "},{"title":"isdigit​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#isdigit","content":"def isdigit() -&gt; bool.type  string.isdigit: test if a string is composed only of digits. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-10","content":"S.isdigit() reports whether the string S is non-empty and consists only of Unicode digits. Examples: &quot;123&quot;.isdigit() == True &quot;Catch-22&quot;.isdigit() == False &quot;&quot;.isdigit() == False   "},{"title":"islower​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#islower","content":"def islower() -&gt; bool.type  string.islower: test if all letters of a string are lowercase. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-11","content":"S.islower() reports whether the string S contains at least one cased Unicode letter, and all such letters are lowercase. Examples: &quot;hello, world&quot;.islower() == True &quot;Catch-22&quot;.islower() == False &quot;123&quot;.islower() == False   "},{"title":"isspace​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#isspace","content":"def isspace() -&gt; bool.type  string.isspace: test if all characters of a string are whitespaces. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-12","content":"S.isspace() reports whether the string S is non-empty and consists only of Unicode spaces. Examples: &quot; &quot;.isspace() == True &quot;\\r\\t\\n&quot;.isspace() == True &quot;&quot;.isspace() == False   "},{"title":"istitle​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#istitle","content":"def istitle() -&gt; bool.type  string.istitle: test if the string is title cased. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-13","content":"S.istitle() reports whether the string S contains at least one cased Unicode letter, and all such letters that begin a word are in title case. Examples: &quot;Hello, World!&quot;.istitle() == True &quot;Catch-22&quot;.istitle() == True &quot;HAL-9000&quot;.istitle() == False &quot;123&quot;.istitle() == False   "},{"title":"isupper​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#isupper","content":"def isupper() -&gt; bool.type  string.isupper: test if all letters of a string are uppercase. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-14","content":"S.isupper() reports whether the string S contains at least one cased Unicode letter, and all such letters are uppercase. Examples: &quot;HAL-9000&quot;.isupper() == True &quot;Catch-22&quot;.isupper() == False &quot;123&quot;.isupper() == False   "},{"title":"join​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#join","content":"def join(to_join: iter(str.type)) -&gt; str.type  string.join: join elements with a separator. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-15","content":"S.join(iterable) returns the string formed by concatenating each element of its argument, with a copy of the string S between successive elements. The argument must be an iterable whose elements are strings. Examples: &quot;, &quot;.join([]) == &quot;&quot; &quot;, &quot;.join((&quot;x&quot;, )) == &quot;x&quot; &quot;, &quot;.join([&quot;one&quot;, &quot;two&quot;, &quot;three&quot;]) == &quot;one, two, three&quot; &quot;a&quot;.join(&quot;ctmrn&quot;.elems()) == &quot;catamaran&quot;   "},{"title":"lower​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#lower","content":"def lower() -&gt; str.type  string.lower: test if all letters of a string are lowercased. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-16","content":"S.lower() returns a copy of the string S with letters converted to lowercase. Examples: &quot;Hello, World!&quot;.lower() == &quot;hello, world!&quot;   "},{"title":"lstrip​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#lstrip","content":"def lstrip(chars: [None, str.type] = None) -&gt; str.type  string.lstrip: trim leading whitespaces. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-17","content":"S.lstrip() returns a copy of the string S with leading whitespace removed. In most cases instead of passing an argument you should use removeprefix. Examples: &quot; hello &quot;.lstrip() == &quot;hello &quot; &quot;x!hello &quot;.lstrip(&quot;!x &quot;) == &quot;hello &quot;   "},{"title":"partition​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#partition","content":"def partition(needle: str.type) -&gt; (str.type, str.type, str.type)  string.partition: partition a string in 3 components "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-18","content":"S.partition(x = &quot; &quot;) splits string S into three parts and returns them as a tuple: the portion before the first occurrence of string x,x itself, and the portion following it. If S does not contain x, partition returns (S, &quot;&quot;, &quot;&quot;). partition fails if x is not a string, or is the empty string. Examples: &quot;one/two/three&quot;.partition(&quot;/&quot;) == (&quot;one&quot;, &quot;/&quot;, &quot;two/three&quot;) &quot;one&quot;.partition(&quot;/&quot;) == (&quot;one&quot;, &quot;&quot;, &quot;&quot;)   "},{"title":"removeprefix​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#removeprefix","content":"def removeprefix(prefix: str.type) -&gt; str.type  string.removeprefix: remove a prefix from a string. Not part of standard Starlark. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-19","content":"If the string starts with the prefix string, return string[len(prefix):]. Otherwise, return a copy of the original string: Examples: &quot;Hello, World!&quot;.removeprefix(&quot;Hello&quot;) == &quot;, World!&quot; &quot;Hello, World!&quot;.removeprefix(&quot;Goodbye&quot;) == &quot;Hello, World!&quot; &quot;Hello&quot;.removeprefix(&quot;Hello&quot;) == &quot;&quot;   "},{"title":"removesuffix​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#removesuffix","content":"def removesuffix(suffix: str.type) -&gt; str.type  string.removesuffix: remove a prefix from a string. Not part of standard Starlark. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-20","content":"If the string starts with the prefix string, return string[len(prefix):]. Otherwise, return a copy of the original string: Examples: &quot;Hello, World!&quot;.removesuffix(&quot;World!&quot;) == &quot;Hello, &quot; &quot;Hello, World!&quot;.removesuffix(&quot;World&quot;) == &quot;Hello, World!&quot; &quot;Hello&quot;.removesuffix(&quot;Hello&quot;) == &quot;&quot;   "},{"title":"replace​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#replace","content":"def replace(old: str.type, new: str.type, count: [None, int.type] = None) -&gt; str.type  string.replace: replace all occurences of a subtring. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-21","content":"S.replace(old, new[, count]) returns a copy of string S with all occurrences of substring old replaced by new. If the optional argument count, which must be an int, is non-negative, it specifies a maximum number of occurrences to replace. Examples: &quot;banana&quot;.replace(&quot;a&quot;, &quot;o&quot;) == &quot;bonono&quot; &quot;banana&quot;.replace(&quot;a&quot;, &quot;o&quot;, 2) == &quot;bonona&quot; &quot;banana&quot;.replace(&quot;z&quot;, &quot;x&quot;) == &quot;banana&quot; &quot;banana&quot;.replace(&quot;&quot;, &quot;x&quot;) == &quot;xbxaxnxaxnxax&quot; &quot;banana&quot;.replace(&quot;&quot;, &quot;x&quot;, 2) == &quot;xbxanana&quot; &quot;&quot;.replace(&quot;&quot;, &quot;x&quot;) == &quot;x&quot; &quot;# ); &quot;banana&quot;.replace(&quot;a&quot;, &quot;o&quot;, -2) # error: argument was negative &quot;#, &quot;argument was negative&quot;);   "},{"title":"rfind​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#rfind","content":"def rfind(needle: str.type, start: [None, int.type] = None, end: [None, int.type] = None) -&gt; int.type  string.rfind: find the last index of a substring. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-22","content":"S.rfind(sub[, start[, end]]) returns the index of the substring subwithin S, like S.find, except that rfind returns the index of the substring's last occurrence. Examples: &quot;bonbon&quot;.rfind(&quot;on&quot;) == 4 &quot;bonbon&quot;.rfind(&quot;on&quot;, None, 5) == 1 &quot;bonbon&quot;.rfind(&quot;on&quot;, 2, 5) == -1   "},{"title":"rindex​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#rindex","content":"def rindex(needle: str.type, start: [None, int.type] = None, end: [None, int.type] = None) -&gt; int.type  string.rindex: find the last index of a substring, failing on not found. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-23","content":"S.rindex(sub[, start[, end]]) returns the index of the substring subwithin S, like S.index, except that rindex returns the index of the substring's last occurrence. Examples: &quot;bonbon&quot;.rindex(&quot;on&quot;) == 4 &quot;bonbon&quot;.rindex(&quot;on&quot;, None, 5) == 1 # in &quot;bonbo&quot; &quot;bonbon&quot;.rindex(&quot;on&quot;, 2, 5) # error: not found   "},{"title":"rpartition​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#rpartition","content":"def rpartition(needle: str.type) -&gt; (str.type, str.type, str.type)  string.rpartition: partition a string in 3 elements. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-24","content":"S.rpartition([x = ' ']) is like partition, but splits S at the last occurrence of x. Examples: &quot;one/two/three&quot;.rpartition(&quot;/&quot;) == (&quot;one/two&quot;, &quot;/&quot;, &quot;three&quot;) &quot;one&quot;.rpartition(&quot;/&quot;) == (&quot;&quot;, &quot;&quot;, &quot;one&quot;)   "},{"title":"rsplit​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#rsplit","content":"def rsplit(sep: [None, str.type] = None, maxsplit: [None, int.type] = None) -&gt; [str.type]  string.rsplit: splits a string into substrings. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-25","content":"S.rsplit([sep[, maxsplit]]) splits a string into substrings likeS.split, except that when a maximum number of splits is specified,rsplit chooses the rightmost splits. Examples: &quot;banana&quot;.rsplit(&quot;n&quot;) == [&quot;ba&quot;, &quot;a&quot;, &quot;a&quot;] &quot;banana&quot;.rsplit(&quot;n&quot;, 1) == [&quot;bana&quot;, &quot;a&quot;] &quot;one two three&quot;.rsplit(None, 1) == [&quot;one two&quot;, &quot;three&quot;]   "},{"title":"rstrip​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#rstrip","content":"def rstrip(chars: [None, str.type] = None) -&gt; str.type  string.rstrip: trim trailing whitespace. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-26","content":"S.rstrip() returns a copy of the string S with trailing whitespace removed. In most cases instead of passing an argument you should use removesuffix. Examples: &quot; hello &quot;.rstrip() == &quot; hello&quot; &quot; hello!x&quot;.rstrip(&quot; x!&quot;) == &quot; hello&quot;   "},{"title":"split​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#split","content":"def split(sep: [None, str.type] = None, maxsplit: [None, int.type] = None) -&gt; [str.type]  string.split: split a string in substrings. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-27","content":"S.split([sep [, maxsplit]]) returns the list of substrings of S, splitting at occurrences of the delimiter string sep. Consecutive occurrences of sep are considered to delimit empty strings, so 'food'.split('o') returns ['f', '', 'd']. Splitting an empty string with a specified separator returns ['']. If sep is the empty string, split fails. If sep is not specified or is None, split uses a different algorithm: it removes all leading spaces from S (or trailing spaces in the case of rsplit), then splits the string around each consecutive non-empty sequence of Unicode white space characters. If S consists only of white space, split returns the empty list. If maxsplit is given and non-negative, it specifies a maximum number of splits. Examples: &quot;one two three&quot;.split() == [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;] &quot;one two three&quot;.split(&quot; &quot;) == [&quot;one&quot;, &quot;two&quot;, &quot;&quot;, &quot;three&quot;] &quot;one two three&quot;.split(None, 1) == [&quot;one&quot;, &quot;two three&quot;] &quot;banana&quot;.split(&quot;n&quot;) == [&quot;ba&quot;, &quot;a&quot;, &quot;a&quot;] &quot;banana&quot;.split(&quot;n&quot;, 1) == [&quot;ba&quot;, &quot;ana&quot;]   "},{"title":"splitlines​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#splitlines","content":"def splitlines(keepends: bool.type = None) -&gt; [str.type]  string.splitlines: return the list of lines of a string. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-28","content":"S.splitlines([keepends]) returns a list whose elements are the successive lines of S, that is, the strings formed by splitting S at line terminators ('\\n', '\\r' or '\\r\\n'). The optional argument, keepends, is interpreted as a Boolean. If true, line terminators are preserved in the result, though the final element does not necessarily end with a line terminator. Examples: &quot;one\\n\\ntwo&quot;.splitlines() == [&quot;one&quot;, &quot;&quot;, &quot;two&quot;] &quot;one\\n\\ntwo&quot;.splitlines(True) == [&quot;one\\n&quot;, &quot;\\n&quot;, &quot;two&quot;] &quot;a\\nb&quot;.splitlines() == [&quot;a&quot;, &quot;b&quot;]   "},{"title":"startswith​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#startswith","content":"def startswith(prefix: [str.type, &quot;tuple&quot;]) -&gt; bool.type  string.startswith: test wether a string starts with a given prefix. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-29","content":"S.startswith(suffix) reports whether the string S has the specified prefix. Examples: &quot;filename.sky&quot;.startswith(&quot;filename&quot;) == True &quot;filename.sky&quot;.startswith(&quot;sky&quot;) == False 'abc'.startswith(('a', 'A')) == True 'ABC'.startswith(('a', 'A')) == True 'def'.startswith(('a', 'A')) == False   "},{"title":"strip​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#strip","content":"def strip(chars: [None, str.type] = None) -&gt; str.type  string.strip: trim leading and trailing whitespaces. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-30","content":"S.strip() returns a copy of the string S with leading and trailing whitespace removed. Examples: &quot; hello &quot;.strip() == &quot;hello&quot; &quot;xxhello!!&quot;.strip(&quot;x!&quot;) == &quot;hello&quot;   "},{"title":"title​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#title","content":"def title() -&gt; str.type  string.title: convert a string to title case. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-31","content":"S.lower() returns a copy of the string S with letters converted to titlecase. Letters are converted to uppercase at the start of words, lowercase elsewhere. Examples: &quot;hElLo, WoRlD!&quot;.title() == &quot;Hello, World!&quot;   "},{"title":"upper​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#upper","content":"def upper() -&gt; str.type  string.upper: convert a string to all uppercase. "},{"title":"Details​","type":1,"pageTitle":"string","url":"/docs/generated/native/standard/string/#details-32","content":"S.lower() returns a copy of the string S with letters converted to lowercase. Examples: &quot;Hello, World!&quot;.upper() == &quot;HELLO, WORLD!&quot;  "},{"title":"Getting Started","type":0,"sectionRef":"#","url":"/docs/getting_started/","content":"","keywords":""},{"title":"Bootstrapping Buck2​","type":1,"pageTitle":"Getting Started","url":"/docs/getting_started/#bootstrapping-buck2","content":"Install ReindeerGenerate the BUCK files with Reindeerbuck2 build cli:buck2 "},{"title":"buck 1 Documentation Import","type":0,"sectionRef":"#","url":"/docs/legacy/","content":"buck 1 Documentation Import This folder contains documentation pulled from the Buck 1 website at https://buck.build/. The folders include the following: ├── README.md ├── about │ ├── faq.md │ ├── fast.md │ ├── performance.md │ └── troubleshooting.md ├── basics │ ├── cheatsheet.md │ ├── getting-started.md │ ├── key-concepts │ └── tutorials.md ├── concepts │ ├── buck-daemon.md │ ├── build-file.md │ ├── build-rule.md │ ├── build-target-pattern.md │ ├── build-target.md │ ├── skylark.md │ └── visibility.md └── files-and-directories ├── buck-out.md └── dot-buckconfig.md Feel free to contact Brian Johnson (brianjo) with any questions for further cleanup of this documentation.","keywords":""},{"title":"FAQ","type":0,"sectionRef":"#","url":"/docs/legacy/about/faq/","content":"FAQ Q: Why is it called Buck?​ A: The word &quot;buck&quot; is similar to the word &quot;build&quot; and is quick to type. It also has awesome mascot potential.","keywords":""},{"title":"What Makes Buck so Fast?","type":0,"sectionRef":"#","url":"/docs/legacy/about/fast/","content":"","keywords":""},{"title":"Buck builds dependencies in parallel​","type":1,"pageTitle":"What Makes Buck so Fast?","url":"/docs/legacy/about/fast/#buck-builds-dependencies-in-parallel","content":"Buck is designed so that any input files required by a build target must be specified in the build rule for that target. Therefore, we can know that the directed acyclic graph (DAG) that Buck constructs from the build rule is an accurate reflection of the build's dependencies, and that once a rule's dependencies are satisfied, the target for that rule can be built. Having a DAG makes it straightforward for rules to be built in parallel, which can dramatically reduce build times. Buck starts with the leaf nodes of the graph, that is, targets that have no dependencies. Buck adds these to a queue of targets to build. When a thread is available, Buck removes a target from the front of the queue and builds it. Assuming the target builds successfully, Buck notifies all of the rules that depend on that target. When all of a rule's dependencies have been satisfied, Buck adds that rule's target to the build queue. Computation proceeds in this manner until all of the nodes in the graph have been built. This execution model means that breaking modules into finer dependencies creates opportunities for increased parallelism, which improves throughput. "},{"title":"Buck uses only first-order dependencies for Java​","type":1,"pageTitle":"What Makes Buck so Fast?","url":"/docs/legacy/about/fast/#buck-uses-only-first-order-dependencies-for-java","content":"When compiling Java, Buck uses first-order dependencies only, that is, dependencies that you specify explicitly in the deps argument of your build rule. This means that the compilation step in your build sees only explicitly-declared dependencies, not other libraries that those dependencies themselves depend on. Using only first-order dependencies dramatically shrinks the set of APIs that your Java code is exposed to, which dramatically reduces the scope of changes that will trigger a rebuild.NOTE: If your rule does, in fact, depend on a dependency of one of your explicitly-specified dependencies—such as a second-order dependency—you can make that dependency available to your rule by specifying it in an exported_deps argument in the rule of the explicitly-specified dependency. "},{"title":"Buck uses dependency files to trim over-specified inputs​","type":1,"pageTitle":"What Makes Buck so Fast?","url":"/docs/legacy/about/fast/#buck-uses-dependency-files-to-trim-over-specified-inputs","content":"Buck's low-level build rules specify all inputs—such as source files or the outputs from other build rules—that might contribute to the output when the build rule is executed. Normally, changes to any of these inputs result in a new RuleKey and therefore trigger a rebuild. However, in practice, it's not uncommon for these build rules to over-specify their inputs. A good example is Buck's C/C++ compilation rules. C/C++ compilation rules specify as inputs all headers found from the transitive closure of C/C++ library dependencies, even though in many cases only a small subset of these headers are actually used. For example, a C/C++ source file might use only one of many headers exported by a C/C++ library dependency. However, there's not enough information available before running the build to know if any given input is used, and so all inputs must be considered, which can lead to unnecessary rebuilding. In some cases, after the build completes, Buck can figure out the exact subset of the listed inputs that were actually used. In C/C++, compilers such as gcc provide a -M option which produces a dependency file. This file identifies the exact headers that were used during compilation. For supported rules, Buck uses this dependency file before the build, to try to avoid an unnecessary rebuilding: If the dependency file is available before the build, Buck reads the file and uses it to filter out unused inputs when constructing the RuleKey.If no dependency file is available before the build, Buck runs the build as normal and produces a dependency file. The dependency file is then available for subsequent builds. Note that dependency files are used only if the standard RuleKey—which considers all inputs—doesn't match. In cases where the RuleKey matches, the output from the rule can be fetched from the cache. "},{"title":"Performance Tuning","type":0,"sectionRef":"#","url":"/docs/legacy/about/performance/","content":"","keywords":""},{"title":"Performance Tuning Your Builds​","type":1,"pageTitle":"Performance Tuning","url":"/docs/legacy/about/performance/#performance-tuning-your-builds","content":"Buck does a lot of work to make builds as fast as possible, and we also give developers tools to figure out where the time is being spent inside of their builds. "},{"title":"Super Console​","type":1,"pageTitle":"Performance Tuning","url":"/docs/legacy/about/performance/#super-console","content":"When running Buck in an Ansi compliant terminal, Buck displays the break down of what each thread is doing, updated every 100ms, in what we affectionately call &quot;SuperConsole.&quot; While a build is running, this gives developers a good idea of what Buck is spending its time doing, and can often help people spot issues in their builds. If you want to see what happened after the fact or to have a trace you can send around your team, use Chrome Tracing. "},{"title":"Chrome Tracing​","type":1,"pageTitle":"Performance Tuning","url":"/docs/legacy/about/performance/#chrome-tracing","content":"The Chrome team has built an awesome framework for viewing performance traces right inside of Chrome. You can access this by going to chrome://tracing in your browser. Consult the trace viewer's project page for more information on the trace viewer and the file format. After Buck is done with each build, it will produce a Chrome Trace file that can be loaded up in chrome://tracing in the directory buck-out/log/traces/. Buck will save a file in the format build.[timestamp].trace, and then create a symlink from the most recent trace to build.trace. To load up this trace, visit chrome://tracing inside of Chrome, and hit &quot;Load&quot;. Load the trace file of interest, and look around to see where time was spent. Each row represents a different thread, and all of the steps taken for a given rule are logged underneath that rule. Additionally, we log information about how the rule was built and and the rule key for each artifact fetch. Press ? to get the help menu for the Chrome Trace Viewer. "},{"title":"Troubleshooting","type":0,"sectionRef":"#","url":"/docs/legacy/about/troubleshooting/","content":"","keywords":""},{"title":"Run buck clean​","type":1,"pageTitle":"Troubleshooting","url":"/docs/legacy/about/troubleshooting/#run-buck-clean","content":"Ideally, this solution will never work. Seriously. If Buck is working correctly, then it should know which files have been modified and which files need to be rebuilt. That said, Buck is not perfect, so it is possible that you have found a defect. In this case, give buck clean a shot and file a bug if you have found a reproducible bug. "},{"title":"Delete all generated files in your project.​","type":1,"pageTitle":"Troubleshooting","url":"/docs/legacy/about/troubleshooting/#delete-all-generated-files-in-your-project","content":"Buck is designed so that all generated files are written to the buck-out directory, which makes buck clean trivial to implement. However, you may use additional tools (such as an IDE) that generate files in other parts of the tree. Such files may inadvertently get included via glob() rules, which would interfere with Buck. For example, if you are using Git, then you can run: git clean -xfdn  to get a list of files in your project that are not under version control. The -n switch is for &quot;dry run,&quot; which means that Git will not delete any files when you run git clean. If you want to use Git to remove the generated files while preserving some non-versioned files (such as .buckconfig.local), then use it with the -e switch: git clean -xfd -e .buckconfig.local  Note that -e can be specified multiple times. "},{"title":"Buck Cheat Sheet","type":0,"sectionRef":"#","url":"/docs/legacy/basics/cheatsheet/","content":"","keywords":""},{"title":"How do I get a list of all the rules that Buck supports, *from the command line*, so that I can process them with** grep, **sed, etc?​","type":1,"pageTitle":"Buck Cheat Sheet","url":"/docs/legacy/basics/cheatsheet/#how-do-i-get-a-list-of-all-the-rules-that-buck-supports-from-the-command-line-so-that-i-can-process-them-with-grep-sed-etc","content":"Use buck audit with the ruletypes (plural) subcommand, which returns an alphabetized list of all the rules that Buck supports. The following command line uses buck audit ruletypes with the grep command to print all the build rules that have the string android in their names. buck audit ruletypes | grep android  Note that these are not all the rules that Buck provides for Android development. For example, the rules apk_genrule and ndk_library support Android development, but do not themselves contain the string android in their names. How do I see the arguments for a rule from the command line? Use buck audit with the ruletype (singular) subcommand followed by the name of the rule. The following command line uses buck audit ruletype to view the arguments supported by the remote_file rule. buck audit ruletype remote_file def remote_file ( name, sha1, url, labels = None, licenses = None, out = None, type = None, ): ...  "},{"title":"How do I find all the targets for a package?​","type":1,"pageTitle":"Buck Cheat Sheet","url":"/docs/legacy/basics/cheatsheet/#how-do-i-find-all-the-targets-for-a-package","content":"Specify a build target pattern that represents the targets in the package. buck query //path/to/dir/...  The buck query command can accept a build target pattern as a parameter. If you specify a build target pattern, Buck evaluates this pattern and shows all the build targets that match it. How do I specify more than one target to** **buck query? Use the buck query set() operator. The following command line returns the target main in the build file in the root of the Buck project and all the targets from the build file in the myclass subdirectory of the root. buck query &quot;set( '//:main' '//myclass:' )&quot;  "},{"title":"How do I get the attribute names and values for the targets returned by a query?​","type":1,"pageTitle":"Buck Cheat Sheet","url":"/docs/legacy/basics/cheatsheet/#how-do-i-get-the-attribute-names-and-values-for-the-targets-returned-by-a-query","content":"Add the --output-attributes option to the command line, followed by regular expressions that represent the attributes of interest. buck query &quot;deps(//foo:bar)&quot; --output-attributes 'name' 'exported_headers'  The --output-attributes option enables you to specify which attributes Buck should return. Instead of returning the names of the targets that match the query expression, Buck returns the names and values of the specified attributes for those targets in JSON format. Attributes are specified as regular expressions. For example, '.*' matches all attributes. See the buck query page for more details. The output for the example query above might look something like the following. {&quot;//foo/bar/lib:lib&quot; : {&quot;exported_headers&quot; : [ &quot;App/util.h&quot; ],&quot;name&quot; : &quot;lib&quot;},&quot;//foo/bar:app&quot; : {&quot;exported_headers&quot; : [ &quot;App/lib.h&quot; ],&quot;name&quot; : &quot;app&quot;}}  "},{"title":"How do I perform a query *inside* of a rule?​","type":1,"pageTitle":"Buck Cheat Sheet","url":"/docs/legacy/basics/cheatsheet/#how-do-i-perform-a-query-inside-of-a-rule","content":"Use string parameter macros, specifically, the query macros: $(query_targets &quot;queryfunction(//:foo)&quot;) $(query_outputs &quot;queryfunction(//:foo)&quot;) $(query_targets_and_outputs [SEPARATOR] &quot;queryfunction(//:foo)&quot;)  Note, however, that the query macros are supported only for genrule and apk_genrule. "},{"title":"How do I find the dependencies for a target?​","type":1,"pageTitle":"Buck Cheat Sheet","url":"/docs/legacy/basics/cheatsheet/#how-do-i-find-the-dependencies-for-a-target","content":"Use the deps() operator. buck query &quot;deps('//foo:bar')&quot; buck query &quot;deps('//foo:bar', 1, first_order_deps())&quot; buck query &quot;deps(set('//foo:bar' '//foo:lib' '//foo/baz:util'))&quot;  The deps operator finds the dependencies of the specified targets. The first argument represents the targets of interest. This can be a single build target or build target pattern, or a set of these. The optional second argument is the depth of the search for dependencies from the specified targets. For example, 1, as shown in the example above, returns only the direct dependencies. If you do not provide this argument, the output is the complete set of transitive dependencies. How do I find the reverse-dependencies for a target, that is, the targets that *depend on* a specified target? Use the buck query rdeps (reverse dependencies) operator. The following example, returns the targets in the transitive closure of //foo:bar that depend directly on //example:baz. buck query &quot;rdeps('//foo:bar', '//example:baz', 1)&quot;  "},{"title":"How do I find the buildfile that contains the target that owns a source file?​","type":1,"pageTitle":"Buck Cheat Sheet","url":"/docs/legacy/basics/cheatsheet/#how-do-i-find-the-buildfile-that-contains-the-target-that-owns-a-source-file","content":"In order to find the build file associated with a source file, combine the owner operator with buildfile. For example, buck query &quot;buildfile(owner('foo/bar/main.cpp'))&quot;  first finds the targets that own foo/bar/main.cpp and then returns the build files, such as foo/bar/BUCK, that define those targets. "},{"title":"Getting Started","type":0,"sectionRef":"#","url":"/docs/legacy/basics/getting-started/","content":"","keywords":""},{"title":"Quick Starts for various target platforms​","type":1,"pageTitle":"Getting Started","url":"/docs/legacy/basics/getting-started/#quick-starts-for-various-target-platforms","content":"Platform:\tAndroidiOSJavaOtherDevelopment OS:\tmacOSLinuxWindows While not a prerequisite for installing Buck itself, to build Android applications, you will also need at least the Android SDK and the Android NDK, which can be installed via Homebrew or manually downloaded and installed. The commands in this guide are designed to be copy-pasteable, idempotent, and usable on its representative operating system (macOS, Linux, Windows). Sometimes this results in some unusual constructions (such as using echo instead of vi or Emacs to create a file). Bear in mind that this is a quick start guide, and few things are quicker than copy-and-paste! "},{"title":"Install with Homebrew​","type":1,"pageTitle":"Getting Started","url":"/docs/legacy/basics/getting-started/#install-with-homebrew","content":"Buck is available as a bottle on Homebrew. "},{"title":"Prerequisites​","type":1,"pageTitle":"Getting Started","url":"/docs/legacy/basics/getting-started/#prerequisites","content":"Command Line ToolsJava Runtime Environment version 11 (support for future versions is in the works) If you have multiple installations of Java on your development computer, you might get warnings from Buck that you are using an unsupported version of Java. To resolve this issue, set the JAVA_HOME environment variable to the directory for version 8 of the Java Development Kit (JDK). Note that the directory that JAVA_HOME points to should contain a bin subdirectory which in turn contains binaries for the Java compiler (javac) and Java runtime (java). # Install command line tools. NOTE: If you have Xcode installed, these may # already be installed. xcode-select --install # Download and Install Java SE 8 from: +# https://www.oracle.com/technetwork/java/javase/downloads/index.html. +# This installs the JDK 8, a superset of the JRE. +# Alternatively, install AdoptOpenJDK 8 with Homebrew: +brew tap AdoptOpenJDK/openjdk +brew install --cask adoptopenjdk8  "},{"title":"Brew install​","type":1,"pageTitle":"Getting Started","url":"/docs/legacy/basics/getting-started/#brew-install","content":"You have two choices when using Homebrew. You can choose to get the latest binary release: brew tap facebook/fb brew install buck  Or, you can get the latest code and build it locally: brew update brew tap facebook/fb brew install --HEAD buck  "},{"title":"Build from Source​","type":1,"pageTitle":"Getting Started","url":"/docs/legacy/basics/getting-started/#build-from-source","content":""},{"title":"Prerequisites​","type":1,"pageTitle":"Getting Started","url":"/docs/legacy/basics/getting-started/#prerequisites-1","content":"To manually build Buck, download and install the following prerequisites: Command Line ToolsOracle Java Development Kit version 8 (support for future versions is in the works)Apache Ant 1.9 (or newer)Python 2.7GitWatchman We strongly recommended that you install Watchman. With watchman, Buck uses a daemon (buckd) which prevents Buck from needing to parse all of your build files every time you build—and it caches some other components of your build as well. You can use Homebrew to install many of the prerequisites on a Mac. # Install Command Line tools first. NOTE: If you have Xcode installed, these may # already be installed. xcode-select --install # Then the JDK (superset of the JRE) brew update brew tap caskroom/cask brew tap caskroom/versions brew cask install java8 # Then... brew install ant python git watchman  "},{"title":"Build​","type":1,"pageTitle":"Getting Started","url":"/docs/legacy/basics/getting-started/#build","content":"Once you have the above tools installed, you can build Buck as follows: git clone https://github.com/facebook/buck.git cd buck ant ./bin/buck build --show-output buck buck-out/gen/programs/buck.pex --help  If everything worked correctly, you should see something like: buck build tool usage: buck [options] buck command --help buck command [command-options] available commands: audit lists the inputs for the specified target build builds the specified target cache makes calls to the artifact cache clean deletes any generated files fetch downloads remote resources to your local machine install builds and installs an application kill kill buckd for the current project killall kill all buckd processes project generates project configuration files for an IDE query provides facilities to query information about the configured target nodes graph root prints the absolute path to the root of the current buck project run runs a target as a command server query and control the http server targets prints the list of buildable targets test builds and runs the tests for the specified target uninstall uninstalls an APK uquery provides facilities to query information about the unconfigured target nodes graph options: --help : Shows this screen and exits. --version (-V) : Show version number.  Because you will likely be running ./bin/buck often, you should add it to your path so that you can simply run buck from the command line. "},{"title":"Set Location of Android SDK and NDK​","type":1,"pageTitle":"Getting Started","url":"/docs/legacy/basics/getting-started/#set-location-of-android-sdk-and-ndk","content":"You will need to tell Buck where to find the Android SDK and NDK. To find the location of the Android SDK, Buck looks at the following values in the following order: ANDROID_SDK environment variableANDROID_HOME environment variableANDROID_SDK_ROOT environment variableThe value of the [android].sdk_path property in .buckconfig. To find the location of a specific NDK, Buck looks at the following values in the following order: ANDROID_NDK environment variable.NDK_HOME environment variable.The value of the [ndk].ndk_path property in .buckconfig. If you have multiple NDKs installed into a single enclosing directory, you can specify this directory to Buck using either of the following values: ANDROID_NDK_REPOSITORY environment variable.The [ndk].ndk_repository_path property in .buckconfig. If you specify both the environment variable and the .buckconfig setting, the environment variable takes precedence. If you specify an NDK repository, Buck selects the NDK based on the version that you specify in the [ndk].ndk_version property of .buckconfig. "},{"title":"Trying Buck​","type":1,"pageTitle":"Getting Started","url":"/docs/legacy/basics/getting-started/#trying-buck","content":"Now that Buck is installed, it is time to use Buck in a sample project. "},{"title":"Clone Buck samples repo​","type":1,"pageTitle":"Getting Started","url":"/docs/legacy/basics/getting-started/#clone-buck-samples-repo","content":"git clone https://github.com/fbsamples/bucksamples.git cd bucksamples/cross-platform-scale-2015-demo/  "},{"title":"Key Android Files​","type":1,"pageTitle":"Getting Started","url":"/docs/legacy/basics/getting-started/#key-android-files","content":"This sample app has all the files necessary to use Buck to build an Android project. From the root directory, you will find: android/java/com/facebook/buck/demo/Hello.java: The main Java file supported by other associated resources.android/BUCK: The build file is what makes Buck work. It defines all the build rules for your source code. A build rule can also include dependencies (generally via deps), which may be from other build files, as in the case of this app..buckconfig: A .buckconfig file allows for various flag and alias settings for any project (even beyond Android) within the root directory. "},{"title":"Configure the environment​","type":1,"pageTitle":"Getting Started","url":"/docs/legacy/basics/getting-started/#configure-the-environment","content":"Before building an app you need to configure environment variables to let Buck know the locations of Android SDK and Android NDK. First of all, check for existing variables: $ env | grep ANDROID_ ANDROID_HOME=&lt;path-to-sdk&gt; ANDROID_NDK_REPOSITORY=&lt;path-to-ndk&gt; ANDROID_SDK=&lt;path-to-sdk&gt; ANDROID_SDK_ROOT=&lt;path-to-sdk&gt;  Set the missing variables to the locations of Android SDK and Android NDK or set the paths in your .buckconfig file. Before building make sure you installed correct build tools and a target in Android SDK and correct version of Android NDK. You can find the required versions of these tools in .buckconfig: See [android].build_tools_version to get the version of build tools in Android SDK.[android].compile_sdk_version points to the Android SDK to build against.[ndk].ndk_version points to the version of Android NDK. Optionally: [android].sdk_path is an absolute path to the Android SDK.[ndk].ndk_path is an absolute path to the Android NDK.[ndk].ndk_repository_path is an absolute path to a directory that contains multiple Android NDKs in subdirectories. Buck selects which NDK to use based on the value of the [ndk].ndk_version property in .buckconfig. "},{"title":"Build the Android sample​","type":1,"pageTitle":"Getting Started","url":"/docs/legacy/basics/getting-started/#build-the-android-sample","content":"In order to build the app, you use the buck buildcommand, specifying your app as the target. The target may be defined in the [alias] section in the .buckconfig file or it would be the name of your Android project prepended by //[the directory where your project is located]: (e.g., //android:demo-app). # From the root `cross-platform-scale-2015-demo/` directory # demo_app_android is an alias in .buckconfig for //android:demo-app. Either works. buck build demo_app_android  You should see output similar to: export ANDROID_NDK=$HOME/android-sdk buck build demo_app_android [-] PROCESSING BUCK FILES...FINISHED 0.0s [100%] [-] DOWNLOADING... (0.00 B/S AVG, TOTAL: 0.00 B, 0 Artifacts) [-] BUILDING...FINISHED 0.7s [100%] (1/1 JOBS, 0 UPDATED, 0 [0.0%] CACHE MISS)  The first time you build, you will most likely see a longer time and cache misses. Subsequent builds should be much faster, with minimal cache misses. Buck outputs its results in the buck-out/ directory. "},{"title":"Run the built Android App​","type":1,"pageTitle":"Getting Started","url":"/docs/legacy/basics/getting-started/#run-the-built-android-app","content":"Now that you know your app has built successfully, you can install and run the app with buck install. This command both compiles and installs the application on the Android emulator. Using the --run flag will launch the emulator as well. buck install --run demo_app_android Installing apk on emulator-5554 (android-emulator). [-] PROCESSING BUCK FILES...FINISHED 0.1s [100%] [-] DOWNLOADING... (0.00 B/S AVG, TOTAL: 0.00 B, 0 Artifacts) [-] BUILDING...FINISHED 0.8s [100%] (1/1 JOBS, 0 UPDATED, 0 [0.0%] CACHE MISS) [+] INSTALLING...0.9s Successfully ran install apk //android:demo-app on 1 device(s) Starting activity com.facebook.buck.demo/.App... Successfully ran start activity on 1 device(s)  If you get an error either that you do not have certain Android add-ons (e.g., Google APIs) or that there is no emulator to run, you should launch the Android SDK Manager (e.g., android sdk) and install the appropriate packages and/or run your emulator (usually found under Tools | Manage AVDs). "},{"title":"Success!​","type":1,"pageTitle":"Getting Started","url":"/docs/legacy/basics/getting-started/#success","content":"If all goes well, you should see something similar to: "},{"title":"Key concepts","type":0,"sectionRef":"#","url":"/docs/legacy/basics/key-concepts/","content":"","keywords":""},{"title":"Buck's dependency graph​","type":1,"pageTitle":"Key concepts","url":"/docs/legacy/basics/key-concepts/#bucks-dependency-graph","content":"Every build rule can have zero or more dependencies. You can specify these dependencies using, for example, the deps argument to the build rule. For more information about specifying dependencies, consult the reference page for the build rule you are using. These dependencies form a directed graph, called the target graph. Buck requires the graph to be acyclic. When building the output of a build rule, all of the rule's transitive dependencies are built first. This means that the graph is built in a &quot;bottom-up&quot; fashion. A build rule knows only which rules it depends on, not which rules depend on it. This makes the graph easier to reason about and enables Buck to identify independent subgraphs that can be built in parallel. It also enables Buck to determine the minimal set of build targets that need to be rebuilt. For more information about how Buck leverages the graph of build dependencies, see What Makes Buck so Fast. "},{"title":"Multiple Buck projects in a single repository​","type":1,"pageTitle":"Key concepts","url":"/docs/legacy/basics/key-concepts/#multiple-buck-projects-in-a-single-repository","content":"Buck is designed to build multiple deliverables from a single repository—that is, a monorepo—rather than from multiple repositories. Support for the monorepo design motivated Buck's support for cells and projects. It is Facebook's experience that maintaining all dependencies in the same repository makes it easier to ensure that all developers have the correct version of the code and simplifies the process of making atomic commits. "},{"title":"Tutorials","type":0,"sectionRef":"#","url":"/docs/legacy/basics/tutorials/","content":"","keywords":""},{"title":"Path Setup​","type":1,"pageTitle":"Tutorials","url":"/docs/legacy/basics/tutorials/#path-setup","content":"Add Buck to your $PATH and set up buckd: sudo ln -s ${PWD}/bin/buck /usr/bin/buck sudo ln -s ${PWD}/bin/buckd /usr/bin/buckd  "},{"title":"Create Project​","type":1,"pageTitle":"Tutorials","url":"/docs/legacy/basics/tutorials/#create-project","content":"We are going to build a sample application. We should start our project in an empty directory, so create a new one and navigate to it: mkdir -p ~/my-first-buck-project/ cd ~/my-first-buck-project/  Note: the following instructions will now assume that all commands are run from your ~/my-first-buck-project directory. "},{"title":"Compile Your Code​","type":1,"pageTitle":"Tutorials","url":"/docs/legacy/basics/tutorials/#compile-your-code","content":"Android applications are typically written in Java and kotlin, so the first thing we will do is to configure Buck to compile code against the Android API. To do so, Buck needs to know where your Android SDK is. Assuming that your Android SDK is installed in ~/android-sdk, run the following command to set a ANDROID_SDK environment variable that tells Buck where to find your Android SDK: export ANDROID_SDK=$HOME/android-sdk  Now that Buck can locate your Android SDK, it is time to compile some Java code. First, we create a simple Activity at java/com/example/activity/MyFirstActivity.java: mkdir -p java/com/example/activity/ echo &quot;package com.example.activity; import android.app.Activity; import android.os.Bundle; public class MyFirstActivity extends Activity { @Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); } }&quot; &gt; java/com/example/activity/MyFirstActivity.java  Now we need a build file that defines a build rule to compile this Java code, so we create an android_library() rule in java/com/example/activity/BUCK: echo &quot;android_library( name = 'activity', srcs = glob(['*.java']), visibility = [ 'PUBLIC' ], )&quot; &gt; java/com/example/activity/BUCK  Now we can compile our Java code using Buck: buck build //java/com/example/activity:activity  Buck generates its output in the buck-out directory, so this is a good time to specify buck-out as something that should be ignored by your version control system. "},{"title":"Package Resources​","type":1,"pageTitle":"Tutorials","url":"/docs/legacy/basics/tutorials/#package-resources","content":"Android applications frequently contain resources, such as strings and images. For this example, we will create a trivial Android resource bundle that contains a single string: mkdir -p res/com/example/activity/res/values/ echo &quot;&lt;?xml version='1.0' encoding='utf-8' ?&gt; &lt;resources&gt; &lt;string name='app_name'&gt;Hello World&lt;/string&gt; &lt;/resources&gt;&quot; &gt; res/com/example/activity/res/values/strings.xml  Buck needs a way to reference this collection of resources, so we need to create a build file that defines an android_resource rule: echo &quot;android_resource( name = 'res', res = subdir_glob([('res', '**')]), package = 'com.example', visibility = [ '//apps/myapp:', ], )&quot; &gt; res/com/example/activity/BUCK  "},{"title":"Create a Keystore​","type":1,"pageTitle":"Tutorials","url":"/docs/legacy/basics/tutorials/#create-a-keystore","content":"In practice, you will want to be able to test your Android app on a physical Android device, which means that it needs to be signed. We will create app-specific information, such as the key and manifest, in its own directory to keep things tidy: mkdir -p apps/myapp/  To keep things simple, we will create a self-signed certificate for debugging. Unfortunately, this is not a one-liner because there is a number of prompts from the keytool command. keytool -genkey -keystore apps/myapp/debug.keystore -alias my_alias \\ -keyalg RSA -keysize 2048 -validity 10000  When prompted for a keystore password, just use android (and then type it again to confirm it), and hit Enter to accept the default values for name, organizational unit, etc. Then create a .properties file that stores all of this information: echo &quot;key.alias=my_alias key.store.password=android key.alias.password=android&quot; &gt; apps/myapp/debug.keystore.properties  "},{"title":"Build an APK​","type":1,"pageTitle":"Tutorials","url":"/docs/legacy/basics/tutorials/#build-an-apk","content":"An Android application needs a manifest named AndroidManifest.xml, so we must create such a file: echo &quot;&lt;?xml version='1.0' encoding='utf-8'?&gt; &lt;manifest xmlns:android='http://schemas.android.com/apk/res/android' package='com.example' &gt; &lt;application android:label='@string/app_name' android:hardwareAccelerated='true'&gt; &lt;activity android:name='.activity.MyFirstActivity'&gt; &lt;intent-filter&gt; &lt;action android:name='android.intent.action.MAIN' /&gt; &lt;category android:name='android.intent.category.LAUNCHER' /&gt; &lt;/intent-filter&gt; &lt;/activity&gt; &lt;/application&gt; &lt;/manifest&gt;&quot; &gt; apps/myapp/AndroidManifest.xml  Now we define an android_binary and keystore rule in our build file: echo &quot;android_binary( name = 'app', manifest = 'AndroidManifest.xml', manifest_entries = { 'version_code': 1, 'version_name': '1.0', 'min_sdk_version': 26, 'target_sdk_version': 29 }, keystore = ':debug_keystore', deps = [ '//java/com/example/activity:activity', '//res/com/example/activity:res', ], ) keystore( name = 'debug_keystore', store = 'debug.keystore', properties = 'debug.keystore.properties', )&quot; &gt; apps/myapp/BUCK  Building an android_binary rule will produce an APK: buck build //apps/myapp:app  Alternatively, if you have an Android device connected to your computer, you can build and install the APK in one step with buck install: buck install //apps/myapp:app  "},{"title":"Create an Alias​","type":1,"pageTitle":"Tutorials","url":"/docs/legacy/basics/tutorials/#create-an-alias","content":"Typing buck build //apps/myapp:app every time you want to rebuild your APK can be tedious. Fortunately, Buck makes it possible to define an alias for a build target. An alias can always be used in place of a build target when using Buck's command-line interface. Aliases must be defined in the [alias] a config file in the root of the project: echo &quot;[alias] app = //apps/myapp:app&quot; &gt; .buckconfig  With this alias in place, the command to build and install the APK is much shorter and easier to remember: buck install app  "},{"title":"Create an IntelliJ Project​","type":1,"pageTitle":"Tutorials","url":"/docs/legacy/basics/tutorials/#create-an-intellij-project","content":"You likely want to develop your Android app using an IDE. Fortunately, Buck can generate an IntelliJ project from the build rules you defined in your build files. In order to ensure that IntelliJ recognizes where your Java folders are, you need to specify the [java].src_roots in your .buckconfig file: echo &quot;[java] src_roots = /java/&quot; &gt;&gt; .buckconfig  Now you can create the IntelliJ project by running buck project: buck project --ide intellij  Note that you will likely want to exclude these generated files from version control, so add the following to your .gitignore file (or .hgignore if you are using Mercurial) along with the files generated by buckd: echo &quot;/.buckd /buck-out *.iml /.idea/compiler.xml /.idea/libraries/*.xml /.idea/modules.xml /.idea/runConfigurations/Debug_Buck_test.xml&quot; &gt; .gitignore  Now you can build your Android application from either IntelliJ or the command line. "},{"title":"Buck Daemon (buckd)","type":0,"sectionRef":"#","url":"/docs/legacy/concepts/buck-daemon/","content":"","keywords":""},{"title":"Killing or disabling the Buck daemon​","type":1,"pageTitle":"Buck Daemon (buckd)","url":"/docs/legacy/concepts/buck-daemon/#killing-or-disabling-the-buck-daemon","content":"The Buck daemon process is killed if the buck clean command is run. You can also kill the Buck daemon explicitly by running buck kill in the directory tree for your project. Note that if—for some reason—multiple instances of the daemon are running, the buck kill command kills only one of them.If the daemon is killed, you might experience a significant delay the next time that you invoke a Buck command as the daemon restarts. "},{"title":"Build File","type":0,"sectionRef":"#","url":"/docs/legacy/concepts/build-file/","content":"Build File A build file is a file, typically named BUCK, that defines one or more build rules. Note that you can change the name that Buck uses for the build file in the buildfile section of .buckconfig. A source file in your project can only be referenced by rules in its &quot;nearest&quot; build file, where &quot;nearest&quot; means its closest direct ancestor in your project's file tree. (If a source file has a build file as a sibling, then that is its nearest ancestor.) For example, if your project had the following BUCK files: java/com/facebook/base/BUCK java/com/facebook/common/BUCK java/com/facebook/common/collect/BUCK Then your build rules would have the following constraints: Rules in java/com/facebook/base/BUCK can reference any file under java/com/facebook/base/.Rules in java/com/facebook/common/ can reference any files under that directory, except for those under java/com/facebook/common/collect/, as those &quot;belong&quot; to the BUCK file in the collect directory. The set of source files accessible to a build file is also known as its build package. The way to refer to code across build packages is to create build rules and use deps to refer to that code. Going back to the previous example, suppose code in java/com/facebook/common/concurrent/ wants to depend on code in java/com/facebook/common/collect/. Presumably java/com/facebook/common/collect/BUCK has a build rule like: java_library( name = 'collect', srcs = glob(['*.java']), deps = ['//java/com/facebook/base:base',],) Then java/com/facebook/common/BUCK could have a rule like: java_library( name = 'concurrent', srcs = glob(['concurrent/*.java']), deps = ['//java/com/facebook/base:base','//java/com/facebook/common/collect:collect',],) whereas the following would be invalid because java/com/facebook/common/collect/ has its own build file, so //java/com/facebook/common/collect:concurrent cannot list java/com/facebook/common/collect/*.java in its srcs. java_library( name = 'concurrent', srcs = glob(['collect/*.java', 'concurrent/*.java']), deps = ['//java/com/facebook/base:base',],) ","keywords":""},{"title":"Build Rule","type":0,"sectionRef":"#","url":"/docs/legacy/concepts/build-rule/","content":"","keywords":""},{"title":"Buck's collection of build rules​","type":1,"pageTitle":"Build Rule","url":"/docs/legacy/concepts/build-rule/#bucks-collection-of-build-rules","content":"Buck comes with a collection of built-in build rules for many common build procedures. For example, compiling Java code against the Android SDK is a common procedure, so Buck provides the build rule android_library to do that. Similarly, the final product of most Android development is an APK, so you can use the build rule android_binary to create an APK. This documentation organizes Buck's build rules by development language and by target platform. Examples are: C++, Java, Python (development languages) and Android, iOS, .NET (target platforms). Consult the table of contents to locate the build rules that are appropriate for your development project. You can view a list of Buck's build rules from the command line with the command: buck audit ruletypes  You can view the arguments supported by a particular rule with the command: buck audit ruletype &lt;rule&gt;  Note that the first of these commands uses the plural ruletypes, and the second uses the singular ruletype. For more information, see the buck audit documentation. "},{"title":"Source files as inputs to build rules​","type":1,"pageTitle":"Build Rule","url":"/docs/legacy/concepts/build-rule/#source-files-as-inputs-to-build-rules","content":"Most build rules specify source files as inputs. For example, a cxx_library rule would specify .cpp files as inputs. To support specifying these files, a cxx_library rule provides the srcs argument. Some languages, such as C++, use header files as well. To specify these, cxx_library provides a headers argument. In addition to srcs and headers, some rules provide variants of these arguments, such as platform_srcs and platform_headers. These arguments support groups of source files that should be used as inputs only when building for specific platforms. For more information, see the descriptions for platform_srcs and platform_headers in, for example, the cxx_library topic. "},{"title":"Package boundaries and access to source files​","type":1,"pageTitle":"Build Rule","url":"/docs/legacy/concepts/build-rule/#package-boundaries-and-access-to-source-files","content":"In Buck, a BUCK file defines a package, which corresponds roughly to the directory that contains the BUCK file and those subdirectories that do not themselves contain BUCK files. (To learn more, see the Key Concepts topic.) A rule in a BUCK file cannot specify a source file as an input unless that source file is in that BUCK file's package. An exception to this restriction exists for header files, but only if a rule in the package that contains the header file exports that header file using the exported_headers argument. For more details, see the description for exported_headers in, for example, the cxx_library topic. More commonly though, the package for a BUCK file contains all the source files required for the rules defined in that BUCK file. Functionality in source files from other packages is made available through the artifacts produced by the rules in the BUCK files for those packages. For example, a cxx_binary might use the functionality in a cxx_library that is defined in another package. To access that functionality, the cxx_binary would take that cxx_library as a dependency. Symlinks: Use with caution if at all​ We recommend that you do not use symlinks—either absolute or relative—to specify input files to build rules. Although using symlinks in this context does sometimes work, it can lead to unexpected behavior and errors. "},{"title":"Dependencies: Output from one rule as input to another rule​","type":1,"pageTitle":"Build Rule","url":"/docs/legacy/concepts/build-rule/#dependencies-output-from-one-rule-as-input-to-another-rule","content":"A build rule can use the output from another build rule as one of its inputs by specifying that rule as a dependency. Typically, a build rule specifies its dependencies as a list of build targets in its deps argument. However, the rule can also specify dependencies—as build targets—in other arguments, such as srcs.Example: The output of a java_library rule is a JAR file. If a java_library rule specifies another java_library rule as a dependency, the JAR file produced by the specified rule is added to the classpath for the java_library that depends on it.Example: If a java_binary rule specifies a java_library rule as a dependency, the JAR file for the specified java_library is available on the classpath for the java_binary. In addition, in the case of java_binary, the JAR files for any dependencies of the java_library rule are also made available to the java_binary rule—and if those dependencies have dependencies of their own, they are added as well. This exhaustive cascade of dependencies is referred to as the rule's transitive closure. "},{"title":"Required dependencies are always built first​","type":1,"pageTitle":"Build Rule","url":"/docs/legacy/concepts/build-rule/#required-dependencies-are-always-built-first","content":"Buck guarantees that any dependencies that a rule lists that are required in order to build that rule are built successfully before Buck builds the rule itself. Note though that there can be special cases—such as apple_bundle—where a rule's listed dependencies do not actually need to be built before the rule. "},{"title":"Visibility​","type":1,"pageTitle":"Build Rule","url":"/docs/legacy/concepts/build-rule/#visibility","content":"In order for a build rule to take a dependency on another build rule, the build rule on which the dependency is taken must be visible to the build rule taking the dependency. A build rule's visibility argument is a list of build target patterns that specify the rules that can take that rule as a dependency. For more information about the concept of visibility in Buck, see the Visibility topic. "},{"title":"Dependencies define a graph​","type":1,"pageTitle":"Build Rule","url":"/docs/legacy/concepts/build-rule/#dependencies-define-a-graph","content":"Build rules and their dependencies define a directed acyclic graph (DAG). Buck requires this graph to be acyclic to make it possible to build independent subgraphs in parallel. "},{"title":"How to handle special cases: genrules and macros​","type":1,"pageTitle":"Build Rule","url":"/docs/legacy/concepts/build-rule/#how-to-handle-special-cases-genrules-and-macros","content":"Although Buck provides a rich set of built-in build rules for developers, it is not able to address all possible needs. As an &quot;escape hatch,&quot; Buck provides a category of generic build rules called genrules. With genrules, you can perform arbitrary operations using shell scripts. The genrules supported by Buck are: genruleapk_genrulecxx_genrule "},{"title":"Multiple output files with genrules​","type":1,"pageTitle":"Build Rule","url":"/docs/legacy/concepts/build-rule/#multiple-output-files-with-genrules","content":"In most cases, a build rule produces exactly one output file. However, with genrules, you can specify an output directory and write arbitrary files to that directory. "},{"title":"Macros​","type":1,"pageTitle":"Build Rule","url":"/docs/legacy/concepts/build-rule/#macros","content":"Finally, note that you can define functions that generate build rules. In general, this should not be something that you need to do, but taking advantage of this option might help you add needed functionality to Buck's without editing its source code. For more details, see the Custom Macros topic. "},{"title":"Build Target Pattern","type":0,"sectionRef":"#","url":"/docs/legacy/concepts/build-target-pattern/","content":"","keywords":""},{"title":"Build target patterns are not allowed in the deps argument​","type":1,"pageTitle":"Build Target Pattern","url":"/docs/legacy/concepts/build-target-pattern/#build-target-patterns-are-not-allowed-in-the-deps-argument","content":"Build target patterns cannot be used with the deps argument of a build rule. Buck requires that you specify all dependencies explicitly as either fully-qualified or relative build targets. By making dependencies explicit, Buck prevents build rules from inadvertently adding new dependencies, which can result in non-reproducible builds. In addition, if the added dependencies are not actually required, they can unnecessarily drive up the computational cost of the build. "},{"title":"Target aliases​","type":1,"pageTitle":"Build Target Pattern","url":"/docs/legacy/concepts/build-target-pattern/#target-aliases","content":"Buck supports the ability to define aliases for build targets; using aliases can improve brevity when specifying targets on the Buck command line. For more information, see the [alias] section in the documentation for .buckconfig. "},{"title":"Build Target","type":0,"sectionRef":"#","url":"/docs/legacy/concepts/build-target/","content":"","keywords":""},{"title":"Command-line Pro Tips​","type":1,"pageTitle":"Build Target","url":"/docs/legacy/concepts/build-target/#command-line-pro-tips","content":"Here are some ways that you can reduce your typing when you specify build targets as command-line arguments to the buck build or buck run commands. Consider the following example of a fully-qualified build target used with the buck build command: buck build //java/com/facebook/share:share  Although Buck is always strict when parsing build targets in build files, Buck is flexible when parsing build targets on the command-line. Specifically, the leading // is optional on the command line, so the above could be: buck build java/com/facebook/share:share  Also, if there is a forward slash before the colon, it is ignored, so this could also be written as: buck build java/com/facebook/share/:share  which enables you to produce the red text shown below using tab-completion, which dramatically reduces how much you need to type: buck build java/com/facebook/share/:share  Finally, if the final path element matches the value specified after the colon, it can be omitted: # This is treated as //java/com/facebook/share:share. buck build java/com/facebook/share/  which makes the build target even easier to tab-complete. For this reason, the name of the build rule for the primary deliverable in a build file is often named the same as the parent directory. That way, it can be built from the command-line with less typing. "},{"title":"See also​","type":1,"pageTitle":"Build Target","url":"/docs/legacy/concepts/build-target/#see-also","content":"Buck supports the ability to define aliases for build targets; using aliases can improve brevity when specifying targets on the Buck command line. For more information, see the [alias] section in the documentation for .buckconfig. A build target pattern is a string that describes a set of one or more build targets. For example, the pattern //... is used to build an entire project. For more information, see the Build Target Pattern topic. "},{"title":"Visibility","type":0,"sectionRef":"#","url":"/docs/legacy/concepts/visibility/","content":"","keywords":""},{"title":"Examples​","type":1,"pageTitle":"Visibility","url":"/docs/legacy/concepts/visibility/#examples","content":"A common library like Guava should be able to be included by any build rule: prebuilt_jar( name = 'guava', binary_jar = 'guava-14.0.1.jar', visibility = ['PUBLIC',],)  It is common to restrict the visibility of Android resources to the Java code that uses it: android_resource( name = 'ui_res', res = 'res', package = 'com.example', visibility = ['//java/com/example/ui:ui',],)  Or it may be simpler to make it visible to the entire directory in case additional build rules are added to java/com/example/ui/BUCK: android_resource( name = 'ui_res', res = 'res', package = 'com.example', visibility = ['//java/com/example/ui:',],)  Also, it is common to limit code for testing to be visible only to tests. If you define all of your Java unit tests in a folder named javatests/ in the root of your project, then you could define the following rule to ensure that only allow build rules under javatests/ can depend on JUnit: prebuilt_jar( name = 'junit', binary_jar = 'junit-4.11.jar', visibility = ['//javatests/...',],)  Finally, restricting the view of a target can be useful for preventing dependency creep: java_library( name = 'example', visibility = ['PUBLIC',], within_view = ['//foo:bar','//hello:world',],)  "},{"title":"buck-out","type":0,"sectionRef":"#","url":"/docs/legacy/files-and-directories/buck-out/","content":"buck-out Buck stores build artifacts in a directory named buck-out in the root of your project. You should not make assumptions about where Buck places your build artifacts within the directory structure beneath buck-out as these locations depend on Buck's implementation and could potentially change over time. Instead, to obtain the location of the build artifact for a particular target, use the --show-output option with the buck build or the buck targets command. buck targets --show-output &lt;target&gt; buck build --show-output &lt;target&gt; You can also obtain the locations of your build artifacts by specifying either the --build-report or--keep-going options with buck build. Note that --show-output is going to be deprecated soon for buck build and replaced with --show-outputs. --show-outputs may print more than one build artifact per build target. buck build --build-report &lt;target&gt; buck build --keep-going &lt;target&gt; For more information about these options, see the topics for the buck build and buck targets commands.","keywords":""},{"title":".buckconfig","type":0,"sectionRef":"#","url":"/docs/legacy/files-and-directories/dot-buckconfig/","content":"","keywords":""},{"title":"Performance impact of Buck configuration changes​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#performance-impact-of-buck-configuration-changes","content":"Also, because configuration settings are sometimes included in the cache keys that Buck uses in its caching system, changes to Buck's configuration can invalidate previously-built artifacts in Buck's caches. If this occurs, Buck rebuilds those artifacts, which can impact your build time. "},{"title":"The .buckconfig file uses the INI file format​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#the-buckconfig-file-uses-the-ini-file-format","content":"The .buckconfig file uses the INI file format. That is, it is divided into sections where each section contains a collection of key names and key values. The .buckconfig implementation supports some modifications to the INI file format; these are discussed below. "},{"title":"Other INI file parsers​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#other-ini-file-parsers","content":"As mentioned previously, we have extended the INI file parser that Buck uses to parse configuration files. As a result, INI file parsers provided by other languages or libraries are often not able to parse Buck's configuration files successfully. "},{"title":"Dot character not supported in section names​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#dot-character-not-supported-in-section-names","content":"We do not support the use of the dot character (.) in section names within Buck configuration files. For example, the following is not supported—although Buck does not issue a warning or error. [foo.bar] baz=1  Note that sometimes you might need to define your own custom sections, such as for platform flavors for C++ or Python. These scenarios are examples of when you should be careful not to introduce the dot character in section names. This constraint is because Buck uses the dot character to delimit section names and key names in other contexts such as the --config command-line parameter. For information about --config, see the Common Parameters topic. "},{"title":"Character encoding​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#character-encoding","content":"To ensure that any character can be encoded in a .buckconfig key value, you can use escape sequences to encode characters that would otherwise be problematic. The following escape sequences are supported. \\\\\tbackslash\\&quot;\tdouble quote \\n\tnewline \\r\tcarriage return \\t\ttab \\x##\tUnicode character with code point ## (in hex) \\u####\tUnicode character with code point #### (in hex) \\U########\tUnicode character with code point ######## (in hex) "},{"title":"Key values as lists​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#key-values-as-lists","content":"Although the standard INI format supports only key values that represent a single item, Buck supports key values that represent a list of items. The syntax is to separate the items in the list using the space (0x20) character. For example, a key value for the list of command-line flags to be passed to a compiler could be represented as a list of the flags separated by spaces: flags = -foo -bar -baz -qux  When a key value is parsed as a list instead of a single item, the separator character is interpreted as a separator only when it occurs outside of double quotes. For example, if flags is a key value interpreted as a list of items separated by spaces, then flags = -foo &quot;-bar \\u0429&quot;  results in the two strings: foo and -bar Щ; the space character between -bar and \\u0429 is not interpreted as a separator. "},{"title":"Transclusion of values from one key to another​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#transclusion-of-values-from-one-key-to-another","content":"Values from other keys can be transcluded into the current key using the following syntax inside the current key value. $(config &lt;section&gt;.&lt;field&gt;)  For example, to use the [go].vendor_path in a custom setting: [custom_section]custom_value = $(config go.vendor_path)  "},{"title":"Comments​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#comments","content":"In addition to the semicolon (;), you can use the pound sign (#), as a comment character in .buckconfig. "},{"title":".buckconfig.local​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#buckconfiglocal","content":"The root of your project may contain a second configuration file named .buckconfig.local. Its format is the same as that of .buckconfig, but settings in .buckconfig.local override those in .buckconfig. In practice, .buckconfig is a version-controlled file that contains settings that are applicable to all team members, whereas .buckconfig.local is excluded from version control to allow users to define personal settings, such as personal aliases. "},{"title":"Other initialization files​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#other-initialization-files","content":"In addition to the .buckconfig and .buckconfig.local files in the project root, Buck reads configuration settings from the following additional locations, some of which are actually directories: Directory .buckconfig.d located in the project root directory.File .buckconfig and directory .buckconfig.d located in the current user's home directory which, on Unix-like systems, is available from the HOME environment variable or through the ~ symbol.File buckconfig and directory buckconfig.d located in system directory /etc/. Buck treats any file—irrespective of name—in a .buckconfig.d(buckconfig.d) directory (excluding files found in subdirectories) as a Buck configuration file, provided that it adheres to .buckconfig syntax. Note that a .buckconfig.d directory is distinct from the similarly-named .buckd directory which is used by the Buck Daemon (buckd) . For a description of how Buck resolves collisions between settings in these configuration files, see the section Precedence of Buck configuration specificationsbelow. "},{"title":"Command-line control of configuration​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#command-line-control-of-configuration","content":"In addition to the above configuration files, Buck supports specifying additional configuration files from the Buck command line using the --config-file parameter. You can also specify configuration settings individually on the Buck command line using the --config (-c) parameter. Furthermore, you can aggregate these settings into flag files using the --flagfile parameter. A flag file provides similar functionality to a configuration file but uses a different syntax. Flag files are sometimes called mode files or at (@) files. For more information about the --config-file and --flagfile parameters, see the Common Parameters topic. "},{"title":"Precedence of Buck configuration specifications​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#precedence-of-buck-configuration-specifications","content":"The following list shows the order of precedence for how Buck interprets its configuration specifications. Settings specified using a method closer to the top of the list have higher precedence and will override those lower on the list. For example, the .buckconfig file in the project directory overrides a .buckconfig file in the user's HOME directory. Configuration specified on the command line using --config (-c), --config-file and --flagfile. Configuration specified later on the command line overrides configuration specified earlier..buckconfig.local in the project directory..buckconfig in the project directory..buckconfig in the HOME directory.Files in a .buckconfig.d subdirectory of the project directory, irrespective of filename.Files in a .buckconfig.d subdirectory of the HOME directory, irrespective of filename.buckconfig in the /etc/ directory.Files in a buckconfig.d subdirectory of the /etc/ directory, irrespective of filename. Files in a .buckconfig.d (buckconfig.d) directory have precedence according to the lexicographical order of their file names. Files later in the lexicographical order have precedence over files earlier in that order. "},{"title":"Configuration files can include other files​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#configuration-files-can-include-other-files","content":"Any of the configuration files that we've discussed so far can also include by reference other files that contain configuration information. These included files can contain complete .buckconfig sections or they can contain a group of key name/value pairs that constitute part of a section. In this second use case, you'll need to ensure that the included file is referenced beneath the appropriate section in the including file. Because of this additional complexity, we recommend that you include only files that contain complete sections.Note: Inclusion of files is a Buck-specific extension to the INI file parser that Buck uses. Therefore, if you use this feature, your Buck configuration files will probably not be parsable by other more-generic INI file parsers. The syntax to include a file is &lt;file:*path-to-included-file*&gt;  where path-to-included-file is either a relative path from the including file (recommended) or an absolute path from the root of the file system. You can also specify that the file should be included only if it exists by prefixing with a question mark (?). &lt;?file:*path-to-included-file*&gt;  If you use this prefix, it is not an error condition if the file does not exist; Buck just silently continues to process the rest of the configuration file. In the following example, the .buckconfig file includes the file cxx-other-platform.include which exists in the subdirectory cxx-other-platform. The .buckconfig file will also include the file future-platform from the directory future-platform.include if that file exists. # # .buckconfig # [cxx] cxxppflags=&quot;-D MYMACRO=\\&quot;Buck\\&quot;&quot; &lt;file:cxx-other-platform/cxx-other-platform.include&gt; &lt;?file:future-platform/future-platform.include&gt; # # cxx-other-platform.include # [cxx#other_platform] cxxppflags=&quot;-D MYMACRO=\\&quot;Watchman\\&quot;&quot;  "},{"title":"Sections​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#sections","content":"The following sections are recognized by Buck:[adb][alias][android][apple][build][buildfile][cache][client][color][credentials][cxx][d][doctor][download][dx][export_file][go][groovy][halide][httpserver][incompatible][intellij][java][kotlin][log][lua][maven_repositories][ndk][ocaml][parser][project][python][repositories][resources][resources_per_rule][rust][sandbox][test][thrift][tools][ui][worker] "},{"title":"[adb]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#adb","content":"This section configures adb behavior. "},{"title":"adb_restart_on_failure​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#adb_restart_on_failure","content":"This specifies whether to restart adb on failure or not. [adb]adb_restart_on_failure = true  "},{"title":"multi_install_mode​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#multi_install_mode","content":"This specifies whether multi-install mode is enabled or disabled by default. [adb]multi_install_mode = false  "},{"title":"[alias]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#alias","content":"This section contains definitions of build target aliases. [alias]app = //apps/myapp:app apptest = //apps/myapp:test  These aliases can then be used from the command line: $ buck build app $ buck test apptest  You can also suffix aliases with flavors: $ buck build app#src_jar# This will expand the alias and effectively build the target returned by: $ buck targets --resolve-alias app#src_jar//apps/myapp:app#src_jar  "},{"title":"[android]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#android","content":"This section configures android-specific build behavior. "},{"title":"build_tools_version​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#build_tools_version","content":"This specifies the version of the Android SDK Build-tools that all Android code in the project should be built against. By default, Buck will select the newest version found on the system. [android]build_tools_version = 23.0.1  "},{"title":"compile_sdk_version​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#compile_sdk_version","content":"This specifies the version of the Android SDK that all Android code in the project should be built against. Even if not specified, the version that Buck chose to use will be printed to the console during the build. A list of valid values on your system can be found by running android list target --compact. [android]compile_sdk_version = Google Inc.:Google APIs:21  "},{"title":"sdk_path​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#sdk_path","content":"This specifies the absolute path to the Android SDK that all Android code in the project should be built against. The default is empty. Setting this property has the same effect as if you had set either of the following environment variables to the same value: ANDROID_SDKANDROID_SDK_ROOTANDROID_HOME Note that Buck gives precedence to the values of these environment variables—in the order in which they are listed above—over the value of this property in .buckconfig. [android]sdk_path = /Library/Android/sdk  "},{"title":"[apple]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#apple","content":"This section includes settings that control settings that are specific to Apple platform rules. "},{"title":"asset_catalog_validation​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#asset_catalog_validation","content":"Buck can check errors in .xcassets' contents that can later cause silent failures, like having multiple images with the same name or missing Contents.json files. To add extra validation above what Xcode does, set this option to STRICT. [apple]asset_catalog_validation = XCODE  "},{"title":"codesign​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#codesign","content":"To override a default path to codesign, set this setting to either a file path or buck target. [apple]codesign = //path/to/target/that/creates:codesign  "},{"title":"codesign_timeout​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#codesign_timeout","content":"The timeout of the code-signing step in seconds. The value is set to 300 seconds by default if not specified explicitly. [apple]codesign_timeout = 600  "},{"title":"code_sign_identities_command​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#code_sign_identities_command","content":"Specifies a command with any optional arguments that Buck will use to get the current key fingerprints available for code signing. This command should output a list of hashes and common names to standard output in the same format as security find-identity -v -p codesigning. If unspecified, Buck will use security find-identity -v -p codesigning. [apple]code_sign_identities_command = path/to/command --arg1 --arg2  "},{"title":"default_debug_info_format_for_binaries​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#default_debug_info_format_for_binaries","content":"default_debug_info_format_for_binaries setting controls the default debug info format that is used when building binary targets. If you don't specify it, DWARF_AND_DSYM value will be used. You can disable debug data by specifying NONE value. You can produce unstripped binary by specifyingDWARF value. [apple]default_debug_info_format_for_binaries = NONE  "},{"title":"default_debug_info_format_for_libraries​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#default_debug_info_format_for_libraries","content":"default_debug_info_format_for_libraries setting controls the default debug info format that is used when building dynamic library targets. If you don't specify it, DWARF value will be used. You can disable debug data by specifying NONE value. You can produce dSYM file for the library by specifyingDWARF_AND_DSYM value. [apple]default_debug_info_format_for_libraries = DWARF  "},{"title":"default_debug_info_format_for_tests​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#default_debug_info_format_for_tests","content":"default_debug_info_format_for_tests setting controls the default debug info format that is used when building test targets. If you don't specify it, DWARF value will be used. You can disable debug data by specifying NONE value. You can produce dSYM file by specifyingDWARF_AND_DSYM value. [apple]default_debug_info_format_for_tests = DWARF_AND_DSYM  "},{"title":"device_helper_path​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#device_helper_path","content":"If you want to have Buck be able to install to devices, you need to provide the path to the fbsimctl binary. [apple]device_helper_path = third-party/fbsimctl/fbsimctl  "},{"title":"ipa_compression_level​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#ipa_compression_level","content":"Specify a compression level used when creating ipa. The possible values are: none: Do not compress ipa.min: Use minimum compression level.default (default): Use medium compression level.max: Use maximum compression level. If omitted, the default value will be used. [apple]ipa_compression_level = min  "},{"title":"provisioning_profile_read_command​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#provisioning_profile_read_command","content":"Specifies a command with any optional arguments that Buck will use to decode Apple's provisioning profiles for iOS builds. The full path of the provisioning profile will be appended after the command and any arguments specified here. If unspecified, Buck will use openssl smime -inform der -verify -noverify -in. [apple]provisioning_profile_read_command = path/to/command --arg1 --arg2  "},{"title":"provisioning_profile_search_path​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#provisioning_profile_search_path","content":"Specifies a path where Buck will look for provisioning profiles (files with extension .mobileprovision) that it can use to provision the application to be used on a device. You can specify either an absolute path or one relative to the project root. If unspecified, Buck will look in ~/Library/MobileDevice/Provisioning Profiles. [apple]provisioning_profile_search_path = path/to/provisioning/profiles  "},{"title":"target_sdk_version​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#target_sdk_version","content":"For each platform, you can specify the target SDK version to use. The format is {platform}_target_sdk_version. [apple]iphonesimulator_target_sdk_version = 7.0 iphoneos_target_sdk_version = 7.0 macosx_target_sdk_version = 10.9  "},{"title":"test_log​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#test_log","content":"When running Apple tests via xctool, Buck can set environment variables to tell the tests where to write debug logs and what log level to use. By default, Buck tells xctool to set two environment variables named FB_LOG_DIRECTORYand FB_LOG_LEVEL when running tests which you can read from your test environment:  FB_LOG_DIRECTORY=buck-out/gen/path/to/logs FB_LOG_LEVEL=debug  You can override the default names for these environment variables and the value for the debug log level via the following config settings:  [apple] test_log_directory_environment_variable=MY_LOG_DIRECTORY test_log_level_environment_variable=MY_LOG_LEVEL test_log_level=verbose  "},{"title":"use_flavored_cxx_sections​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#use_flavored_cxx_sections","content":"By default, Buck uses the C/C++ toolchain and flag settings in the cxxsection to extend Apple C/C++ platform. With this parameter set, Buck will instead use settings in cxx# sections (e.g. cxx#macosx-x86_64.cxx_flags=-foo). [apple]use_flavored_cxx_sections = true  "},{"title":"use_header_maps_in_xcode​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#use_header_maps_in_xcode","content":"Xcode projects generated by Buck by default use header maps for header search paths. This speeds up builds for large projects over using regular directory header search paths, but breaks some Xcode features, like header file name autocompletion. If that is an issue, use the following option to disable the use of header maps. [apple]use_header_maps_in_xcode = false  "},{"title":"xcode_developer_dir​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#xcode_developer_dir","content":"By default, Buck will use the output of xcode-select --print-path to determine where Xcode's developer directory is. However, you can specify a directory in the config to override whatever value that would return. [apple]xcode_developer_dir = path/to/developer/directory  "},{"title":"xcode_developer_dir_for_tests​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#xcode_developer_dir_for_tests","content":"Optionally override the Xcode developer directory for running tests, if you want them to be run with a different Xcode version than the version used for building. If absent, falls back to xcode_developer_dir and finally xcode-select --print-path. [apple]xcode_developer_dir_for_tests = path/to/developer/directory/for_tests  "},{"title":"xctool_default_destination_specifier​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#xctool_default_destination_specifier","content":"This setting is passed directly to xctool, and then toxcodebuild as the -destination argument. [apple]xctool_default_destination_specifier = platform=iOS Simulator  For more detail, see the man page for xcodebuild. To access the man page, type the following from your Terminal prompt: man xcodebuild  and then use / to search for the string Destinations. "},{"title":"xctool_path​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#xctool_path","content":"If you want to run tests with Buck, you will need to get xctool and tell Buck where to find it. This setting lets you specify a path to a binary. You should use either this setting or [apple].xctool_zip_target. [apple]xctool_path = path/to/binary/of/xctool  "},{"title":"xctool_zip_target​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#xctool_zip_target","content":"If you want to run tests with Buck, you will need to get xctool and tell Buck where to find it. This setting lets you specify a build target. You should use either this setting or [apple].xctool_path. [apple]xctool_zip_target = //path/to/target/that/creates:xctool-zip  "},{"title":"*_package_command​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#_package_command","content":"Specify a custom command to run for apple_package() rules. The syntax of this field is similar to the cmd field of genrule, and supports some expansions:SRCSExpands to the absolute path of the bundle argument output to theapple_package() rule.OUTExpands to the output file for the apple_package() rule. The file specified by this variable must always be written by this command.SDKROOTExpands to the SDK root directory for the requested SDK. For example,/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS9.2.sdk/. Note that since strings in the config can be quoted, literal quotes can only be written by quoting the string and use escaped quotes. If omitted, this will revert to the built-in behavior. When this option is specified, *_package_extension must also be specified. [apple]iphoneos_package_command = &quot;\\&quot;$PLATFORM_DIR/Developer/usr/bin/PackageApplication\\&quot; \\&quot;$SRCS\\&quot; \\&quot;$OUT\\&quot;&quot; iphoneos_package_extension = zip  "},{"title":"*_package_extension​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#_package_extension","content":"Specify the output extension for custom apple_package rules configured with*_package_command. This config option must be specified when *_package_command is specified, or both omitted. "},{"title":"*_replacement​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#_replacement","content":"Replace Xcode provided tools from imported SDKs and toolchains. Input path must point to a valid executable file. This takes precedence over apple.*_xcode_tool_name_override which only searches for replacement within workspace. [apple]*_replacement = /usr/bin/true  "},{"title":"*_toolchains_override​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#_toolchains_override","content":"Specify a comma-delimited custom list of toolchains to use when building with a particular SDK. This is the Buck equivalent of the TOOLCHAINS environment variable when building with Xcode. If omitted, this will revert to the built-in behavior. osx_toolchains_override = tools.stable,tools.swift40,tools.common  "},{"title":"*_version_override​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#_version_override","content":"Specify version string to use for Xcode tool. By default, Xcode tool's version value is calculated automatically from its container SDK and toolchain. But in some cases (e.g. when tools are overridden by apple.*_replacement), it needs to be manually overridden in order to prevent rule key collision. [apple]actool_replacement=/some/path/to/custom/actool actool_version_override=custom_actool_1.0  "},{"title":"*_xcode_tool_name_override​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#_xcode_tool_name_override","content":"Specify custom Xcode tool name to use in place of existing one. When set, buck will lookup Xcode search paths to locate the tool, and use it for tool invocations. This value is ignored when apple.*_replacement for the same tool is set. [apple]# Use (my_clang|my_actool) executable which exists in one of the# imported SDKs and toolchains, instead of the defaults.clang_xcode_tool_name_override=my_clang actool_xcode_tool_name_override=my_actool  "},{"title":"[build]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#build","content":"This section includes settings that control build engine behavior. "},{"title":"artifact_cache_size_limit​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#artifact_cache_size_limit","content":"Specifies the maximum size, in bytes, of a build artifact (output file) that Buck caches. # # Use a limit of 50 MB. # artifact_cache_size_limit = 52428800  This value is optional. If you do not specify a value, then it sets no limit to the size of an artifact that Buck caches—but see note below regarding distributed caches.Note: This value sets an upper bound on artifact size for all values of [cache].mode. The parameter [cache].http_max_store_size sets an artifact size limit only for distributed cache modes (http and thrift_over_http). Therefore, it is not meaningful to set a value for http_max_store_size which is larger than the value of artifact_cache_size_limit. "},{"title":"delete_temporaries​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#delete_temporaries","content":"If true, Buck deletes some temporary files immediate after executing a build rule. This is useful for conserving disk space when performing large builds. By default, temporary files are not deleted. [build]delete_temporaries = false  "},{"title":"depfiles​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#depfiles","content":"Configures the use of dependency files for rules that support them. This is an optimization that is useful when dependencies are over-specified and the rule can dynamically determine the subset of dependencies it actually needs. The possible values are: enabled: Use dependency files to avoid unnecessary rebuilds.cache (default): Use dependency files to avoid unnecessary rebuilds and to store/fetch artifacts to/from the cache.disabled: Do not use dependency files for rebuild detection. [build]depfiles = cache  "},{"title":"engine​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#engine","content":"This has two possible values that change the behavior of how Buck operates when building a build target: shallow (default): only the required transitive dependencies of a build target are materialized locally. Cache hits can result in missing transitive dependencies that are not needed for the final output.deep: ensure that all transitive dependencies of a build target are materialized locally. [build]engine = shallow  "},{"title":"max_depfile_cache_entries​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#max_depfile_cache_entries","content":"Sets the maximum size of the depfile cache for each input source file. This is only used when setting [build].depfiles to cache. An ideal setting for this should be big enough for the working set of all possible header states that a given unchanged source file uses. [build]max_depfile_cache_entries = 256  "},{"title":"network_threads​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#network_threads","content":"The number of threads to be used for network I/O. The default value is number of cores of the machine. [build]network_threads = 8  "},{"title":"rule_key_caching​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#rule_key_caching","content":"Enables caching of rule key calculations between builds when using the Buck daemon. [build]rule_key_caching = true  "},{"title":"threads​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#threads","content":"Sets the maximum number of threads to use for building. By default, Buck uses the number of available cores multiplied by 1.25. [build]threads = 4  "},{"title":"thread_core_ratio​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#thread_core_ratio","content":"Sets the maximum number of threads to use for building as a ratio of the number of available cores (e.g. 0.75 on a 4 core machine would limit building to 3 threads, or a value of 1.25 on the same machine would attempt to use 5 threads). [build]thread_core_ratio = 0.75  "},{"title":"thread_core_ratio_max_threads​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#thread_core_ratio_max_threads","content":"The maximum number of threads to use when calculating the number of build threads from thread_core_ratio. (e.g. a value of 2 on a 4 core machine would ensure that, at most, 2 threads were used, and value of 10 on a 40 core machine would ensure that, at most, 10 threads were used). [build]thread_core_ratio_max_threads = 10  "},{"title":"thread_core_ratio_min_threads​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#thread_core_ratio_min_threads","content":"The minimum number of threads to use when calculating the number of build threads from thread_core_ratio. (e.g. a value of 1 on a 4 core machine would ensure that, at least, 1 thread was used, and value of 4 on a 40 core machine would ensure that, at least, 10 threads were used). [build]thread_core_ratio_min_threads = 1  "},{"title":"thread_core_ratio_reserved_cores​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#thread_core_ratio_reserved_cores","content":"Limit the maximum number of build threads to be the number of detected cores minus this value. (e.g. a value of 1 on a 4 core machine would ensure that, at most, 3 cores were used, and a value of 2 on a 40 core machine would ensure that, at most, 38 cores were used). [build]thread_core_ratio_reserved_cores = 1  "},{"title":"type​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#type","content":"Sets the type of the build that buck has been built with. This allows buck to distinguish different kinds of builds. When you run ant locally, this will be automatically set to LOCAL_ANT. When you build buck using buck locally, e.g. buck build buck, this will be automatically set to LOCAL_PEX. If you are deploying buck through central deployment system, you may want to set build type to RELEASE_PEX: buck build buck --config build.type=RELEASE_PEX  Note: this setting does not affect how buck builds other rules. It only affects the way how buck will build buck. [build]type = RELEASE_PEX  "},{"title":"[buildfile]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#buildfile","content":"This section includes settings that control build file behavior. "},{"title":"includes​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#includes","content":"This sets a list of paths to files that will be automatically included by every build file. This is equivalent to calling include_defs() in every build file.NOTE: We recommend that you do not use this property. This property can make your builds difficult to maintain and debug, and it will be deprecated in a future release of Buck. [buildfile]includes = //core/DEFS  "},{"title":"name​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#name","content":"The name of build files within a project. This defaults to BUCK. We recommend that you use the default name. However, you could specify a different name—such as TARGETS shown below—in order to support, for example, a legacy project that used different buildfile naming conventions. [buildfile]name = TARGETS  "},{"title":"[cache]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#cache","content":"This section configures build artifact caching. Caching can be configured to use the local filesystem, an SQLite database, or a remote distributed cache that can be shared among developers. Caching is disabled by default. The [cache].mode setting—described below—determines which properties are relevant to the caching configuration; other properties are ignored by Buck. "},{"title":"mode​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#mode","content":"A comma-separated list of caching policies to use. Valid values are: dir (default): Use a directory-based cache on the local filesystem.http: Use an http-based cache. See Binary HTTP Cache API.thrift_over_http: Use an http-based cache that uses thrift for object metadata. See Thrift over HTTP Cache API.sqlite: Use a SQLite-based cache that inlines small artifacts in the database and stores large artifacts on the local filesystem. [cache]mode = dir, http, sqlite  "},{"title":"dir​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#dir","content":"The path to use for directory-based caching. The path can be: An absolute path in your local file system, such as /Volumes/mySSD/cache. A path relative to your home directory, that uses tilde (~) expansion. such as ~/local/cache. A path that is relative to the root of your Buck project, such as buck-out/cache, which is the default.[cache].mode must contain dir. [cache]dir = buck-out/cache  "},{"title":"dir_cache_names​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#dir_cache_names","content":"A comma-separated list of names used to configure multiple dir caches. The caches will be used serially in the order in which their names are specified here. If an artifact is found further along in the list, an attempt to store it in the caches earlier in the list will be made. In the following example, if the artifact is found in the warm cache, it will not be stored in the local cache. Note: if [cache] dir or [cache] dir_mode are found, then Buck will fall back to single dir cache more and [cache] dir_cache_names will be completely ignored.[cache].mode must contain dir. [cache]mode = dir dir_cache_names = warm, local [cache#warm]dir = ~/prefetched_cache dir_mode = readonly [cache#local]dir = ~/buck_cache dir_mode = readwrite  "},{"title":"dir_max_size​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#dir_max_size","content":"The maximum cache size for directory-based caching. The default size is unlimited.[cache].mode must contain dir. [cache]dir_max_size = 10GB  "},{"title":"dir_mode​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#dir_mode","content":"Dictates if the cache is readonly, passthrough, or readwrite (default) when using directory-based caching.[cache].mode must contain dir. [cache]dir_mode = readwrite  "},{"title":"serve_local_cache​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#serve_local_cache","content":"Make the directory-based cache available to other hosts on the network via Buck's HTTP server (enabled under [httpserver]).[cache].mode must contain dir. [cache]serve_local_cache = false  "},{"title":"served_local_cache_mode​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#served_local_cache_mode","content":"Dictates if the cache is readonly (default) or readwrite when [cache].serve_local_cache is enabled.[cache].mode must contain dir. [cache]served_local_cache_mode = readwrite  "},{"title":"http_url​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#http_url","content":"The URL to use to contact the cache when using http-based caching. Buck communicates with the server using a simple API.[cache].mode must contain http. [cache]http_url = http://localhost:8080  "},{"title":"http_mode​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#http_mode","content":"Dictates if the cache is readonly or readwrite (default) when using http-based caching.[cache].mode must contain http or thrift_over_http. [cache]http_mode = readwrite  "},{"title":"http_read_headers​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#http_read_headers","content":"A semicolon-separated set of HTTP headers to use when reading from the cache when using http-based caching. The default is no headers.[cache].mode must contain http. [cache]http_read_headers = User-Agent: buck  "},{"title":"http_write_headers​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#http_write_headers","content":"A semicolon-separated set of HTTP headers to use when writing to the cache when using http-based caching. The default is no headers.[cache].mode must contain http. [cache]http_write_headers = Authorization: XXXXXXX; User-Agent: buck  "},{"title":"http_timeout_seconds​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#http_timeout_seconds","content":"Dictates the timeout per connection when using http-based caching. It will be the default value for http_connect_timeout_seconds, http_read_timeout_seconds, http_write_timeout_seconds if they're not set. The default is 3.[cache].mode must contain http. [cache]http_timeout_seconds = 3  "},{"title":"http_connect_timeout_seconds​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#http_connect_timeout_seconds","content":"Dictates the timeout on http connect when using http-based caching. If the value is not set, it will try to use the value set for http_timeout_seconds then use the default value 3.[cache].mode must contain http. [cache]http_connect_timeout_seconds = 3  "},{"title":"http_read_timeout_seconds​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#http_read_timeout_seconds","content":"Dictates the timeout on http writes when using http-based caching. If the value is not set, it will try to use the value set for http_timeout_seconds then use the default value 3.[cache].mode must contain http. [cache]http_read_timeout_seconds = 3  "},{"title":"http_write_timeout_seconds​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#http_write_timeout_seconds","content":"Dictates the timeout on http reads when using http-based caching. If the value is not set, it will try to use the value set for http_timeout_seconds then use the default value 3.[cache].mode must contain http. [cache]http_write_timeout_seconds = 3  "},{"title":"http_max_concurrent_writes​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#http_max_concurrent_writes","content":"The number of writer threads to use to upload to the http cache when using http-based caching. The default is 1. Note that when using multiple http caches (see below), the writer thread pool is shared between them all.[cache].mode must contain http. [cache]http_max_concurrent_writes = 1  "},{"title":"http_writer_shutdown_timeout_seconds​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#http_writer_shutdown_timeout_seconds","content":"The length of time to wait after the build completes for any remaining http cache uploads to complete before forcefully shutting down the writer thread pool when using http-based caching. The default is 1800 (30 minutes).[cache].mode must contain http. [cache]http_writer_shutdown_timeout_seconds = 1800  "},{"title":"http_error_message_format​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#http_error_message_format","content":"This setting allows for the customization of how http cache errors appear to the user. If the text {cache_name} is present, it will be replaced with the name of the cache. If the text {error_message}, it will be replaced with the error message.[cache].mode must contain http or thrift_over_http. [cache]http_error_message_format = The cache named {cache_name} encountered an error: {error_message}  "},{"title":"http_error_message_limit​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#http_error_message_limit","content":"This setting allows to set after how many errors Buck will print the http_error_message_format. Every time it prints it the counter resets to 0 to avoid spamming the console.[cache].mode must contain http or thrift_over_http. [cache]http_error_message_limit = 100  "},{"title":"http_max_store_attempts​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#http_max_store_attempts","content":"Maximum number of times to attempt to store item to the cache before giving up.[cache].mode must contain http or thrift_over_http. [cache]http_max_store_attempts = 1  "},{"title":"http_store_retry_interval_millis​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#http_store_retry_interval_millis","content":"Interval to wait if previous cache store request failed.[cache].mode must contain http or thrift_over_http. [cache]http_store_retry_interval_millis = 1000  "},{"title":"http_max_store_size​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#http_max_store_size","content":"The max size in bytes that an artifact can be to get pushed to an http cache.[cache].mode must contain http or thrift_over_http. [cache]http_max_store_size = 5000000  "},{"title":"http_client_tls_cert​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#http_client_tls_cert","content":"The path to a PEM encoded client X.509 TLS certificate that should be used for any HTTP requests to a remote cache. This operates on both read and write connections. This can be useful within a server to restrict access to a write path, log which users are writing which artifacts, and generally authenticate cache clients.Note: http_client_tls_key must be set for this setting to be used.[cache].mode must contain http or thrift_over_http. [cache]http_client_tls_cert = /etc/pki/client.crt  "},{"title":"http_client_tls_key​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#http_client_tls_key","content":"The path to a PEM encoded PKCS#8 key that should be used for any HTTP requests to a remote cache. This operates on both read and write connections. This can be useful within a server to restrict access to a write path, log which users are writing which artifacts, and generally authenticate cache clients.Note: http_client_tls_cert must be set for this setting to be used.[cache].mode must contain http or thrift_over_http. [cache]http_client_tls_key = /etc/pki/client.key  "},{"title":"hybrid_thrift_endpoint​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#hybrid_thrift_endpoint","content":"The HTTP endpoint to call if using Thrift over HTTP Cache API.[cache].mode must contain thrift_over_http. [cache]hybrid_thrift_endpoint = /hybrid_endpoint  "},{"title":"sqlite_inlined_size​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#sqlite_inlined_size","content":"The maximum size for artifacts to be inlined. The default size is 40B.[cache].mode must contain sqlite. [cache]sqlite_inlined_size = 10kB  "},{"title":"sqlite_max_size​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#sqlite_max_size","content":"The maximum cache size for SQLite-based caching. The default size is unlimited.[cache].mode must contain sqlite. [cache]sqlite_max_size = 10GB  "},{"title":"sqlite_mode​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#sqlite_mode","content":"Dictates if the cache is readonly, passthrough or readwrite (default) when using SQLite-based caching[cache].mode must contain sqlite. [cache]sqlite_mode = readwrite  "},{"title":"sqlite_cache_names​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#sqlite_cache_names","content":"A comma-separated list of names used to configure multiple SQLite caches. The caches will be used serially in the order in which their names are specified here. If an artifact is found further along in the list, an attempt to store it in the caches earlier in the list will be made. In the following example, if the artifact is found in the warm cache, it will not be stored in the local cache.[cache].mode must contain sqlite. [cache]mode = sqlite sqlite_cache_names = warm, local [cache#warm]sqlite_mode = readonly [cache#local]sqlite_mode = readwrite  "},{"title":"two_level_cache_enabled​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#two_level_cache_enabled","content":"Have the Buck client perform 2-level stores and lookups on the artifacts. Every cache operation consists of 2 steps: content hash-based and RuleKey-based. This makes it easier to reuse locally cached artifacts across different buck versions at the expense of higher latencies in the case where artifacts are not present in the local cache. [cache]two_level_cache_enabled = false  "},{"title":"two_level_cache_minimum_size​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#two_level_cache_minimum_size","content":"When performing a store artifacts smaller than this size will be stored directly, without the content hash redirection. [cache]two_level_cache_minimum_size = 1024  "},{"title":"two_level_cache_maximum_size​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#two_level_cache_maximum_size","content":"When performing a store artifacts bigger than this size will be stored directly, without the content hash redirection. [cache]two_level_cache_maximum_size = 1024  "},{"title":"action_graph_cache_check_enabled​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#action_graph_cache_check_enabled","content":"It enables an integrity checking mechanism in the action graph cache that compares the a newly generated action graph with the one already in the cache in the case of a cache hit. If the graphs do not match the build is stopped and the mismatching rules are printed and logged. [cache]action_graph_cache_check_enabled = false  "},{"title":"max_action_graph_cache_entries​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#max_action_graph_cache_entries","content":"Sets the maximum number of action graphs to cache. After this number, the least-recently-used graph will be evicted. Defaults to 1. [cache]max_action_graph_cache_entries = 3  "},{"title":"load_balancing_type​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#load_balancing_type","content":"Decides whether the distributed cache connects to a single URL or it has a pool of servers and chooses which one to use based on client side load balancing. NOTE: 'slb_*' configs only apply when CLIENT_SLB is enabled. [cache]load_balancing_type = SINGLE_SERVER, CLIENT_SLB  "},{"title":"slb_server_pool​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#slb_server_pool","content":"A comma separated list of server URLs of valid servers. The client side load balancer will try to pick the best server to connect to for every single connection. [cache]slb_server_pool = http://my.server.one/,http://my.server.two  "},{"title":"slb_ping_endpoint​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#slb_ping_endpoint","content":"The client side load balancer will use this endpoint to check whether the server is in healthy state or not. It will also be used to measure request latency. [cache]slb_ping_endpoint = /ping.php  "},{"title":"slb_health_check_internal_millis​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#slb_health_check_internal_millis","content":"The timeout in milliseconds between two consecutive client side load balancer health checks to the slb_server_pool. [cache]slb_health_check_internal_millis = 1000  "},{"title":"slb_timeout_millis​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#slb_timeout_millis","content":"The connection timeout per health request made to each of the slb_server_pool servers. Any server that fails to respond within this period will be deemed unhealthy and not be used for cache requests. [cache]slb_timeout_millis = 1000  "},{"title":"slb_error_check_time_range_millis​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#slb_error_check_time_range_millis","content":"The error rate to each individual server taking part in the slb_server_pool will be measured in the time range/window specified by this config. In different words, 'errors per second' is computed only for the last slb_error_check_time_range_millis. [cache]slb_error_check_time_range_millis = 300000  "},{"title":"slb_max_error_percentage​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#slb_max_error_percentage","content":"The max error percentage allowed within the last slb_error_check_time_range_millis that is acceptable to keep a particular server marked as healthy and usable by the load balancer. Expects a float value in the interval [0, 1]. [cache]slb_max_error_percentage = 0.1  "},{"title":"slb_latency_check_time_range_millis​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#slb_latency_check_time_range_millis","content":"The latency to each individual server taking part in the slb_server_pool will be measured in the time range/window specified by this config. In different words, 'server latency' is computed only for the last slb_latency_check_time_range_millis. [cache]slb_latency_check_time_range_millis = 300000  "},{"title":"slb_max_acceptable_latency_millis​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#slb_max_acceptable_latency_millis","content":"If the latency of a ping request to a server in slb_server_pool is higher than this, the server is deemed unhealthy and not used for cache operations. [cache]slb_max_acceptable_latency_millis = 1000  "},{"title":"[client]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#client","content":"This section includes settings that provide information about the caller. Although these can be specified in .buckconfig, in practice, they are specified exclusively on the command line: $ buck --config client.id=tool-making-this-buck-invocation build buck  "},{"title":"id​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#id","content":"It is good practice for tools that call Buck to identify themselves via --config client.id=&lt;toolname&gt;. This makes it easier for developers to audit the source of Buck invocations that they did not make directly. Note that the value of client.id is not factored into a build rule's cache key. It is purely for auditing purposes. "},{"title":"skip-action-graph-cache​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#skip-action-graph-cache","content":"When Buck is run as a daemon, it caches the last Action Graph it used for a build so that if the next build identifies the same set of targets, the [possibly expensive] Action Graph construction step can be avoided. Because only the last Action Graph is cached, it may be costly to interleave a small build job among a series of incremental builds of an expensive rule: $ buck build //big:expensive-rule # Initial Action Graph. $ buck build //big:expensive-rule # Action Graph is reused. $ buck build //library#compilation-database # Evicts costly Action Graph. $ buck build //big:expensive-rule # Action Graph is rebuilt.  Although this scenario may sound contrived, it is very common when other tools may also be running buck build in the background. Work done by IDEs and linters frequently fall into this category. In this case, the best practice is to add --config client.skip-action-graph-cache=true for any sort of &quot;one-off&quot; build for which the cost of caching the Action Graph for the new build likely outweighs the benefit of evicting the Action Graph from the previous build. As this is commonly the case for tools, this flag is frequently used in concert with --config client.id: $ buck build //big:expensive-rule # Initial Action Graph. $ buck build //big:expensive-rule # Action Graph is reused. $ buck build \\ # Cached Graph is unaffected.--config client.skip-action-graph-cache=true \\ --config client.id=nuclide \\ //library#compilation-database $ buck build //big:expensive-rule # Action Graph is reused.  "},{"title":"[color]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#color","content":"This section configures colored output of Buck. "},{"title":"ui​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#ui","content":"Enables (default) or disables colorized output in the terminal. [color]ui = true  "},{"title":"[credentials]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#credentials","content":"This section configures credentials to be used when fetching from authenticated Maven repositories via HTTPS. For a repository repo appearing in [maven_repositories], Buck reads the values of repo_user and repo_pass in this section (if present), and passes them to the server using basic access authentication when fetching. Note that authenticating in this way over plain HTTP connections is disallowed and will result in an error. [maven_repositories]repo = https://example.com/repo[credentials]repo_user = joeuser repo_pass = hunter2  "},{"title":"[cxx]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#cxx","content":"This section configures the paths to the C and C++ toolchains' binaries and the default flags to pass to all invocations of them. C/C++ platform flavors in .buckconfig​ Buck enables you to create additional platform flavors for C/C++ in .buckconfig. A platform flavor groups together a set of configuration parameters, which you can then reference at build time. To create a new C/C++ platform flavor, add a section with the header [cxx#**flavor**]  to .buckconfig. If you invoke Buck with the specified flavor appended to the build target, Buck uses the values in this section instead of those in [cxx]. For example, to build with the values in [cxx#my-custom-flavor] instead of [cxx], you could invoke Buck using the following command: $ buck build app#my-custom-flavor  You can also use these platform flavors, in the platform_* arguments of the cxx_binary and cxx_library rules. The Buck sample for C++ demonstrates how to use a custom platform flavor. "},{"title":"cpp​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#cpp","content":"The path to the C preprocessor. [cxx]cpp = /usr/bin/gcc  "},{"title":"cc​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#cc","content":"The path to the C compiler. [cxx]cc = /usr/bin/gcc  "},{"title":"ld​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#ld","content":"The path to the C/C++ linker driver. [cxx]ld = /usr/bin/g++  "},{"title":"linker_platform​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#linker_platform","content":"The platform for the linker. Normally this is autodetected based on the system, but it useful to set when cross compiling. Valid values are: DARWINGNUWINDOWS [cxx]linker_platform = DARWIN  "},{"title":"cxxpp​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#cxxpp","content":"The path to the C++ preprocessor. [cxx]cxxpp = /usr/bin/g++  "},{"title":"cxx​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#cxx-1","content":"The path to the C++ compiler. [cxx]cxx = /usr/bin/g++  "},{"title":"aspp​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#aspp","content":"The path to the assembly preprocessor. [cxx]aspp = /usr/bin/gcc  "},{"title":"as​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#as","content":"The path to the assembler. [cxx]as = /usr/bin/as  "},{"title":"ar​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#ar","content":"The path to the archiver. [cxx]ar = /usr/bin/ar  "},{"title":"archiver_platform​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#archiver_platform","content":"The platform for the archiver. Normally this is autodetected based on the system, but it useful to set when cross compiling. Valid values are: LINUXMACOSFREEBSDWINDOWS [cxx]archiver_platform = MACOS  "},{"title":"cppflags​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#cppflags","content":"The flags to pass to the C preprocessor. [cxx]cppflags = -Wall  "},{"title":"cflags​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#cflags","content":"The flags to pass to the C compiler and preprocessor. [cxx]cflags = -Wall  "},{"title":"ldflags​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#ldflags","content":"The flags to pass to the linker. [cxx]ldflags = --strip-all  "},{"title":"cxxppflags​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#cxxppflags","content":"The flags to pass to the C++ preprocessor. [cxx]cxxppflags = -Wall  "},{"title":"cxxflags​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#cxxflags","content":"The flags to pass to the C++ compiler and preprocessor. [cxx]cxxflags = -Wall  "},{"title":"asppflags​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#asppflags","content":"The flags to pass to the assembly preprocessor. [cxx]asppflags = -W  "},{"title":"asflags​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#asflags","content":"The flags to pass to the assembler and assembly preprocessor. [cxx]asflags = -W  "},{"title":"arflags​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#arflags","content":"The flags to pass to the archiver. [cxx]arflags = -X32_64  "},{"title":"ranlibflags​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#ranlibflags","content":"The flags to pass to the archive indexer. [cxx]ranlibflags = --plugin someplugin  "},{"title":"gtest_dep​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#gtest_dep","content":"The build rule to compile the Google Test framework. [cxx]gtest_dep = //third-party/gtest:gtest  If you had your Google Test code in third-party/gtest/, the build file in that directory would look something like this: cxx_library( name = 'gtest', srcs = ['googletest/src/gtest-all.cc','googlemock/src/gmock-all.cc','googlemock/src/gmock_main.cc',], header_namespace = '', exported_headers = subdir_glob([('googletest/include', '**/*.h'),('googlemock/include', '**/*.h'),]), headers = subdir_glob([('googletest', 'src/*.cc'),('googletest', 'src/*.h'),('googlemock', 'src/*.cc'),('googlemock', 'src/*.h'),]), platform_linker_flags = [('android', []),('', ['-lpthread']),], visibility = ['//test/...',],)  "},{"title":"untracked_headers​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#untracked_headers","content":"How to handle header files that get included in a preprocessing step, but which aren't explicitly owned by any dependencies. By default, Buck sandboxes headers into symlink trees, but file relative inclusion and explicit preprocessor flags can still cause untracked headers to get pulled into the build which can break caching. ignore (default): Untracked headers are allowed in the build.warn: Print a warning to the console when an untracked header is used.error: Fail the build when an untracked header is used. [cxx]untracked_headers = error  "},{"title":"untracked_headers_whitelist​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#untracked_headers_whitelist","content":"A list of regexes which match headers to exempt from untracked header verification. [cxx]untracked_headers_whitelist = /usr/include/.*, /usr/local/include/.*  "},{"title":"should_remap_host_platform​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#should_remap_host_platform","content":"Specifies whether the default flavor should be remapped to the value of the [cxx].host_platform configuration parameter. [cxx] should_remap_host_platform = true  Default is false. Because Buck is designed for cross-platform development, Buck normally ignores the host platform when building a target. For example, Buck normally builds the same Linux target irrespective of whether Buck itself is running on, say, Linux or macOS. The should_remap_host_platform configuration parameter enables you to change Buck's behavior so that Buck's target platform is the host platform on which Buck is running. "},{"title":"host_platform​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#host_platform","content":"Specifies the host platform to use if [cxx].should_remap_host_platform is true. The value that you specify could be one of Buck's internal platform flavors, such as linux-x86_64 or macosx-x86_64: [cxx] host_platform = linux-x86_64 [cxx] host_platform = macosx-x86_64  or the value could be a custom platform flavor: [cxx] host_platform = my-custom-flavor  If [cxx].should_remap_host_platform is true, but host_platform is unspecified, then Buck infers the host platform from the local computer to be one of the following values: linux-x86_64 (Linux)macosx-x86_64 (macOS)freebsd-x86_64 (FreeBSD)windows-x86_64 (Windows) If [cxx].should_remap_host_platform is unset—or explicitly set to false—then Buck ignores the value of host_platform . "},{"title":"default_platform​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#default_platform","content":"Override the default platform for build rules. [cxx]default_platform = iphonesimulator-x86_64  "},{"title":"pch_enabled​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#pch_enabled","content":"Whether prefix headers used by a cxx_library or other such build rule's prefix_header parameter should be separately precompiled, and used in that rule's build. If this is disabled, the prefix header is included as-is, without precompilation. Default is true. [cxx]pch_enabled = false  "},{"title":"link_weight​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#link_weight","content":"The number of jobs that each C/C++ link rule consumes when running. By default, this is 1, but this can overridden to change how many link rules can execute in parallel for a given -j value. This is useful for builds with large I/O intensive static links where using a lower -j value is undesirable (since it reduces the parallelism for other build rule types). [cxx]link_weight = 3  "},{"title":"cache_links​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#cache_links","content":"C/C++ link rules are cached by default. However, static C/C++ link jobs can take up lots of cache space and also get relatively low hit rates, so this config option provides a way to disable caching of all C/C++ link rules in the build. [cxx]cache_links = false  "},{"title":"default_reexport_all_header_dependencies​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#default_reexport_all_header_dependencies","content":"Default value used for reexport_all_header_dependencies, when it's undefined on the build rule. [cxx]default_reexport_all_header_dependencies = true  "},{"title":"shlib_interfaces​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#shlib_interfaces","content":"When linking a executable or shared library, any dependencies that build shared libraries are normally added to the link line. If this option is set, Buck will use shared library interfaces for these dependencies instead of full shared libraries. Shared library interfaces are a subset of the original shared library, removing parts of the shared library (e.g. the .text segment for ELF) which are typically unused used when this library is being linked against. Using shared library interfaces can allow Buck's input-based rule keys to avoid potentially unnecessary re-links (see CxxSharedLibraryInterfaceIntegrationTest for examples). [cxx]shlib_interfaces = enabled  "},{"title":"independent_shlib_interfaces​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#independent_shlib_interfaces","content":"Normally, a shared library interface for a rule is generated using it's shared library. Since linking a rule's shared library requires the shared library interfaces for all dependencies be built, this means that dynamic linking has inherent non-parallelism, due to this build dependency tree. When this option is set, Buck will build shared library interfaces independent of the rule's shared library (e.g. by linking it's own shared library without any dependency shared libraries), allowing all shared library interfaces to be built in parallel, and therefore also allowing subsequent shared libraries to be built in parallel. [cxx]independent_shlib_interfaces = true  "},{"title":"[d]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#d","content":"This section configures how code written in D is compiled. "},{"title":"base_compiler_flags​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#base_compiler_flags","content":"Flags to pass to every invocation of the D compiler. This is a space-separated list. It defaults to an empty list. [d]base_compiler_flags = -I/some/path -g -O3  "},{"title":"compiler​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#compiler","content":"Path to the D compiler. If this parameter is not specified, Buck attempts to find the D compiler automatically. [d]compiler = /opt/dmd/bin/dmd  "},{"title":"library_path​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#library_path","content":"Directories to be searched for the D runtime libraries. This is a colon-separated list. If this parameter is not specified, Buck attempts to detect the location of the libraries automatically. [d]library_path = /usr/local/lib:/opt/dmd/lib  "},{"title":"linker_flags​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#linker_flags","content":"Flags to pass to the linker when linking D code into an executable. This is a space-separated list. If omitted, this value is constructed from d.library_path. [d]linker_flags = &quot;-L/path to phobos&quot; -lphobos2  "},{"title":"[doctor]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#doctor","content":"This section defines variables that are associated with command doctor. "},{"title":"protocol​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#protocol","content":"The protocol of communication, it can be either simple or JSON. [doctor]protocol = json  "},{"title":"endpoint_url​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#endpoint_url","content":"The address of the remote endpoint that the request will go. This needs to be defined in order for the command to work. [doctor]endpoint_url = http://localhost:4545  "},{"title":"endpoint_timeout_ms​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#endpoint_timeout_ms","content":"The timeout in milliseconds before giving up contacting the analysis endpoint. [doctor]endpoint_timeout_ms = 15  "},{"title":"endpoint_extra_request_args​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#endpoint_extra_request_args","content":"This sections of keys and values is added as parameters to the POST request send to the doctor remote endpoint. [doctor]endpoint_extra_request_args = ref=&gt;1245,token=&gt;42  "},{"title":"report_upload_path​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#report_upload_path","content":"The address of the remote endpoint the report will be uploaded. [doctor]report_upload_path = http://localhost:4546  "},{"title":"report_max_size​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#report_max_size","content":"The maximum size that the report endpoint can handle before giving up and storing it only locally. [doctor]report_max_size = 512MB  "},{"title":"report_timeout_ms​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#report_timeout_ms","content":"The timeout in milliseconds before giving up contacting the report endpoint. [doctor]report_timeout_ms = 15  "},{"title":"report_max_upload_retries​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#report_max_upload_retries","content":"Times to try to upload to the report endpoint. [doctor]report_max_upload_retries = 2  "},{"title":"report_extra_info_command​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#report_extra_info_command","content":"An extra command that the report should and attach the information to the uploaded report. [doctor]report_extra_info_command = /custom/script/to/run.sh  "},{"title":"[download]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#download","content":"This section configures downloading from the network during buck fetch. "},{"title":"proxy​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#proxy","content":"Buck will attempt to fetch files from the network, however, if you happen to be behind a] firewall, this may not work correctly. You can supply a proxy when downloading from HTTP[S] servers with these three settings. Valid types for proxy_type are HTTP (default) and SOCKS. These values correspond to Java's Proxy.Type. [download]proxy_host=proxy.example.com proxy_port=8080 proxy_type=HTTP  "},{"title":"maven_repo​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#maven_repo","content":"If a remote file's URL starts with mvn:, that file (usually a jar) is supposed to come from a maven repo. You can specify the repo to download from here, or by setting one or more repositories in [maven_repositories]. [download]maven_repo = https://repo1.maven.org/maven2  "},{"title":"max_number_of_retries​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#max_number_of_retries","content":"In case buck is unable to download a file, it will retry specified number of times before giving up. By default it's not set, so Buck is not going to retry failed downloads. [download]max_number_of_retries = 3  "},{"title":"in_build​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#in_build","content":"If true, allow downloads to be part of the build process. If false, buck build / run / test will require the user to run 'buck fetch' first. This generally should not be changed, to avoid surprising users with unexpected build times, when the cause is mostly download times. By default this set to false. [download]in_build = true  "},{"title":"[dx]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#dx","content":"This section controls how Buck invokes the dx tool. "},{"title":"threads​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#threads-1","content":"Fixed number of threads to run dexing steps with. If not specified, the optimal number is inferred from hardware specification of running machine. [dx]threads = 4  "},{"title":"max_threads​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#max_threads","content":"The maximum number of threads allowed to run the dexing steps with. Since the dexing steps can use a lot of memory, it might be useful to set this to a lower value to avoid out-of-memory on systems that have a lot of CPU cores. This parameter is mostly useful when [dx].threads is not specified and the number of threads is obtained based on hardware. [dx]max_threads = 8  "},{"title":"max_heap_size​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#max_heap_size","content":"This option specifies how much memory is available when running dx out of process. [dx]max_heap_size = 2g  "},{"title":"[export_file]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#export_file","content":"This section configures behavior of export_file build rule. "},{"title":"input_directory_action​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#input_directory_action","content":"Defines the behavior of export_file when input of a build rule is a directory. Support for directories will be removed soon and this option provides a way to migrate a project to a state when none of the export_file rules use directories as inputs. The valid values are: allow (default): directories are allowed and no action is taken,warn: emit a warning to the console,fail: fail the build. [export_file]input_directory_action = fail  "},{"title":"[go]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#go","content":"This section defines the Go toolchain. By default Buck will try to discovery the Go compiler and linker from the go tool found in your PATH. "},{"title":"root​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#root","content":"If you have a non-standard Go install, you will need to set the Go root. The root should contain pkg and bin directories. [go]root = /opt/golang/libexec  "},{"title":"prefix​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#prefix","content":"For interoperability with the go tool, you may specify a prefix for your default package names. [go]prefix = github.com/facebook/buck  "},{"title":"tool​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#tool","content":"You can specify the path to find the go tool. This in turn will allow Buck to discover the compiler/linker by default. This defaults to ${go.root}/bin/go. [go]tool = /usr/local/bin/go  "},{"title":"compiler​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#compiler-1","content":"The full path to the Go compiler. This is normally automatically discovered. [go]compiler = /usr/local/libexec/go/pkg/tool/darwin_amd64/compile  "},{"title":"assembler​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#assembler","content":"The full path to the Go assembler. This is normally automatically discovered. [go]assembler = /usr/local/libexec/go/pkg/tool/darwin_amd64/asm  "},{"title":"packer​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#packer","content":"The full path to the Go packer. This is normally automatically discovered. [go]packer = /usr/local/libexec/go/pkg/tool/darwin_amd64/pack  "},{"title":"linker​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#linker","content":"The full path to the Go linker. This is normally automatically discovered. [go]linker = /usr/local/libexec/go/pkg/tool/darwin_amd64/link  "},{"title":"vendor_path​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#vendor_path","content":"A list of colon (:) separated list of directories to include for including in the importmap for Go dependencies. Packages in these directories are allowed to be imported given just the relative path to the package. This is similar to how 'vendor' directories work. e.g you can use import golang.org/x/net for a package that lives in/golang.org/x/net. [go]vendor_path = third-party/go  "},{"title":"project_path​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#project_path","content":"You can specify the path where buck project will store dynamically generated files (ex. genrule). This is extension to $GOPATH, particularly usefuly while working with native go toolchain or IDE's. [go]project_path = third-party/go  "},{"title":"[groovy]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#groovy","content":"This section configures the Groovy toolchain. "},{"title":"groovy_home​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#groovy_home","content":"This defines the value of GROOVY_HOME that Buck should use. If it is not provided, Buck will use the system's GROOVY_HOME by default. [groovy]groovy_home = /path/to/groovy_home  "},{"title":"[halide]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#halide","content":"This section configures the Halide platform mappings and toolchain. "},{"title":"target​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#target","content":"This defines the C++ platform flavor to Halide target mapping. Each key should begin with the prefix target_, followed by the flavor name. The corresponding value should be the Halide target string to use when building for that flavor. [halide]target_iphonesimulator-x86_64 = x86-64-osx target_iphoneos-arm64 = arm-64-ios  "},{"title":"xcode_compile_script​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#xcode_compile_script","content":"The optional path to a shell script which should be used for invoking the Halide AOT &quot;compiler&quot; when building projects that include Halide targets in Xcode. [halide]xcode_compile_script = //path/to/script.sh  "},{"title":"[httpserver]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#httpserver","content":"Option to enable an experimental web server that presents a UI to explore build data. Note that Buck must be run as a daemon in order for the web server to be available. "},{"title":"port​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#port","content":"This sets the port to use for the web server. There are three possible values: n &gt; 0: For any positive integer, Buck will attempt to make the server available on that port.0: Buck will find a free port for the server to use and print it out on the command line.-1: Explicitly disables the server. [httpserver]port = 8080  "},{"title":"[incompatible]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#incompatible","content":"This section controls features of buck that are in the process of being deprecated. "},{"title":"[intellij]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#intellij","content":"This section configures a project generated for IntelliJ IDEA by buck project command. "},{"title":"default_android_manifest_path​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#default_android_manifest_path","content":"The default manifest file that should be used in Android IntelliJ modules when buck cannot detect the correct manifest to use. [intellij]default_android_manifest_path = shared/AndroidManifest.xml  "},{"title":"jdk_name​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#jdk_name","content":"IntelliJ project SDK name. [intellij]jdk_name = Java SDK 1.6  "},{"title":"jdk_type​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#jdk_type","content":"IntelliJ project SDK type. [intellij]jdk_type = Android SDK or JavaSDK  "},{"title":"android_module_sdk_type​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#android_module_sdk_type","content":"Default Android SDK type for android modules. [intellij]android_module_sdk_type = Android SDK  "},{"title":"android_module_sdk_name​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#android_module_sdk_name","content":"Default Android SDK name for android modules. [intellij]android_module_sdk_name = Android API 23 Platform  "},{"title":"java_module_sdk_type​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#java_module_sdk_type","content":"SDK type for Java modules. [intellij]java_module_sdk_type = JavaSDK  "},{"title":"java_module_sdk_name​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#java_module_sdk_name","content":"SDK name for Java modules. [intellij]java_module_sdk_name = 1.8  "},{"title":"default_min_android_sdk_version​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#default_min_android_sdk_version","content":"Default minimum Android SDK version supported for this project. Overwritten by min SDK version if specified in target's AndroidManifest.xml. [intellij]default_min_android_sdk_version = 9  "},{"title":"generated_sources_label_map​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#generated_sources_label_map","content":"Allows adding folders with generated source code to IntelliJ project. These folders are added when a target has a label specified in this option. In the example below, if target //app/target has label generated_code1 folder buck-out/gen/app/lib/__lib_target1__ will be added to IntelliJ project. [intellij]generated_sources_label_map = generated_code_1 =&gt; __%name%_target1__, generated_code2 =&gt; __%name%_target2__  "},{"title":"include_transitive_dependencies​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#include_transitive_dependencies","content":"Add transitive dependencies as RUNTIME library. [intellij]include_transitive_dependencies = false  "},{"title":"module_group_name​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#module_group_name","content":"Specify module group name when grouping modules. If it is set to '', modules are not grouped. [intellij]module_group_name = modules  "},{"title":"remove_unused_libraries​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#remove_unused_libraries","content":"Removes unused libraries from .idea/libraries. [intellij]remove_unused_libraries = true  "},{"title":"aggregate_android_resource_modules​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#aggregate_android_resource_modules","content":"Forces buck project to aggregate modules with Android resources. This aggregation is performed only if aggregation mode is not none.Note: using this type of aggregation disables Android layout editor provided by Android plugin. The layout files can still be edited using the XML editor. [intellij]aggregate_android_resource_modules = true  "},{"title":"android_resource_module_aggregation_limit​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#android_resource_module_aggregation_limit","content":"The maximum number of targets that can be aggregated into one module with Android resources. This limit is a workaround to avoid a problem when Android plugin cannot operate on modules with a big number of resource folders. [intellij]android_resource_module_aggregation_limit = 1000  "},{"title":"project_compiler_output_url​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#project_compiler_output_url","content":"The output directory for IntelliJ's builds. [intellij]project_compiler_output_url = intellij-out/classes  "},{"title":"extra_compiler_output_modules_path​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#extra_compiler_output_modules_path","content":"This option specifies the location of additional modules for code generated outside of buck graph. For example, it can be used to specify the location of R.java classes generated for Android plugin to help Layout Preview with resolving references to resources. [intellij]extra_compiler_output_modules_path = buck-out/extra-intellij-output  "},{"title":"[java]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#java","content":"This section configures the Java toolchain. "},{"title":"src_roots​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#src_roots","content":"The paths to roots of Java code (where a root contains a tree of Java folders where the folder structure mirrors the package structure). This list of paths is comma-delimited. Paths that start with a slash are relative to the root of the project, and all other paths can match a folder anywhere in the tree. In the example below, we match all folders named src, and java and javatests at the root of the project. [java]src_roots = src, /java/, /javatests/  "},{"title":"extra_arguments​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#extra_arguments","content":"A comma-delimited list of flags to pass the Java compiler. [java]extra_arguments = -g  "},{"title":"source_level​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#source_level","content":"The default version of Java for source files. Also defines the project language level in IntelliJ. [java]source_level = 7  "},{"title":"target_level​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#target_level","content":"The default version of Java for generated code. [java]target_level = 7  "},{"title":"skip_checking_missing_deps​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#skip_checking_missing_deps","content":"Buck will attempt to analyze build failures and suggest dependencies that might not be declared in order to fix the failure. On large projects, this can be slow. This setting disables the check. [java]skip_checking_missing_deps = false  "},{"title":"jar_spool_mode​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#jar_spool_mode","content":"Specifies how the compiler output to the .jar file should be spooled. The valid modes are: intermediate_to_disk (default): writes the intermediate .class files from the compiler output to disk. They are then packed into a .jar.direct_to_jar: compiler output will be directly written to a .jar file with the intermediate .class files held in memory. The compiler output will still be written to disk if there are any post-processing commands specified during the build. [java]jar_spool_mode = intermediate_to_disk  "},{"title":"abi_generation_mode​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#abi_generation_mode","content":"Specifies how Buck should create ABI jars when computing ABI rule keys. Values other than class may not be suitable for all rules; this setting may be overridden on a per-rule basis using the abi_generation_mode parameter on each rule. The valid modes are: class (default): creates an ABI jar for each library by first building the library and then stripping out any information that is not part of the interface (such as method bodies and private members). source: creates an ABI jar for each library in the process of building the library, via a plugin to the Java compiler. This improves build times by allowing each library's dependents to start building before the library is done building. Implies jar_spool_mode = direct_to_jar.source_only: creates an ABI jar for each library by referencing only the source code of the library, without considering (most of) its dependencies. This can drastically improve build times, especially in larger apps or in build environments with a large number of cores by allowing all ABI jars to be built in parallel, and then all library jars to be built in parallel (up to the available parallelism in the build environment). Additionally, in environments with network-based caches it can reduce the number of calls to the cache required for each build. Requires some changes to how Java code is written. To migrate, first do some builds in migrating_to_source_only mode, using buck fix to fix any issues encountered. Once migrated, errors will still be encountered from time to time when new code does not meet the requirements of this mode.buck fix can be used to address these. When building with source_only, using buck build --keep-going is recommended since some errors that occur when building an ABI jar will actually have their root cause in another rule that builds later. Read more about source-only ABIs here.migrating_to_source_only: used when migrating from source to source_only. Acts like source, but issues warnings (inbuck.log, not to the console) for any Java code that would cause errors undersource_only. buck fix can be used to fix most such warnings. [java]abi_generation_mode = source  "},{"title":"unused_dependencies_action​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#unused_dependencies_action","content":"Action performed when Buck detects that some dependencies are not used during Java compilation. Note that this feature is experimental and does not handle run-time dependencies. The valid values are: ignore (default): ignore unused dependencies,warn: emit a warning to the console,fail: fail the compilation. [java]unused_dependencies_action = warn  "},{"title":"duplicates_log_level​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#duplicates_log_level","content":"Verbosity of logs emitted on duplicates when building binary. The valid values are: info (default): emit an info to the console,warn: emit a warning to the console,fine: emit a fine info to the console, visible only at high verbosity levels. [java]duplicates_log_level = info  "},{"title":"[kotlin]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#kotlin","content":"This section configures various aspects of the Kotlin toolchain. "},{"title":"kotlinc​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#kotlinc","content":"The path to the kotlinc compiler executable to use when external compilation is forced. This setting has no effect by itself and must be paired with the [kotlin].external setting. [kotlin]kotlinc = /usr/local/bin/kotlinc  "},{"title":"external​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#external","content":"Forces external compilation via kotlinc. When external compilation is forced the following heuristics are used to locate the kotlinc executable: If the [kotlin].kotlinc setting is specified, the executable specified by that path will be used.If the [kotlin].kotlin_home path setting is specified, Buck will look for a bin directory under that path for an executable named kotlinc.If a KOTLIN_HOME environment variable is present, Buck will look for a bin directory under that path for an executable named kotlinc.Lastly, if none of the above are specified, Buck will look for the kotlinc executable in the paths listed in the PATH environment variable. Defaults to false. [kotlin]external = true  "},{"title":"kotlin_home​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#kotlin_home","content":"The path to the Kotlin root folder, typically the installation folder, where various Kotlin assets (executables and JAR files) can be found. This path is used in the following ways: When in-memory compilation is used, the kotlin-compiler.jar and other related Kotlin JARs required for compilation are located via this path using the following heuristics: The root of the directory specified by this path is searched.If there is a lib directory under this path, it is searched.If there is a libexec directory under this path, it is searched. If external compilation is called for (see [kotlin].external), a bin directory under this directory will be searched to locate the kotlinc executable. If this setting is not specified, the location of the Kotlin home directory can be specified via the KOTLIN_HOME environment variable. If neither the [kotlin].kotlin_home setting nor the KOTLIN_HOME environment variable is specified, Buck will attempt to locate the home directory by searching for the kotlinc executable in the paths specified by the PATH environment variable. If the kotlinc executable is found, Buck assumes that the parent directory of that executable is the Kotlin home. [kotlin]kotlin_home = /usr/local/Cellar/kotlin/1.1.1  "},{"title":"[log]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#log","content":"This section controls how Buck will log information about builds for later inspection. Settings in this section will appear as features are in the processing of being deprecated, and be removed after features are removed from Buck. "},{"title":"max_traces​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#max_traces","content":"Sets the maximum number of Chrome Traces that Buck will create. [log]max_traces = 25  "},{"title":"compress_traces​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#compress_traces","content":"true if Buck should GZIP the traces, false otherwise. [log]compress_traces = true  "},{"title":"machine_readable_logger_enabled​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#machine_readable_logger_enabled","content":"true if Buck should output to a machine readable log file under name buck-machine-log. Log entries are formatted one per line like &lt; Event type &gt;&lt; space &gt;&lt; JSON &gt;. [log]machine_readable_logger_enabled = true  "},{"title":"build_details_template​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#build_details_template","content":"If provided, Buck prints the specified string at the end of each build. The string {build_id} is replaced with the current build ID. This can be helpful to link to external systems that may have more details about the build. [log]build_details_template = &quot;Details at https://example.com/builds/{build_id}&quot;  "},{"title":"build_details_commands​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#build_details_commands","content":"If build_details_template is provided, Buck prints the specified string to the console for each of the specified list of commands. This can be useful for ensuring that users do not have too much information provided, but allows configuring log-heavy environments like CI systems to output more information for commands like 'query'. Default value is build, test, install [log]build_details_commands = build, test, install, query, targets  "},{"title":"[lua]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#lua","content":"This section defines settings relevant to lua_* rules. "},{"title":"lua​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#lua-1","content":"The path to the Lua interpreter. By default, Buck will search for the binary lua in your PATH. [lua]lua = /usr/bin/lua  "},{"title":"cxx_library​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#cxx_library","content":"The build target of the Lua C library to use to link a standalone interpreter. By default, Buck will use -llua from the C/C++ linker's default library search path. [lua]cxx_library = //third-party/lua:lua  "},{"title":"starter_type​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#starter_type","content":"The method for bootstrapping Lua binaries. By default, native is chosen if the binary contains native libraries and pure is chosen otherwise. pure: The binary bootstrap process uses pure Lua code. This method cannot be used if the binary includes native code.native: The binary bootstrap process links in the Lua C library (specified in [lua].cxx_library) to form a standalone native interpreter. [lua]starter_type = pure  "},{"title":"native_starter_library​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#native_starter_library","content":"A C/C++ library to use as a custom starter for Lua binaries which use theNATIVE bootstrap method. The library is expected to define the following function: #ifdef __cplusplusextern &quot;C&quot;#endifint run_starter(int argc,const char **argv,const char *main_module,const char *modules_dir,const char *extension_suffix);  Where the arguments are as follows: argc: The number of command-line arguments.argv: The array of command-line arguments.main_module: The name of the binary's main module.modules_dir: The path, relative the binary, to the modules directory.extension_suffix: The suffix used for native libraries (e.g. .so). [lua]native_starter_library = //third-party/lua:starter  "},{"title":"extension​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#extension","content":"The extension to use for Lua binaries. Defaults to .lex. [lua]extension = .lex  "},{"title":"[maven_repositories]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#maven_repositories","content":"This section defines the set of maven repositories that Buck can use when attempting to resolve maven artifacts. It takes the form of key value pairs of a short name for the repo and the URL. The URL may either be an HTTP(S) URL, or point to a directory on your local disk. [maven_repositories]central = https://repo1.maven.org/maven2 m2 = ~/.m2/repository  Note that if you are using Buck to talk to Maven and you are using IPv6, you might need to add the following option to your .buckjavaargs file: -Djava.net.preferIPv6Addresses=true  "},{"title":"[ndk]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#ndk","content":"This section defines properties to configure building native code against the Android NDK. "},{"title":"ndk_version​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#ndk_version","content":"The version of the NDK that Buck should use to build native code. Buck searches for this version in the subdirectories beneath the directory specified by either the ANDROID_NDK_REPOSITORY environment variable or the value of the [ndk].ndk_repository_path property. Buck prefers an exact match, and otherwise accepts a prefix match. NDKs with a version prior to r11 store their version in the file RELEASE.TXT. For example, in version r10c this file contains r10c (64-bit). In this case, you would use r10c for the value of ndk_version. [ndk] ndk_version = r10c  NDKs with a version after r11 use a different format for their version and store their version in the Pkg.Revision property of the file source.properties. For example, this is the content of that file for version r13b: Pkg.Desc = Android NDKPkg.Revision = 13.1.3345770  In this case, you would use 13.1.3345770 for the value of ndk_version. [ndk] ndk_version = 13.1.3345770  "},{"title":"ndk_path​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#ndk_path","content":"This specifies an absolute path to the Android NDK. The default is empty. Setting this property has the same effect as if you had set either of the following environment variables to the same value: ANDROID_NDKNDK_HOME Note that Buck gives precedence to the values of these environment variables—in the order in which they are listed above—over the value of this property in .buckconfig. [ndk]ndk_path = /Library/Android/ndk/r10c  "},{"title":"ndk_repository_path​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#ndk_repository_path","content":"This specifies the absolute path to a directory that contains multiple versions of the Android NDK in subdirectories. The default is empty. Setting this property has the same effect as if you had set the ANDROID_NDK_REPOSITORY environment variable to the same value. However, Buck gives precedence to the value of this environment variables over the value of this property in.buckconfig. Buck selects which NDK to use based on the value of the [ndk].ndk_version property. Currently, if you do not specify a value for ndk.ndk_version, Buck selects the most-recent NDK. However, you should not rely on this behavior as it could change in a future release. [ndk]ndk_repository_path = /Library/Android/ndk  "},{"title":"app_platform​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#app_platform","content":"The android platform libraries that the code is targeting. This is equivalent to the APP_TARGET in the NDK build system. The default is android-16. [ndk]app_platform = android-21  "},{"title":"app_platform_per_cpu_abi​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#app_platform_per_cpu_abi","content":"The android platform libraries that the code is targeting, set on a per-CPU ABI basis. This is equivalent to the APP_TARGET in the NDK build system. If no value is set for a particular CPU ABI, the value from app_platform is used as a fallback. [ndk]app_platform_per_cpu_abi = arm =&gt; android-19, arm64 =&gt; android-22  "},{"title":"cpu_abis​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#cpu_abis","content":"A comma separated list of the CPU ABIs that this repo supports. Buck will only build NDK code for these ABIs. [ndk]cpu_abis = armv7, x86  "},{"title":"compiler​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#compiler-2","content":"When compiling cxx_library rules, this specifies the compiler family to use from the NDK. The possible values are: gcc (default): Use the GCC family of compilation tools.clang: Use the Clang family of compilation tools. [ndk]compiler = gcc  "},{"title":"gcc_version​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#gcc_version","content":"When compiling cxx_library rules, this specifies the version of GCC to use. This will be used regardless of the value in [ndk].compiler, as other compiler families still use tools from the GCC toolchain (such as ar). The default value is 4.8. [ndk]gcc_version = 4.8  "},{"title":"clang_version​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#clang_version","content":"When compiling cxx_library rules, this specifies the version of Clang to use. The default value is 3.4. [ndk]clang_version = 3.4  "},{"title":"cxx_runtime​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#cxx_runtime","content":"When compiling cxx_library rules, this specifies the variant of the C/C++ runtime to use. Possible values are: gabixxgnustl (default)libcxxstlportsystem [ndk]cxx_runtime = gnustl  "},{"title":"cxx_runtime_type​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#cxx_runtime_type","content":"When compiling cxx_library rules, this specifies how libraries are intended to be linked with the runtime. If this is static, then the C/C++ runtime library will not be packaged in the APK. Possible values are: dynamic (default)static [ndk]cxx_runtime_type = dynamic  "},{"title":"[ocaml]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#ocaml","content":"This section configures the paths to the OCaml toolchain's binaries. "},{"title":"ocaml.bytecode.compiler​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#ocamlbytecodecompiler","content":"The path to the OCaml bytecode compiler (ocamlc). [ocaml]ocaml.bytecode.compiler = /usr/local/bin/ocamlc.opt  "},{"title":"ocaml.compiler​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#ocamlcompiler","content":"The path to the OCaml native-code compiler (ocamlopt). [ocaml]ocaml.compiler = /usr/local/bin/ocamlopt.opt  "},{"title":"dep.tool​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#deptool","content":"The path to the OCaml dependency generator (ocamldep). [ocaml]dep.tool = /usr/local/bin/ocamldep.opt  "},{"title":"lex.compiler​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#lexcompiler","content":"The path to the OCaml lexer generator (ocamllex). [ocaml]lex.compiler = /usr/local/bin/ocamllex.opt  "},{"title":"yacc.compiler​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#yacccompiler","content":"The path to the OCaml parser generator (ocamlyacc). [ocaml]yacc.compiler = /usr/local/bin/ocamlyacc  "},{"title":"debug​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#debug","content":"The path to the OCaml debugger (ocamldebug). [ocaml]debug = /usr/local/bin/ocamldebug  "},{"title":"interop.includes​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#interopincludes","content":"The path to the OCaml standard library directory (see Interfacing C with OCaml). [ocaml]interop.includes = /usr/local/lib/ocaml  "},{"title":"[parser]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#parser","content":"This section defines settings for the BUCK parser. "},{"title":"python_interpreter​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#python_interpreter","content":"The path to the python interpreter to use for parsing. If not specified, the [python].interpreter setting is used. [parser]python_interpreter = /usr/bin/python  "},{"title":"python_path​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#python_path","content":"The PYTHONPATH environment variable set for the python interpreter used by the parser to use. By default, this is unset. [parser]python_path = /path1:/path2  "},{"title":"polyglot_parsing_enabled​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#polyglot_parsing_enabled","content":"Indicates whether support for experimental polyglot parsing should be enabled. When enabled, build file can have a # BUILD FILE SYNTAX: marker followed by one of supported syntax names that include PYTHON_DSL and an experimental SKYLARK. This flag is disabled by default. [parser]polyglot_parsing_enabled = true  "},{"title":"default_build_file_syntax​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#default_build_file_syntax","content":"Specifies the default syntax assumed when parsing build files without explicit build syntax marker (# BUILD FILE SYNTAX: ). This flag is only applicable whenparser.polyglot_parsing_enabled configuration is set to true. By default it's value is set to PYTHON_DSL. [parser]default_build_file_syntax = SKYLARK  "},{"title":"disable_implicit_native_rules​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#disable_implicit_native_rules","content":"If set, native rules (cxx_library, android_library, etc) cannot be used in BUCK files. This can be useful if your team has a common set of macros that should be loaded, and one desires a fast-feedback way to make sure that Buck's native rules are not inadvertently used. If set, native rules can only be accessed via the 'native' object within an extension file that is evaluated with load() or include_defs(). This flag is disabled by default (native rules can be used in build files). [parser]disable_implicit_native_rules = true  "},{"title":"warn_about_deprecated_syntax​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#warn_about_deprecated_syntax","content":"If set, warnings about deprecated syntax in BUCK files will be issued. This flag is enabled by default. [parser]warn_about_deprecated_syntax = false  "},{"title":"[project]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#project","content":"This section defines project-level settings. "},{"title":"generate_android_manifest​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#generate_android_manifest","content":"Forces Buck to generate &quot;AndroidManifest.xml&quot; files for Android IntelliJ modules. The generated manifests contain package name only to allow Android IntelliJ plugin resolve references to resources correctly. Manifests are generated for modules that have information about package name and have either none or more than one targets with Android manifests. When a module has exactly one target with Android manifest this manifest is used as a manifest in the module. [project]generate_android_manifest = true  "},{"title":"ide​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#ide","content":"Buck attempts to figure out the correct IDE to use based on the type of rule (e.g. for apple_library it will generate Xcode workspace), but for cross-platform libraries (like cxx_library) it is not possible. This setting lets you specify the default IDE that buck project generates. Possible values are: intellijxcode [project]ide = xcode  "},{"title":"glob_handler​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#glob_handler","content":"The glob() handler that Buck will use. The possible values are: python (default): evaluates globs in the Python interpreter while parsing build files.watchman: evaluates the globs with Watchman, which is generally much faster. [project]glob_handler = python  "},{"title":"allow_symlinks​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#allow_symlinks","content":"If set to forbid, Buck will disallow symbolic links to source and BUCK files. This allows Buck to enable a number of performance improvements. If set to allow, Buck will silently ignore symlinks. The default value is warn. [project]allow_symlinks = forbid  "},{"title":"build_file_search_method​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#build_file_search_method","content":"How Buck finds BUCK files. This is used when a build target pattern contains /... and for commands like buck project. Possible values are: filesystem_crawl (default): walk the file system recursively using APIs provided by the operating system.watchman: query Watchman with a glob query like **/BUCK. For file systems such as EdenFS, watchman can be faster than filesystem_crawl. This setting in independent of [project].glob_handler. [project]build_file_search_method = filesystem_crawl  "},{"title":"watchman_query_timeout_ms​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#watchman_query_timeout_ms","content":"When communicating with Watchman, Buck will wait this long for a response. The default is 60000 ms. [project]watchman_query_timeout_ms = 60000  "},{"title":"ide_force_kill​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#ide_force_kill","content":"Configures how the buck project command responds if an instance of Apple's Xcode IDE is running. [project]ide_force_kill = never  Possible values are: always : Always terminate Xcode. Do not ask first.never : Never terminate Xcode.prompt : Ask the user whether to terminate Xcode. This is the default. To specify that Buck should respond in a way that is different than the .buckconfig setting, use the--config command-line option. buck project --config project.ide_force_kill=always  For more information about the --config option, see the Common Parameters topic. "},{"title":"initial_targets​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#initial_targets","content":"A space-separated list of build targets to run when buck project is executed. This is often a list of genrules whose outputs need to exist in order for an IDE to be able to build a project without the help of Buck. [project]initial_targets = //java/com/facebook/schema:generate_thrift_jar  "},{"title":"ignore​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#ignore","content":"A comma-separated list of subtrees within the project root which are ignored in the following contexts: Buck daemon filesystem monitoring.Filesystem traversal when searching for tests and BUCK filesIntelliJ project indexing Buck automatically excludes its own output, e.g. buck-out, .buckd, and .idea, as well as the cache directory (see [cache].mode), but it makes no assumptions about source control systems. [project]ignore = .git  "},{"title":"pre_process​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#pre_process","content":"A script that should be executed before the project files are generated. This should only be used to do some project-specific actions that are reasonably fast. The environment of this script contains the following variables: BUCK_PROJECT_TARGETS - whitespace-separated list of input targets.BUCK_PROJECT_TYPE - the type of a project, can be &quot;xcode&quot; or &quot;intellij&quot;. [project]pre_process = scripts/pre_process_buck_project.py  "},{"title":"post_process​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#post_process","content":"A script that should be executed after the project files are generated. This should only be used to do some project-specific actions that are reasonably fast. The environment of this script contains the following variables: BUCK_PROJECT_TARGETS - whitespace-separated list of input targets.BUCK_PROJECT_TYPE - the type of a project, can be &quot;xcode&quot; or &quot;intellij&quot;. [project]post_process = scripts/post_process_buck_project.py  "},{"title":"parallel_parsing​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#parallel_parsing","content":"When set to true, Buck will parse your build files in parallel. [project]parallel_parsing = false  "},{"title":"parsing_threads​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#parsing_threads","content":"When [project].parallel_parsing is enabled, this specifies the number of threads Buck uses to parse. By default, this is equal to the number of threads Buck uses to build, and will be the minimum of this setting and [build].threads. [project]parsing_threads = 2  "},{"title":"build_file_import_whitelist​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#build_file_import_whitelist","content":"A comma-separated list that configures which Python modules can be imported in build files. [project]build_file_import_whitelist = math, Foo  "},{"title":"shared_libraries_in_bundles​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#shared_libraries_in_bundles","content":"When using xcode project, for projects that depend on a library, if set to 'true', if that library is the 'binary' of a bundle, the bundle will replace the library in the Xcode linking phase [project]shared_libraries_in_bundles = false  "},{"title":"motd​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#motd","content":"A plain text message that will be printed first when a user interacts with buck. This supports simple special characters like newlines (\\n). [project]motd = &quot;DO NOT BREAK THE BUILD&quot;  "},{"title":"[python]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#python","content":"This section defines settings relevant to python_* rules. Python platform flavors in .buckconfig​ Buck enables you to create additional platform flavors for Python in .buckconfig. A platform flavor groups together a set of configuration parameters, which you can then reference at build time. To create a new Python platform flavor, add a section with the header [python#**flavor**]  to .buckconfig. If you invoke Buck with the specified flavor appended to the build target, Buck uses the values in this section instead of those in [python]. For example, to build with the values in [python#py3] instead of [python], you could invoke Buck using the following command: $ buck build app#py3  This is useful if, for example, you have both Python 2 and Python 3 code in your project and need to differentiate between them by changing the value of the [python].interpreter. You can also use these platform flavors, in the platform argument of the python_binary rule, and in the platform_sources and platform_resources arguments of the python_library rule. "},{"title":"interpreter​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#interpreter","content":"The path to the python interpreter to use. By default, Buck will search for this in your PATH. [python]interpreter = /usr/bin/python  "},{"title":"inplace_interpreter_flags​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#inplace_interpreter_flags","content":"Flags to pass to the python interpreter when running a .pex file that is configured to run 'inplace'. Defaults to -Es [python]inplace_interpreter_flags = -EBs  "},{"title":"library​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#library","content":"The build rule, typically a prebuilt_cxx_library, wrapping the libpython.so that cpp_python_extension rules should build against. [python]library = //third-party/python:python  "},{"title":"native_link_strategy​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#native_link_strategy","content":"The strategy used for pulling in native dependencies: merged: Native dependencies which are first-order dependencies of python_* rules are linked as full, separate, shared libraries. Transitive native dependencies are statically linked into a single monolithic shared library. This is preferred to reduce the native code size and shared library count.separate (default): Transitive native dependencies are linked as full, separate, shared libraries. This is preferred for faster build-time speed. [python]native_link_strategy = separate  "},{"title":"package_style​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#package_style","content":"The packaging style to use for python_binary and python_test. Valid values are: inplace: builds executables which are only able to run from within the repository. This style of packaging is significantly faster than standalone packages.standalone (default): builds self-contained executable packages that can be run outside of the repository. [python]package_style = standalone  "},{"title":"path_to_pex_executor​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#path_to_pex_executor","content":"The path to the tool used to run executable Python packages. For self-executing packages, this should just by the shell. [python]path_to_pex_executor = /bin/sh  "},{"title":"pex_extension​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#pex_extension","content":"The extension to use for executable Python packages. [python]pex_extension = .pex  "},{"title":"version​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#version","content":"The implementation and version of the Python interpreter. The syntax is: &lt;interpreter implementation&gt; &lt;interpreter version&gt;  The implementation and version should be separated by a space. The version should comprise only numerals and periods; it should not contain characters such as +, although some Python versions use such characters. To obtain the implementation, you can use the following command, invoked using the relevant Python interpreter: python -c &quot;import platform; print( platform.python_implementation() )&quot;  Similarly, to obtain the version, use: python -c &quot;import platform; print( platform.python_version() )&quot;  Example: [python]version = CPython 2.7  "},{"title":"[repositories]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#repositories","content":"Lists the cells that constitute the Buck project. Buck builds that are part of this project—that is, which use this .buckconfig—can access the cells specified in this section. [repositories] buck = . bazel_skylib = ./third-party/skylark/bazel-skylib  The string on the left-hand side of the equals sign is the alias for the cell. The string on the right-hand side of the equals sign is the path to the cell from the directory that contains this .buckconfig file. It is not necessary to include the current cell in this section, but we consider it a best practice to do so: buck = .  You can view the contents of this section using the buck audit cell command. Although the name of the section is repositories, the section actually lists cells. In practice, Buck cells often correspond to repositories, but this is not a requirement. For more information about the relationship between Buck projects, cells, and repositories, see the Key Concepts topic. "},{"title":"[resources]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#resources","content":"The settings to control how Buck uses resources to schedule the work. When resource-aware scheduler is enabled, Buck will create more threads in attempt to run resource-independent work in parallel. Number of build threads is still controlled by num_threads option. Buck will also create a number of additional threads that will be used for tasks that don't require CPU: network fetches, disk operations, etc. Total number of threads that Buck will operate is controlled bymanaged_thread_count option, that is, it includes build threads and additional threads. "},{"title":"resource_aware_scheduling_enabled​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#resource_aware_scheduling_enabled","content":"When set to true, Buck will attempt to use resource-aware scheduler. [resources]resource_aware_scheduling_enabled = true  "},{"title":"managed_thread_count​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#managed_thread_count","content":"Buck will use num_threads threads for CPU intensive tasks (e.g. local building) and it will use managed_thread_count - num_threadsfor other purposes. Thus, managed_thread_count value must be greater or equal to num_threads value. If you don't specify this value, Buck will create built-in number of additional threads which equals to the number of CPU cores on the machine. These additional threads will be used for non-CPU work like networking, disk I/O and etc. But if one of the num_threads threads is free then Buck will probably use it for non-CPU stuff as well. [resources]managed_thread_count = 40  "},{"title":"default_cpu_amount​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#default_cpu_amount","content":"Amount of CPU resource required by arbitrary job which has no specific setting for its resource amounts. By default is 1 - a single CPU is required for the job to be completed. [resources]default_cpu_amount = 1  "},{"title":"default_memory_amount​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#default_memory_amount","content":"Amount of memory resource required by arbitrary job which has no specific setting for its resource amounts. By default is 1 - a single memory resource is required for the job to be completed. A single memory resource is an abstract value, currently it equals to 100 Mb. [resources]default_memory_amount = 1  "},{"title":"default_disk_io_amount​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#default_disk_io_amount","content":"Amount of disk I/O resource required by arbitrary job which has no specific setting for its resource amounts. A single disk resource is an abstract value. Think about it as like SSD can handle 50 parallel disk jobs with weight 1, while HDD can handle only 20. Thus, if job needs to read or write a lot of data, it is better to assign a higher value for its disk I/O amount. This will reduce the risk to have several similar jobs running concurrently and performing huge disk I/O operations, slowing down build itself and system performance. [resources]default_disk_io_amount = 1  "},{"title":"default_network_io_amount​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#default_network_io_amount","content":"A single network resource is an abstract value. Think about it as Ethernet can handle 50 parallel network jobs with weight 1. Slower network interfaces can handle less amount of jobs. If job needs to send or receive a lot of data, it is better to assign a higher value for its network I/O amount. [resources]default_network_io_amount = 1  "},{"title":"max_memory_resource​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#max_memory_resource","content":"Maximum memory resource available to Buck. By default is size of Java heap divided by 100 Mb. A single memory resource is an abstract value, currently it equals to 100 Mb. [resources]max_memory_resource = 30  "},{"title":"max_disk_io_resource​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#max_disk_io_resource","content":"Maximum disk I/O resource available to Buck. By default the value is 50. Think about it as like SSD can handle 50 parallel disk jobs with weight 1, while HDD can handle only 20. Thus, if job needs to read or write a lot of data, it should require higher disk I/O resource. [resources]max_disk_io_resource = 30  "},{"title":"max_network_io_resource​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#max_network_io_resource","content":"Maximum disk I/O resource available to Buck. By default the value is 30. Think about it as Ethernet can handle 50 parallel network jobs with weight 1. Slower network interfaces can handle less amount of jobs. If job needs to send or receive a lot of data, it should require higher network I/O resource. [resources]max_network_io_resource = 30  "},{"title":"[resources_per_rule]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#resources_per_rule","content":"This section contains required resource amounts for various build rules. If amount for some build rule is not specified in this section, then amount of 1 (CPU), 1 (Memory), 0 (disk i/o) and 0 (network i/o) is used. Amounts are used in local building, so in most cases build rule will require 0 for network I/O unless it fetches any data from network. Rule's name is constructed by converting the camel-style class name of the BuildRulein Buck's source code (e.g. MyBuildRule) into lower underscored name (e.g. my_build_rule). [resources_per_rule]cxx_link = 1, 1, 5, 0 android_binary = 8, 30, 30, 0  Buck will use the defined resource amounts during the build process in order to attempt to use all available resources. "},{"title":"[rust]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#rust","content":"The settings to control how Buck builds rust_* rules. "},{"title":"compiler​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#compiler-3","content":"The path that Buck should use to compile Rust files. By default, it checks your PATH. [rust]compiler = /usr/local/bin/rustc  "},{"title":"rustc_flags​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#rustc_flags","content":"Default command-line flags passed to all invocations of the rust compiler. [rust]rustc_flags = -g  "},{"title":"rustc_binary_flags​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#rustc_binary_flags","content":"Default command-line flags passed to invocations of the rust compiler in rust_binary rules, in addition to options set in rustc_flags. [rust]rustc_binary_flags = -C lto  "},{"title":"rustc_library_flags​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#rustc_library_flags","content":"Default command-line flags passed to invocations of the rust compiler in rust_library rules, in addition to options set in rustc_flags. [rust]rustc_library_flags = --cfg=debug  "},{"title":"unflavored_binaries​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#unflavored_binaries","content":"Controls whether the output from rust_binary or rust_test rules include a flavor from the platform in the path or not. Even unflavored, the path includes #binary. [rust]unflavored_binaries = true  "},{"title":"remap_src_paths​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#remap_src_paths","content":"Controls whether rustc remaps the source paths in its output. Buck will always construct a link tree with the sources required for a given rule, which means the paths passed to rustc are not the original source paths. This option will remap those paths in compiler output, debug info, file!() and elsewhere to match the original source names. The options are &quot;no&quot; (don't remap), and &quot;yes&quot; (remap). [rust]remap_src_paths = no  "},{"title":"force_rlib​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#force_rlib","content":"When force_rlib is true, then buck will always compile static (rlib) libraries even when the final target (binary or unit test) is being linked with a shared link style. Rust code is typically always statically linked, and a lot of surrounding tooling doesn't cope well with dynamically linked Rust crates. Linking with a shared link style will still dynamically link with C/C++ shared objects. [rust]force_rlib = false  "},{"title":"prefer_static_libs​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#prefer_static_libs","content":"When prefer_static_libs is true, then buck will always prefer to link with static versions of a library when building a shared target. In practice, this only affects linking with the standard library crates. [rust]prefer_static_libs = false  "},{"title":"incremental​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#incremental","content":"When set, enable rustc's incremental build option. Rust's incremental compilation mode operates transparently to the build system - it is guaranteed to produce bit-for-bit identical output to non-incremental builds. To do this it maintains a separate incremental database to one side. The only requirement is that there is only ever one instance of rustc for a given crate at one time. Buck guarantees this by making sure there's a separate incremental database for each flavor (since builds for different flavors of the same target can be run concurrently). The value of this option is an additional path fragment used for the incremental database path. This allows the user to use separate databases for optimized, debug, etc command lines. If this is not required, then it can be any valid pathname fragment. [rust]incremental = opt  "},{"title":"default_edition​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#default_edition","content":"Set the default edition for Rust rules. The edition can be specified on a per-rule basis, but this sets the default if nothing is specified. The default is &quot;2015&quot;. [rust]default_edition = 2018  "},{"title":"[sandbox]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#sandbox","content":"This section controls sandboxing. Sandbox execution provides better guarantees about resources accessible to the processes by using system-provided capabilities to restrict certain usages (for example, restricting the set of files allowed to be read and write). "},{"title":"darwin_sandbox_enabled​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#darwin_sandbox_enabled","content":"This option specifies whether sandboxing is enabled on OS X or not. [sandbox]darwin_sandbox_enabled = true  "},{"title":"genrule_sandbox_enabled​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#genrule_sandbox_enabled","content":"Enables sandbox in genrule. [sandbox]genrule_sandbox_enabled = true  "},{"title":"[test]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#test","content":"The settings to control how Buck runs tests. "},{"title":"incl_no_location_classes​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#incl_no_location_classes","content":"This specifies whether jacoco code coverage is enabled on classes without source location. The default is false. Set to true to enable code coverage with robolectric tests. Note that setting to true will include dynamically created sources in code coverage, such as that created by mocking (e.g. jmockit) or persistence frameworks. [test]incl_no_location_classes = true  "},{"title":"timeout​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#timeout","content":"The number of milliseconds per test to allow before stopping the test and reporting a failure. The default is no timeout. Not all *_test rules utilize this value. A JUnit test can override this via the @Test annotation. [test]timeout = 300000  "},{"title":"rule_timeout​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#rule_timeout","content":"The number of milliseconds per *_test rule to allow before stopping it and reporting a failure. The default is no timeout. [test]rule_timeout = 1200000  "},{"title":"external_runner​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#external_runner","content":"This specifies an external test runner command to use instead of Buck's built-in test runner. The external test runner is invoked by Buck after it has built all the test rules. It passes the test runner the path to a file which contains a JSON-encoded list of test file infos via the --buck-test-info [path] command line option. Additionally, if buck test is invoked with -- [extra-runner-args], these will be passed to the external runner before --buck-test-info. The JSON-encoded test file contains an array of infos. Those infos have the following fields: target: The build target of the test rule.type: A string describing the type of the test.command: An array of command line arguments the test runner should invoke to run the test.env: A map of environments variables that should be defined by the test runner when running the test.labels: An array of labels that are defined on the test rule.contacts: An array of contacts that are defined on the test rule. These are typically user names or email addresses. [test]external_runner = command args...  "},{"title":"thread_utilization_ratio​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#thread_utilization_ratio","content":"Sets the maximum number of threads to use for testing as a ratio of the number of threads used for building. By default(1.0), buck uses runs tests on all threads that were used for building. [test]thread_utilization_ratio = 0.5  "},{"title":"parallel_external_test_spec_computation_enabled​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#parallel_external_test_spec_computation_enabled","content":"Whether external test spec computation is allowed to happen in parallel. Enabling this option can significantly speed up test execution when many test targets are requested. By default it is disabled. [test]parallel_external_test_spec_computation_enabled = false  "},{"title":"threads​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#threads-2","content":"Specify number of threads used when running test. [test]threads = 5  "},{"title":"[thrift]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#thrift","content":"This section provides settings to locate required thrift components. "},{"title":"compiler​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#compiler-4","content":"The path or build target that builds the thrift compiler that Buck should use. [thrift]compiler = /usr/local/bin/thrift  "},{"title":"compiler2​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#compiler2","content":"The path or build target that builds the thrift2 compiler that Buck should use. If this is unset, it defaults to the value of [thrift].compiler. [thrift]compiler2 = /usr/local/bin/thrift2  "},{"title":"[tools]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#tools","content":"This section tells Buck how to find certain tools e.g. how the Java compilation occurs and how auxiliary tools are used e.g. the ProGuard Java class file optimizer which is used as part of the Android build process. "},{"title":"javac​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#javac","content":"The javac option is a path to a program that acts like Java javac. When set, buck uses this program instead of the system Java compiler. When neither this nor [tools].javac_jar is set, Buck defaults to using the system compiler in-memory. "},{"title":"javac_jar​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#javac_jar","content":"When this option is set to a JAR file, Buck loads the referenced compiler in-memory. When neither this nor [tools].javac is set, Buck defaults to using the system compiler in-memory. "},{"title":"java_for_tests​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#java_for_tests","content":"The java_for_tests option is a path to a java binary. When set, buck uses that binary to execute Java tests—when using either the internal or external test runners—instead of the java binary used to run Buck itself. When this option is not set, Buck executes Java tests using the same binary used to run Buck. "},{"title":"compiler_class_name​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#compiler_class_name","content":"When javac_jar is set, Buck loads the referenced compiler class name from the jar. When it is not set but javac_jar is set, Buck uses the default compiler class. "},{"title":"proguard​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#proguard","content":"This option specifies the location of the JAR file to be used to invoke ProGuard. This overrides the default ProGuard JAR file that would have been picked up from the Android SDK. Here is an example setting: [tools]proguard = proguard/proguard-fork.jar  "},{"title":"proguard-max-heap-size​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#proguard-max-heap-size","content":"This option specifies how much memory is used when running proguard. Defaults to 1024M. You may want to give ProGuard more memory to try and improve performance. [tools]proguard-max-heap-size = 4096M  "},{"title":"proguard-agentpath​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#proguard-agentpath","content":"This option allows the specification of a Java profiling agent which is set with the -agentpath argument when the ProGuard jar file is executed. Typically this would be set in a .buckconfig.local configuration file for when you want to profile a build running on your local machine. Set this to the actual path of the installed agent on the machine where ProGuard will run. [tools]proguard-agentpath = /Applications/YourKit_Java_Profiler_2015_build_15084.app/Contents/Resources/bin/mac/libyjpagent.jnilib  "},{"title":"[ui]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#ui-1","content":"This section configures the appearance of Buck's command line interface. "},{"title":"always_sort_threads_by_time​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#always_sort_threads_by_time","content":"Specifies whether the lines with information about building and testing threads should always be sorted by the time spent running the rules they are currently executing. When set to false, threads are only sorted if there are more threads than available lines (see [ui].thread_line_limit for an option to configure this limit). Only effective when the super console is used. The default value is false. [ui]always_sort_threads_by_time = true  "},{"title":"error_message_augmentations​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#error_message_augmentations","content":"This setting is preliminary and is likely to change. Specifies a comma-separated list of mappings from regular expressions (regexes) to message strings. If the text of a Buck parser error matches one of the specified regexes, the corresponding message string is appended to the error. You can use the message string to provide additional helpful information to the user. If the regex contains unescaped parentheses, (), the text that the parentheses enclose is captured. You can then insert this captured text in the appended string by using $1 for the first captured text string, $2 for the second, and so on. This works exactly like Java regex replacement strings. [ui]error_message_augmentations = &quot;The rule (//S+)-cxx could not be found.&quot; =&gt; &quot;Please make sure that $1 is a cxx library.  "},{"title":"relativize_targets_to_working_directory​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#relativize_targets_to_working_directory","content":"Determines whether build target patterns provided on the command line are relativized to the current working directory. For example, if buck build bar/...is run from the foo subdirectory of the project, the pattern//foo/bar/... is built instead. If set to false, //bar/...would be built. This defaults to true. [ui]relativize_targets_to_working_directory = false  "},{"title":"enable_show_output_warning​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#enable_show_output_warning","content":"Determines whether a deprecation warning for --show-output should be shown. The warning also informs users that they should be using --show-outputs instead. This defaults to false. [ui]enable_show_output_warning = false  "},{"title":"thread_line_limit​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#thread_line_limit","content":"Specifies how many lines will be used to show the status of running threads during building and testing by default. Only effective when the super console is used. The value has to be a positive number. The default value is 10. [ui]thread_line_limit = 10  "},{"title":"thread_line_limit_on_warning​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#thread_line_limit_on_warning","content":"Specifies how many lines will be used to show the status of running threads during building and testing after a warning is reported. Only effective when the super console is used. The value has to be a positive number. Defaults to the value of [ui].thread_line_limit. [ui]thread_line_limit_on_warning = 10  "},{"title":"thread_line_limit_on_error​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#thread_line_limit_on_error","content":"Specifies how many lines will be used to show the status of running threads during building and testing after an error is reported. Only effective when the super console is used. The value has to be a positive number. Defaults to the value of [ui].thread_line_limit. [ui]thread_line_limit_on_error = 10  "},{"title":"truncate_failing_command​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#truncate_failing_command","content":"Determines whether a failing executed command is truncated in error messages. This defaults to true. [ui]truncate_failing_command = true  "},{"title":"superconsole​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#superconsole","content":"Whether the super console is enabled. If so, a more reactive UI will be shown. Valid values are ENABLED, DISABLED, and AUTO. By default, this is set to AUTO which will take OS, terminal settings and other things into account. In most interactive cases, it will be enabled. [ui]superconsole = ENABLED  "},{"title":"warn_on_config_file_overrides​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#warn_on_config_file_overrides","content":"Whether to display a warning when using configuration overrides from .buckconfig.local or any of the files mentioned in Precedence of Buck configuration specificationsThis is true by default. [ui]warn_on_config_file_overrides = false  "},{"title":"warn_on_config_file_overrides_ignored_files​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#warn_on_config_file_overrides_ignored_files","content":"A comma-separated list of names of configuration files that should be ignored. By default, Buck prints a warning if settings are in use from any of the files in Precedence of Buck configuration specificationsSometimes, however, a user should not be alerted about specific files. For example, there may be global Buck settings in /etc/buckconfig.d/system that are managed by an IT organization, not the user, and the warning would just be ignored. In this case, this setting could be set to systemso that /etc/buckconfig.d/system being present would not elicit a warning. [ui]warn_on_config_file_overrides_ignored_files = experiments,system  "},{"title":"[worker]​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#worker","content":"This section configures how Buck's workers (worker_tools and similar) work. "},{"title":"persistent​","type":1,"pageTitle":".buckconfig","url":"/docs/legacy/files-and-directories/dot-buckconfig/#persistent","content":"Specifies whether by default workers run in persistent mode (reusing the worker process across builds). The persistent option of worker_tool overrides this default. The default value is false. Be careful when switching this to true since the workers will not shut down after buck commands and will continue consuming system resources. [worker]persistent = false  "},{"title":"buck2 audit visibility command","type":0,"sectionRef":"#","url":"/docs/rfcs/audit_visibility/","content":"","keywords":""},{"title":"Context​","type":1,"pageTitle":"buck2 audit visibility command","url":"/docs/rfcs/audit_visibility/#context","content":"Buck has a concept of Visibility for every target. It allows users to define, for each target, the targets it can depend on and targets that can depend on it. Visibility is specified as an allowlist of targets/target patterns, and any target used that falls outside of the allowlist fails visibility checking. Visibility pattern can be specified on visibility and within_view attributes in buildfiles and PACKAGE files. Visibility is important to lots of codebase maintainers because it can be used to keep projects from pulling in unwanted dependencies. As some examples, App Core teams are using Buck visibility as a replacement to current supermodules for protecting app modularity. Instagram's using visibility to protect modularity and define Link Groups used for build speed optimizations. There's interest from various DevX teams in using Buck visibility on PACKAGE files to enforce repo boundaries, which will allow target determinators to migrate off of sparse profiles and onto Eden, although visibility in its current form is likely not fit for enforcing such repo boundaries. Visibility has also been used to enforce requirements that only certain targets are allowed to depend on targets in fbcode/scripts. For perf reasons, buck2 doesn't always enforce visibility. Instead, it only enforces visibility on construction of the configured target graph. Visibility checking is expensive memory-wise because it requires tracking all deps at each node. When constructing configured target graph, this cost is already paid for when buck2 checks transitive target compatibility. When constructing the unconfigured target graph, however, this is costly, so we avoid checking visibility there. (Note that buck does not allow you to specify selects in visibility attributes.) In practice, this means that commands like cquery and build can enforce visibility whereas commands like uquery and targets cannot. Having visibility checked only on the configured target graph is problematic for 2 reasons: 1) Visibility is only checked on configured deps after selects are resolved, so it's possible for a target to pass visibility checking in one configuration but fail visibility checking in another. For example, a target may pass visibility checking on a linux configuration but fail visibility checking on mac configuration if it has a bad mac-only dependency. This makes visibility enforcement more difficult because now you have to query the same graph in both linux and mac configuration before you know that visibility is always valid. 2) Uquery (querying the unconfigured target graph) has better performance than cquery (querying the configured target graph). Big-O wise, uquery scales with O(# of targets) whereas cquery scales with O((# number of configurations) x (# of targets)). Having a way to check visibility on unconfigured target graph can be much cheaper than doing so on configured target graph. "},{"title":"Proposed Solution: audit visibility command​","type":1,"pageTitle":"buck2 audit visibility command","url":"/docs/rfcs/audit_visibility/#proposed-solution-audit-visibility-command","content":"It's clear that we need a way to check visibility on the unconfigured target graph, but we don't want buck2 uquery and buck2 targets to regress in memory use. To get the best of both worlds, I propose adding a separate command to buck2, buck2 audit visibility, that will check visibility on the unconfigured target graph. Instead of checking on construction of the unconfigured target graph, this command will check after construction, which will avoid any memory regression. The tradeoff is that the visibility checking won't be cached, and rerunning audit visibility will rerun visibility checking on each invocation. "},{"title":"Usage and Invocation​","type":1,"pageTitle":"buck2 audit visibility command","url":"/docs/rfcs/audit_visibility/#usage-and-invocation","content":"buck2 audit visibility command will take in a list of target patterns as well as common build args like config flags and mode files as args. It will construct the unconfigured target graph based on the transitive deps of those targets and check that this graph has valid visibility. Checking transitive deps matches the behavior of visibility checking on cquery, but we may revisit this decision in the future if there is a need for just verifying the immediate dependencies. For example, an invocation to check visibility on the transitive closure of fbobjc can be buck2 audit visibility fbsource//fbobjc/...  It cannot be used to check that a target has a valid visibility with respect to targets outside of the transitive closure of its deps. For example, buck2 audit visibility fbcode//buck2/starlark-rust/starlark:starlark will just check that all transitive deps of starlark target (including starlark target) have valid visibility with respect to each other. It will not check that any targets that depend on starlark respect starlark target's visibility attribute. "},{"title":"Bxl support for performing analysis on targets","type":0,"sectionRef":"#","url":"/docs/rfcs/bxl-analysis/","content":"","keywords":""},{"title":"Intro​","type":1,"pageTitle":"Bxl support for performing analysis on targets","url":"/docs/rfcs/bxl-analysis/#intro","content":"As Bob and I continue to build out bxl we want users to be able to inspect the providers and actions for a given target label. In order to support this, we need to be able to provide access to AnalysisResult via starlark, obtained via a call to RuleAnalysisCalculation::get_analysis_result. "},{"title":"How to implement it?​","type":1,"pageTitle":"Bxl support for performing analysis on targets","url":"/docs/rfcs/bxl-analysis/#how-to-implement-it","content":"Our three principle options are as follows: BxlContext::analyze(targetlabel: ConfiguredTargetLabelLike), where ConfiguredTargetLabelLike accepts ConfiguredTargetLabel, ConfiguredTargetNode, or sets and lists of these things + acceptable strings. In this scenario, we attach the analysis method onto the bxl context itself, and require that users pass in the target label-ish thing when they want to construct an analysis result. It's a little awkward in some ways because the analysis is more naturally a method on the argument being passed in and the BxlContext is a context that is needed to perform the calculation. On the other hand, this allows us to construct a type analogous to TargetExpr which can parse from a wide variety of different ConfiguredTarget like things (strings, nodes, labels, sets, ...). It also is a bit nice from an implementational standpoint since we don't have to pass the context around everywhere. This isn't a huge pro though, since we can stick it in the global eval field. result = bxl.analyze(bxl.cquery.deps(&quot;foo&quot;))  ConfiguredTargetLabel::analyze(), ConfiguredTargetNode::analyze(), ... where we carry around the BxlContext in the eval global field and implement analysis on each type that is target label like. The pro of this one is that it's quite natural - you can take a ConfiguredStarlarkTargetLabel and then just ... call analyze() on it like you might expect to. The two downsides are that we have to propagate the context around behind the scenes, and we'll have to provide an implementation of analyze on everything that we'd like to have be able to be analyzable. result = &quot;root//bin:the_binary&quot;.analyze() # but we don't support &quot;root//bin:the_binary&quot;.rdeps() # instead this looks nice nodes = ctx.cquery.deps(&quot;foo&quot;) for n in nodes: # since we can now do nodes.label nodes.attrs.field # similarly access analysis nodes.analysis  BxlContext::analysis(): AnalysisContext where AnalysisContext exposes AnalysisContext::analyze(targetlabel: ConfiguredTargetLabelLike). There's not really any pros of this approach except that it's similar to the flow for cquery where we return a cqueryctx object to call cquery methods through. result = ctx.analysis().analyze(&quot;//lib:file1&quot;)  We can also restrict the API to require that users go through cquery to obtain a ConfiguredTargetNode prior to calling analysis, although we don't have to. I say that we don't have to because the get_analysis_result method mentioned above is configured to accept a label anyway. "},{"title":"Buck Extension Language (BXL)","type":0,"sectionRef":"#","url":"/docs/rfcs/bxl/","content":"","keywords":""},{"title":"Use Cases​","type":1,"pageTitle":"Buck Extension Language (BXL)","url":"/docs/rfcs/bxl/#use-cases","content":""},{"title":"Cpp LSP​","type":1,"pageTitle":"Buck Extension Language (BXL)","url":"/docs/rfcs/bxl/#cpp-lsp","content":"Lsp prefers to have a single buck command that given a file, returns the corresponding compilation database. This requires a single command, i.e a bxl, that accepts a file as input, performs owners queries, and uses the owning target plus the desired file to get the clang flags, and then writes it to disk in comp db format. It’s possible to write the same features using buck calls to cquery, and build using subtargets to generate compilation database per file. However, this requires lsp owners to maintain code in several locations and languages, and parse and reserialize data. It also does not provide the same incrementality and subscription update features of the resulting comp db that writing this in bxl would have. Furthermore, we may explore the idea of trimming the compilation command to only dependencies required per the file requested. Bxl actions provides a straightforward api for adding this when writing the actual comp db file. "},{"title":"Android LSP​","type":1,"pageTitle":"Buck Extension Language (BXL)","url":"/docs/rfcs/bxl/#android-lsp","content":"Android project requires traversing the target graph to find and java libraries, grouping and converting them between modules or project libraries depending on the number of references, and restructuring the graph as directory based. Android LSP is able to take advantage of subscriptions in the future when available, allowing developers to keep their IDE up-to-date automatically without needing to manually regenerate the project. With bxl, the graph traversals can be written in starlark, allowing propagation of information down the graph, accessing targets’ attributes to analyze dependencies, and access providers for artifacts and action information needed to output the project file. Project generation also performs directory listings that buck2’s dice already performs and caches (I think, need to confirm). Bxl poses the interesting possibility that we can expose a limited set of IO operations that are tracked by dice so bxl can access the same cached file operations as rest of buck2. Android project generation currently doesn’t write project files to buck-out, which prevents it from using buck2 actions. It will have to rely on an external script to process the graph information printed by buck and write the actual project files. If it moves to buck-out based, then it can take advantage of creating actions directly using the graph information processed, and potentially take advantage of incremental actions api to avoid writing the entire graph on each subsequent update. "},{"title":"iOS Project​","type":1,"pageTitle":"Buck Extension Language (BXL)","url":"/docs/rfcs/bxl/#ios-project","content":"iOS is currently being implemented as a series of queries that are aggregated by an external python script, that then invokes builds of subtargets. The same can be achieved in bxl, but with the entire sequence being cacheable and subscribable so that when the graph is updated, or even when generated files need updating, buck2 can automatically push the updates. However, it is uncertain whether xcode itself can make use of push updates. "},{"title":"Rust LSP​","type":1,"pageTitle":"Buck Extension Language (BXL)","url":"/docs/rfcs/bxl/#rust-lsp","content":"(note from dbarsky@: I’m adding this at Bob’s request. Can be removed as needed.) "},{"title":"Visual Studio Project (vsgo)​","type":1,"pageTitle":"Buck Extension Language (BXL)","url":"/docs/rfcs/bxl/#visual-studio-project-vsgo","content":"Vsgo is a pile of python that converts buck query/buck targets output via a variety of heuristics into inputs to a custom fork gyp which is then invoked to generate visual studio projects for a given buck target. Having direct access to the internals of buck would allow us to remove the heuristics and possibly even move project generation directly into bxl. "},{"title":"Goals​","type":1,"pageTitle":"Buck Extension Language (BXL)","url":"/docs/rfcs/bxl/#goals","content":"From the above use cases, BXL should offer a simple Starlark API that allows easy introspection of the buck2 graph at unconfigured, configured, providers, and actions stage, maintaining incremental behaviour of the BXL evaluation itself. Some minimal API should be offered to allow BXL to provide additional behaviour such as output artifacts, and print results. Most use cases from LSP desire to also propagate information via the command line for these operations, so BXL should support command line arguments as inputs. "},{"title":"API​","type":1,"pageTitle":"Buck Extension Language (BXL)","url":"/docs/rfcs/bxl/#api","content":""},{"title":"Defining a bxl function​","type":1,"pageTitle":"Buck Extension Language (BXL)","url":"/docs/rfcs/bxl/#defining-a-bxl-function","content":"There are multiple models possible. We can have each file be its own bxl, or have each file declare multiple bxl like rules. There are multiple advantages to allowing declaration of multiple bxls, such as grouping similar bxls in the same file, allowing them to “invoke” each other. It doesn’t necessarily add much more complexity for the author, as even with one bxl per file, the author still has to have some declaration for the bxls arguments. # sample.bxl func1 = bxl( impl = my_func1, args = { “arg1”: arg.list(arg.str()), } ) func2 = bxl( ... )  To invoke buck2 for that bxl, we can have the command line as follows. buck2 bxl sample.bxl::func1 -- --arg1 foo bar baz  For bxl functions to read the arguments, a similar api to rule attrs is used args = ctx.args.args_for_bxl  Args defined like attrs when declaring the bxl function above "},{"title":"Accessing target nodes​","type":1,"pageTitle":"Buck Extension Language (BXL)","url":"/docs/rfcs/bxl/#accessing-target-nodes","content":"All standard query functions will be enabled in bxl, allowing users to run query operations, storing them in variables and interacting with them. These allow introspection of the unconfigured targets, or the configured targets based on api # some.bxl targets = ctx.uquery(‘deps(&quot;//foo&quot;)’) targets = filter(targets, my_filter) # introspect a target for target in targets: ctx.print(target.attributes) # prints selects # also inspect the target like below ctx.print(target.label) target = ctx.cquery(“//foo”, “//x86”).attributes # cquery has selects resolved  "},{"title":"Inspect providers​","type":1,"pageTitle":"Buck Extension Language (BXL)","url":"/docs/rfcs/bxl/#inspect-providers","content":"When we have a configured target, bxl can request for the analysis of the rule target = &lt;some configured target&gt; ctx.analysis(target).providers # access the providers  "},{"title":"Actions​","type":1,"pageTitle":"Buck Extension Language (BXL)","url":"/docs/rfcs/bxl/#actions","content":"For IDEs, to generate compilation databases, or generate project files, writing them in bxl will entail creating actions, and executing them. As such, bxl will also be given the rules api to register actions, including dynamic outputs for the rule in the current bxl invocation to build artifacts as part of a bxl function. BXL has the ability to create actions with some constraints: Action is tied to a particular targetIt’s output location is determined in the same pattern as regular actions defined via rules targets = ctx.cquery(‘deps(“//foo:rule”)’) for t in targets: action_ctx = ctx.analysis(t).actions # the action context here is tied to the configured target `t` # actions registered by bxl will be attached with bxl prefix key action_ctx.registry.write(some_output, “foo”)  BXL can also interact with the existing actions on an action via the action_ctx, such as iterating through it, analyzing its outputs, or requesting it to be ran. targets = deps(“foo:rule”) for t in targets: action_ctx = ctx.analysis(t).actions for action in action_ctx.iter(): if “foo/path” in action.output: ctx.build(action)  "},{"title":"What is cached?​","type":1,"pageTitle":"Buck Extension Language (BXL)","url":"/docs/rfcs/bxl/#what-is-cached","content":"All computations requested by a bxl function will be treated as inputs. So if a bxl function calls uquery, then uses the result to do a cquery, and then a build, if buck2 detects that any of the recorded calls to uquery, cquery, and build changes, the entire bxl will be reran, with no early cutoff. The computations itself will still be cached via DICE, so no major performance issues are expected. However, in the event that a bxl function is computationally heavy, the recommendation would be to move that to an action, or split up the bxl and use inter-bxl caching described below. "},{"title":"Inter-bxl caching?​","type":1,"pageTitle":"Buck Extension Language (BXL)","url":"/docs/rfcs/bxl/#inter-bxl-caching","content":"Different bxl can be cacheable between each other if structured as “outputs”/artifacts. This is essentially the same behaviour as a bxl requesting ctx.build, which is cached. Since we have those as hashes on RE, we can track properly and not require storing the values in dice. i.e. # caching_sample.bxl func1 = bxl( impl = my_func1, args = { “arg1”: arg.list(arg.str()), } ) my_func1(ctx): … # do various stuff that might change a lot, but the final result # doesn’t change much ctx.return(some_artifact) func2 = bxl( impl = my_func2, ... ) my_func2(ctx): artifact = ctx.bxl(“:func1”) # now read artifact value # everything below will only be reran if the artifact content changes … # do some expensive stuff  "},{"title":"Buck support to implement configured_alias","type":0,"sectionRef":"#","url":"/docs/rfcs/configured-alias/","content":"","keywords":""},{"title":"Intro​","type":1,"pageTitle":"Buck support to implement configured_alias","url":"/docs/rfcs/configured-alias/#intro","content":"Currently, Buck 2 lacks configured_alias rule support. configured_alias is a builtin rule in Buck v1, and it cannot be currently implemented as user defined rule in Buck v2. This RFC proposes Buck core support for configured_alias. "},{"title":"What is configured_alias?​","type":1,"pageTitle":"Buck support to implement configured_alias","url":"/docs/rfcs/configured-alias/#what-is-configured_alias","content":"Syntax is this: configured_alias( name = &quot;foo-but-linux-release&quot;, actual = &quot;:foo&quot;, platform = &quot;config//platforms:linux-release&quot;, )  When this rule is built, it ignores &quot;current&quot; target configuration, and builds the &quot;actual&quot; target with the configuration specified as &quot;platform&quot; argument. "},{"title":"How to implement it in buck v2?​","type":1,"pageTitle":"Buck support to implement configured_alias","url":"/docs/rfcs/configured-alias/#how-to-implement-it-in-buck-v2","content":""},{"title":"New rule attribute type: configured_dep​","type":1,"pageTitle":"Buck support to implement configured_alias","url":"/docs/rfcs/configured-alias/#new-rule-attribute-type-configured_dep","content":"Currently, we have several dependency attributes: attrs.depattrs.exec_depattrs.transition_depattrs.split_transition_dep This RFC proposes adding another attribute: attrs.configured_dep configured_dep is an attribute which accepts a pair of strings: target and configuration. During analysis, configured attr deps are resolved to providers resolved using given configuration. "},{"title":"configured_alias_impl user defined rule​","type":1,"pageTitle":"Buck support to implement configured_alias","url":"/docs/rfcs/configured-alias/#configured_alias_impl-user-defined-rule","content":"The rule implementation is trivial:  def _configured_alias_impl(ctx): return ctx.attrs.actual.providers configured_alias_impl = rule( impl = _configured_alias_impl, attrs = { &quot;actual&quot;: attrs.configured_dep(), } )  "},{"title":"Finally, configured_alias macro​","type":1,"pageTitle":"Buck support to implement configured_alias","url":"/docs/rfcs/configured-alias/#finally-configured_alias-macro","content":"def configured_alias(name, actual, platform): configured_alias_impl(name, actual = (actual, platform))  "},{"title":"Alternatives​","type":1,"pageTitle":"Buck support to implement configured_alias","url":"/docs/rfcs/configured-alias/#alternatives","content":""},{"title":"No configured_alias​","type":1,"pageTitle":"Buck support to implement configured_alias","url":"/docs/rfcs/configured-alias/#no-configured_alias","content":"Each specific case where configured_alias is used, it can be done with defining custom transition, and using custom transition rule. But having configured_alias is a convenient stopgap to unblock people. "},{"title":"Use @configuration syntax from another RFC.​","type":1,"pageTitle":"Buck support to implement configured_alias","url":"/docs/rfcs/configured-alias/#use-configuration-syntax-from-another-rfc","content":"Instead of passing confiured_target_label(x, y) pass x + &quot;@&quot; + y. "},{"title":"Accept configured_target_label in dep attribute​","type":1,"pageTitle":"Buck support to implement configured_alias","url":"/docs/rfcs/configured-alias/#accept-configured_target_label-in-dep-attribute","content":"dep attribute could support all of: regular target label as stringconfigured target label (as either configured_target_label or x@y I don't know practical applications for this magic, and unless there are uses for it, better keep API simple and explicit. "},{"title":"Bxl Actions and Build API","type":0,"sectionRef":"#","url":"/docs/rfcs/drafts/bxl-actions/","content":"","keywords":""},{"title":"Actions API​","type":1,"pageTitle":"Bxl Actions and Build API","url":"/docs/rfcs/drafts/bxl-actions/#actions-api","content":"The actions API should be the same as rules' actions API. That is, it has the samectx.actions that allows registering of artifacts, creating actions, dynamic actions via the same api. "},{"title":"Creating and Building the Actions​","type":1,"pageTitle":"Bxl Actions and Build API","url":"/docs/rfcs/drafts/bxl-actions/#creating-and-building-the-actions","content":"Bxl allows users to build targets and actions. However, when creating actions, they are not bound/buildable until the artifact/action factories are finalized. As such, we will introduce the limitation that bxl cannot build artifacts that they themselves declared within the bxl. Instead, they will return a set of artifacts to expose to users, which buck2 will automatically build after finalizing the action factory. For dynamic-ness, bxl users will use the standard dynamic output api. There is an issue that during the dynamic output api's lambda, bxl functions will not be able to access the regular bxl functions for queries, etc. However, this is likely not important as most use cases should reasonably query bxl data before the dynamic outputs, and have limited power in dynamic-ness. We can also always replace the ctx of the dynamic to be the bxl context in the future, as we see fit. Sample: def my_bxl(ctx): actions_factory = ctx.bxl_actions.factory() artifact = actions_factory.write(&quot;file.txt&quot;, &quot;content&quot;) # note that existing artifacts that were declared by other rules can be built ctx.actions.build(ctx.analysis(ctx.target(&quot;foo&quot;)).providers[DefaultInfo].default_output)) return [artifact] # exposes the declared artifact to users  "},{"title":"Internal Representation (Deferred Framework)​","type":1,"pageTitle":"Bxl Actions and Build API","url":"/docs/rfcs/drafts/bxl-actions/#internal-representation-deferred-framework","content":"The existing actions framework attaches all actions to a deferred, which is based off a ConfiguredLabel, which also corresponds to the output path prefix. bxl actions should also have a unique output path prefix, and follow the same system of having a base deferred key to reuse the action implementation. We should extend the BaseKey of a DeferredKey to support beyond a ConfiguredLabel, so that we can use a BxlFunctionLabel in its place. This would allow owner of these actions to point to the correct creator. The output path would be determined by using the BxlFunctionLabel as prefix similar to a label. While this means that not all outputs are associated with an actual rule, this is arguably more correct as bxl that creates outputs that doesn't fit the target graph structure (i.e android project generation follows directory structure rather than the packages defined by targets) to not have to conform the attaching their actions to existing rules. bxl functions can examine multiple rules and create a single action, attached only to their function label. The ActionRegistry will be attached to the evaluation result of bxl. Since we do not allow bxl to explicitly request build of the actions itself declares, we can wait until the end of the bxl function to finalize the actions. Then, the action lookup can simply refer to the result of the bxl. With the above changes, the rest of the actions framework does not need changed to support the proposed API. DICE caching will work as today. "},{"title":"@configuration syntax","type":0,"sectionRef":"#","url":"/docs/rfcs/drafts/configuration-at-syntax/","content":"","keywords":""},{"title":"What​","type":1,"pageTitle":"@configuration syntax","url":"/docs/rfcs/drafts/configuration-at-syntax/#what","content":"Command buck2 build //foo:bar@config//platform:linux-x86_64  should be equivalent to current syntax: buck2 build //foo:bar --target-platforms=//platform:linux-x86_64  "},{"title":"Why​","type":1,"pageTitle":"@configuration syntax","url":"/docs/rfcs/drafts/configuration-at-syntax/#why","content":"Might be convenient if we define global (or per-target, as proposed intarget configuration discovery RFC) alias. For example, if there's an alias release=//config:linux-x86_64-release  The command above can be expressed as: buck2 build //foo:bar@release  Additionally, if we haveconfiguration expression RFC implemented, we can do something like: buck2 build //foo:bar@release+gcc  "},{"title":"Possible future extensions​","type":1,"pageTitle":"@configuration syntax","url":"/docs/rfcs/drafts/configuration-at-syntax/#possible-future-extensions","content":"For now, at-syntax only applies to command line arguments of build/targets/run/test commandsprobably cquery query It would be reasonable to expect that this syntax should be allowed anywhere we need a target (e.g. in deps attribute), but this is out of scope of this proposal. "},{"title":"Digest Kinds","type":0,"sectionRef":"#","url":"/docs/rfcs/drafts/digest-kinds/","content":"","keywords":""},{"title":"Use cases:​","type":1,"pageTitle":"Digest Kinds","url":"/docs/rfcs/drafts/digest-kinds/#use-cases","content":"Buck2 needs to support more than just SHA1 for open-sourcing, since publicly available RE providers use SHA256.Internally, we want to migrate to (potentially keyed) Blake3, and there will be a transition period where we need to support both Blake3 and SHA1. "},{"title":"Proposed plan​","type":1,"pageTitle":"Digest Kinds","url":"/docs/rfcs/drafts/digest-kinds/#proposed-plan","content":"Make all the ways in which Buck2 ingests digests either configurable or explicit about the type of digest they expect. Internally, we may keep track of digest types for debugging purposes, but we will never compute more than one digest. It follows that we won't expose configuration for the digests we output (namely: to use on RE): if we only have one digest for each blob, making it configurable has no utility since you never have a choice about the hash to use. "},{"title":"Implementation​","type":1,"pageTitle":"Digest Kinds","url":"/docs/rfcs/drafts/digest-kinds/#implementation","content":""},{"title":"Hashes received from RE​","type":1,"pageTitle":"Digest Kinds","url":"/docs/rfcs/drafts/digest-kinds/#hashes-received-from-re","content":"For interactions with RE, we'll expose two configurations (this can be on the CommandExecutorConfig): Preferred hash to use when Buck2 is doing the hashing (e.g. hashing directories).Accepted hashes. We'll use the format of the digests we receive from RE (in particular their size) to infer what algorithm they used (remember: the RE API provides no way of knowing the format of a digest, it's just a string). "},{"title":"Hashes of files​","type":1,"pageTitle":"Digest Kinds","url":"/docs/rfcs/drafts/digest-kinds/#hashes-of-files","content":"We'll expose the hash to use via a buckconfig. Our things-that-produce-hashes-of-files should either use the config to choose how they hash, or fail if they cannot provide the right hash format (e.g. that'll be true of Eden I/O). "},{"title":"Hashes of directories​","type":1,"pageTitle":"Digest Kinds","url":"/docs/rfcs/drafts/digest-kinds/#hashes-of-directories","content":"This one gets a little tricky. Our directories currently have an implementation of fingerprinting that receives only the directory as input, so some refactoring is in order. We have two options: Pick the hashing algorithm based on the contents of the directory (pick one that's already used). Dealing with empty directories is a bit annoying.Refactor the directory implementation and have directories parameterized over their fingerprints, not their hasher. The first one is easier but has the downside of not working with keyed Blake3 (because you don't have a way to bring in the key), so I'm aiming for the second implementation for now. "},{"title":"RFC: TestInfo v2","type":0,"sectionRef":"#","url":"/docs/rfcs/drafts/test-info-v2/","content":"RFC: TestInfo v2 A stub RFC for TestInfo v2 to track lessons learned about TestInfo v1. The stack starting D36339960 contains the original code for the TestInfo and templated test API experiment.","keywords":""},{"title":"Return error in ProviderCollection[] on undeclared provider","type":0,"sectionRef":"#","url":"/docs/rfcs/implemented/provider-collection-at/","content":"","keywords":""},{"title":"Why​","type":1,"pageTitle":"Return error in ProviderCollection[] on undeclared provider","url":"/docs/rfcs/implemented/provider-collection-at/#why","content":"Better diagnostics when accessing unknown provider. E. g. when writing: ctx.attrs.foo[UnknownInfo].bar  Currently, the error is: Object of type `NoneType` has no attribute `bar`  Instead, the error will be something like: provider collection does not contain `UnknownInfo`, defined providers are `FooInfo`, `BarInfo`.  "},{"title":"Bazel​","type":1,"pageTitle":"Return error in ProviderCollection[] on undeclared provider","url":"/docs/rfcs/implemented/provider-collection-at/#bazel","content":"In bazel, [] on unknown provider is an error, like this: Error: &lt;target //optional_provider:n2&gt; (rule '_sum') doesn't contain declared provider 'UnknownInfo'  "},{"title":"Package-local values","type":0,"sectionRef":"#","url":"/docs/rfcs/package-local-values/","content":"","keywords":""},{"title":"Why​","type":1,"pageTitle":"Package-local values","url":"/docs/rfcs/package-local-values/#why","content":"DevX people want to have some per-directory configuration files, accessible from Starlark macros. For example, a project NNN may want to switch to building using LLVM 15 by default. End users would want to have an easy instruction how to do that, after DevX people provided instructions and infrastructure for that. "},{"title":"What we have now​","type":1,"pageTitle":"Package-local values","url":"/docs/rfcs/package-local-values/#what-we-have-now","content":"Currently, in fbcode, we have get_modes mechanism. get_modes symbol is registered in per-package implicit symbols,here. This symbol can be accessed from macros usingimplicit_package_symbol function. get_modes functions are package-local, but all BUILD_MODE.bzlfiles need to be registered in global buckconfig, which is not ideal. Proposed per-package properties can replace get_modes mechanism. "},{"title":"API​","type":1,"pageTitle":"Package-local values","url":"/docs/rfcs/package-local-values/#api","content":""},{"title":"PACKAGE files​","type":1,"pageTitle":"Package-local values","url":"/docs/rfcs/package-local-values/#package-files","content":"Before evaluating BUCK file, buck2 will evaluate all PACKAGE files in the same directory and all parent directories. Absent PACKAGE files are treated as empty files. All relevant PACKAGE files are executed sequentially from the root directory to the current directory (but unrelated PACKAGE files can be executed in parallel). Evaluating PACKAGE files sequentially provides additional guarantees, for example, attempt to override a property (unless explicitly requested) should fail with Starlark call stack. Each PACKAGE file is evaluated at most once (like bzl file). PACKAGE files may load arbitrary bzl files.BUCK-specific functions called in bzl files (like rule functions) are available, but calling functions from PACKAGE files is an error. This way, bzl files are evaluated only once regardless of whether they are loaded from PACKAGE or BUCK file. "},{"title":"API​","type":1,"pageTitle":"Package-local values","url":"/docs/rfcs/package-local-values/#api-1","content":"PACKAGE files have a global function: PACKAGE file API​ def write_package_value( name: str.type, value: &quot;&quot;, override: bool.type = False, ): ...  Name is a string which must contain exactly one dot symbol (just to enforce code style). Value is an arbitrary Starlark value, for example, an integer, a list of integer, a struct or a function. When override is False (default), attempt to override per-package value defined in parent PACKAGE file will fail. Written values are frozen when PACKAGE file evaluation is finished. Note write_package_value symbol exists in bzl globals, and it can be called from bzl file in context of PACKAGE evaluation, but calling write_package_file is an error on context of BUCK evaluation. Modifying PACKAGE file logically invalidates the BUCK file of this package, and all PACKAGE and BUCK files of subpackages. However, BUCK file evaluation may track which package-local values were accessed and only invalidate BUCK files which were potentially affected (similarly to how we do it with buckconfigs, with individual properties being projection keys). BUCK file API​ BUCK files (and bzl files included from BUCK files) have a global function: def read_package_value( name: str.type, ): ...  This function returns the nearest value registered per package, or None is such value does not exist. This function is available in bzl files, but attempt to call this function in context of PACKAGE file evaluation results in an error. This restriction can be lifted in the future. Per-package values are not accessible as global symbols in BUCK files. We may reconsider it in the future. "},{"title":"read_config​","type":1,"pageTitle":"Package-local values","url":"/docs/rfcs/package-local-values/#read_config","content":"PACKAGE files may call read_config function. "},{"title":"Alias","type":0,"sectionRef":"#","url":"/docs/rule_authors/alias/","content":"","keywords":""},{"title":"alias​","type":1,"pageTitle":"Alias","url":"/docs/rule_authors/alias/#alias","content":"The alias rule has the following relevant attributes: name - (required) what the actual's label should be aliased as.actual - (required) a target label.default_host_platform - default host platform to use for the aliased target. Example filegroup( name = &quot;foo&quot;, srcs = [&quot;foo.txt&quot;], ) alias( name = &quot;other_foo&quot;, actual = &quot;:foo&quot;, )  "},{"title":"versioned_alias​","type":1,"pageTitle":"Alias","url":"/docs/rule_authors/alias/#versioned_alias","content":"The versioned_alias rule has the following relevant attributes: name - (required) what the actual's label should be aliased as.actual - (required) a target label.versions - (required) a map of versions to their respective versioned target labels. Under the hood, any versioned parameters from the versioned_alias's underlying actual are translated into their select-based equivalents, which rely on constraint settings added to the target platform. Example versioned_alias( name = &quot;foo&quot;, versions = { # Target labels for foo versions &quot;1.1&quot;: &quot;//path/to/lib/1.1:foo&quot;, &quot;1.2&quot;: &quot;//path/to/lib/1.2:foo&quot;, }, visibility = [ &quot;PUBLIC&quot;, ], )  "},{"title":"configured_alias​","type":1,"pageTitle":"Alias","url":"/docs/rule_authors/alias/#configured_alias","content":"The configured_alias rule has the following relevant attributes: name - (required) what the actual's label should be aliased as.configured_actual - a configured label (mapped to a configured dep under the hood so the providers can be simply forwarded).fallback_actual - if configured_actual is not set, then fallback to this value, which is an unconfigured dep. If configured_actual is not set, then fallback_actual must be set.platform - the platform to build the aliased target with. note The actual field is available for configured_alias but it is not used under the hood (to keep compatibility of output format with Buck1 queries). Outside of simply pointing at another target, this target has one other useful feature - it contains a platform argument. This makes the alias rule useful for two distinct scenarios: Configuration switching during the build. For example, there is an iOS target that needs to build a dependency for WatchOS so it can include it in the bundle. This can be represented by the iOS target having a dependency on an alias of the Watch app with platform = &quot;//the/desired/watchos:platform&quot;.Using a target to refer to another in a non-standard configuration. For example, if you want to have an experimental version of an app, you could represent that as an alias with an 'experimental' configuration pointing to the original target. Example configured_alias( name = &quot;foo-with-platform1&quot;, actual = &quot;//lib:foo&quot;, platform = &quot;//some_config:platform1&quot;, visibility = [&quot;PUBLIC&quot;], )  "},{"title":"Anonymous Targets","type":0,"sectionRef":"#","url":"/docs/rule_authors/anon_targets/","content":"","keywords":""},{"title":"Simple Example​","type":1,"pageTitle":"Anonymous Targets","url":"/docs/rule_authors/anon_targets/#simple-example","content":"# Define an anonymous rule UpperInfo = provider(fields = [&quot;message&quot;]) def _impl_upper(ctx): return [UpperInfo(message = ctx.attrs.message.upper()] upper = rule( attrs = {&quot;message&quot;, attrs.string()}, impl = _impl_upper ) # Use an anonymous target def impl(ctx): def k(providers): print(providers[UpperInfo].message) # These are the providers this target returns return [DefaultInfo()] return ctx.actions.anon_target(upper, { name: &quot;my//:greeting&quot;, message: &quot;Hello World&quot;, }).map(k)  Notes: An anonymous rule is defined using rule. These are normal rules, with the difference that they are not in a configuration, so ctx.actions.label won't show configuration information, but just unspecified.An anonymous rule is used via ctx.actions.anon_target, passing in the rule and the attributes for the rule.The return value is a promise type, which when evaluated returns the providers of the anonymous target. The promise type has a few special behaviors. It has a map function, which takes a function and applies it to the future, returning a new future.If analysis returns a promise type, the outer Rust layer invokes the future to get at the analysis result. If that future then returns another future, Rust keeps going until it has a final result. It must eventually get to a list of providers. Attribute resolution is handled differently from normal code: String/Int/Bool happen as normal.The name attribute is optional, but, if present, must be a syntactically valid target, but can refer to a cell/package that does not exist.Deps attributes do not take strings, but dependencies, already in a configuration.Exec_deps are not available.Transitions and more complex forms of attributes are banned.Default attr.deps (as used for toolchains) are not permitted, as the default can't express a dependency. They must be passed forward from the caller. The execution platform for an anon target is that of the inherited from the calling target, which is part of the hash. If that is too restrictive, you could use execution groups, where an anon target gets told which execution group to use. "},{"title":"Longer example​","type":1,"pageTitle":"Anonymous Targets","url":"/docs/rule_authors/anon_targets/#longer-example","content":"The following code represents a scenario for a compile-and-link language where, if two targets end up compiling the same file (for example, they are in the same package and both list it, or it gets export_file'd), then that file is compiled just once: ## BUCK ############## @load(&quot;:silly.bzl&quot;, &quot;silly_binary&quot;) silly_binary( name = &quot;hello&quot;, srcs = [&quot;hello.sil&quot;, &quot;world.sil&quot;], ) ## silly.bzl ############ _SillyCompilation = provider(fields = [&quot;compiled&quot;]) def _silly_compilation_impl(ctx): out = ctx.actions.declare_output(&quot;output.o&quot;) ctx.actions.run(cmd_args( ctx.attrs.toolchain.compiler, ctx.attrs.src, &quot;-o&quot;, out.as_output(), )) return [DefaultInfo(), _SillyCompilation(compiled = out)] _silly_compilation = rule( impl = _silly_compilation_impl, attrs = { &quot;src&quot;: attrs.src(), &quot;toolchain&quot;: attrs.dep(), }, ) def _silly_binary_impl(ctx): def k(providers): # Step 2: now link them all together out = ctx.actions.declare_output(&quot;out.exe&quot;) objs = [p[_SillyCompilation].compiled for p in providers] ctx.actions.run(cmd_args( ctx.attrs._silly_toolchain.linker, objs, &quot;-o&quot;, out.as_output(), )) return [ DefaultInfo(default_output = out), RunInfo(args = out), ] # Step 1: compile all my individual files return ctx.actions.anon_targets( [(_silly_compilation, { &quot;src&quot;: src, &quot;toolchain&quot;: ctx.attrs._silly_toolchain }) for src in ctx.attrs.srcs] ).map(k) silly_binary = rule( impl = _silly_binary_impl, attrs = { &quot;srcs&quot;: attr.list(attr.src()), &quot;link_flags&quot;: attr.args(), &quot;_silly_toolchain&quot;: attr.dep(default = &quot;toolchains//:silly&quot;), }, )  "},{"title":"Configuration Transitions","type":0,"sectionRef":"#","url":"/docs/rule_authors/configuration_transitions/","content":"","keywords":""},{"title":"Transition rule​","type":1,"pageTitle":"Configuration Transitions","url":"/docs/rule_authors/configuration_transitions/#transition-rule","content":"Transition rules are defined in .bzl files using the transition built-in. The transition function creates a configuration-related object. The transition object is opaque, it does not have any operations, and can only be used as an argument to rule function or attribute constructor. The transition function call must be assigned to a global variable (this is similar to user-defined provider declarations). The transition function takes three arguments: implementation - a function.refs - references to configuration rules to be resolved and passed to the implementation function.split - (optional) bool flag (default False) to indicate whether transition is a split transition (used in per attribute transitions). The implementation function takes two arguments: platform - a configuration to transition.refs - resolved references as a struct. Example transition from ios to watchos (for example, to build a watchOS bundle as part of an iOS build): def _impl(platform: PlatformInfo.type, refs: struct.type) -&gt; PlatformInfo.type: # Operating system constraint setting. os = refs.os[ConstraintSettingInfo] # Watchos constraint value. watchos = refs.watchos[ConstraintValueInfo] # Remove operating system constraint from input platform. constraints = { s: v for (s, v) in platform.configuration.constraints.items() if s != os.label } # Add watchos constraint value. constraints[watchos.setting.label] = watchos # Construct configuration structure. new_cfg = ConfigurationInfo( # Updated constraints. constraints = constraints, # Keep original config values. values = platform.configuration.values, ) # And return new configuration, # or a dict of marker to configuration in case of split transition. return PlatformInfo( # ... supplying configuration label. label = &quot;&lt;transitioned-to-watch&gt;&quot;, configuration = new_cfg, ) iphone_to_watch_transition = transition(_impl, refs = { &quot;os&quot;: &quot;//constraints:os&quot;, &quot;watchos&quot;: &quot;//constraints:watchos&quot;, })  A transition function applied twice must produce the configuration identical to the configuration produced after applying transition once. assert tr(tr(platform=platform, refs=refs), refs=refs) == tr(platform=platform, refs=refs)  If this invariant is not held, certain operations produce incorrect and possibly infinite graphs. This is not yet enforced. "},{"title":"Per rule transition​","type":1,"pageTitle":"Configuration Transitions","url":"/docs/rule_authors/configuration_transitions/#per-rule-transition","content":"The rule function has an optional cfg attribute, which takes a reference to the transition object (created with the transition function; not a string). When such a rule is called, it is instantiated, not with the requested configuration, but with the requested configuration transformed with a given rule transition. For example, the transition for watchos when the iOS target depends on watchos resource: watchos_resource = rule( cfg = iphone_to_watch_transition, ... )  "},{"title":"Per attribute transition​","type":1,"pageTitle":"Configuration Transitions","url":"/docs/rule_authors/configuration_transitions/#per-attribute-transition","content":"The attrs object has two attribute constructors: attrs.transition_dep(cfg)attrs.split_transition_dep(cfg) These attributes are similar to the dep attribute. When dependencies are resolved for the rule instance, then they are resolved not with the rule instance configuration, but with the configuration transformed with the given transition. For split transition, each dependency is resolved into a dict of marker to providers. For example: android_binary = rule( ... attrs = { &quot;deps&quot;: attrs.list(attrs.split_transition_dep(cfg = cpu_split_transition), default = []), }, )  When the above is invoked as follows: android_binary( deps = [&quot;//foo:bar&quot;, &quot;//qux:quux&quot;], )  Then the rule implementation gets something like the following in the deps attribute: { [ { # Key in this dict is the marker returned from split transition impl function. &quot;arm64&quot;: &quot;providers for //foo:bar configured for arm64&quot;, &quot;armv7&quot;: &quot;providers for //foo:bar configured for armv7&quot;, }, { &quot;arm64&quot;: &quot;providers for //qux:quux configured for arm64&quot;, &quot;armv7&quot;: &quot;providers for //qux:quux configured for armv7&quot;, }, ] }  note It is an error to pass a split transition object to attrs.transition_dep and a non-split transition to attrs.split_transition_dep. "},{"title":"Per target transition​","type":1,"pageTitle":"Configuration Transitions","url":"/docs/rule_authors/configuration_transitions/#per-target-transition","content":"The Buck2 team is considering the implementation of per target transitions (that is, transitions referenced at a rule instantiation site as opposed to rule declaration site). No specific plans or APIs exists at the moment. It could be something like the following: cxx_binary( name = &quot;foo&quot;, cfg = &quot;//transitions:opengl-es-1.0&quot;, ... )  "},{"title":"Request transition on command line​","type":1,"pageTitle":"Configuration Transitions","url":"/docs/rule_authors/configuration_transitions/#request-transition-on-command-line","content":"For information, see RFC. "},{"title":"Access rule attributes in transition function implementation​","type":1,"pageTitle":"Configuration Transitions","url":"/docs/rule_authors/configuration_transitions/#access-rule-attributes-in-transition-function-implementation","content":"It might be useful for the transition function to be able to query rule attributes (for example, to perform transition to different configurations depending on java_version attribute). Both incoming (per rule) and outgoing (per dependency) transitions can access rule attributes. For outgoing transitions, transition rule implementation accesses the attributes of the target that has dependencies with transitions, not attributes of dependency targets. def _tr(platform, refs, attrs): # NB: There are some restrictions on what attrs can be made accessible: # - Only primitive values for now (providers are not resolved) # - Only unconfigured attributes for now attrs.my_list_attribute # == [12345, 67890] tr = transition( _tr, refs = {}, attrs = { &quot;my_list_attribute&quot;: attr.list(...), }, ) my_rule = rule(..., cfg=tr) my_rule( ..., my_list_attribute = [12345, 67890], )  "},{"title":"Configurations","type":0,"sectionRef":"#","url":"/docs/rule_authors/configurations/","content":"","keywords":""},{"title":"Context​","type":1,"pageTitle":"Configurations","url":"/docs/rule_authors/configurations/#context","content":"Buck &quot;Configurations&quot; provides an API to express the different ways projects and targets can be built. A configuration consists of a set of constraints and config settings (i.e. values from buckconfig). These are determined by a base platform that sets the initial values and then a series of transitions that may change them. The common way that users are exposed to configurations is in select() invocations where the resolution is based on the configuration. A build may involve many configurations and even a particular target label (//:foo) may end up with multiple instance in the configured graph with different configurations. "},{"title":"platform(), constraint_setting(), config_setting(), etc​","type":1,"pageTitle":"Configurations","url":"/docs/rule_authors/configurations/#platform-constraint_setting-config_setting-etc","content":"TODO(cjhopman): Describe this enough for context needed below "},{"title":"Selectable attributes​","type":1,"pageTitle":"Configurations","url":"/docs/rule_authors/configurations/#selectable-attributes","content":"Almost all rule attributes can be set to a select() value, such an attribute is &quot;selectable&quot;. These attributes final resolved value will depend on the configuration. There are some attributes that cannot use a select(), such attributes are &quot;not selectable&quot;. Examples include attributes that buck needs to read from the unconfigured node (ex. &quot;name&quot;, &quot;default_target_platform&quot;) and attributes that are used by platform() rules and their dependencies (see below). TODO(cjhopman): Should rule authors be able to set attrs as not selectable? "},{"title":"Selectable resolution​","type":1,"pageTitle":"Configurations","url":"/docs/rule_authors/configurations/#selectable-resolution","content":"Resolving selectable attributes is pretty straightforward, it happens when constructing the &quot;configured target node&quot;. At that point, we have the full configuration available and se we can lookup whether each constraint in the select is satisfied or not. TODO(cjhopman): Describe how checking refinement is implemented. "},{"title":"Target Platform Resolution​","type":1,"pageTitle":"Configurations","url":"/docs/rule_authors/configurations/#target-platform-resolution","content":"When targets are provided on the command line (e.g. buck build //:foo) or otherwise where there's no indication of what configuration that target will be built in, configurations are determined by performing &quot;target platform resolution&quot; on the unconfigured target labels. Target Platform Resolution for a target foo works by: lookup (unconfigured) target node for &quot;foo&quot;if there's a &quot;default_target_platform&quot; attribute, use thatelse, use the cell's default platform This is performed indepedently for any targets that need a platform. Since this resolution is done without a configuration, it means that the default_target_platform attribute is not selectable. This target platform will form the initial configuration for the node. TODO(cjhopman): how does a user explicitly specify on the command line a target platform such that the target does not go through target platform resolution? Are there other cli options/flags/etc that affect target platform resolution? "},{"title":"Configuration propagation​","type":1,"pageTitle":"Configurations","url":"/docs/rule_authors/configurations/#configuration-propagation","content":"Once we've configured the top-level nodes via target platform resolution, the configuration is propagated to dependencies (possibly altered by transitions). We do not apply target platform resolution to all nodes in the graph. "},{"title":"Transitions​","type":1,"pageTitle":"Configurations","url":"/docs/rule_authors/configurations/#transitions","content":"A &quot;transition&quot; transforms a configuration by adding or changing constraint values and config settings or by setting an entirely new underlying target platform. More details in: Configuration transitions. "},{"title":"ConfigurationInfo, platform() analysis, and more​","type":1,"pageTitle":"Configurations","url":"/docs/rule_authors/configurations/#configurationinfo-platform-analysis-and-more","content":"The definition of a platform (either execution or target) is done with a &quot;platform&quot; rule instance. The configuration is actually part of the analysis result of the platform target (the ConfigurationInfo provider instance). This is convenient from an implementation standpoint, but it leads to a situation where some nodes are analyzed with an &quot;unbound&quot; Configuration. All the rule types involved in defining a platform may be analyzed with an unbound configuration (platform(), config_setting(),constraint_setting(), etc). These are sometimes called &quot;configuration rules&quot;. This also means that all the attributes of these rules are not selectable. Configurations also reference a few other provider instances like ConstraintSettingInfo. All of these end up being potentially produced in a context with an &quot;unbound&quot; configuration. Using analysis for this also means that &quot;configuration&quot; and &quot;analysis&quot; are not distinct phases within a build (though are still distinct for a node and are still conceptually useful). "},{"title":"Configurations and output paths​","type":1,"pageTitle":"Configurations","url":"/docs/rule_authors/configurations/#configurations-and-output-paths","content":"Because a target may appear within a build in multiple different configurations we cannot derive output paths based on just targets (as then we'd have multiple actions map to the same outputs). For this reason, we encode the target and the configuration into output paths. The configuration is currently represented as a hash of its values (i.e. &quot;hashed buck-out&quot;). "},{"title":"Target platform compatibility​","type":1,"pageTitle":"Configurations","url":"/docs/rule_authors/configurations/#target-platform-compatibility","content":"All (non-configuration) rules support a target_compatible_with attribute. In addition, the rule itself can definetarget_compatible_with constraints that affect all instances. The target_compatible_with attribute is a list of constraints/config settings and it is selectable. Target platform compatibility is transitive, all dependents of an incompatible target are incompatible. In other words, a node is compatible if and only if the node itself and all of its transitive dependencies are compatible. In buck, this is implemented by target analysis returning either the normal analysis result or an indicator that the node is incompatible with the target platform. It is not part of the &quot;configured target node&quot; because the &quot;configured target node&quot; does not depend on information from dependencies. TODO(cjhopman): Something about debuggability of incompatibility, especially due to needing it to figure out transitive incompatibility. "},{"title":"Buck v1 compatibility​","type":1,"pageTitle":"Configurations","url":"/docs/rule_authors/configurations/#buck-v1-compatibility","content":"Buck2 also supports the Buck v1 legacy compatible_with field on nodes but it has different behavior. In summary: compatible_with: List of constraints, any of them must match the configuration to be compatible.target_compatible_with: List of constraints, all of them must match the configuration to be compatible. "},{"title":"Incompatible target skipping​","type":1,"pageTitle":"Configurations","url":"/docs/rule_authors/configurations/#incompatible-target-skipping","content":"In a build-like command where a non-literal target pattern is provided (ex. buck build //: or buck build //foo/...) the target pattern will be resolved to a set of unconfigured targets. Those targets will then go through &quot;target platform resolution&quot;. If any of those targets resolve to a platform where they are incompatible, building them will be skipped. Users generally expect and prefer this behavior to needing to explicit specify only the targets that can build in their current context. If an explicitly specified literal is incompatible, it is an error. The implementation checks compatibility when looking up the analysis results for configured nodes requested (in the non-ignored flow, it uses that analysis result to lookup the default outputs and build them). "},{"title":"Execution platforms​","type":1,"pageTitle":"Configurations","url":"/docs/rule_authors/configurations/#execution-platforms","content":"Execution platforms/configurations are used to represent the platforms where build execution happens. These are defined similar to target platforms. These may or may not be what one would logically consider different &quot;platforms&quot;, for example, there could be multiple different execution platforms that all execute things similarly on the local machine. A build configures a fixed list of one or more execution platforms. "},{"title":"Execution deps​","type":1,"pageTitle":"Configurations","url":"/docs/rule_authors/configurations/#execution-deps","content":"Some target deps are &quot;execution deps&quot;. These are the dependencies of the target that should be built for the execution platform. For example, a compiler or other build tool would be an execution dep. This includes all exe macro deps (ex. $(exe //:tool)) and includes all attrs.exec_dep() deps. "},{"title":"Toolchain deps​","type":1,"pageTitle":"Configurations","url":"/docs/rule_authors/configurations/#toolchain-deps","content":"In addition to attrs.exec_dep(), we have an attrs.toolchain_dep() primitive that's similar but different in an important way. These nodes don't select their execution platform, but instead have it forced on them by whatever includes them, hence it must be recorded in the configured target label. The execution platform resolution sees through them. In other words, attrs.toolchain_dep() is like a mix of attrs.dep() and attrs.exec_dep(): it inherits target platform like attrs.dep() (so anyselect()s on the target of the attrs.toolchain_dep() will evaluate as if they were on the target containing the attrs.toolchain_dep() - i.e., target platform gets inherited as normal) and any attrs.exec_dep()s of the attrs.toolchain_dep() target become attrs.exec_deps() on the dependent of target the attrs.toolchain_dep() (i.e., they get passed up the dep tree, so participate in exec platfom resolution). Illustrated as an example: target( name = &quot;A&quot;, toolchain = attrs.toolchain_dep(default = &quot;:B&quot;), ) target( name = &quot;B&quot;, tool = attrs.exec_dep(default = &quot;:C&quot;) )  The above means that :C will be an execution dependency of :A and any select()s defined in :B would be evaluated against the same target platform as :A (as target platform gets inherited by attrs.toolchain_dep()s). "},{"title":"Running non-execution deps​","type":1,"pageTitle":"Configurations","url":"/docs/rule_authors/configurations/#running-non-execution-deps","content":"If you have a binary that you want to run, but it isn't a build tool, then you should use $(exe_target //:binary) rather than $(exe //:binary). That will run the same binary that you'd get from buck2 build, rather than one that is built for the execution platform. "},{"title":"Execution platform resolution​","type":1,"pageTitle":"Configurations","url":"/docs/rule_authors/configurations/#execution-platform-resolution","content":"During analysis, unlike target platform resolution, every configured node undergoes execution platform resolution independently (see exception below). This means that even for a specific target platform, different nodes in the graph can be built on different execution platforms. This works roughly like this: next: for platform in execution_platforms: if exec_compatible_with(target, platform): for dep in target.execution_deps(): if !target_compatible_with(dep, platform): continue next return platform return err  One important note here is that until the execution platform has been resolved, we do not know the configuration for execution deps. Only after we've resolved the execution platform can we configure the execution deps (and can also only perform analysis for them at that point). For the normal case, a particular configured target node performs execution platform resolution a single time. The execution platformis not encoded in output paths. Regarding target compatibility, you can imagine the following pseudo-code for the target_compatible_with() function above: def target_compatible_with(target, cfg): for constraint in target.target_compatible_with: if not satisfied(constraint, cfg): return False if len(target.compatible_with) &gt; 0: found_satisfied_constraint = False for constraint in target.compatible_with: if satisfied(constraint, cfg): found_satisfied_constraint = True break if not found_satisfied_constraint: return False for (dep, dep_cfg) in direct_deps(target): # NB: recursive call if not target_compatible_with(dep, dep_cfg): return False return True  TODO(cjhopman): What are the requirements on rule authors? Especially, do they need to ensure that all possible execution platforms will produce the same results? "},{"title":"Execution groups​","type":1,"pageTitle":"Configurations","url":"/docs/rule_authors/configurations/#execution-groups","content":"Execution groups allow a rule to do execution platform resolution multiple times and then specify which of the resolved platforms each action runs in. TODO(cjhopman): Finish this documentation as we figure it out. "},{"title":"Execution platform inheritance​","type":1,"pageTitle":"Configurations","url":"/docs/rule_authors/configurations/#execution-platform-inheritance","content":"There are some (rare) cases where both a target and its dependency need to resolve to the same execution platform. An example of this would be a c++ toolchain that includes both target (ex. the stdlib) and execution (ex. the compiler) components. In that case, we need the toolchain's execution deps to affect its users execution platform resolution. To support this, there are mechanisms to indicate which dependencies need to inherit the execution platform resolution. Currently, since this could mean that a configured node appears in the build under multiple different execution platforms and since execution platforms are not included as part of output paths, users must use this feature carefully. TODO(cjhopman): figure out what restrictions this needs to apply so that users don't need to be the ones responsible for correctness TODO(cjhopman): figure out/document those &quot;mechanisms&quot; "},{"title":"Dep Files","type":0,"sectionRef":"#","url":"/docs/rule_authors/dep_files/","content":"","keywords":""},{"title":"Use Cases​","type":1,"pageTitle":"Dep Files","url":"/docs/rule_authors/dep_files/#use-cases","content":"Dep files are used to make dependencies finer grained than what exists in the target graph, but they're not a substitute for avoiding unused dependencies. They're often useful when targets export many outputs (such as C++ headers) that aren't all used by all their dependents. Dep files are currently used to skip recompilation steps in C++ when an unused header changed. They're also used in Java to skip recompilation when an unused class changed. "},{"title":"Using dep files​","type":1,"pageTitle":"Dep Files","url":"/docs/rule_authors/dep_files/#using-dep-files","content":"To use dep files, you need to do the following: Declare what output is a dep file and associate it with your command.Declare which inputs are covered by the dep file (this can be a subset of your inputs).Have your command produce the dep file in a format Buck2 can use. "},{"title":"Declaring the dep files and associating inputs​","type":1,"pageTitle":"Dep Files","url":"/docs/rule_authors/dep_files/#declaring-the-dep-files-and-associating-inputs","content":"To declare a dep file and associate it with your command, you need to tag your artifacts. Specifically, you'll tag the output (the dep file) and the inputs it covers, as shown in the following code: # First, create a tag headers_tag = ctx.actions.artifact_tag() # Then, tag inputs and the dep file itself in your command line. # You do this using the `tag_artifacts` method on your tag. # This method does not mutate the input, it wraps it, so you use the output. # Any command-line-arg-like can be tagged. tagged_headers = headers_tag.tag_artifacts(headers) dep_file = ctx.actions.declare_output(&quot;deps&quot;).as_output() tagged_dep_file = headers_tag.tag_artifacts(dep_file) # Finally, declare your action. # Use the tagged artifacts as you would regular command-line-arg-likes. # Pass the tag in `dep_files` and give a name (this is used for logging). ctx.actions.run( [&quot;mycc&quot;, &quot;-I&quot;, tagged_headers, &quot;-MD&quot;, &quot;-MF&quot;, tagged_dep_file, &quot;-o&quot;, ...], dep_files = { &quot;headers&quot;: headers_tag } )  "},{"title":"Producing the dep file​","type":1,"pageTitle":"Dep Files","url":"/docs/rule_authors/dep_files/#producing-the-dep-file","content":"Your command must produce dep files in the format Buck2 expects, which is simply a list of all the inputs that were used, one per line. The paths must be the paths Buck2 would use for your inputs, which means paths relative to the project root. If this is not the format your tool produces, use a wrapper to take whatever output your command produces and rewrite it in the format Buck2 expects. "},{"title":"Testing dep files​","type":1,"pageTitle":"Dep Files","url":"/docs/rule_authors/dep_files/#testing-dep-files","content":"When writing a command that produces a dep file, you should test it! At a minimum, check that the inputs you expect are tagged properly. To do so, build your target, then use buck2 audit dep-files TARGET CATEGORY IDENTIFIER, which will show you the set of inputs your command used and how they're tagged. "},{"title":"Extra notes to the implementer​","type":1,"pageTitle":"Dep Files","url":"/docs/rule_authors/dep_files/#extra-notes-to-the-implementer","content":""},{"title":"Limitations​","type":1,"pageTitle":"Dep Files","url":"/docs/rule_authors/dep_files/#limitations","content":"Dep files only work if a previous invocation of the command is known to your Buck2 daemon. Dep files are dropped when the daemon restarts or when you run buck2 debug flush-dep-files. This means that, for example, if you change an unused header, then run a build on a fresh daemon, Buck2 will still need to execute this command in order to identify that the header was in fact unused. In contrast, if you did the build (and got a remote cache hit on the command), then applied your change and re-built, Buck2 would use the dep file on the second execution, and you wouldn't need to execute anything. "},{"title":"Dep files don't need to be covering​","type":1,"pageTitle":"Dep Files","url":"/docs/rule_authors/dep_files/#dep-files-dont-need-to-be-covering","content":"It's OK for the dep file to only cover a subset of the inputs of your action. However, within that subset, the dep file must declare all the inputs that were used. If you fail to report some inputs you used, then your command will not re-run when they change, and you'll get stale output. "},{"title":"Dep files are lazy​","type":1,"pageTitle":"Dep Files","url":"/docs/rule_authors/dep_files/#dep-files-are-lazy","content":"Dep files aren't parsed by Buck2 unless the command needs to re-run. If the command ran on RE, they aren't even downloaded until then. This ensures dep files don't cause a performance hit unless they are used, at which point they stand a chance of giving a performance boost instead. This means that if you produce an invalid dep file, Buck2 will not report this until your command runs again, at which point Buck2 will report that the dep file is invalid and refuse to proceed (note: you can unblock yourself using buck2 debug flush-dep-files). To flush out issues during development, you can pass --eager-dep-files to Buck2 to force Buck2 to parse your dep files as they are produced. "},{"title":"Dep files will traverse symlinks​","type":1,"pageTitle":"Dep Files","url":"/docs/rule_authors/dep_files/#dep-files-will-traverse-symlinks","content":"If your dep file reports that a symlink was used, Buck2 will track the symlink's target as covered by this dep file. "},{"title":"Dynamic Dependencies","type":0,"sectionRef":"#","url":"/docs/rule_authors/dynamic_dependencies/","content":"","keywords":""},{"title":"Implementation​","type":1,"pageTitle":"Dynamic Dependencies","url":"/docs/rule_authors/dynamic_dependencies/#implementation","content":"Buck2 provides the following function: ctx.actions.dynamic_output(dynamic, inputs, outputs, lambda ctx: …)  The arguments are: dynamic - a list of artifacts whose values will be available in the function. These will be built before the function is run.inputs - a container of artifacts (cmd_args, list of artifacts, and so on). These inputs must include all the inputs that are referenced by the body of the function argument, apart from those listed in dynamic and outputs: extra inputs may be passed that are not used.The inputs are used for buck2 aquery functionality, but do not cause speculative building. In fact, these inputs may form a cycle with other dynamic_output actions if they were all required.In the future, it may be possible to not pass all the inputs if the repo is set to permissive mode, allowing a more powerful form of dynamic dependencies. outputs - a list of unbound artifacts (created with declare_artifact) which will be bound by the function.The function argument is given 3 arguments: ctx (context) - which is the same as that passed to the initial rule analysis.outputs - using one of the artifacts from the dynamic_output's outputs (example usage: outputs[artifact_from_dynamic_output_outputs]) gives an unbounded artifact. The function argument must use its outputs argument to bind output artifacts, rather than reusing artifacts from the outputs passed into dynamic_output directly.artifacts - using one of the artifacts from dynamic (example usage: artifacts[artifact_from_dynamic]) gives an artifact value containing the methods read_string, read_lines, and read_json to obtain the values from the disk in various formats. Anything too complex should be piped through a Python script for transformation to JSON. The function must call ctx.actions (probably ctx.actions.run) to bind all outputs. It can examine the values of the dynamic variables and depends on the inputs. The function will usually be a def, as lambda in Starlark does not allow statements, making it quite underpowered. Following is an example of using the function to determine Erlang BEAM dependencies: def erlang(ctx): beams = {} for x in ctx.attr.srcs: dep_file = ctx.actions.declare_output(x + &quot;.out&quot;) ctx.actions.run(&quot;erl&quot;, &quot;-dump-output&quot;, x, dep_file.as_output()) beam_file = ctx.actions.declare_output(x + &quot;.beam&quot;) beams[x] = beam_file def f(ctx, artifacts, outputs, x=x, dep_file=dep_file): deps = artifacts[dep_file].read_lines() ctx.actions.run( &quot;erl&quot;, &quot;-comp&quot;, x, [beams[d] for d in deps], outputs[beams[x]].as_output() ) ctx.actions.dynamic_output([dep_file], [x] + deps, [beam_file], f) return [ErlangInfo(objects = beams.values())]  The above code uses declare_output for the beam_file then binds it within the function f, after having read the dep_file with read_lines. "},{"title":"Incremental Actions","type":0,"sectionRef":"#","url":"/docs/rule_authors/incremental_actions/","content":"Incremental Actions It's possible to make certain Buck2 actions behave incrementally, that is, to produce results for a current invocation based on the result from the previous run. Incrementality could significantly improve performance of some actions such as packaging (such as Apple App Bundles) or linking (MSVC incremental linking). There are two essential requirements to make an action incremental: The result from the previous run should be accessible.An understanding of which parts of the result need to be updated; it should be easy to compare inputs from a previous run with inputs from the current run and detect those changed. The only way to run user-defined commands in Buck2 is with ctx.actions.run. Both of the above requirements are met via its metadata_env_var, metadata_path and no_outputs_cleanup parameters. When the no_outputs_cleanup flag is turned on, Buck2 won't perform any deletion of old outputs for the action. That means the result from the previous run will be accessible, but the user script has to detect which parts of it should be deleted and perform a manual cleanup. When the metadata_env_var and metadata_path parameters are present, Buck2 will create a JSON file on a disk before actually executing the command. The file will contain a list of paths and hash digests for every command action input. All paths in the file are relative to the Buck2 project root. Symlinks are not included in metadata because it is possible for the user script to resolve symlink and use a resolved path to get the destination hash digest from action metadata if it's needed, as shown in the following JSON example: { &quot;version&quot;: 1, &quot;digests&quot;: [ { &quot;path&quot;: &quot;buck-out/v2/gen/cell/configuration_hash/path/to/target/__target_name__/generated_file&quot;, &quot;digest&quot;: &quot;da39a3ee5e6b4b0d3255bfef95601890afd80709:10&quot; }, ... ] } A user script that is run as a part of an action execution is responsible for parsing the JSON file. The version field is bumped every time there is a non-backwards compatible change to the format of the file. The user script should verify that the provided data is of a supported version and should be updated accordingly when the current version is newer than the supported one. The path of the JSON file is provided to the user script via an environment variable with a key equal to metadata_env_var. The user is able to specify the part of the path relative to the result directory via metadata_path. For example, if some rule implementation has the following code: result = ctx.actions.declare_output(&quot;result&quot;) command = cmd_args([&quot;my_script.py&quot;, &quot;--output&quot;, result.as_output()]) ctx.actions.run( command, category = &quot;my_category&quot;, metadata_env_var = &quot;ACTION_METADATA&quot;, metadata_path = &quot;action_metadata.json&quot;, no_outputs_cleanup = True, ) Then my_script.py will be executed as: ACTION_METADATA=project/relative/path/to/target/action_metadata.json my_script.py --output resolved/path/to/result my_script.py is responsible for reading the ACTION_METADATA environment variable and parsing a JSON file with the action metadata. Parsed metadata provides information about inputs for the current run, but the script needs somehow to obtain similar information about inputs from the previous run. Such information could just be another output of the user script (as with the previous result, it won't be deleted when no_outputs_cleanup = True). The Format of such a file is an implementation detail of the user script, but at the very least it should contain a list of every source that was used to form the result and hash digests for such sources. The rule implementation would look something like the following: result = ctx.actions.declare_output(&quot;result&quot;) state = ctx.actions.declare_output(&quot;incremental_state.json&quot;) command = cmd_args([&quot;my_script.py&quot;, &quot;--output&quot;, result.as_output(), &quot;--incremental-state&quot;, state.as_output()]) ctx.actions.run( command, category = &quot;my_category&quot;, metadata_env_var = &quot;ACTION_METADATA&quot;, metadata_path = &quot;action_metadata.json&quot;, no_outputs_cleanup = True, ) The user script would then: Parse incremental_state.json and delete it. Deletion prior to amending the result is important so it doesn't result in a situation where an incremental state file is out of sync with the result when the user script fails while changing the result. Such a corrupted state might lead to subsequent incorrect builds reported as &quot;successful&quot;.Parse action metadata file, compute what is needed to update the result, and amend it accordingly.Calculate the new state and write it into the new incremental_state.json.","keywords":""},{"title":"Optimization","type":0,"sectionRef":"#","url":"/docs/rule_authors/optimization/","content":"","keywords":""},{"title":"Starlark profiling​","type":1,"pageTitle":"Optimization","url":"/docs/rule_authors/optimization/#starlark-profiling","content":"buck2 supports profiling of the evaluation of specific BUCK files and profiling of the analysis of specific targets. There are three buck2 profiling commands: buck2 profile loadingbuck2 profile analysisbuck2 profile bxl For example: buck2 profile loading --mode=heap-summary -o heap-summary.csv //some/package: buck2 profile analysis --mode=heap-summary -o heap-summary.csv //some/package:target  "},{"title":"Summary profiling​","type":1,"pageTitle":"Optimization","url":"/docs/rule_authors/optimization/#summary-profiling","content":"The first profiling mode provides the time spent within a function and the allocations that are performed. As an example, running over a folly BUCK file, produces a CSV file whose top-left corner is: Function Time(s) TimeRec(s) Calls Allocs TOTALS 10.455 10.455 9712799 3477203 fbchain_configs 1.163 2.514 11328 33984 is_string 0.726 1.028 1514985 0 apple_library 0.725 0.725 1887 0 type 0.435 0.435 2053296 0 ...  This reveals the following: Total execution was 10.455s, which will be a bit slower than normal, because profiling is on.1.163s was spent in fbchain_configs itself and 2.514s in that function and the things it calls.A disturbing 1.5M calls and 1.028s is spent testing if things are strings, which is almost certainly responsible for half the type calls.Happily, is_string doesn't allocate, but fbchain_configs does. Scrolling to the right, on the full CSV file (not shown), reveals it allocates 1 tuple and 2 dict per call. It can also be seen that fbchain_configs is mostly called by _add_code_coverage_configs. This profiling mode is implemented by turning off garbage collection, so the heap retains everything, and pushing function entry/exit entries on to the heap with the time they happen. After execution, the heap can be scanned in order to reconstruct the call tree and allocation patterns. As a result, this profile mode may consume significantly more memory. "},{"title":"Statement profiling​","type":1,"pageTitle":"Optimization","url":"/docs/rule_authors/optimization/#statement-profiling","content":"The second profiling mode tells us which statements spent most time executing. Running it over a structured-logger BUCK file gives us a CSV file starting with: File Span Duration(s) Count TOTAL 4.03 7187761 fbcode_allowed_list.bzl 420:9-423:1 0.27 455884 cell_defs.bzl 13:5-13:60 0.17 117736 read_configs.bzl 46:5-46:55 0.08 65042 prelude.bzl 28:9-29:20 0.07 1004 ...  This profile shows how much time is spent in each statement. Looking at the relevant portion of fbode_allowed_list.bzl: for _package in _recursive_allowlist: if base_path == _package or base_path.startswith(_package + &quot;/&quot;): return True  The if statement is at location 420:9-423:1 and takes 0.27s. The if statement runs approximatey 456K times. While looking at the outer statement in the profile (not shown), it can be seen that the for loop is only called 3188 times, implying an average of 143 iterations per call. It's possible that this loop could be rewritten as some clever dictionary lookup, perhaps iterating over the path components of _package. Line profiling builds on top of the before_stmt hook that is used for debugging. It records the time each statement is entered then blames that statement for all time until the next statement. That means that sometimes, due to statements making function calls, the return of the function call may be 'blamed' until the next statement executes. As a result, treat the results with slight caution. "},{"title":"Flame profiling​","type":1,"pageTitle":"Optimization","url":"/docs/rule_authors/optimization/#flame-profiling","content":"The flame profiling modes produces a .svg flamegraph showing either time spent or allocations. "},{"title":"Native profiling​","type":1,"pageTitle":"Optimization","url":"/docs/rule_authors/optimization/#native-profiling","content":"Profiling on Linux can be done with perf record -g --call-graph=dwarf,20000 ... and perf report --call-graph Don't profile the buck2 process directly unless you are interested in profiling the CLI; you likely want to profile the buck2 daemon process. You can find the pid with buck2 status and attach perf to that PID. Profiling on Mac can be done with Instruments. "},{"title":"Benchmarking​","type":1,"pageTitle":"Optimization","url":"/docs/rule_authors/optimization/#benchmarking","content":"If you want to do proper statistically relevant A/B testing, use absh -a testa -b testb (see absh in the GitHUb repository).To measure the number of instructions: On Linux, use perf stat fooOn Mac, use /usr/bin/time -lp foo On Mac, to run something with the time profiler on the command line, use xcrun xctrace record --template 'Time Profiler' --launch -- foo, then open Foo.trace for the name of the trace file it spits out (or pass --output to control the output filename). "},{"title":"Rule APIs","type":0,"sectionRef":"#","url":"/docs/rule_authors/rule_api/","content":"","keywords":""},{"title":"Providers​","type":1,"pageTitle":"Rule APIs","url":"/docs/rule_authors/rule_api/#providers","content":"DefaultInfo(default_outputs : [&quot;artifact&quot;], other_outputs : [[&quot;artifact&quot;, &quot;cmd_args&quot;]] = [], sub_targets : {str.type: [&quot;provider&quot;]} = {}) - the provider that is used for: buck2 build - builds everything in default_outputs and other_outputs.$(location) - uses the default_outputs.buck2 build my_target[foo] - selects the foo value from sub_targets.Note: if you use cmd_args in other_outputs, then it will expand to all the inputs referenced by the cmd_args you provide. RunInfo(args) - used for buck2 run, where args is anything that can be converted into cmd_args, including a command line itself.ExternalRunnerTestInfo(...) - for details, see Test Execution. "},{"title":"Type context​","type":1,"pageTitle":"Rule APIs","url":"/docs/rule_authors/rule_api/#type-context","content":"The starting type, usually bound as ctx. ctx.attrs - returns the attributes of the target as a Starlark struct with a field for each attribute, which varies per rule.ctx.actions - returns actions allowing you to define actions.ctx.label - returns a label representing the target. "},{"title":"Type actions​","type":1,"pageTitle":"Rule APIs","url":"/docs/rule_authors/rule_api/#type-actions","content":"Most output filenames can either be artifacts created with declare_output or strings that are implicitly converted to output artifacts. ctx.actions.declare_output([prefix], filename, dir = False) - returns an artifact with the name filename, which when asked for its name, will return filename (which may include a directory portion). prefix (optional) - provides a silent part of the filename, which can be used to disambiguate but whose presence will not be visible to anyone using the artifact. By default, outputs are considered files; pass dir = True to indicate it is a directory.declare_output - mainly used to produce an unbound artifact for passing to ctx.actions.run. ctx.actions.write(filename, content, is_executable : bool.type = false, allow_args : bool.type = false) - returns an artifact whose contents are content. filename - can be a string or an existing artifact created with declare_output.is_executable (optional) - indicates whether the resulting file should be marked with executable permissions.allow_args (optional) - must be set to True if you want to write parameter arguments to the file (in particular, macros that write to file). If it is true, the result will be a pair of the artifact containing content and a list of artifact values that were written by macros, which should be used in hidden fields or similar. ctx.actions.write_json(filename, content, with_inputs = False) - returns an artifact whose contents are content written as a JSON value. filename - can be a string, or an existing artifact created with declare_output.content - must be composed of the basic json types (Boolean, number, string, list/tuple, dictionary) plus artifacts and command lines. An artifact will be written as a string containing the path.A command line will be written as a list of strings, unless joined=True is set, in which case it will be a string. If you pass with_inputs = True, you'll get back a cmd_args that expands to the JSON file but carries all the underlying inputs as dependencies (so you don't have to use, for example, hidden for them to be added to an action that already receives the JSON file). ctx.actions.copy_file(dest, src) - copies the source artifact to the destination (which can be a string representing a filename or an output artifact) and returns the output artifact. The copy works for files or directories. ctx.actions.symlink_file(dest, src) - creates a symlink to the source artifact at the destination (which can be a string representing a filename or an output artifact) and returns the output artifact. The symlink works for files or directories. ctx.actions.symlinked_dir(output, srcs : {str.type: &quot;artifact&quot;}) - returns an artifact that is a directory containing symlinks. The srcs must be a dictionary of path (as string, relative to the result directory) to bound artifact, which will be laid out in the directory. ctx.actions.copied_dir(output, srcs : {str.type: &quot;artifact&quot;}, copy : bool.type = false) - returns an artifact which is a directory containing copied files. The srcs must be a dictionary of path (as string, relative to the result directory) to the bound artifact, which will be laid out in the directory. ctx.actions.download_file(output, url : str.type, sha1: str.type, is_executable : bool.type = false) - downloads a URL to an output (filename as string or output artifact). The file at the URL must have the given sha1 or the command will fail. The optional parameter is_executable indicates whether the resulting file should be marked with executable permissions. ctx.actions.run(arguments, category : str.type, identifier : str.type = &quot;&quot;, env : {str.type: str.type} = {}, local_only : bool.type = false, always_print_stderr : bool.type = false, weight : int.type = 1, metadata_env_var: str.type = None, metadata_path: str.type = None, no_outputs_cleanup: bool.type = false) - runs a command. arguments - must be of type cmd_args, or a type convertible to such (such as a list of strings and artifacts) and must contain at least one .as_output() artifact.category and identifier - when used together, identify the action in Buck2's event stream, and must be unique for a given target.weight is used to note how heavy the command is and will typically be set to a higher value to indicate that less such commands should be run in parallel (if running locally).no_outputs_cleanup - if this flag is set then Buck2 won't clean the outputs of a previous build that might be present on a disk; in which case, command from arguments should be responsible for the cleanup (that is useful, for example, when an action is supporting incremental mode and its outputs are based on result from a previous build).metadata_env_var and metadata_path - both should either be set or unset. metadata_path defines a path relative to the result directory for a file with action metadata, which will be created right before the command will be run. Metadata contains the path relative to the Buck2 project root and hash digest for every action input (this excludes symlinks as they could be resolved by a user script if needed). The resolved path relative to the Buck2 project for the metadata file will be passed to command from arguments, via the environment variable, with its name set by metadata_env_var. Both metadata_env_var and metadata_path are useful when making actions behave in an incremental manner (for details, see Incremental Actions) ctx.actions.tset(type, value = None, children = None) - creates a new transitive set (for details, see Transitive Sets). ctx.actions.cas_artifact(output, digest : str.type, use_case: str.type, expires_after_timestamp: int.type, is_executable : bool.type = false) - downloads a CAS artifact to an output. digest - must look like SHA1:SIZE.use_case - your RE use case.expires_after_timestamp - must be a UNIX timestamp. Your digest's TTL must exceed this timestamp. Your build will break once the digest expires, so make sure the expiry is long enough (preferably, in years).is_executable (optional) - indicates the resulting file should be marked with executable permissions. "},{"title":"Type cmd_args​","type":1,"pageTitle":"Rule APIs","url":"/docs/rule_authors/rule_api/#type-cmd_args","content":"The cmd_args type is created by cmd_args and is consumed by ctx.actions.run. The type is a mutable collection of strings and artifact values. In general, command lines, artifacts, strings, RunInfo and lists thereof can be added to or used to construct a cmd_args value. All these methods operate mutably on cmd and return that value too. cmd_args(*args, format: str.type = &quot;&quot;, delimiter: str.type = None, prepend: str.type = None, quote: str.type = None) - creates and returns a cmd_args type. *args - a list of things to add to the command line, each of which must be coercible to a command line. Further items can be added with cmd.add.format (optional) - a string that provides a format to apply to the argument. for example, cmd_args(x, format=&quot;--args={}&quot;) would prepend --args= before x, or if x was a list, before each element in x.delimiter (optional) - added between arguments to join them together. For example, cmd_args([&quot;--args=&quot;,x], delimiter=&quot;&quot;) would produce a single argument to the underlying tool.prepend (optional) - added as a separate argument before each argument.quote (optional) - indicates whether quoting is to be applied to each argument. Note: the only current valid value is &quot;shell&quot;. cmd.add(*args) - a list of arguments to be added to the command line, as per cmd_args. cmd.hidden(*args) - things to add to the command line which do not show up but are added as dependencies. cmd.ignore_artifacts() - conceptually the opposite of hidden(). It causes none of the arguments of the command line to be added as dependencies. Use this if you need the path to an artifact but not the artifact itself.Note: if you do find yourself needing any of the inputs referenced by this command, you will hit build errors due to missing dependencies. cmd.relative_to(directory, parent : int.type = 0) - complex magic. Before using this, please contact Meta's Buck2 team. cmd.absolute_prefix(prefix : str.type)- adds a prefix to the front of every artifact. cmd.absolute_suffix(suffix : str.type) - adds a suffix to the end of every artifact. cmd.parent(count : int.type = 1) - uses the parent of all given artifacts. Often used as cmd_args(artifact, format=&quot;-L{}&quot;).parent(). cmd.replace_regex(pattern : str.type, replacement : str.type) - replaces all parts matching pattern regular expression in each argument with replacement string. Several replacements can be added by multiple replace_regex calls. cmd.copy() - returns a copy of the cmd_args such that any modifications to the original or the returned value will not impact each other. cmd.inputs - returns a list of the artifacts that are inputs to this command line. cmd.outputs - returns a list of the artifacts that are outputs of this command line. "},{"title":"Type label​","type":1,"pageTitle":"Rule APIs","url":"/docs/rule_authors/rule_api/#type-label","content":"A label represents a configured target. For example, the label fbcode//buck2/hello:world (ovr_config//platform/linux:x86_64-fbcode-46b26edb4b80a905) has the following attributes: package gives back buck2/helloname gives back worldsub_target gives back Nonepath gives back fbcode/buck2/hellocell gives back fbcoderaw_target() gives back fbcode//buck2/hello:world without the configuration "},{"title":"Type artifact​","type":1,"pageTitle":"Rule APIs","url":"/docs/rule_authors/rule_api/#type-artifact","content":"An artifact, which has a location on disk. Some of that location is considered private, and some (the suffix) is available for use. The examples below assume an artifact such as one created with ctx.actions.declare_output(&quot;hello/world.txt&quot;). It has the following attributes: basename gives back world.txtextension gives back .txtis_source - True if the artifact is a source, otherwise False.owner gives back a label representing the rule that created it (if it is a build output) or None (if it is a source).as_output() gives a value suitable for setting as an output to ctx.actions.run.short_path gives back hello/world.txt "},{"title":"Projected artifacts​","type":1,"pageTitle":"Rule APIs","url":"/docs/rule_authors/rule_api/#projected-artifacts","content":"Artifacts can be projected via the project() method. Projecting an artifact yields a path within it. For example, if artifact foo is a directory containing a file bar, then foo.project(&quot;bar&quot;) yields the file bar. It is possible for projected artifacts to hide the prefix in order to have the short name of the resulting artifact only contain the projected path, by passing hide_prefix = True to project(). "},{"title":"Test Execution","type":0,"sectionRef":"#","url":"/docs/rule_authors/test_execution/","content":"","keywords":""},{"title":"Anatomy of a test run​","type":1,"pageTitle":"Test Execution","url":"/docs/rule_authors/test_execution/#anatomy-of-a-test-run","content":"When a user runs buck2 test $targets: Buck2 identifies all matching targets that have an ExternalRunnerTestInfo.Buck2 builds all the artifacts referenced by those targets (this will likely change eventually to build them only if they are used).Buck2 then notifies Tpx that those tests exist. Currently, Tpx receives a subset of ExternalRunnerTestInfo.Tpx requests command execution from Buck2 to list and execute tests.When it receives command results from Buck2, Tpx may fire off events that the end-user will see (such as test results), log to Test Infra, request further executions, and so on. note If more than one target is being built, test building and execution will proceed concurrently. "},{"title":"Information available on ExternalRunnerTestInfo​","type":1,"pageTitle":"Test Execution","url":"/docs/rule_authors/test_execution/#information-available-on-externalrunnertestinfo","content":"As noted, rules communicate their testing capabilities via ExternalRunnerTestInfo. There are a number of fields available on ExternalRunnerTestInfo to control how a given target is tested, as detailed in the following sub-sections. "},{"title":"Fields exposed to Tpx​","type":1,"pageTitle":"Test Execution","url":"/docs/rule_authors/test_execution/#fields-exposed-to-tpx","content":"The following list shows what is available in ExternalRunnerTestInfo, with which Tpx can interact: type - a string key that defines the type of test this is. Tpx uses this internally to choose a translator. Examples include gtest, apple_test, custom. Note that Tpx also allows labels to influence the orchestrator selection.command and env - respectively, a list and a key-value mapping of arguments. These are the inputs to translation in Tpx. They are not always visible to Tpx (for more details, see Verbatim arguments and handles, below).labels - a set of string labels to pass to Tpx. They have no meaning to Buck2, but some labels have impact on translation in Tpx.contacts - a list of contacts for the tests; usually oncalls.executor_overrides - a key-value mapping of executor configurations that Tpx can use when requesting execution from Buck2. "},{"title":"Fields pertinent for Remote Execution​","type":1,"pageTitle":"Test Execution","url":"/docs/rule_authors/test_execution/#fields-pertinent-for-remote-execution","content":"For compatibility with Remote Execution (RE), there are two fields that rules should set in their ExternalRunnerTestInfo if they should be run on RE: use_project_relative_paths - if true (the default is false), Buck2 will produce relative paths. If not, it'll produce absolute paths.run_from_project_root - if true, tests will run from the project root (their cwd will be the project root, which is the same as all other build commands). If false, it'll be the cell root. Note that passing --unstable-force-tests-on-re to buck2 test will override those fields and set them to true, since they are a pre-requisite to run on RE. In contrast, passing --unstable-allow-tests-on-re will only allow tests that already set both those fields to true to execute on RE. Also note that when executor_overrides are set, if an executor override is used and results in execution on RE, it'll happen on RE unconditionally. Therefore, it's a good idea to set those fields if RE-only executor overrides are provided. "},{"title":"Verbatim arguments and handles​","type":1,"pageTitle":"Test Execution","url":"/docs/rule_authors/test_execution/#verbatim-arguments-and-handles","content":"As noted above, Tpx only interacts with a subset of arguments provided by rules in ExternalRunnerTestInfo. The reason for this is that Tpx doesn't get to access, for example, artifacts, that Buck2 knows about. Consider the following example: binary = ctx.attrs.dep[RunInfo] test_info = ExternalRunnerTestInfo(command = [binary, &quot;run-tests&quot;], ...)  When Buck2 actually runs this command, binary is expanded to a path (and possibly to more args). Buck2 would also account for any hidden arguments and make those available where the command is executed. It is important for Buck2 to retain this capability when running with Tpx. To that end, all non-trivial arguments present in command (and in the values of env), such as cmd_args or RunInfo, are exposed to Tpx as opaque handles, and simple string arguments are passed as-is to Tpx. This means that Tpx would see the command described above as: [ArgHandle(index = 0), Verbatim(&quot;foobar&quot;)]  When requesting execution from Buck2, Tpx can use the ArgHandle and Buck2 will swap it back for the underlying value that was set on the provider. This allows Tpx to introspect and modify parts of the command lines it receives, as long as it doesn't need to access the actual text value of non-verbatim arguments. Usually, this works out to be sufficient (or can be made sufficient with a bit of refactoring in Tpx). "},{"title":"Execution Configurations​","type":1,"pageTitle":"Test Execution","url":"/docs/rule_authors/test_execution/#execution-configurations","content":"By default, tests execute using the execution configuration of the associated target. This is the execution configuration that would be used for run actions (ctx.actions.run) declared in the same target. This is a default that actually makes little sense but works out as long as cross-compiling is not the norm. That said, it's easy to see where this breaks down. For example: For iOS tests, the execution platform for builds needs to be XCode (local or RE Mac).For test listing, XCode is not needed (it's preferable to do it on RE Linux where capacity is cheaper).To run tests, a simulator is required. To support this, ExternalRunnerTestInfo allows specifying override platforms, which are given a name. Tpx can request execution on them by passing their name when it sends execution requests to Buck2, as shown in the following code: ExternalRunnerTestInfo( executor_overrides = { &quot;ios-simulator&quot;: CommandExecutorConfig( local_enabled = False, remote_enabled = True, remote_execution_properties = { &quot;platform&quot;: &quot;ios-simulator-pure-re&quot;, &quot;subplatform&quot;: &quot;iPhone 8.iOS 15.0&quot;, &quot;xcode-version&quot;: &quot;xcodestable&quot;, }, remote_execution_use_case = &quot;tpx-default&quot;, ), &quot;static-listing&quot;: CommandExecutorConfig(local_enabled = True, remote_enabled = False), }, ... )  The default execution platform can also be overridden: ExternalRunnerTestInfo( default_executor = CommandExecutorConfig( local_enabled = False, remote_enabled = True, remote_execution_properties = { &quot;platform&quot;: &quot;ios-simulator-pure-re&quot;, &quot;subplatform&quot;: &quot;iPhone 8.iOS 15.0&quot;, &quot;xcode-version&quot;: &quot;xcodestable&quot;, }, remote_execution_use_case = &quot;tpx-default&quot;, ), ... )  "},{"title":"Working Directory​","type":1,"pageTitle":"Test Execution","url":"/docs/rule_authors/test_execution/#working-directory","content":"As noted above, tests run from the cell root unless run_from_project_root is set. To produce paths relative to the cell root for use by tests, use relative_to(ctx.label.cell_root) on cmd_args. "},{"title":"Transitive Sets","type":0,"sectionRef":"#","url":"/docs/rule_authors/transitive_sets/","content":"","keywords":""},{"title":"Rule API​","type":1,"pageTitle":"Transitive Sets","url":"/docs/rule_authors/transitive_sets/#rule-api","content":"First, you need to declare your transitive set type, then you can use it, as follows: # This is the type MySet = transitive_set() # Those are transitive sets: set1 = ctx.actions.tset(MySet, value = &quot;foo&quot;) set2 = ctx.actions.tset(MySet, value = &quot;bar&quot;, children = [set1])  Values are optional, and so are children. This means you can have a set with no value and sets with no children. "},{"title":"Projections: using transitive sets in command lines​","type":1,"pageTitle":"Transitive Sets","url":"/docs/rule_authors/transitive_sets/#projections-using-transitive-sets-in-command-lines","content":"Sets aren't useful unless you can use their contents! To use a set in a command line, you use a concept called a 'projection', which defines how to turn individual values found in the set into command line arguments. To define a projection, you write a function that takes a value of your set and returns a command-line like object (cmd_args, string, attr.arg() attributes, artifact, ad so on) or a list of them in whichever way makes sense for your use case. Then, you call project_as_args to turn a set into a value suitable for inclusion in a command line. When expanded, this projection will expand like a list of all the node's individual projected values. Following is an example: # Declare the projection def project_as_define(value: str.type): return cmd_args(value, format = &quot;-D{}&quot;) # Add it to the set definition MySet = transitive_set(args_projections = { &quot;define&quot;: project_as_define }) # Create a set set1 = ctx.actions.tset(MySet, value = &quot;foo&quot;) set2 = ctx.actions.tset(MySet, value = &quot;bar&quot;, children = [set1]) # Call the projection. # Note &quot;define&quot; is the key used above in `args_projections`. args = set2.project_as_args(&quot;define&quot;)  When you use args in a command line, it will expand to -Dbar -Dfoo. Note that creating projections is very cheap. Notably, it is independent of the size of the set. "},{"title":"Projections: using transitive sets in write_json()​","type":1,"pageTitle":"Transitive Sets","url":"/docs/rule_authors/transitive_sets/#projections-using-transitive-sets-in-write_json","content":"As with command lines, sets can form json projections to be used in write_json. A json projection is defined in the same way as an arg projection. The function should return a value that write_json otherwise supports. Then, you call project_as_json to turn a set into a value that can be passed to write_json (or can appear within the value passed to it, it doesn't need to be the top-level value). When expanded, the projection will expand like a list of all the node's individual projected values. Following is an example: # Declare the projection def project_as_json(value: str.type): return struct(key = &quot;foo&quot;, value = value) # Add it to the set definition MySet = transitive_set(json_projections = { &quot;define&quot;: project_as_json }) # Create a set set1 = ctx.actions.tset(MySet, value = &quot;foo&quot;) set2 = ctx.actions.tset(MySet, value = &quot;bar&quot;, children = [set1]) # Call the projection. # Note &quot;define&quot; is the key we used above in `json_projections`. args = set2.project_as_json(&quot;define&quot;)  Note that if your projected values include (or may include) artifacts, you will likely want to use write_json(with_inputs=True) to get back a cmd_args that has all the artifacts in the json structure already in its .hidden. "},{"title":"Traversals in depth​","type":1,"pageTitle":"Transitive Sets","url":"/docs/rule_authors/transitive_sets/#traversals-in-depth","content":"Transitive sets form DAGs. Notably, this means individual nodes can exist more than once in a given transitive set. When a transitive set is traversed, nodes that have already been visited are skipped. This means their arguments will only be emitted once. For example: flowchart TD foo((foo)) bar((bar)) qux((qux)) qux --&gt; foo bar --&gt; foo qux --&gt; bar set1 = ctx.actions.tset(MySet, value = &quot;foo&quot;) set2 = ctx.actions.tset(MySet, value = &quot;bar&quot;, children = [set1]) set3 = ctx.actions.tset(MySet, value = &quot;qux&quot;, children = [set1, set2]) args = set3.project_as_args(&quot;define&quot;)  This will expand to -Dqux -Dfoo -Dbar, even though set1 (&quot;foo&quot;) shows up twice in the DAG. "},{"title":"Other APIs​","type":1,"pageTitle":"Transitive Sets","url":"/docs/rule_authors/transitive_sets/#other-apis","content":""},{"title":"Transitive set reductions​","type":1,"pageTitle":"Transitive Sets","url":"/docs/rule_authors/transitive_sets/#transitive-set-reductions","content":"You can aggregate values of a transitive set via a reduction. This can be helpful for tasks such as propagating Boolean flags up the tree. Following is a real-world example. When defining a reduction, you receive the reduced values of all your children, and an optional value for the current node (the value will be None when you create a set and you don't pass a value), and you need to merge them together to produce this node's value: def link_info_has_default_filelist(children: [&quot;bool&quot;], infos: [&quot;LinkInfos&quot;, None]): if infos: info = infos.default if info.filelist: return True return any(children) # Set of LinkInfos LinkInfosTSet = transitive_set( reductions = { &quot;has_default_filelist&quot;: link_info_has_default_filelist, }, )  "},{"title":"Transitive set iteration​","type":1,"pageTitle":"Transitive Sets","url":"/docs/rule_authors/transitive_sets/#transitive-set-iteration","content":"You can iterate over a transitive set. This will yield each value once. You can also iterate over projections. However, note that this is generally not recommended, since unlike creating and using a projection, this operation is O(set). You should use this as an escape hatch if and only if you need to implement something transitive sets don't support via projections or reductions, because in doing so you'll lose a lot of the performance benefits. For example: set1 = ctx.actions.tset(MySet, value = &quot;foo&quot;) set2 = ctx.actions.tset(MySet, value = &quot;bar&quot;, children = [set1]) set3 = ctx.actions.tset(MySet, value = &quot;qux&quot;, children = [set1, set2]) values = list(set3.traverse())  This will yield [&quot;qux&quot;, &quot;foo&quot;, &quot;bar&quot;]. "},{"title":"Ordering​","type":1,"pageTitle":"Transitive Sets","url":"/docs/rule_authors/transitive_sets/#ordering","content":"Transitive set iteration uses a left-to-right, pre-order traversal by default, and ignores nodes that have already been visited. This order is reflected in projections as well. A few different traversal orders are supported with the ordering attribute: Ordering\tDescriptionpreorder (default)\tTraverses using a depth-first-search, visiting nodes left-to-right. postorder\tTraverses children left-to-right, and then visits the current node. topological\tA Topological sort, such that nodes are listed after all nodes that have them as descendants. This is similar to a pre-order traversal, except that when nodes are shared with more than one parent it is returned in the order of its last occurrence. bfs\tBreadth-first-search (BFS) traversal, traverses nodes left-to-right before traversing children. For example: set1 = ctx.actions.tset(MySet, value = &quot;foo&quot;) set2 = ctx.actions.tset(MySet, value = &quot;bar&quot;, children = [set1]) set3 = ctx.actions.tset(MySet, value = &quot;qux&quot;, children = [set1, set2]) values = list(set3.traverse(ordering = &quot;topological&quot;)) # This also works for projections args = set3.project_as_args(&quot;project&quot;, ordering = &quot;topological&quot;))  Following is an example of how different orderings evaluate: flowchart TD foo((foo)) bar((bar)) qux((qux)) qux --&gt; foo bar --&gt; foo qux --&gt; bar Ordering\tResultpreorder\t[&quot;qux&quot;, &quot;foo&quot;, &quot;bar&quot;] postorder\t[&quot;foo&quot;, &quot;bar&quot;, &quot;qux&quot;] topological\t[&quot;qux&quot;, &quot;bar&quot;, &quot;foo&quot;] bfs\t[&quot;qux&quot;, &quot;foo&quot;, &quot;bar&quot;] "},{"title":"Implementation details​","type":1,"pageTitle":"Transitive Sets","url":"/docs/rule_authors/transitive_sets/#implementation-details","content":""},{"title":"Projection evaluation​","type":1,"pageTitle":"Transitive Sets","url":"/docs/rule_authors/transitive_sets/#projection-evaluation","content":"Projections are evaluated eagerly for each node of your transitive set. This means that if your projection throws an error, you'll find out when creating a set via ctx.actions.tset. "},{"title":"Writing Rules","type":0,"sectionRef":"#","url":"/docs/rule_authors/writing_rules/","content":"","keywords":""},{"title":"Workflow by example​","type":1,"pageTitle":"Writing Rules","url":"/docs/rule_authors/writing_rules/#workflow-by-example","content":"The built-in Buck2 rules are stored in fbsource in fbcode/buck2/prelude. To add a rule for a language, say pascal: Look at prelude/attributes.bzl to see the attributes that are supported in Buck1 and are mirrored into Buck2. If pascal was an existing rule, you would see what attributes it takes (often it will be pascal_libary and pascal_binary). Create a file at prelude/pascal.bzl that will contain your rule implementations. The details are explained later, but a dummy rule looks like the following: def pascal_binary_impl(_ctx: &quot;context&quot;) -&gt; [&quot;provider&quot;]: return [DefaultInfo()] Register that rule in prelude/rules_impl.bzl, which involves adding a load(&quot;:pascal.bzl&quot;, &quot;pascal_binary_impl&quot;) at the top and an additional entry in implemented_rules section to wire up pascal_binary = pascal_binary_impl. Create a directory in fbcode/buck2/tests/targets/rules/pascal with TARGETS and whatever source files and test targets you need to test your project. Note, Apple tests are currently located at xplat/buck2/tests/apple/.... Test your code with buck2 build fbcode//buck2/tests/targets/rules/pascal:. They should succeed with no actual output produced. Now implement the rules (see the rest of this page). note Before merging a diff, it's important that all your Starlark is warning free (if you don't want to set up Buck2 for local development, test it in CI). "},{"title":"Concepts and design​","type":1,"pageTitle":"Writing Rules","url":"/docs/rule_authors/writing_rules/#concepts-and-design","content":"A rule for a target uses attributes to declare actions, which produce artifacts that get included in providers. For example, given: def pascal_binary_impl(ctx: &quot;context&quot;) -&gt; [&quot;provider&quot;]: ... binary = ctx.actions.declare_output(ctx.attrs.out) ctx.actions.run([&quot;pascalc&quot;, args, &quot;-o&quot;, binary.as_output()]) return [ DefaultInfo(default_output = binary), ] pascal_binary = rule(impl = pascal_binary_impl, attrs = { &quot;out&quot;: attrs.string(), ... })  In the above snippet: Rule is pascal_binary, which is implemented by pascal_binary_impl. The rule says how to build things.Target will be something like fbcode//buck2/tests/targets/rules/pascal:my_binary. The rule implementation pascal_binary_impl will be called once per target.Attributes are the fields on the target (for example, you might have out, which can be accessed via ctx.attrs.out).Actions are declared by the rule with things like ctx.actions.run, which takes a command line. Note that the actions are not run by the rule, but declared, so that Buck2 can run them later.Artifacts represent files on disk, which could be source or build outputs (binary in the above example). For build outputs, the artifact is produced by an action, and the existence of the artifact does not imply the build has been run: the artifact 'remembers' what should be run if it is required. Providers are returned, which is information that other rules get to use. These will often contain artifacts. The rule implementation takes in a ctx, which is the rule context. The two most important fields are ctx.attrs, which picks up the attributes declared by the rule, and ctx.actions, which lets you create new actions to actually do something. The output of any actions performed will be materialized in buck-out. However, only the defined outputs of providers are available for dependent rules to consume and only the actions necessary to produce those outputs being consumed will be run. By default, the default_output of the DefaultInfo provider is built and output during a buck build. "},{"title":"Providers​","type":1,"pageTitle":"Writing Rules","url":"/docs/rule_authors/writing_rules/#providers","content":"Providers are the data returned from a rule and are the only way that information from this rule is available to rules that depend on it. Every rule must return at least the DefaultInfo provider, but most will also return either RunInfo (because they are executable) or some custom provider (because they are incorporated into something that is ultimately executable). The DefaultInfo provider has a field default_output, which is the file that will be built when someone executes a buck2 build on this particular target, and the file that will be used when someone runs $(location target) or uses it as a source file (such as srcs = [&quot;:my_target&quot;].) The current rule of thumb is that if you can build the default_output, the rule must 'work', and, if usable, should be 'ready'. For example, for a binary, the executable and runtime libraries it depends on might be returned. For a library, because neither the static or dynamic library is the 'default', you merely have to do enough work to ensure that the static and dynamic library probably work. Similar to how DefaultInfo wraps a list of artifacts and $(location) selects from DefaultInfo, RunInfo wraps a command line and $(exe) selects from RunInfo. For more information about command lines, see Run action, below. For libraries, usually you need to pass some information about the library up to the binary. The only information that dependents on the library get are the providers, so designing the information that flows around the provider is critical to designing good rules. For a hypothetical rule, you may decide you want the name of the library and the artifact that represents the .so file, for which you could define the following provider: PascalLibraryInfo = provider(fields=[ &quot;name&quot;, # The name of the library &quot;object&quot; # An artifact, the .so file that needs linking in ] )  Often, you'll grab your dependencies from all your providers: my_deps = [x[PascalLibraryInfo] for x in ctx.attrs.deps]  In many cases, it becomes apparent you need the transitive closure of all libraries (for example, the libraries and everything they depend upon), in which case, the standard pattern is to move to a provider of a list of record (see the types.md document in GitHub) and the flatten/dedupe functions, defining it as: PascalLibraryInfo = provider(fields=[&quot;links&quot;]) # a list of LinkData LinkData = record(name = str.type, object = &quot;artifact&quot;)  And then consuming it: my_links = dedupe(flatten([x[PascalLibraryInfo].links for x in ctx.attrs.deps])) my_info = PascalLibraryInfo(links = my_links)  However, this flatten/dupe pattern can get expensive, especially when you have a deep dependency graph. To fix that it's recommended to use transitive sets. "},{"title":"Actions​","type":1,"pageTitle":"Writing Rules","url":"/docs/rule_authors/writing_rules/#actions","content":"There are several actions you can use to create symlink trees, and so on. Run action​ Of the various actions, the run action is by far the most important: it's the one that invokes a command line. A command line is both a list of string arguments and a list of artifacts they depend on; with syntactic niceties for adding artifacts to command lines in a way that ensures the dependencies are usually correct. Following are examples of command line manipulations: cmd = cmd_args([&quot;some&quot;, &quot;arguments&quot;]) cmd.add(&quot;another-arg&quot;) cmd.add(ctx.attrs.src) # An input artifact out = ctx.actions.declare_output(&quot;an output&quot;) cmd.add(out.as_output()) ctx.actions.run(cmd)  The action declare_output creates a new artifact which is not bound to anything. You can call .as_output() on it when adding it to a command line to say that this command line doesn't take the artifact as an input but produces it as an output. From now on, if out is used as a dependency (either to another command line, or in DefaultInfo) then the action will be run to produce that artifact. Typically, these outputs are declared (declare_output), bound in a ctx.actions.run call with .as_output(), then either used locally as the input to another action or returned in a provider. As another example: cmd = cmd_args([&quot;cp&quot;, input, output.as_output()]) ctx.actions.run(cmd)  A command provides both a string (what to write when used) and a list of artifacts (what must be available when used). Normally, as in the case above, the artifacts that are used correspond to those on the command line. But imagine the rule is changed to write the command to a shell script first: sh = ctx.actions.write(&quot;test.sh&quot;, [&quot;cp&quot;, input, output]) cmd = cmd_args([&quot;sh&quot;,sh]) cmd.hidden([input, output.as_output()]) ctx.actions.run(cmd)  The command has been written to a shell script, which is now run. Beforehand, all the artifacts used by the command appeared on the command line. Now they don't. However, the shell script still accesses input and output. To inform the run command, use the hidden field of the command line to declare the dependency. For more complicated actions, which perform meaningful logic beyond invoking a simple command, the tendency is to write custom Python scripts. Python scripts are used instead of shell scripts as they have better cross-platform compatibility and fewer hidden corners (especially in error paths). As an example of a Python helper, see make_comp_db.py. A further advantage of using Python is that these commands can be tested in isolation, outside of Buck2. "},{"title":"Debugging​","type":1,"pageTitle":"Writing Rules","url":"/docs/rule_authors/writing_rules/#debugging","content":"The functions fail and print are your friends. To get started, a buck2 build fbcode//buck2/tests/targets/rules/pascal: builds everything or buck2 run fbcode//buck2/tests/targets/rules/pascal:my_binary runs a specific binary that returns a RunInfo. "},{"title":"Testing Rules​","type":1,"pageTitle":"Writing Rules","url":"/docs/rule_authors/writing_rules/#testing-rules","content":"A common way to test is to use genrule to cause the produced binary to run and assert some properties from it. If your rule is in Buck1 and Buck2, use a TARGETS file so you can test with both. If your tests are incompatible with Buck1 (such as if it is a new rule), use TARGETS.v2, which will only be seen by Buck2 and won't cause errors with Buck1. "},{"title":"New rules​","type":1,"pageTitle":"Writing Rules","url":"/docs/rule_authors/writing_rules/#new-rules","content":"If your rule is not already in Buck1, then you can define it wherever you like, with a preference for it not being in fbcode/buck2/prelude. The only advantage of the prelude is that rules can be used without a corresponding load, which is generally considered a misfeature. The attributes should usually be placed adjacent to the rule itself. As an example, just below the pascal_binary_impl function, you could write: pascal_binary = rule( impl = pascal_binary_impl, attrs = { &quot;deps&quot;: attrs.list(attrs.dep()), &quot;src&quot;: attrs.source(), } )  "},{"title":"Why Buck2","type":0,"sectionRef":"#","url":"/docs/why/","content":"","keywords":""},{"title":"Why does Buck2 exist?​","type":1,"pageTitle":"Why Buck2","url":"/docs/why/#why-does-buck2-exist","content":"Meta employs a very large monorepo, consisting of a variety of programming languages, including C++, Python, Rust, Kotlin, Swift, Objective-C, Haskell, OCaml, and more. Google employs a different but functionally similar monorepo. These large scale and multi-language repositories are generally beyond the capabilities of traditional build systems like make. To optimize the build and performance of these large systems, Facebook and Google developed their own build systems, respectively Buck and Bazel. While the internal version of Bazel was started first (also known as Blaze), Buck was open sourced first (back in March 2013), followed by Bazel a few years later (March 2015). The retroactively named Buck1 was a capable build system and is still in use today at Meta (although many users have migrated). Buck2 is a rewrite that aims to keep the best bits of Buck1 (with a high degree of target compatibility) but also borrows ideas from academic research and build systems, including Bazel, Pants, Shake, Tup, and more. Following are aspects common to Buck1 and Buck2 (and in most cases, Bazel): Targets that can be queried - the build is defined as a series of targets, specified in BUCK files, that depend on other targets. This graph of targets can be queried to understand how they relate to each other and what the potential impact of a change might be.Remote execution - the build can send actions to a set of remote servers to be executed, increasing the parallelism significantly.Multi-language composability - there can be lots of different languages in a single build, and they can be put together. For example, you could have a Python library that depends on a Rust library, which, in turn depends on a C library.File watching - at large enough scale, simply looking for changed files is prohibitively expensive. Buck can integrate with Watchman to discover which files have changed efficiently. However, for simplicity of setup, the open-source version defaults to using inotify or similar functionality.Uses Starlark - Starlark is a deterministic Python-like language used to specify the targets, enabling the definition of targets as literals and more advanced manipulation/sharing. "},{"title":"What's different about Buck2?​","type":1,"pageTitle":"Why Buck2","url":"/docs/why/#whats-different-about-buck2","content":"Buck2 has many minor differences from Buck1, but there are a number that give new efficiency or expressiveness that are of note (most of these are also differences from Bazel). Buck2 is written in Rust - Buck1 was written in Java. One of the advantages of using Rust is the absence of GC pauses, However, Java also has advantages, such as better memory profiling tools.Buck2 is remote execution first - local execution is considered a special case of remote execution, in contrast to Buck1 where it was added after. That means that things such as directory hashes can be pre-computed ready to send to remote execution, giving efficiency benefits.All Buck2 rules are written in Starlark - whereas, in Buck1, they were written in Java as part of the binary, which makes iteration on rules much faster.The Buck2 binary is entirely language agnostic - as a consequence of having all the rules external to the binary, the most important and complex rule (such as in C++), don't have access to magic internal features. As a result, features have been made available to all rules, including: Dep files - the ability to declare that a subset of the files weren't actually used, and thus not be sensitive to changes within them.Incremental actions - the ability to have the action short-circuit some subset of the work if run again. Buck2 uses a dynamic (aka monadic) graph as its underlying computation engine - while most dependencies are specified statically, there are two particular features that expose dynamic power to rule authors: Dynamic dependencies - enable rules to build a file then look at its contents before specifying the dependencies and steps in future actions. Common uses are languages where the dependency structure within a project must follow imports (Haskell, OCaml) and distributed ThinLTO (where the best optimization plan is generated fromAnonymous targets - enable rules to create a graph that has more sharing than the original user graph. As a result, two unrelated binaries can compile shared code only once, despite the shared code not knowing about this commonality. This feature is useful for rules like Swift feature resolution. Transitive-sets - similar in purpose to Bazel's depset. But, instead of being just a memory optimization, are also wired into the dependency graph, providing a reduction in the size of the dependency graph.Buck2 is not phased - there are no target graph/action graph phases, just a series of dependencies in a single graph that result in whatever the user requested. That means that Buck2 can sometimes parallelise different phases and track changes very precisely.Buck2 can integrate with the virtual filesystem Eden - this provides good performance, even when the file system is backed by source control fetches. However, Eden is not required, and a normal file system will also work well.The Buck2 Starlark implementation is available as a standalone library - this provides features such as IDE integration (both LSP and DAP bindings), linters, typecheckers, and more. These features are integrated into Buck2 to give a better developer experience (which is still evolving).Buck2 supports configurations - (such as select) to provide multi-platform/architecture builds, which are heavily inspired by Bazel. Within that space, there is a number of small differences, such as toolchain_deps.Compared to Buck1, Buck2 builds are typically 2x-3x faster. For a comprehensive list of benefits, see Benefits Compared to Buck1. "},{"title":"Why use Buck2?​","type":1,"pageTitle":"Why Buck2","url":"/docs/why/#why-use-buck2","content":"It would be delightful if you tried out Buck2! But it is early-stage software, so users may run into unexpected issues. If you encounter an issue, please report it via Github issues. Buck2 is being used internally within Meta and is available as open-source from 2023. The are several differences between the internal and open-source versions: Meta uses an internal version of remote execution with builds always hooked up to remote execution. The open-source binding, which uses Buck2 without remote execution, may be less polished.There are some configuration differences between the open source and internal versions. For example, file changes default to inotify in open-source, and to Watchman internally.The prelude (containing all the rules) is the same for open-source as internal, but toolchains are not open-sourced. The required custom toolchains may not work as well. There are also some things that aren't quite yet finished: There are not yet mechanisms to build in release mode (that should be achieved by modifying the toolchain).Windows/Mac builds are still in progress; open-source code is mostly tested on Linux. If none of that puts you off, give Buck2 a go! "},{"title":"prelude.bzl","type":0,"sectionRef":"#","url":"/docs/generated/starlark/prelude/prelude.bzl/","content":"","keywords":""},{"title":"native​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#native","content":""},{"title":"Members​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#members","content":""},{"title":"CommandExecutorConfig​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#commandexecutorconfig","content":"def CommandExecutorConfig( local_enabled: bool.type, remote_enabled: bool.type, *, remote_cache_enabled: [None, bool.type] = None, remote_execution_properties: &quot;&quot; = None, remote_execution_action_key: &quot;&quot; = None, remote_execution_max_input_files_mebibytes: [None, int.type] = None, remote_execution_queue_time_threshold_s: [None, int.type] = None, remote_execution_use_case: &quot;&quot; = None, use_limited_hybrid: bool.type = None, allow_limited_hybrid_fallbacks: bool.type = None, allow_hybrid_fallbacks_on_failure: bool.type = None, use_windows_path_separators: bool.type = None, allow_cache_uploads: bool.type = None, max_cache_upload_mebibytes: [None, int.type] = None, experimental_low_pass_filter: bool.type = None, remote_output_paths: [None, str.type] = None ) -&gt; &quot;&quot;   "},{"title":"ConfigurationInfo : UNKNOWN​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#configurationinfo--unknown","content":" "},{"title":"ConstraintSettingInfo : UNKNOWN​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#constraintsettinginfo--unknown","content":" "},{"title":"ConstraintValueInfo : UNKNOWN​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#constraintvalueinfo--unknown","content":" "},{"title":"DefaultInfo : UNKNOWN​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#defaultinfo--unknown","content":" "},{"title":"ExecutionPlatformInfo : UNKNOWN​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#executionplatforminfo--unknown","content":" "},{"title":"ExecutionPlatformRegistrationInfo : UNKNOWN​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#executionplatformregistrationinfo--unknown","content":" "},{"title":"ExternalRunnerTestInfo : UNKNOWN​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#externalrunnertestinfo--unknown","content":" "},{"title":"InstallInfo : UNKNOWN​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#installinfo--unknown","content":" "},{"title":"PlatformInfo : UNKNOWN​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#platforminfo--unknown","content":" "},{"title":"RunInfo : UNKNOWN​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#runinfo--unknown","content":" "},{"title":"TemplatePlaceholderInfo : UNKNOWN​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#templateplaceholderinfo--unknown","content":" "},{"title":"abs​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#abs","content":"def abs(x: int.type) -&gt; int.type   "},{"title":"alias​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#alias","content":"def alias( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, actual: str.type, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one actual contacts default_host_platform labels licenses within_view   "},{"title":"android_aar​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#android_aar","content":"def android_aar( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, abi_generation_mode: [None, str.type] = None, annotation_processing_tool: [None, str.type] = None, annotation_processor_deps: [str.type] = None, annotation_processor_params: [str.type] = None, annotation_processors: [str.type] = None, build_config_values: [str.type] = None, build_config_values_file: [None, str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, deps_query: [None, str.type] = None, enable_relinker: bool.type = None, exported_deps: [str.type] = None, exported_provided_deps: [str.type] = None, extra_arguments: [str.type] = None, extra_kotlinc_arguments: [str.type] = None, friend_paths: [str.type] = None, include_build_config_class: bool.type = None, java_version: [None, str.type] = None, javac: [None, str.type] = None, kotlin_compiler_plugins: {str.type: {str.type: str.type}} = None, labels: [str.type] = None, language: [None, str.type] = None, licenses: [str.type] = None, manifest: [None, str.type] = None, manifest_file: [None, str.type] = None, manifest_skeleton: str.type, maven_coords: [None, str.type] = None, native_library_merge_code_generator: [None, str.type] = None, native_library_merge_glue: [None, str.type] = None, native_library_merge_localized_symbols: [None, [str.type]] = None, native_library_merge_map: [None, {str.type: [str.type]}] = None, native_library_merge_sequence: [None, [(str.type, [str.type])]] = None, native_library_merge_sequence_blocklist: [None, [str.type]] = None, never_mark_as_unused_dependency: [None, bool.type] = None, on_unused_dependencies: [None, str.type] = None, plugins: [str.type] = None, proguard_config: [None, str.type] = None, provided_deps: [str.type] = None, provided_deps_query: [None, str.type] = None, relinker_whitelist: [str.type] = None, remove_classes: [str.type] = None, required_for_source_only_abi: bool.type = None, resource_union_package: [None, str.type] = None, resources: [str.type] = None, resources_root: [None, str.type] = None, runtime_deps: [str.type] = None, source: [None, str.type] = None, source_abi_verification_mode: [None, str.type] = None, source_only_abi_deps: [str.type] = None, srcs: [str.type] = None, target: [None, str.type] = None, use_jvm_abi_gen: [None, bool.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-1","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one abi_generation_mode annotation_processing_tool annotation_processor_deps annotation_processor_params annotation_processors build_config_values build_config_values_file contacts default_host_platform deps deps_query enable_relinker exported_deps exported_provided_deps extra_arguments extra_kotlinc_arguments friend_paths include_build_config_class java_version javac kotlin_compiler_plugins labels language licenses manifest manifest_file manifest_skeleton maven_coords native_library_merge_code_generator native_library_merge_glue native_library_merge_localized_symbols native_library_merge_map native_library_merge_sequence native_library_merge_sequence_blocklist never_mark_as_unused_dependency on_unused_dependencies plugins proguard_config provided_deps provided_deps_query relinker_whitelist remove_classes required_for_source_only_abi resource_union_package resources resources_root runtime_deps source source_abi_verification_mode source_only_abi_deps srcs target use_jvm_abi_gen within_view   "},{"title":"android_app_modularity​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#android_app_modularity","content":"def android_app_modularity( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _android_toolchain: str.type = None, application_module_blacklist: [None, [str.type]] = None, application_module_configs: {str.type: [str.type]} = None, application_module_dependencies: [None, {str.type: [str.type]}] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, no_dx: [str.type] = None, should_include_classes: bool.type = None, should_include_libraries: bool.type = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-2","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _android_toolchain application_module_blacklist application_module_configs application_module_dependencies contacts default_host_platform deps labels licenses no_dx should_include_classes should_include_libraries within_view   "},{"title":"android_binary​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#android_binary","content":"def android_binary(cpu_filters: UNKNOWN = None, **kwargs: UNKNOWN) -&gt; UNKNOWN   "},{"title":"android_build_config​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#android_build_config","content":"def android_build_config( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _android_toolchain: str.type = None, _build_only_native_code: default_only = None, _is_building_android_binary: default_only = None, _java_toolchain: str.type = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, package: str.type = None, values: [str.type] = None, values_file: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-3","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _android_toolchain _build_only_native_code _is_building_android_binary _java_toolchain contacts default_host_platform labels licenses package values values_file within_view   "},{"title":"android_bundle​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#android_bundle","content":"def android_bundle( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, aapt2_keep_raw_values: bool.type = None, aapt2_locale_filtering: bool.type = None, aapt_mode: str.type = None, additional_aapt_params: [str.type] = None, allow_r_dot_java_in_secondary_dex: bool.type = None, allowed_duplicate_resource_types: [str.type] = None, android_sdk_proguard_config: [None, str.type] = None, application_module_blacklist: [None, [str.type]] = None, application_module_configs: {str.type: [str.type]} = None, application_module_dependencies: [None, {str.type: [str.type]}] = None, asset_compression_algorithm: [None, str.type] = None, banned_duplicate_resource_types: [str.type] = None, build_config_values: [str.type] = None, build_config_values_file: [None, str.type] = None, build_string_source_map: bool.type = None, bundle_config_file: [None, str.type] = None, compress_asset_libraries: bool.type = None, contacts: [str.type] = None, cpu_filters: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, dex_compression: [None, str.type] = None, dex_group_lib_limit: int.type = None, dex_tool: str.type = None, disable_pre_dex: bool.type = None, duplicate_resource_behavior: str.type = None, duplicate_resource_whitelist: [None, str.type] = None, enable_relinker: bool.type = None, exopackage_modes: [str.type] = None, extra_filtered_resources: [str.type] = None, field_ref_count_buffer_space: int.type = None, ignore_aapt_proguard_config: bool.type = None, includes_vector_drawables: bool.type = None, is_cacheable: bool.type = None, is_voltron_language_pack_enabled: bool.type = None, keystore: str.type, labels: [str.type] = None, licenses: [str.type] = None, linear_alloc_hard_limit: int.type = None, locales: [str.type] = None, manifest: [None, str.type] = None, manifest_entries: {str.type: &quot;&quot;} = None, manifest_skeleton: [None, str.type] = None, method_ref_count_buffer_space: int.type = None, minimize_primary_dex_size: bool.type = None, module_manifest_skeleton: [None, str.type] = None, native_library_merge_code_generator: [None, str.type] = None, native_library_merge_glue: [None, str.type] = None, native_library_merge_localized_symbols: [None, [str.type]] = None, native_library_merge_map: [None, {str.type: [str.type]}] = None, native_library_merge_sequence: [None, [(str.type, [str.type])]] = None, native_library_merge_sequence_blocklist: [None, [str.type]] = None, no_auto_add_overlay_resources: bool.type = None, no_auto_version_resources: bool.type = None, no_dx: [str.type] = None, no_version_transitions_resources: bool.type = None, optimization_passes: int.type = None, package_asset_libraries: bool.type = None, package_type: str.type = None, packaged_locales: [str.type] = None, post_filter_resources_cmd: [None, str.type] = None, preprocess_java_classes_bash: [None, str.type] = None, preprocess_java_classes_cmd: [None, str.type] = None, preprocess_java_classes_deps: [str.type] = None, primary_dex_patterns: [str.type] = None, proguard_config: [None, str.type] = None, proguard_jvm_args: [str.type] = None, relinker_whitelist: [str.type] = None, resource_compression: str.type = None, resource_filter: [str.type] = None, resource_stable_ids: [None, str.type] = None, resource_union_package: [None, str.type] = None, secondary_dex_weight_limit: [None, int.type] = None, skip_crunch_pngs: [None, bool.type] = None, skip_proguard: bool.type = None, trim_resource_ids: bool.type = None, use_split_dex: bool.type = None, within_view: [None, [None, [str.type]]] = None, xz_compression_level: int.type = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-4","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one aapt2_keep_raw_values aapt2_locale_filtering aapt_mode additional_aapt_params allow_r_dot_java_in_secondary_dex allowed_duplicate_resource_types android_sdk_proguard_config application_module_blacklist application_module_configs application_module_dependencies asset_compression_algorithm banned_duplicate_resource_types build_config_values build_config_values_file build_string_source_map bundle_config_file compress_asset_libraries contacts cpu_filters default_host_platform deps dex_compression dex_group_lib_limit dex_tool disable_pre_dex duplicate_resource_behavior duplicate_resource_whitelist enable_relinker exopackage_modes extra_filtered_resources field_ref_count_buffer_space ignore_aapt_proguard_config includes_vector_drawables is_cacheable is_voltron_language_pack_enabled keystore labels licenses linear_alloc_hard_limit locales manifest manifest_entries manifest_skeleton method_ref_count_buffer_space minimize_primary_dex_size module_manifest_skeleton native_library_merge_code_generator native_library_merge_glue native_library_merge_localized_symbols native_library_merge_map native_library_merge_sequence native_library_merge_sequence_blocklist no_auto_add_overlay_resources no_auto_version_resources no_dx no_version_transitions_resources optimization_passes package_asset_libraries package_type packaged_locales post_filter_resources_cmd preprocess_java_classes_bash preprocess_java_classes_cmd preprocess_java_classes_deps primary_dex_patterns proguard_config proguard_jvm_args relinker_whitelist resource_compression resource_filter resource_stable_ids resource_union_package secondary_dex_weight_limit skip_crunch_pngs skip_proguard trim_resource_ids use_split_dex within_view xz_compression_level   "},{"title":"android_instrumentation_apk​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#android_instrumentation_apk","content":"def android_instrumentation_apk(cpu_filters: UNKNOWN = None, **kwargs: UNKNOWN) -&gt; UNKNOWN   "},{"title":"android_instrumentation_test​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#android_instrumentation_test","content":"def android_instrumentation_test( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _android_toolchain: str.type = None, _inject_test_env: default_only = None, _java_toolchain: str.type = None, apk: str.type, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, env: {str.type: str.type} = None, labels: [str.type] = None, licenses: [str.type] = None, test_rule_timeout_ms: [None, int.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-5","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _android_toolchain _inject_test_env _java_toolchain apk contacts default_host_platform env labels licenses test_rule_timeout_ms within_view   "},{"title":"android_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#android_library","content":"def android_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _android_toolchain: str.type = None, _build_only_native_code: default_only = None, _dex_min_sdk_version: default_only = None, _dex_toolchain: str.type = None, _is_building_android_binary: default_only = None, _java_toolchain: str.type = None, _kotlin_toolchain: str.type = None, abi_generation_mode: [None, str.type] = None, annotation_processing_tool: [None, str.type] = None, annotation_processor_deps: [str.type] = None, annotation_processor_params: [str.type] = None, annotation_processors: [str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, deps_query: [None, str.type] = None, exported_deps: [str.type] = None, exported_provided_deps: [str.type] = None, extra_arguments: [str.type] = None, extra_kotlinc_arguments: [str.type] = None, friend_paths: [str.type] = None, java_version: [None, str.type] = None, javac: [None, str.type] = None, kotlin_compiler_plugins: {str.type: {str.type: str.type}} = None, labels: [str.type] = None, language: [None, str.type] = None, licenses: [str.type] = None, manifest: [None, str.type] = None, manifest_file: [None, str.type] = None, maven_coords: [None, str.type] = None, never_mark_as_unused_dependency: [None, bool.type] = None, on_unused_dependencies: [None, str.type] = None, plugins: [str.type] = None, proguard_config: [None, str.type] = None, provided_deps: [str.type] = None, provided_deps_query: [None, str.type] = None, remove_classes: [str.type] = None, required_for_source_only_abi: bool.type = None, resource_union_package: [None, str.type] = None, resources: [str.type] = None, resources_root: [None, str.type] = None, runtime_deps: [str.type] = None, source: [None, str.type] = None, source_abi_verification_mode: [None, str.type] = None, source_only_abi_deps: [str.type] = None, srcs: [str.type] = None, target: [None, str.type] = None, use_jvm_abi_gen: [None, bool.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-6","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _android_toolchain _build_only_native_code _dex_min_sdk_version _dex_toolchain _is_building_android_binary _java_toolchain _kotlin_toolchain abi_generation_mode annotation_processing_tool annotation_processor_deps annotation_processor_params annotation_processors contacts default_host_platform deps deps_query exported_deps exported_provided_deps extra_arguments extra_kotlinc_arguments friend_paths java_version javac kotlin_compiler_plugins labels language licenses manifest manifest_file maven_coords never_mark_as_unused_dependency on_unused_dependencies plugins proguard_config provided_deps provided_deps_query remove_classes required_for_source_only_abi resource_union_package resources resources_root runtime_deps source source_abi_verification_mode source_only_abi_deps srcs target use_jvm_abi_gen within_view   "},{"title":"android_manifest​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#android_manifest","content":"def android_manifest( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _android_toolchain: str.type = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, skeleton: str.type, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-7","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _android_toolchain contacts default_host_platform deps labels licenses skeleton within_view   "},{"title":"android_platform​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#android_platform","content":"def android_platform( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, base_platform: str.type, native_platforms: {str.type: str.type} = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-8","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one base_platform native_platforms within_view   "},{"title":"android_prebuilt_aar​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#android_prebuilt_aar","content":"def android_prebuilt_aar( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _android_toolchain: str.type = None, _build_only_native_code: default_only = None, _dex_min_sdk_version: default_only = None, _dex_toolchain: str.type = None, _java_toolchain: str.type = None, aar: str.type, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, javadoc_url: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, maven_coords: [None, str.type] = None, required_for_source_only_abi: bool.type = None, source_jar: [None, str.type] = None, use_system_library_loader: bool.type = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-9","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _android_toolchain _build_only_native_code _dex_min_sdk_version _dex_toolchain _java_toolchain aar contacts default_host_platform deps javadoc_url labels licenses maven_coords required_for_source_only_abi source_jar use_system_library_loader within_view   "},{"title":"android_resource​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#android_resource","content":"def android_resource( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _android_toolchain: str.type = None, _build_only_native_code: default_only = None, allowlisted_locales: [None, [str.type]] = None, assets: [None, [str.type, {str.type: str.type}]] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, has_whitelisted_strings: bool.type = None, labels: [str.type] = None, licenses: [str.type] = None, manifest: [None, str.type] = None, package: [None, str.type] = None, project_assets: [None, str.type] = None, project_res: [None, str.type] = None, res: [None, [str.type, {str.type: str.type}]] = None, resource_union: bool.type = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-10","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _android_toolchain _build_only_native_code allowlisted_locales assets contacts default_host_platform deps has_whitelisted_strings labels licenses manifest package project_assets project_res res resource_union within_view   "},{"title":"apk_genrule​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#apk_genrule","content":"def apk_genrule( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _genrule_toolchain: default_only = None, aab: [None, str.type] = None, apk: [None, str.type] = None, bash: [None, str.type] = None, cacheable: [None, bool.type] = None, cmd: [None, str.type] = None, cmd_exe: [None, str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, enable_sandbox: [None, bool.type] = None, environment_expansion_separator: [None, str.type] = None, is_cacheable: bool.type = None, labels: [str.type] = None, licenses: [str.type] = None, need_android_tools: bool.type = None, out: [None, str.type] = None, remote: [None, bool.type] = None, srcs: [{str.type: str.type}, [str.type]] = None, type: str.type = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-11","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _genrule_toolchain aab apk bash cacheable cmd cmd_exe contacts default_host_platform enable_sandbox environment_expansion_separator is_cacheable labels licenses need_android_tools out remote srcs type within_view   "},{"title":"apple_asset_catalog​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#apple_asset_catalog","content":"def apple_asset_catalog( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, app_icon: [None, str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, dirs: [str.type] = None, labels: [str.type] = None, launch_image: [None, str.type] = None, licenses: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-12","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one app_icon contacts default_host_platform dirs labels launch_image licenses within_view   "},{"title":"apple_binary​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#apple_binary","content":"def apple_binary(**kwargs: UNKNOWN) -&gt; UNKNOWN   "},{"title":"apple_bundle​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#apple_bundle","content":"def apple_bundle(**kwargs: UNKNOWN) -&gt; UNKNOWN   "},{"title":"apple_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#apple_library","content":"def apple_library(**kwargs: UNKNOWN) -&gt; UNKNOWN   "},{"title":"apple_package​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#apple_package","content":"def apple_package(**kwargs: UNKNOWN) -&gt; UNKNOWN   "},{"title":"apple_resource​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#apple_resource","content":"def apple_resource( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, codesign_on_copy: bool.type = None, contacts: [str.type] = None, content_dirs: [str.type] = None, default_host_platform: [None, str.type] = None, destination: [None, str.type] = None, dirs: [str.type] = None, files: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, named_variants: {str.type: [str.type]} = None, resources_from_deps: [str.type] = None, variants: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-13","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one codesign_on_copy contacts content_dirs default_host_platform destination dirs files labels licenses named_variants resources_from_deps variants within_view   "},{"title":"apple_resource_bundle​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#apple_resource_bundle","content":"def apple_resource_bundle( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _apple_toolchain: str.type = None, _apple_tools: str.type = None, _bundle_target_name: str.type, _compile_resources_locally_override: [None, bool.type] = None, asset_catalogs_compilation_options: {str.type: &quot;&quot;} = None, binary: [None, str.type] = None, deps: [str.type] = None, extension: [str.type, str.type], ibtool_flags: [None, [str.type]] = None, ibtool_module_flag: [None, bool.type] = None, info_plist: str.type, info_plist_substitutions: {str.type: str.type} = None, product_name: [None, str.type] = None, resource_group: [None, str.type] = None, resource_group_map: [None, [str.type, [(str.type, [(str.type, str.type, [None, str.type])])]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-14","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _apple_toolchain _apple_tools _bundle_target_name _compile_resources_locally_override asset_catalogs_compilation_options binary deps extension ibtool_flags ibtool_module_flag info_plist info_plist_substitutions product_name resource_group resource_group_map   "},{"title":"apple_test​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#apple_test","content":"def apple_test(**kwargs: UNKNOWN) -&gt; UNKNOWN   "},{"title":"apple_toolchain​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#apple_toolchain","content":"def apple_toolchain( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _internal_platform_path: [None, str.type] = None, _internal_sdk_path: [None, str.type] = None, actool: str.type, architecture: str.type = None, build_version: [None, str.type] = None, codesign: str.type, codesign_allocate: str.type, codesign_identities_command: [None, str.type] = None, compile_resources_locally: bool.type = None, contacts: [str.type] = None, copy_scene_kit_assets: [None, str.type] = None, cxx_toolchain: str.type, default_host_platform: [None, str.type] = None, developer_path: [None, str.type] = None, dsymutil: str.type, dwarfdump: [None, str.type] = None, ibtool: str.type, installer: default_only = None, labels: [str.type] = None, libtool: str.type, licenses: [str.type] = None, lipo: str.type, min_version: [None, str.type] = None, momc: str.type, platform_path: [None, str.type] = None, requires_xcode_version_match: bool.type = None, sdk_environment: [None, str.type] = None, sdk_name: str.type = None, sdk_path: [None, str.type] = None, swift_toolchain: [None, str.type] = None, version: [None, str.type] = None, watch_kit_stub_binary: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None, work_around_dsymutil_lto_stack_overflow_bug: [None, bool.type] = None, xcode_build_version: [None, str.type] = None, xcode_version: [None, str.type] = None, xctest: str.type ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-15","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _internal_platform_path _internal_sdk_path actool architecture build_version codesign codesign_allocate codesign_identities_command compile_resources_locally contacts copy_scene_kit_assets cxx_toolchain default_host_platform developer_path dsymutil dwarfdump ibtool installer labels libtool licenses lipo min_version momc platform_path requires_xcode_version_match sdk_environment sdk_name sdk_path swift_toolchain version watch_kit_stub_binary within_view work_around_dsymutil_lto_stack_overflow_bug xcode_build_version xcode_version xctest   "},{"title":"apple_toolchain_override​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#apple_toolchain_override","content":"def apple_toolchain_override( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, base: str.type, cxx_toolchain: str.type ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-16","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one base cxx_toolchain   "},{"title":"apple_toolchain_set​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#apple_toolchain_set","content":"def apple_toolchain_set( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, apple_toolchains: [str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-17","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one apple_toolchains contacts default_host_platform labels licenses within_view   "},{"title":"apple_tools​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#apple_tools","content":"def apple_tools( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, assemble_bundle: str.type, info_plist_processor: str.type, make_modulemap: str.type, make_vfsoverlay: str.type, swift_objc_header_postprocess: str.type ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-18","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one assemble_bundle info_plist_processor make_modulemap make_vfsoverlay swift_objc_header_postprocess   "},{"title":"apple_watchos_bundle​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#apple_watchos_bundle","content":"def apple_watchos_bundle(**kwargs: UNKNOWN) -&gt; UNKNOWN   "},{"title":"attrs : UNKNOWN​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#attrs--unknown","content":" "},{"title":"breakpoint​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#breakpoint","content":"def breakpoint() -&gt; None   "},{"title":"cgo_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#cgo_library","content":"def cgo_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _cxx_toolchain: default_only = None, _go_toolchain: default_only = None, cgo_compiler_flags: [str.type] = None, compiler_flags: [str.type] = None, contacts: [str.type] = None, cxx_runtime_type: [None, str.type] = None, default_host_platform: [None, str.type] = None, default_platform: [None, str.type] = None, defaults: {str.type: str.type} = None, deps: [str.type] = None, deps_query: [None, str.type] = None, devirt_enabled: bool.type = None, embedcfg: [None, str.type] = None, executable_name: [None, str.type] = None, exported_deps: [str.type] = None, fat_lto: bool.type = None, focused_list_target: [None, str.type] = None, frameworks: [str.type] = None, go_assembler_flags: [str.type] = None, go_compiler_flags: [str.type] = None, go_srcs: [str.type] = None, header_namespace: [None, str.type] = None, headers: [{str.type: str.type}, [str.type]] = None, headers_as_raw_headers_mode: [None, str.type] = None, include_directories: [str.type] = None, labels: [str.type] = None, lang_compiler_flags: {str.type: [str.type]} = None, lang_platform_compiler_flags: {str.type: [(str.type, [str.type])]} = None, lang_platform_preprocessor_flags: {str.type: [(str.type, [str.type])]} = None, lang_preprocessor_flags: {str.type: [str.type]} = None, libraries: [str.type] = None, licenses: [str.type] = None, link_deps_query_whole: bool.type = None, link_group: [None, str.type] = None, link_group_map: [None, [(str.type, [(str.type, str.type, [None, str.type])])]] = None, link_style: [None, str.type] = None, linker_extra_outputs: [str.type] = None, linker_flags: [str.type] = None, package_name: [None, str.type] = None, platform_compiler_flags: [(str.type, [str.type])] = None, platform_deps: [(str.type, [str.type])] = None, platform_headers: [(str.type, [{str.type: str.type}, [str.type]])] = None, platform_linker_flags: [(str.type, [str.type])] = None, platform_preprocessor_flags: [(str.type, [str.type])] = None, platform_srcs: [(str.type, [[str.type, (str.type, [str.type])]])] = None, post_linker_flags: [str.type] = None, post_platform_linker_flags: [(str.type, [str.type])] = None, precompiled_header: [None, str.type] = None, prefer_stripped_objects: bool.type = None, prefix_header: [None, str.type] = None, preprocessor_flags: [str.type] = None, raw_headers: [str.type] = None, srcs: [[str.type, (str.type, [str.type])]] = None, thin_lto: bool.type = None, version_universe: [None, str.type] = None, weak_framework_names: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-19","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _cxx_toolchain _go_toolchain cgo_compiler_flags compiler_flags contacts cxx_runtime_type default_host_platform default_platform defaults deps deps_query devirt_enabled embedcfg executable_name exported_deps fat_lto focused_list_target frameworks go_assembler_flags go_compiler_flags go_srcs header_namespace headers headers_as_raw_headers_mode include_directories labels lang_compiler_flags lang_platform_compiler_flags lang_platform_preprocessor_flags lang_preprocessor_flags libraries licenses link_deps_query_whole link_group link_group_map link_style linker_extra_outputs linker_flags package_name platform_compiler_flags platform_deps platform_headers platform_linker_flags platform_preprocessor_flags platform_srcs post_linker_flags post_platform_linker_flags precompiled_header prefer_stripped_objects prefix_header preprocessor_flags raw_headers srcs thin_lto version_universe weak_framework_names within_view   "},{"title":"cmd_args​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#cmd_args","content":"def cmd_args(*args: UNKNOWN, delimiter: [None, str.type] = None, format: [None, str.type] = None, prepend: [None, str.type] = None, quote: [None, str.type] = None) -&gt; &quot;cmd_args&quot;   "},{"title":"command_alias​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#command_alias","content":"def command_alias( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _exec_os_type: default_only = None, _find_and_replace_bat: default_only = None, _target_os_type: default_only = None, args: [str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, env: {str.type: str.type} = None, exe: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, platform_exe: {str.type: str.type} = None, resources: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-20","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _exec_os_type _find_and_replace_bat _target_os_type args contacts default_host_platform env exe labels licenses platform_exe resources within_view   "},{"title":"config_setting​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#config_setting","content":"def config_setting( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, constraint_values: [str.type] = None, values: {str.type: str.type} = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-21","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one constraint_values values within_view   "},{"title":"configured_alias​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#configured_alias","content":"def configured_alias(name: UNKNOWN, actual: UNKNOWN, platform: UNKNOWN, fallback_to_unconfigured_alias: UNKNOWN = False, **kwargs: UNKNOWN) -&gt; UNKNOWN   "},{"title":"constraint_setting​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#constraint_setting","content":"def constraint_setting( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-22","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one within_view   "},{"title":"constraint_value​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#constraint_value","content":"def constraint_value( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, constraint_setting: str.type, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-23","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one constraint_setting within_view   "},{"title":"core_data_model​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#core_data_model","content":"def core_data_model( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, path: str.type, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-24","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts default_host_platform labels licenses path within_view   "},{"title":"csharp_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#csharp_library","content":"def csharp_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, compiler_flags: [str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [[str.type, str.type]] = None, dll_name: str.type = None, framework_ver: str.type, labels: [str.type] = None, licenses: [str.type] = None, resources: {str.type: str.type} = None, srcs: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-25","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one compiler_flags contacts default_host_platform deps dll_name framework_ver labels licenses resources srcs within_view   "},{"title":"cxx : UNKNOWN​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#cxx--unknown","content":" "},{"title":"cxx_binary​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#cxx_binary","content":"def cxx_binary( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _cxx_hacks: str.type = None, _cxx_toolchain: default_only = None, allow_huge_dwp: bool.type = None, auto_link_groups: bool.type = None, binary_linker_flags: [str.type] = None, bolt_flags: [str.type] = None, bolt_gdb_index: [None, str.type] = None, bolt_profile: [None, str.type] = None, compiler_flags: [str.type] = None, contacts: [str.type] = None, cxx_runtime_type: [None, str.type] = None, default_host_platform: [None, str.type] = None, default_platform: [None, str.type] = None, defaults: {str.type: str.type} = None, deps: [str.type] = None, deps_query: [None, str.type] = None, devirt_enabled: bool.type = None, enable_distributed_thinlto: bool.type = None, executable_name: [None, str.type] = None, fat_lto: bool.type = None, focused_list_target: [None, str.type] = None, frameworks: [str.type] = None, header_namespace: [None, str.type] = None, headers: [{str.type: str.type}, [str.type]] = None, headers_as_raw_headers_mode: [None, str.type] = None, include_directories: [str.type] = None, labels: [str.type] = None, lang_compiler_flags: {str.type: [str.type]} = None, lang_platform_compiler_flags: {str.type: [(str.type, [str.type])]} = None, lang_platform_preprocessor_flags: {str.type: [(str.type, [str.type])]} = None, lang_preprocessor_flags: {str.type: [str.type]} = None, libraries: [str.type] = None, licenses: [str.type] = None, link_deps_query_whole: bool.type = None, link_group: [None, str.type] = None, link_group_map: [None, [str.type, [(str.type, [([None, str.type], str.type, [None, str.type], [None, str.type])])]]] = None, link_style: [None, str.type] = None, link_whole: default_only = None, linker_extra_outputs: [str.type] = None, linker_flags: [str.type] = None, platform_compiler_flags: [(str.type, [str.type])] = None, platform_deps: [(str.type, [str.type])] = None, platform_headers: [(str.type, [{str.type: str.type}, [str.type]])] = None, platform_linker_flags: [(str.type, [str.type])] = None, platform_preprocessor_flags: [(str.type, [str.type])] = None, platform_srcs: [(str.type, [[str.type, (str.type, [str.type])]])] = None, post_linker_flags: [str.type] = None, post_platform_linker_flags: [(str.type, [str.type])] = None, precompiled_header: [None, str.type] = None, prefer_stripped_objects: bool.type = None, prefix_header: [None, str.type] = None, preprocessor_flags: [str.type] = None, raw_headers: [str.type] = None, resources: [{str.type: [str.type, str.type]}, [[str.type, str.type]]] = None, srcs: [[str.type, (str.type, [str.type])]] = None, thin_lto: bool.type = None, version_universe: [None, str.type] = None, weak_framework_names: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-26","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _cxx_hacks _cxx_toolchain allow_huge_dwp auto_link_groups binary_linker_flags bolt_flags bolt_gdb_index bolt_profile compiler_flags contacts cxx_runtime_type default_host_platform default_platform defaults deps deps_query devirt_enabled enable_distributed_thinlto executable_name fat_lto focused_list_target frameworks header_namespace headers headers_as_raw_headers_mode include_directories labels lang_compiler_flags lang_platform_compiler_flags lang_platform_preprocessor_flags lang_preprocessor_flags libraries licenses link_deps_query_whole link_group link_group_map link_style link_whole linker_extra_outputs linker_flags platform_compiler_flags platform_deps platform_headers platform_linker_flags platform_preprocessor_flags platform_srcs post_linker_flags post_platform_linker_flags precompiled_header prefer_stripped_objects prefix_header preprocessor_flags raw_headers resources srcs thin_lto version_universe weak_framework_names within_view   "},{"title":"cxx_genrule​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#cxx_genrule","content":"def cxx_genrule( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _cxx_toolchain: default_only = None, _exec_os_type: default_only = None, _genrule_toolchain: default_only = None, bash: [None, str.type] = None, cacheable: [None, bool.type] = None, cmd: [None, str.type] = None, cmd_exe: [None, str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, default_outs: [None, [str.type]] = None, enable_sandbox: [None, bool.type] = None, environment_expansion_separator: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, need_android_tools: bool.type = None, out: [None, str.type] = None, outs: [None, {str.type: [str.type]}] = None, remote: [None, bool.type] = None, srcs: [{str.type: str.type}, [str.type]] = None, type: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-27","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _cxx_toolchain _exec_os_type _genrule_toolchain bash cacheable cmd cmd_exe contacts default_host_platform default_outs enable_sandbox environment_expansion_separator labels licenses need_android_tools out outs remote srcs type within_view   "},{"title":"cxx_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#cxx_library","content":"def cxx_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _cxx_hacks: default_only = None, _cxx_toolchain: default_only = None, _is_building_android_binary: default_only = None, _omnibus_environment: [None, str.type] = None, allow_huge_dwp: bool.type = None, auto_link_groups: bool.type = None, bridging_header: [None, str.type] = None, can_be_asset: [None, bool.type] = None, compiler_flags: [str.type] = None, contacts: [str.type] = None, cxx_runtime_type: [None, str.type] = None, default_host_platform: [None, str.type] = None, default_platform: [None, str.type] = None, defaults: {str.type: str.type} = None, deps: [str.type] = None, deps_query: [None, str.type] = None, devirt_enabled: bool.type = None, diagnostics: {str.type: str.type} = None, executable_name: [None, str.type] = None, exported_deps: [str.type] = None, exported_header_style: str.type = None, exported_headers: [{str.type: str.type}, [str.type]] = None, exported_lang_platform_preprocessor_flags: {str.type: [(str.type, [str.type])]} = None, exported_lang_preprocessor_flags: {str.type: [str.type]} = None, exported_linker_flags: [str.type] = None, exported_platform_deps: [(str.type, [str.type])] = None, exported_platform_headers: [(str.type, [{str.type: str.type}, [str.type]])] = None, exported_platform_linker_flags: [(str.type, [str.type])] = None, exported_platform_preprocessor_flags: [(str.type, [str.type])] = None, exported_post_linker_flags: [str.type] = None, exported_post_platform_linker_flags: [(str.type, [str.type])] = None, exported_preprocessor_flags: [str.type] = None, extra_xcode_files: [str.type] = None, extra_xcode_sources: [str.type] = None, fat_lto: bool.type = None, focused_list_target: [None, str.type] = None, force_emit_omnibus_shared_root: bool.type = None, force_static: [None, bool.type] = None, frameworks: [str.type] = None, header_namespace: [None, str.type] = None, headers: [{str.type: str.type}, [str.type]] = None, headers_as_raw_headers_mode: [None, str.type] = None, include_directories: [str.type] = None, include_in_android_merge_map_output: bool.type = None, labels: [str.type] = None, lang_compiler_flags: {str.type: [str.type]} = None, lang_platform_compiler_flags: {str.type: [(str.type, [str.type])]} = None, lang_platform_preprocessor_flags: {str.type: [(str.type, [str.type])]} = None, lang_preprocessor_flags: {str.type: [str.type]} = None, libraries: [str.type] = None, licenses: [str.type] = None, link_deps_query_whole: bool.type = None, link_group: [None, str.type] = None, link_group_map: [None, [str.type, [(str.type, [([None, str.type], str.type, [None, str.type], [None, str.type])])]]] = None, link_style: [None, str.type] = None, link_whole: [None, bool.type] = None, linker_extra_outputs: [str.type] = None, linker_flags: [str.type] = None, module_name: [None, str.type] = None, platform_compiler_flags: [(str.type, [str.type])] = None, platform_deps: [(str.type, [str.type])] = None, platform_headers: [(str.type, [{str.type: str.type}, [str.type]])] = None, platform_linker_flags: [(str.type, [str.type])] = None, platform_preprocessor_flags: [(str.type, [str.type])] = None, platform_srcs: [(str.type, [[str.type, (str.type, [str.type])]])] = None, post_linker_flags: [str.type] = None, post_platform_linker_flags: [(str.type, [str.type])] = None, precompiled_header: [None, str.type] = None, prefer_stripped_objects: bool.type = None, preferred_linkage: str.type = None, prefix_header: [None, str.type] = None, preprocessor_flags: [str.type] = None, public_include_directories: [str.type] = None, public_system_include_directories: [str.type] = None, raw_headers: [str.type] = None, reexport_all_header_dependencies: [None, bool.type] = None, resources: [{str.type: [str.type, str.type]}, [[str.type, str.type]]] = None, sdk_modules: [str.type] = None, soname: [None, str.type] = None, srcs: [[str.type, (str.type, [str.type])]] = None, static_library_basename: [None, str.type] = None, supported_platforms_regex: [None, str.type] = None, supports_merged_linking: [None, bool.type] = None, supports_python_dlopen: [None, bool.type] = None, thin_lto: bool.type = None, use_archive: [None, bool.type] = None, used_by_wrap_script: bool.type = None, uses_cxx_explicit_modules: bool.type = None, uses_explicit_modules: bool.type = None, version_universe: [None, str.type] = None, weak_framework_names: [str.type] = None, within_view: [None, [None, [str.type]]] = None, xcode_private_headers_symlinks: [None, bool.type] = None, xcode_public_headers_symlinks: [None, bool.type] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-28","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _cxx_hacks _cxx_toolchain _is_building_android_binary _omnibus_environment allow_huge_dwp auto_link_groups bridging_header can_be_asset compiler_flags contacts cxx_runtime_type default_host_platform default_platform defaults deps deps_query devirt_enabled diagnostics executable_name exported_deps exported_header_style exported_headers exported_lang_platform_preprocessor_flags exported_lang_preprocessor_flags exported_linker_flags exported_platform_deps exported_platform_headers exported_platform_linker_flags exported_platform_preprocessor_flags exported_post_linker_flags exported_post_platform_linker_flags exported_preprocessor_flags extra_xcode_files extra_xcode_sources fat_lto focused_list_target force_emit_omnibus_shared_root force_static frameworks header_namespace headers headers_as_raw_headers_mode include_directories include_in_android_merge_map_output labels lang_compiler_flags lang_platform_compiler_flags lang_platform_preprocessor_flags lang_preprocessor_flags libraries licenses link_deps_query_whole link_group link_group_map link_style link_whole linker_extra_outputs linker_flags module_name platform_compiler_flags platform_deps platform_headers platform_linker_flags platform_preprocessor_flags platform_srcs post_linker_flags post_platform_linker_flags precompiled_header prefer_stripped_objects preferred_linkage prefix_header preprocessor_flags public_include_directories public_system_include_directories raw_headers reexport_all_header_dependencies resources sdk_modules soname srcs static_library_basename supported_platforms_regex supports_merged_linking supports_python_dlopen thin_lto use_archive used_by_wrap_script uses_cxx_explicit_modules uses_explicit_modules version_universe weak_framework_names within_view xcode_private_headers_symlinks xcode_public_headers_symlinks   "},{"title":"cxx_lua_extension​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#cxx_lua_extension","content":"def cxx_lua_extension( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, base_module: [None, str.type] = None, compiler_flags: [str.type] = None, contacts: [str.type] = None, cxx_runtime_type: [None, str.type] = None, default_host_platform: [None, str.type] = None, default_platform: [None, str.type] = None, defaults: {str.type: str.type} = None, deps: [str.type] = None, executable_name: [None, str.type] = None, frameworks: [str.type] = None, header_namespace: [None, str.type] = None, headers: [{str.type: str.type}, [str.type]] = None, headers_as_raw_headers_mode: [None, str.type] = None, include_directories: [str.type] = None, labels: [str.type] = None, lang_compiler_flags: {str.type: [str.type]} = None, lang_platform_compiler_flags: {str.type: [(str.type, [str.type])]} = None, lang_platform_preprocessor_flags: {str.type: [(str.type, [str.type])]} = None, lang_preprocessor_flags: {str.type: [str.type]} = None, libraries: [str.type] = None, licenses: [str.type] = None, linker_extra_outputs: [str.type] = None, linker_flags: [str.type] = None, platform_compiler_flags: [(str.type, [str.type])] = None, platform_deps: [(str.type, [str.type])] = None, platform_headers: [(str.type, [{str.type: str.type}, [str.type]])] = None, platform_linker_flags: [(str.type, [str.type])] = None, platform_preprocessor_flags: [(str.type, [str.type])] = None, platform_srcs: [(str.type, [[str.type, (str.type, [str.type])]])] = None, post_linker_flags: [str.type] = None, post_platform_linker_flags: [(str.type, [str.type])] = None, precompiled_header: [None, str.type] = None, prefix_header: [None, str.type] = None, preprocessor_flags: [str.type] = None, raw_headers: [str.type] = None, srcs: [[str.type, (str.type, [str.type])]] = None, version_universe: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-29","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one base_module compiler_flags contacts cxx_runtime_type default_host_platform default_platform defaults deps executable_name frameworks header_namespace headers headers_as_raw_headers_mode include_directories labels lang_compiler_flags lang_platform_compiler_flags lang_platform_preprocessor_flags lang_preprocessor_flags libraries licenses linker_extra_outputs linker_flags platform_compiler_flags platform_deps platform_headers platform_linker_flags platform_preprocessor_flags platform_srcs post_linker_flags post_platform_linker_flags precompiled_header prefix_header preprocessor_flags raw_headers srcs version_universe within_view   "},{"title":"cxx_precompiled_header​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#cxx_precompiled_header","content":"def cxx_precompiled_header( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, src: str.type, version_universe: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-30","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts default_host_platform deps labels licenses src version_universe within_view   "},{"title":"cxx_python_extension​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#cxx_python_extension","content":"def cxx_python_extension( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _cxx_hacks: default_only = None, _cxx_toolchain: default_only = None, _omnibus_environment: [None, str.type] = None, _python_toolchain: default_only = None, allow_embedding: bool.type = None, allow_huge_dwp: bool.type = None, allow_suffixing: bool.type = None, auto_link_groups: bool.type = None, base_module: [None, str.type] = None, bridging_header: default_only = None, can_be_asset: default_only = None, compiler_flags: [str.type] = None, contacts: [str.type] = None, cxx_runtime_type: [None, str.type] = None, default_host_platform: [None, str.type] = None, default_platform: [None, str.type] = None, defaults: {str.type: str.type} = None, deps: [str.type] = None, devirt_enabled: default_only = None, diagnostics: default_only = None, executable_name: [None, str.type] = None, exported_deps: default_only = None, exported_header_style: default_only = None, exported_headers: default_only = None, exported_lang_platform_preprocessor_flags: default_only = None, exported_lang_preprocessor_flags: default_only = None, exported_linker_flags: default_only = None, exported_platform_deps: default_only = None, exported_platform_headers: default_only = None, exported_platform_linker_flags: default_only = None, exported_platform_preprocessor_flags: default_only = None, exported_post_linker_flags: default_only = None, exported_post_platform_linker_flags: default_only = None, exported_preprocessor_flags: default_only = None, extra_xcode_files: default_only = None, extra_xcode_sources: default_only = None, fat_lto: default_only = None, focused_list_target: default_only = None, force_static: default_only = None, frameworks: [str.type] = None, header_namespace: [None, str.type] = None, headers: [{str.type: str.type}, [str.type]] = None, headers_as_raw_headers_mode: [None, str.type] = None, include_directories: [str.type] = None, include_in_android_merge_map_output: default_only = None, labels: [str.type] = None, lang_compiler_flags: {str.type: [str.type]} = None, lang_platform_compiler_flags: {str.type: [(str.type, [str.type])]} = None, lang_platform_preprocessor_flags: {str.type: [(str.type, [str.type])]} = None, lang_preprocessor_flags: {str.type: [str.type]} = None, libraries: [str.type] = None, licenses: [str.type] = None, link_group: default_only = None, link_group_map: default_only = None, link_style: [None, str.type] = None, link_whole: default_only = None, linker_extra_outputs: [str.type] = None, linker_flags: [str.type] = None, module_name: [None, str.type] = None, platform_compiler_flags: [(str.type, [str.type])] = None, platform_deps: [(str.type, [str.type])] = None, platform_headers: [(str.type, [{str.type: str.type}, [str.type]])] = None, platform_linker_flags: [(str.type, [str.type])] = None, platform_preprocessor_flags: [(str.type, [str.type])] = None, platform_srcs: [(str.type, [[str.type, (str.type, [str.type])]])] = None, post_linker_flags: [str.type] = None, post_platform_linker_flags: [(str.type, [str.type])] = None, precompiled_header: [None, str.type] = None, preferred_linkage: default_only = None, prefix_header: [None, str.type] = None, preprocessor_flags: [str.type] = None, public_include_directories: default_only = None, public_system_include_directories: default_only = None, raw_headers: [str.type] = None, reexport_all_header_dependencies: default_only = None, resources: default_only = None, sdk_modules: default_only = None, soname: default_only = None, srcs: [[str.type, (str.type, [str.type])]] = None, static_library_basename: default_only = None, suffix_all: bool.type = None, supported_platforms_regex: default_only = None, supports_merged_linking: default_only = None, thin_lto: default_only = None, type_stub: [None, str.type] = None, use_archive: default_only = None, used_by_wrap_script: default_only = None, uses_cxx_explicit_modules: default_only = None, uses_explicit_modules: default_only = None, version_universe: [None, str.type] = None, weak_framework_names: default_only = None, within_view: [None, [None, [str.type]]] = None, xcode_private_headers_symlinks: default_only = None, xcode_public_headers_symlinks: default_only = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-31","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _cxx_hacks _cxx_toolchain _omnibus_environment _python_toolchain allow_embedding allow_huge_dwp allow_suffixing auto_link_groups base_module bridging_header can_be_asset compiler_flags contacts cxx_runtime_type default_host_platform default_platform defaults deps devirt_enabled diagnostics executable_name exported_deps exported_header_style exported_headers exported_lang_platform_preprocessor_flags exported_lang_preprocessor_flags exported_linker_flags exported_platform_deps exported_platform_headers exported_platform_linker_flags exported_platform_preprocessor_flags exported_post_linker_flags exported_post_platform_linker_flags exported_preprocessor_flags extra_xcode_files extra_xcode_sources fat_lto focused_list_target force_static frameworks header_namespace headers headers_as_raw_headers_mode include_directories include_in_android_merge_map_output labels lang_compiler_flags lang_platform_compiler_flags lang_platform_preprocessor_flags lang_preprocessor_flags libraries licenses link_group link_group_map link_style link_whole linker_extra_outputs linker_flags module_name platform_compiler_flags platform_deps platform_headers platform_linker_flags platform_preprocessor_flags platform_srcs post_linker_flags post_platform_linker_flags precompiled_header preferred_linkage prefix_header preprocessor_flags public_include_directories public_system_include_directories raw_headers reexport_all_header_dependencies resources sdk_modules soname srcs static_library_basename suffix_all supported_platforms_regex supports_merged_linking thin_lto type_stub use_archive used_by_wrap_script uses_cxx_explicit_modules uses_explicit_modules version_universe weak_framework_names within_view xcode_private_headers_symlinks xcode_public_headers_symlinks   "},{"title":"cxx_test​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#cxx_test","content":"def cxx_test( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _cxx_hacks: str.type = None, _cxx_toolchain: default_only = None, _inject_test_env: default_only = None, additional_coverage_targets: [str.type] = None, allow_huge_dwp: bool.type = None, args: [str.type] = None, auto_link_groups: bool.type = None, binary_linker_flags: [str.type] = None, bolt_flags: [str.type] = None, bolt_gdb_index: [None, str.type] = None, bolt_profile: [None, str.type] = None, compiler_flags: [str.type] = None, contacts: [str.type] = None, cxx_runtime_type: [None, str.type] = None, default_host_platform: [None, str.type] = None, default_platform: [None, str.type] = None, defaults: {str.type: str.type} = None, deps: [str.type] = None, deps_query: [None, str.type] = None, devirt_enabled: bool.type = None, enable_distributed_thinlto: bool.type = None, env: {str.type: str.type} = None, executable_name: [None, str.type] = None, fat_lto: bool.type = None, focused_list_target: [None, str.type] = None, framework: [None, str.type] = None, frameworks: [str.type] = None, header_namespace: [None, str.type] = None, headers: [{str.type: str.type}, [str.type]] = None, headers_as_raw_headers_mode: [None, str.type] = None, include_directories: [str.type] = None, labels: [str.type] = None, lang_compiler_flags: {str.type: [str.type]} = None, lang_platform_compiler_flags: {str.type: [(str.type, [str.type])]} = None, lang_platform_preprocessor_flags: {str.type: [(str.type, [str.type])]} = None, lang_preprocessor_flags: {str.type: [str.type]} = None, libraries: [str.type] = None, licenses: [str.type] = None, link_deps_query_whole: bool.type = None, link_group: [None, str.type] = None, link_group_map: [None, [str.type, [(str.type, [([None, str.type], str.type, [None, str.type], [None, str.type])])]]] = None, link_style: [None, str.type] = None, link_whole: default_only = None, linker_extra_outputs: [str.type] = None, linker_flags: [str.type] = None, platform_compiler_flags: [(str.type, [str.type])] = None, platform_deps: [(str.type, [str.type])] = None, platform_headers: [(str.type, [{str.type: str.type}, [str.type]])] = None, platform_linker_flags: [(str.type, [str.type])] = None, platform_preprocessor_flags: [(str.type, [str.type])] = None, platform_srcs: [(str.type, [[str.type, (str.type, [str.type])]])] = None, post_linker_flags: [str.type] = None, post_platform_linker_flags: [(str.type, [str.type])] = None, precompiled_header: [None, str.type] = None, prefer_stripped_objects: bool.type = None, prefix_header: [None, str.type] = None, preprocessor_flags: [str.type] = None, raw_headers: [str.type] = None, remote_execution: [None, {str.type: str.type}] = None, resources: [{str.type: [str.type, str.type]}, [[str.type, str.type]]] = None, run_test_separately: [None, bool.type] = None, srcs: [[str.type, (str.type, [str.type])]] = None, test_rule_timeout_ms: [None, int.type] = None, thin_lto: bool.type = None, use_default_test_main: [None, bool.type] = None, version_universe: [None, str.type] = None, weak_framework_names: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-32","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _cxx_hacks _cxx_toolchain _inject_test_env additional_coverage_targets allow_huge_dwp args auto_link_groups binary_linker_flags bolt_flags bolt_gdb_index bolt_profile compiler_flags contacts cxx_runtime_type default_host_platform default_platform defaults deps deps_query devirt_enabled enable_distributed_thinlto env executable_name fat_lto focused_list_target framework frameworks header_namespace headers headers_as_raw_headers_mode include_directories labels lang_compiler_flags lang_platform_compiler_flags lang_platform_preprocessor_flags lang_preprocessor_flags libraries licenses link_deps_query_whole link_group link_group_map link_style link_whole linker_extra_outputs linker_flags platform_compiler_flags platform_deps platform_headers platform_linker_flags platform_preprocessor_flags platform_srcs post_linker_flags post_platform_linker_flags precompiled_header prefer_stripped_objects prefix_header preprocessor_flags raw_headers remote_execution resources run_test_separately srcs test_rule_timeout_ms thin_lto use_default_test_main version_universe weak_framework_names within_view   "},{"title":"cxx_toolchain​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#cxx_toolchain","content":"def cxx_toolchain(inherit_target_platform: UNKNOWN = False, **kwargs: UNKNOWN) -&gt; UNKNOWN   "},{"title":"d_binary​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#d_binary","content":"def d_binary( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, linker_flags: [str.type] = None, srcs: [{str.type: str.type}, [str.type]] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-33","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts default_host_platform deps labels licenses linker_flags srcs within_view   "},{"title":"d_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#d_library","content":"def d_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, linker_flags: [str.type] = None, srcs: [{str.type: str.type}, [str.type]] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-34","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts default_host_platform deps labels licenses linker_flags srcs within_view   "},{"title":"d_test​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#d_test","content":"def d_test( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, linker_flags: [str.type] = None, srcs: [{str.type: str.type}, [str.type]] = None, test_rule_timeout_ms: [None, int.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-35","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts default_host_platform deps labels licenses linker_flags srcs test_rule_timeout_ms within_view   "},{"title":"debug​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#debug","content":"def debug(val: &quot;&quot;) -&gt; str.type  Print the value with full debug formatting. The result may not be stable over time, mostly intended for debugging purposes.  "},{"title":"enum​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#enum","content":"def enum(*args: UNKNOWN) -&gt; &quot;&quot;   "},{"title":"erlang_app​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#erlang_app","content":"def erlang_app( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _toolchain: str.type = None, app_src: [None, str.type] = None, applications: [str.type] = None, build_edoc_chunks: bool.type = None, contacts: [str.type] = None, erl_opts: [None, [str.type]] = None, extra_includes: [str.type] = None, included_applications: [str.type] = None, includes: [str.type] = None, labels: [str.type] = None, mod: [None, (str.type, [str.type])] = None, resources: [str.type] = None, shell_configs: [str.type] = None, shell_libs: [str.type] = None, srcs: [str.type] = None, use_global_parse_transforms: bool.type = None, version: str.type = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-36","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _toolchain app_src applications build_edoc_chunks contacts erl_opts extra_includes included_applications includes labels mod resources shell_configs shell_libs srcs use_global_parse_transforms version   "},{"title":"erlang_app_includes​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#erlang_app_includes","content":"def erlang_app_includes( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _toolchain: str.type = None, application_name: str.type, contacts: [str.type] = None, includes: [str.type] = None, labels: [str.type] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-37","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _toolchain application_name contacts includes labels   "},{"title":"erlang_application​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#erlang_application","content":"def erlang_application(**kwargs: UNKNOWN) -&gt; UNKNOWN   "},{"title":"erlang_escript​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#erlang_escript","content":"def erlang_escript( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _toolchain: str.type = None, contacts: [str.type] = None, deps: [str.type], emu_args: [str.type] = None, include_priv: bool.type = None, labels: [str.type] = None, main_module: [None, str.type] = None, resources: [str.type] = None, script_name: [None, str.type] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-38","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _toolchain contacts deps emu_args include_priv labels main_module resources script_name   "},{"title":"erlang_otp_binaries​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#erlang_otp_binaries","content":"def erlang_otp_binaries( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, erl: str.type, erlc: str.type, escript: str.type, labels: [str.type] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-39","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts erl erlc escript labels   "},{"title":"erlang_rebar3_interface​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#erlang_rebar3_interface","content":"def erlang_rebar3_interface( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, deps: [str.type] = None, labels: [str.type] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-40","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts deps labels   "},{"title":"erlang_release​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#erlang_release","content":"def erlang_release( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _toolchain: str.type = None, applications: [[str.type, (str.type, str.type)]], contacts: [str.type] = None, include_erts: bool.type = None, labels: [str.type] = None, multi_toolchain: [None, [str.type]] = None, overlays: {str.type: [str.type]} = None, release_name: [None, str.type] = None, version: str.type = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-41","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _toolchain applications contacts include_erts labels multi_toolchain overlays release_name version   "},{"title":"erlang_test​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#erlang_test","content":"def erlang_test( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _cli_lib: str.type = None, _ct_opts: str.type = None, _providers: str.type, _test_binary: str.type = None, _test_binary_lib: str.type = None, _toolchain: str.type = None, _trampoline: [None, str.type] = None, config_files: [str.type] = None, contacts: [str.type] = None, deps: [str.type] = None, env: {str.type: str.type} = None, extra_ct_hooks: [str.type] = None, labels: [str.type] = None, property_tests: [str.type] = None, resources: [str.type] = None, shell_configs: [str.type] = None, shell_libs: [str.type] = None, suite: str.type ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-42","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _cli_lib _ct_opts _providers _test_binary _test_binary_lib _toolchain _trampoline config_files contacts deps env extra_ct_hooks labels property_tests resources shell_configs shell_libs suite   "},{"title":"erlang_tests​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#erlang_tests","content":"def erlang_tests(**kwargs: UNKNOWN) -&gt; UNKNOWN   "},{"title":"experimental_regex​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#experimental_regex","content":"def experimental_regex(regex: str.type) -&gt; &quot;regex&quot;  Creates a regex which can be used for matching  "},{"title":"export_file​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#export_file","content":"def export_file(name: UNKNOWN, src: UNKNOWN = None, **kwargs: UNKNOWN) -&gt; UNKNOWN   "},{"title":"external_test_runner​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#external_test_runner","content":"def external_test_runner( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, binary: str.type, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-43","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one binary contacts default_host_platform labels licenses within_view   "},{"title":"extract_archive​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#extract_archive","content":"def extract_archive( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contents_archive: str.type, directory_name: [None, str.type] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-44","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contents_archive directory_name   "},{"title":"field​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#field","content":"def field(typ: &quot;&quot;, default: [None, &quot;&quot;] = None) -&gt; &quot;field&quot;  Creates a field record. "},{"title":"Details​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#details","content":"Examples: rec_type = record(host=field(str.type), port=field(int.type), mask=field(int.type, default=255)) rec = rec_type(host=&quot;localhost&quot;, port=80) rec.port == 80 rec.mask == 255   "},{"title":"filegroup​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#filegroup","content":"def filegroup( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, copy: bool.type = None, default_host_platform: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, srcs: [{str.type: str.type}, [str.type]] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-45","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts copy default_host_platform labels licenses srcs within_view   "},{"title":"filter​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#filter","content":"def filter(func: &quot;&quot;, seq: iter(&quot;&quot;)) -&gt; [&quot;&quot;]   "},{"title":"gen_aidl​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#gen_aidl","content":"def gen_aidl( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _android_toolchain: str.type = None, _java_toolchain: str.type = None, aidl: str.type, aidl_srcs: [str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, import_path: str.type = None, import_paths: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-46","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _android_toolchain _java_toolchain aidl aidl_srcs contacts default_host_platform deps import_path import_paths labels licenses within_view   "},{"title":"genrule​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#genrule","content":"def genrule( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _exec_os_type: default_only = None, _genrule_toolchain: default_only = None, bash: [None, str.type] = None, cacheable: [None, bool.type] = None, cmd: [None, str.type] = None, cmd_exe: [None, str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, default_outs: [None, [str.type]] = None, enable_sandbox: [None, bool.type] = None, env: {str.type: str.type} = None, environment_expansion_separator: [None, str.type] = None, executable: [None, bool.type] = None, labels: [str.type] = None, licenses: [str.type] = None, need_android_tools: bool.type = None, out: [None, str.type] = None, outs: [None, {str.type: [str.type]}] = None, remote: [None, bool.type] = None, srcs: [{str.type: str.type}, [str.type]] = None, type: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-47","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _exec_os_type _genrule_toolchain bash cacheable cmd cmd_exe contacts default_host_platform default_outs enable_sandbox env environment_expansion_separator executable labels licenses need_android_tools out outs remote srcs type within_view   "},{"title":"get_base_path​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#get_base_path","content":"def get_base_path() -&gt; str.type   "},{"title":"get_cell_name​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#get_cell_name","content":"def get_cell_name() -&gt; str.type   "},{"title":"glob​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#glob","content":"def glob(include: [str.type], *, exclude: [None, [str.type]] = None) -&gt; &quot;&quot;   "},{"title":"go_binary​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#go_binary","content":"def go_binary( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _go_toolchain: default_only = None, assembler_flags: [str.type] = None, compiler_flags: [str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, embedcfg: [None, str.type] = None, external_linker_flags: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, link_mode: [None, str.type] = None, link_style: [None, str.type] = None, linker_flags: [str.type] = None, platform: [None, str.type] = None, platform_external_linker_flags: [(str.type, [str.type])] = None, resources: [[str.type, str.type]] = None, srcs: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-48","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _go_toolchain assembler_flags compiler_flags contacts default_host_platform deps embedcfg external_linker_flags labels licenses link_mode link_style linker_flags platform platform_external_linker_flags resources srcs within_view   "},{"title":"go_exported_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#go_exported_library","content":"def go_exported_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, assembler_flags: [str.type] = None, build_mode: str.type, compiler_flags: [str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, external_linker_flags: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, link_mode: [None, str.type] = None, link_style: [None, str.type] = None, linker_flags: [str.type] = None, platform: [None, str.type] = None, platform_external_linker_flags: [(str.type, [str.type])] = None, resources: [str.type] = None, srcs: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-49","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one assembler_flags build_mode compiler_flags contacts default_host_platform deps external_linker_flags labels licenses link_mode link_style linker_flags platform platform_external_linker_flags resources srcs within_view   "},{"title":"go_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#go_library","content":"def go_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _go_toolchain: default_only = None, assembler_flags: [str.type] = None, compiler_flags: [str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, embedcfg: [None, str.type] = None, exported_deps: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, package_name: [None, str.type] = None, srcs: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-50","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _go_toolchain assembler_flags compiler_flags contacts default_host_platform deps embedcfg exported_deps labels licenses package_name srcs within_view   "},{"title":"go_test​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#go_test","content":"def go_test( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _go_toolchain: default_only = None, _inject_test_env: default_only = None, _testmaingen: default_only = None, assembler_flags: [str.type] = None, compiler_flags: [str.type] = None, contacts: [str.type] = None, coverage_mode: [None, str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, embedcfg: [None, str.type] = None, env: {str.type: str.type} = None, external_linker_flags: [str.type] = None, labels: [str.type] = None, library: [None, str.type] = None, licenses: [str.type] = None, link_mode: [None, str.type] = None, link_style: [None, str.type] = None, linker_flags: [str.type] = None, package_name: [None, str.type] = None, platform: [None, str.type] = None, resources: [str.type] = None, run_test_separately: bool.type = None, runner: [None, str.type] = None, specs: [None, str.type] = None, srcs: [str.type] = None, test_rule_timeout_ms: [None, int.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-51","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _go_toolchain _inject_test_env _testmaingen assembler_flags compiler_flags contacts coverage_mode default_host_platform deps embedcfg env external_linker_flags labels library licenses link_mode link_style linker_flags package_name platform resources run_test_separately runner specs srcs test_rule_timeout_ms within_view   "},{"title":"go_test_runner​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#go_test_runner","content":"def go_test_runner( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, test_runner_generator: str.type, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-52","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts default_host_platform labels licenses test_runner_generator within_view   "},{"title":"groovy_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#groovy_library","content":"def groovy_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, annotation_processor_deps: [str.type] = None, annotation_processor_params: [str.type] = None, annotation_processors: [str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, exported_deps: [str.type] = None, exported_provided_deps: [str.type] = None, extra_arguments: [str.type] = None, extra_groovyc_arguments: [str.type] = None, java_version: [None, str.type] = None, javac: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, manifest_file: [None, str.type] = None, maven_coords: [None, str.type] = None, never_mark_as_unused_dependency: [None, bool.type] = None, on_unused_dependencies: [None, str.type] = None, plugins: [str.type] = None, proguard_config: [None, str.type] = None, provided_deps: [str.type] = None, remove_classes: [str.type] = None, required_for_source_only_abi: bool.type = None, resources: [str.type] = None, resources_root: [None, str.type] = None, runtime_deps: [str.type] = None, source: [None, str.type] = None, source_abi_verification_mode: [None, str.type] = None, source_only_abi_deps: [str.type] = None, srcs: [str.type] = None, target: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-53","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one annotation_processor_deps annotation_processor_params annotation_processors contacts default_host_platform deps exported_deps exported_provided_deps extra_arguments extra_groovyc_arguments java_version javac labels licenses manifest_file maven_coords never_mark_as_unused_dependency on_unused_dependencies plugins proguard_config provided_deps remove_classes required_for_source_only_abi resources resources_root runtime_deps source source_abi_verification_mode source_only_abi_deps srcs target within_view   "},{"title":"groovy_test​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#groovy_test","content":"def groovy_test( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, annotation_processor_deps: [str.type] = None, annotation_processor_params: [str.type] = None, annotation_processors: [str.type] = None, contacts: [str.type] = None, cxx_library_whitelist: [str.type] = None, default_cxx_platform: [None, str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, deps_query: [None, str.type] = None, env: {str.type: str.type} = None, exported_deps: [str.type] = None, exported_provided_deps: [str.type] = None, extra_arguments: [str.type] = None, extra_groovyc_arguments: [str.type] = None, fork_mode: str.type = None, java_version: [None, str.type] = None, javac: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, manifest_file: [None, str.type] = None, maven_coords: [None, str.type] = None, never_mark_as_unused_dependency: [None, bool.type] = None, on_unused_dependencies: [None, str.type] = None, plugins: [str.type] = None, proguard_config: [None, str.type] = None, provided_deps: [str.type] = None, remove_classes: [str.type] = None, required_for_source_only_abi: bool.type = None, resources: [str.type] = None, resources_root: [None, str.type] = None, run_test_separately: bool.type = None, runtime_deps: [str.type] = None, source: [None, str.type] = None, source_abi_verification_mode: [None, str.type] = None, source_only_abi_deps: [str.type] = None, srcs: [str.type] = None, std_err_log_level: [None, [str.type, int.type]] = None, std_out_log_level: [None, [str.type, int.type]] = None, target: [None, str.type] = None, test_case_timeout_ms: [None, int.type] = None, test_rule_timeout_ms: [None, int.type] = None, test_type: [None, str.type] = None, use_cxx_libraries: [None, bool.type] = None, use_dependency_order_classpath: [None, bool.type] = None, vm_args: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-54","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one annotation_processor_deps annotation_processor_params annotation_processors contacts cxx_library_whitelist default_cxx_platform default_host_platform deps deps_query env exported_deps exported_provided_deps extra_arguments extra_groovyc_arguments fork_mode java_version javac labels licenses manifest_file maven_coords never_mark_as_unused_dependency on_unused_dependencies plugins proguard_config provided_deps remove_classes required_for_source_only_abi resources resources_root run_test_separately runtime_deps source source_abi_verification_mode source_only_abi_deps srcs std_err_log_level std_out_log_level target test_case_timeout_ms test_rule_timeout_ms test_type use_cxx_libraries use_dependency_order_classpath vm_args within_view   "},{"title":"gwt_binary​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#gwt_binary","content":"def gwt_binary( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, draft_compile: [None, bool.type] = None, experimental_args: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, local_workers: [None, int.type] = None, module_deps: [str.type] = None, modules: [str.type] = None, optimize: [None, int.type] = None, strict: [None, bool.type] = None, style: [None, str.type] = None, vm_args: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-55","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts default_host_platform deps draft_compile experimental_args labels licenses local_workers module_deps modules optimize strict style vm_args within_view   "},{"title":"halide_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#halide_library","content":"def halide_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, compiler_deps: [str.type] = None, compiler_flags: [str.type] = None, compiler_invocation_flags: [str.type] = None, configs: {str.type: {str.type: str.type}} = None, contacts: [str.type] = None, cxx_runtime_type: [None, str.type] = None, default_host_platform: [None, str.type] = None, default_platform: [None, str.type] = None, defaults: {str.type: str.type} = None, deps: [str.type] = None, deps_query: [None, str.type] = None, devirt_enabled: bool.type = None, executable_name: [None, str.type] = None, fat_lto: bool.type = None, focused_list_target: [None, str.type] = None, frameworks: [str.type] = None, function_name: [None, str.type] = None, header_namespace: [None, str.type] = None, headers: [{str.type: str.type}, [str.type]] = None, headers_as_raw_headers_mode: [None, str.type] = None, include_directories: [str.type] = None, labels: [str.type] = None, lang_compiler_flags: {str.type: [str.type]} = None, lang_platform_compiler_flags: {str.type: [(str.type, [str.type])]} = None, lang_platform_preprocessor_flags: {str.type: [(str.type, [str.type])]} = None, lang_preprocessor_flags: {str.type: [str.type]} = None, libraries: [str.type] = None, licenses: [str.type] = None, link_deps_query_whole: bool.type = None, link_group: [None, str.type] = None, link_group_map: [None, [(str.type, [(str.type, str.type, [None, str.type])])]] = None, link_style: [None, str.type] = None, linker_extra_outputs: [str.type] = None, linker_flags: [str.type] = None, platform_compiler_flags: [(str.type, [str.type])] = None, platform_deps: [(str.type, [str.type])] = None, platform_headers: [(str.type, [{str.type: str.type}, [str.type]])] = None, platform_linker_flags: [(str.type, [str.type])] = None, platform_preprocessor_flags: [(str.type, [str.type])] = None, platform_srcs: [(str.type, [[str.type, (str.type, [str.type])]])] = None, post_linker_flags: [str.type] = None, post_platform_linker_flags: [(str.type, [str.type])] = None, precompiled_header: [None, str.type] = None, prefer_stripped_objects: bool.type = None, prefix_header: [None, str.type] = None, preprocessor_flags: [str.type] = None, raw_headers: [str.type] = None, srcs: [[str.type, (str.type, [str.type])]] = None, supported_platforms_regex: [None, str.type] = None, thin_lto: bool.type = None, version_universe: [None, str.type] = None, weak_framework_names: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-56","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one compiler_deps compiler_flags compiler_invocation_flags configs contacts cxx_runtime_type default_host_platform default_platform defaults deps deps_query devirt_enabled executable_name fat_lto focused_list_target frameworks function_name header_namespace headers headers_as_raw_headers_mode include_directories labels lang_compiler_flags lang_platform_compiler_flags lang_platform_preprocessor_flags lang_preprocessor_flags libraries licenses link_deps_query_whole link_group link_group_map link_style linker_extra_outputs linker_flags platform_compiler_flags platform_deps platform_headers platform_linker_flags platform_preprocessor_flags platform_srcs post_linker_flags post_platform_linker_flags precompiled_header prefer_stripped_objects prefix_header preprocessor_flags raw_headers srcs supported_platforms_regex thin_lto version_universe weak_framework_names within_view   "},{"title":"haskell_binary​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#haskell_binary","content":"def haskell_binary( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _cxx_toolchain: default_only = None, _haskell_toolchain: default_only = None, compiler_flags: [str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, deps_query: [None, str.type] = None, enable_profiling: bool.type = None, ghci_platform_preload_deps: [(str.type, [str.type])] = None, ghci_preload_deps: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, link_deps_query_whole: bool.type = None, link_style: [None, str.type] = None, linker_flags: [str.type] = None, main: [None, str.type] = None, platform: [None, str.type] = None, platform_deps: [(str.type, [str.type])] = None, platform_linker_flags: [(str.type, [str.type])] = None, srcs: [{str.type: str.type}, [str.type]] = None, template_deps: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-57","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _cxx_toolchain _haskell_toolchain compiler_flags contacts default_host_platform deps deps_query enable_profiling ghci_platform_preload_deps ghci_preload_deps labels licenses link_deps_query_whole link_style linker_flags main platform platform_deps platform_linker_flags srcs template_deps within_view   "},{"title":"haskell_ghci​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#haskell_ghci","content":"def haskell_ghci( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, compiler_flags: [str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, deps_query: [None, str.type] = None, enable_profiling: bool.type = None, extra_script_templates: [str.type] = None, ghci_bin_dep: [None, str.type] = None, ghci_init: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, linker_flags: [str.type] = None, platform: [None, str.type] = None, platform_deps: [(str.type, [str.type])] = None, platform_preload_deps: [(str.type, [str.type])] = None, preload_deps: [str.type] = None, srcs: [{str.type: str.type}, [str.type]] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-58","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one compiler_flags contacts default_host_platform deps deps_query enable_profiling extra_script_templates ghci_bin_dep ghci_init labels licenses linker_flags platform platform_deps platform_preload_deps preload_deps srcs within_view   "},{"title":"haskell_haddock​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#haskell_haddock","content":"def haskell_haddock( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, deps_query: [None, str.type] = None, haddock_flags: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, platform: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-59","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts default_host_platform deps deps_query haddock_flags labels licenses platform within_view   "},{"title":"haskell_ide​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#haskell_ide","content":"def haskell_ide( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _haskell_toolchain: default_only = None, compiler_flags: [str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, deps_query: [None, str.type] = None, extra_script_templates: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, link_style: str.type, linker_flags: [str.type] = None, platform: [None, str.type] = None, platform_deps: [(str.type, [str.type])] = None, srcs: [{str.type: str.type}, [str.type]] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-60","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _haskell_toolchain compiler_flags contacts default_host_platform deps deps_query extra_script_templates labels licenses link_style linker_flags platform platform_deps srcs within_view   "},{"title":"haskell_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#haskell_library","content":"def haskell_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _cxx_toolchain: default_only = None, _haskell_toolchain: default_only = None, compiler_flags: [str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, enable_profiling: bool.type = None, ghci_platform_preload_deps: [(str.type, [str.type])] = None, ghci_preload_deps: [str.type] = None, haddock_flags: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, link_whole: bool.type = None, linker_flags: [str.type] = None, platform: [None, str.type] = None, platform_deps: [(str.type, [str.type])] = None, platform_linker_flags: [(str.type, [str.type])] = None, preferred_linkage: str.type = None, srcs: [{str.type: str.type}, [str.type]] = None, template_deps: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-61","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _cxx_toolchain _haskell_toolchain compiler_flags contacts default_host_platform deps enable_profiling ghci_platform_preload_deps ghci_preload_deps haddock_flags labels licenses link_whole linker_flags platform platform_deps platform_linker_flags preferred_linkage srcs template_deps within_view   "},{"title":"haskell_prebuilt_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#haskell_prebuilt_library","content":"def haskell_prebuilt_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, cxx_header_dirs: [str.type] = None, db: str.type, default_host_platform: [None, str.type] = None, deps: [str.type] = None, enable_profiling: bool.type = None, exported_compiler_flags: [str.type] = None, exported_linker_flags: [str.type] = None, id: str.type = None, import_dirs: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, pic_profiled_static_libs: [str.type] = None, pic_static_libs: [str.type] = None, profiled_static_libs: [str.type] = None, shared_libs: {str.type: str.type} = None, static_libs: [str.type] = None, version: str.type = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-62","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts cxx_header_dirs db default_host_platform deps enable_profiling exported_compiler_flags exported_linker_flags id import_dirs labels licenses pic_profiled_static_libs pic_static_libs profiled_static_libs shared_libs static_libs version within_view   "},{"title":"host_info​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#host_info","content":"def host_info() -&gt; &quot;&quot;   "},{"title":"http_archive​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#http_archive","content":"def http_archive( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _create_exclusion_list: default_only = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, excludes: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, out: [None, str.type] = None, sha1: [None, str.type] = None, sha256: [None, str.type] = None, strip_prefix: [None, str.type] = None, type: [None, str.type] = None, urls: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-63","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _create_exclusion_list contacts default_host_platform excludes labels licenses out sha1 sha256 strip_prefix type urls within_view   "},{"title":"http_file​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#http_file","content":"def http_file( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, executable: [None, bool.type] = None, labels: [str.type] = None, licenses: [str.type] = None, out: [None, str.type] = None, sha1: [None, str.type] = None, sha256: [None, str.type] = None, urls: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-64","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts default_host_platform executable labels licenses out sha1 sha256 urls within_view   "},{"title":"implicit_package_symbol​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#implicit_package_symbol","content":"def implicit_package_symbol(name: str.type, default: [None, &quot;&quot;] = None) -&gt; &quot;&quot;   "},{"title":"jar_genrule​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#jar_genrule","content":"def jar_genrule( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _genrule_toolchain: default_only = None, _java_toolchain: str.type = None, bash: [None, str.type] = None, cacheable: [None, bool.type] = None, cmd: [None, str.type] = None, cmd_exe: [None, str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, enable_sandbox: [None, bool.type] = None, environment_expansion_separator: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, need_android_tools: bool.type = None, remote: [None, bool.type] = None, srcs: [{str.type: str.type}, [str.type]] = None, type: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-65","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _genrule_toolchain _java_toolchain bash cacheable cmd cmd_exe contacts default_host_platform enable_sandbox environment_expansion_separator labels licenses need_android_tools remote srcs type within_view   "},{"title":"java_annotation_processor​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#java_annotation_processor","content":"def java_annotation_processor( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _build_only_native_code: default_only = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, does_not_affect_abi: bool.type = None, isolate_class_loader: bool.type = None, labels: [str.type] = None, licenses: [str.type] = None, processor_class: str.type = None, supports_abi_generation_from_source: bool.type = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-66","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _build_only_native_code contacts default_host_platform deps does_not_affect_abi isolate_class_loader labels licenses processor_class supports_abi_generation_from_source within_view   "},{"title":"java_binary​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#java_binary","content":"def java_binary( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _build_only_native_code: default_only = None, _java_toolchain: str.type = None, blacklist: [str.type] = None, contacts: [str.type] = None, default_cxx_platform: [None, str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, generate_wrapper: bool.type = None, java_args_for_run_info: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, main_class: [None, str.type] = None, manifest_file: [None, str.type] = None, meta_inf_directory: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-67","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _build_only_native_code _java_toolchain blacklist contacts default_cxx_platform default_host_platform deps generate_wrapper java_args_for_run_info labels licenses main_class manifest_file meta_inf_directory within_view   "},{"title":"java_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#java_library","content":"def java_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _build_only_native_code: default_only = None, _dex_min_sdk_version: [None, int.type] = None, _dex_toolchain: [None, str.type] = None, _is_building_android_binary: default_only = None, _java_toolchain: str.type = None, abi_generation_mode: [None, str.type] = None, annotation_processor_deps: [str.type] = None, annotation_processor_params: [str.type] = None, annotation_processors: [str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, exported_deps: [str.type] = None, exported_provided_deps: [str.type] = None, extra_arguments: [str.type] = None, java_version: [None, str.type] = None, javac: [None, [str.type, str.type]] = None, labels: [str.type] = None, licenses: [str.type] = None, manifest_file: [None, str.type] = None, maven_coords: [None, str.type] = None, never_mark_as_unused_dependency: [None, bool.type] = None, on_unused_dependencies: [None, str.type] = None, plugins: [str.type] = None, proguard_config: [None, str.type] = None, provided_deps: [str.type] = None, remove_classes: [str.type] = None, required_for_source_only_abi: bool.type = None, resources: [str.type] = None, resources_root: [None, str.type] = None, runtime_deps: [str.type] = None, source: [None, str.type] = None, source_abi_verification_mode: [None, str.type] = None, source_only_abi_deps: [str.type] = None, srcs: [str.type] = None, target: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-68","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _build_only_native_code _dex_min_sdk_version _dex_toolchain _is_building_android_binary _java_toolchain abi_generation_mode annotation_processor_deps annotation_processor_params annotation_processors contacts default_host_platform deps exported_deps exported_provided_deps extra_arguments java_version javac labels licenses manifest_file maven_coords never_mark_as_unused_dependency on_unused_dependencies plugins proguard_config provided_deps remove_classes required_for_source_only_abi resources resources_root runtime_deps source source_abi_verification_mode source_only_abi_deps srcs target within_view   "},{"title":"java_plugin​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#java_plugin","content":"def java_plugin( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _build_only_native_code: default_only = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, does_not_affect_abi: bool.type = None, isolate_class_loader: bool.type = None, labels: [str.type] = None, licenses: [str.type] = None, plugin_name: str.type = None, supports_abi_generation_from_source: bool.type = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-69","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _build_only_native_code contacts default_host_platform deps does_not_affect_abi isolate_class_loader labels licenses plugin_name supports_abi_generation_from_source within_view   "},{"title":"java_test​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#java_test","content":"def java_test( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _build_only_native_code: default_only = None, _inject_test_env: default_only = None, _is_building_android_binary: default_only = None, _java_test_toolchain: str.type = None, _java_toolchain: str.type = None, abi_generation_mode: [None, str.type] = None, annotation_processor_deps: [str.type] = None, annotation_processor_params: [str.type] = None, annotation_processors: [str.type] = None, contacts: [str.type] = None, cxx_library_whitelist: [str.type] = None, default_cxx_platform: [None, str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, deps_query: [None, str.type] = None, env: {str.type: str.type} = None, exported_deps: [str.type] = None, exported_provided_deps: [str.type] = None, extra_arguments: [str.type] = None, fork_mode: str.type = None, java_version: [None, str.type] = None, javac: [None, [str.type, str.type]] = None, labels: [str.type] = None, licenses: [str.type] = None, manifest_file: [None, str.type] = None, maven_coords: [None, str.type] = None, never_mark_as_unused_dependency: [None, bool.type] = None, on_unused_dependencies: [None, str.type] = None, plugins: [str.type] = None, proguard_config: [None, str.type] = None, provided_deps: [str.type] = None, remove_classes: [str.type] = None, required_for_source_only_abi: bool.type = None, resources: [str.type] = None, resources_root: [None, str.type] = None, run_test_separately: bool.type = None, runner: [None, str.type] = None, runtime_deps: [str.type] = None, source: [None, str.type] = None, source_abi_verification_mode: [None, str.type] = None, source_only_abi_deps: [str.type] = None, specs: [None, str.type] = None, srcs: [str.type] = None, std_err_log_level: [None, [str.type, int.type]] = None, std_out_log_level: [None, [str.type, int.type]] = None, target: [None, str.type] = None, test_case_timeout_ms: [None, int.type] = None, test_rule_timeout_ms: [None, int.type] = None, test_type: [None, str.type] = None, use_cxx_libraries: [None, bool.type] = None, use_dependency_order_classpath: [None, bool.type] = None, vm_args: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-70","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _build_only_native_code _inject_test_env _is_building_android_binary _java_test_toolchain _java_toolchain abi_generation_mode annotation_processor_deps annotation_processor_params annotation_processors contacts cxx_library_whitelist default_cxx_platform default_host_platform deps deps_query env exported_deps exported_provided_deps extra_arguments fork_mode java_version javac labels licenses manifest_file maven_coords never_mark_as_unused_dependency on_unused_dependencies plugins proguard_config provided_deps remove_classes required_for_source_only_abi resources resources_root run_test_separately runner runtime_deps source source_abi_verification_mode source_only_abi_deps specs srcs std_err_log_level std_out_log_level target test_case_timeout_ms test_rule_timeout_ms test_type use_cxx_libraries use_dependency_order_classpath vm_args within_view   "},{"title":"java_test_runner​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#java_test_runner","content":"def java_test_runner( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, abi_generation_mode: [None, str.type] = None, annotation_processor_deps: [str.type] = None, annotation_processor_params: [str.type] = None, annotation_processors: [str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, exported_deps: [str.type] = None, exported_provided_deps: [str.type] = None, extra_arguments: [str.type] = None, java_version: [None, str.type] = None, javac: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, main_class: str.type = None, manifest_file: [None, str.type] = None, maven_coords: [None, str.type] = None, never_mark_as_unused_dependency: [None, bool.type] = None, on_unused_dependencies: [None, str.type] = None, plugins: [str.type] = None, proguard_config: [None, str.type] = None, provided_deps: [str.type] = None, remove_classes: [str.type] = None, required_for_source_only_abi: bool.type = None, resources: [str.type] = None, resources_root: [None, str.type] = None, runtime_deps: [str.type] = None, source: [None, str.type] = None, source_abi_verification_mode: [None, str.type] = None, source_only_abi_deps: [str.type] = None, srcs: [str.type] = None, target: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-71","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one abi_generation_mode annotation_processor_deps annotation_processor_params annotation_processors contacts default_host_platform deps exported_deps exported_provided_deps extra_arguments java_version javac labels licenses main_class manifest_file maven_coords never_mark_as_unused_dependency on_unused_dependencies plugins proguard_config provided_deps remove_classes required_for_source_only_abi resources resources_root runtime_deps source source_abi_verification_mode source_only_abi_deps srcs target within_view   "},{"title":"js_bundle​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#js_bundle","content":"def js_bundle( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _android_toolchain: str.type = None, _is_release: bool.type = None, _platform: str.type = None, android_package: [None, str.type] = None, bundle_name: [None, str.type] = None, bundle_name_for_flavor: [(str.type, str.type)] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, entry: [[str.type], str.type], extra_json: [None, str.type] = None, fallback_transform_profile: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, within_view: [None, [None, [str.type]]] = None, worker: str.type ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-72","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _android_toolchain _is_release _platform android_package bundle_name bundle_name_for_flavor contacts default_host_platform deps entry extra_json fallback_transform_profile labels licenses within_view worker   "},{"title":"js_bundle_genrule​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#js_bundle_genrule","content":"def js_bundle_genrule( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _genrule_toolchain: default_only = None, _is_release: bool.type = None, _platform: str.type = None, bash: [None, str.type] = None, bundle_name: [None, str.type] = None, bundle_name_for_flavor: [(str.type, str.type)] = None, cacheable: [None, bool.type] = None, cmd: [None, str.type] = None, cmd_exe: [None, str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, enable_sandbox: [None, bool.type] = None, environment_expansion_separator: [None, str.type] = None, js_bundle: str.type, labels: [str.type] = None, licenses: [str.type] = None, need_android_tools: bool.type = None, remote: [None, bool.type] = None, rewrite_deps_file: bool.type = None, rewrite_misc: bool.type = None, rewrite_sourcemap: bool.type = None, skip_resources: bool.type = None, srcs: [{str.type: str.type}, [str.type]] = None, type: str.type = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-73","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _genrule_toolchain _is_release _platform bash bundle_name bundle_name_for_flavor cacheable cmd cmd_exe contacts default_host_platform enable_sandbox environment_expansion_separator js_bundle labels licenses need_android_tools remote rewrite_deps_file rewrite_misc rewrite_sourcemap skip_resources srcs type within_view   "},{"title":"js_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#js_library","content":"def js_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _build_only_native_code: bool.type = None, _is_release: bool.type = None, _platform: str.type = None, asset_extensions: [None, [str.type]] = None, asset_platforms: [None, [str.type]] = None, base_path: [None, str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, deps_query: [None, str.type] = None, extra_json: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, srcs: [[str.type, (str.type, str.type)]] = None, within_view: [None, [None, [str.type]]] = None, worker: str.type ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-74","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _build_only_native_code _is_release _platform asset_extensions asset_platforms base_path contacts default_host_platform deps deps_query extra_json labels licenses srcs within_view worker   "},{"title":"json : UNKNOWN​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#json--unknown","content":" "},{"title":"julia_binary​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#julia_binary","content":"def julia_binary( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _julia_toolchain: default_only = None, deps: [str.type] = None, julia_args: [str.type] = None, julia_flags: [str.type] = None, main: str.type, srcs: [str.type] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-75","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _julia_toolchain deps julia_args julia_flags main srcs   "},{"title":"julia_jll_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#julia_jll_library","content":"def julia_jll_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _julia_toolchain: default_only = None, jll_name: str.type, lib_mapping: [{str.type: str.type}, [str.type]], uuid: str.type ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-76","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _julia_toolchain jll_name lib_mapping uuid   "},{"title":"julia_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#julia_library","content":"def julia_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _julia_toolchain: default_only = None, deps: [str.type] = None, project_toml: str.type, resources: [str.type] = None, srcs: [str.type] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-77","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _julia_toolchain deps project_toml resources srcs   "},{"title":"julia_test​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#julia_test","content":"def julia_test( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _julia_toolchain: default_only = None, deps: [str.type] = None, julia_args: [str.type] = None, julia_flags: [str.type] = None, resources: [str.type] = None, src: str.type ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-78","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _julia_toolchain deps julia_args julia_flags resources src   "},{"title":"keystore​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#keystore","content":"def keystore( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, properties: str.type, store: str.type, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-79","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts default_host_platform deps labels licenses properties store within_view   "},{"title":"kotlin_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#kotlin_library","content":"def kotlin_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _build_only_native_code: default_only = None, _dex_min_sdk_version: [None, int.type] = None, _dex_toolchain: [None, str.type] = None, _is_building_android_binary: default_only = None, _java_toolchain: str.type = None, _kotlin_toolchain: str.type = None, abi_generation_mode: [None, str.type] = None, annotation_processing_tool: [None, str.type] = None, annotation_processor_deps: [str.type] = None, annotation_processor_params: [str.type] = None, annotation_processors: [str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, exported_deps: [str.type] = None, exported_provided_deps: [str.type] = None, extra_arguments: [str.type] = None, extra_kotlinc_arguments: [str.type] = None, friend_paths: [str.type] = None, java_version: [None, str.type] = None, javac: [None, [str.type, str.type]] = None, kotlin_compiler_plugins: {str.type: {str.type: str.type}} = None, labels: [str.type] = None, licenses: [str.type] = None, manifest_file: [None, str.type] = None, maven_coords: [None, str.type] = None, never_mark_as_unused_dependency: [None, bool.type] = None, on_unused_dependencies: [None, str.type] = None, plugins: [str.type] = None, proguard_config: [None, str.type] = None, provided_deps: [str.type] = None, remove_classes: [str.type] = None, required_for_source_only_abi: bool.type = None, resources: [str.type] = None, resources_root: [None, str.type] = None, runtime_deps: [str.type] = None, source: [None, str.type] = None, source_abi_verification_mode: [None, str.type] = None, source_only_abi_deps: [str.type] = None, srcs: [str.type] = None, target: [None, str.type] = None, use_jvm_abi_gen: [None, bool.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-80","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _build_only_native_code _dex_min_sdk_version _dex_toolchain _is_building_android_binary _java_toolchain _kotlin_toolchain abi_generation_mode annotation_processing_tool annotation_processor_deps annotation_processor_params annotation_processors contacts default_host_platform deps exported_deps exported_provided_deps extra_arguments extra_kotlinc_arguments friend_paths java_version javac kotlin_compiler_plugins labels licenses manifest_file maven_coords never_mark_as_unused_dependency on_unused_dependencies plugins proguard_config provided_deps remove_classes required_for_source_only_abi resources resources_root runtime_deps source source_abi_verification_mode source_only_abi_deps srcs target use_jvm_abi_gen within_view   "},{"title":"kotlin_test​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#kotlin_test","content":"def kotlin_test( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _build_only_native_code: default_only = None, _inject_test_env: default_only = None, _is_building_android_binary: default_only = None, _java_test_toolchain: str.type = None, _java_toolchain: str.type = None, _kotlin_toolchain: str.type = None, abi_generation_mode: [None, str.type] = None, annotation_processing_tool: [None, str.type] = None, annotation_processor_deps: [str.type] = None, annotation_processor_params: [str.type] = None, annotation_processors: [str.type] = None, contacts: [str.type] = None, cxx_library_whitelist: [str.type] = None, default_cxx_platform: [None, str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, deps_query: [None, str.type] = None, env: {str.type: str.type} = None, exported_deps: [str.type] = None, exported_provided_deps: [str.type] = None, extra_arguments: [str.type] = None, extra_kotlinc_arguments: [str.type] = None, fork_mode: str.type = None, friend_paths: [str.type] = None, java_version: [None, str.type] = None, javac: [None, [str.type, str.type]] = None, kotlin_compiler_plugins: {str.type: {str.type: str.type}} = None, labels: [str.type] = None, licenses: [str.type] = None, manifest_file: [None, str.type] = None, maven_coords: [None, str.type] = None, never_mark_as_unused_dependency: [None, bool.type] = None, on_unused_dependencies: [None, str.type] = None, plugins: [str.type] = None, proguard_config: [None, str.type] = None, provided_deps: [str.type] = None, remove_classes: [str.type] = None, required_for_source_only_abi: bool.type = None, resources: [str.type] = None, resources_root: [None, str.type] = None, run_test_separately: bool.type = None, runtime_deps: [str.type] = None, source: [None, str.type] = None, source_abi_verification_mode: [None, str.type] = None, source_only_abi_deps: [str.type] = None, srcs: [str.type] = None, std_err_log_level: [None, [str.type, int.type]] = None, std_out_log_level: [None, [str.type, int.type]] = None, target: [None, str.type] = None, test_case_timeout_ms: [None, int.type] = None, test_rule_timeout_ms: [None, int.type] = None, test_type: [None, str.type] = None, use_cxx_libraries: [None, bool.type] = None, use_dependency_order_classpath: [None, bool.type] = None, use_jvm_abi_gen: [None, bool.type] = None, vm_args: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-81","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _build_only_native_code _inject_test_env _is_building_android_binary _java_test_toolchain _java_toolchain _kotlin_toolchain abi_generation_mode annotation_processing_tool annotation_processor_deps annotation_processor_params annotation_processors contacts cxx_library_whitelist default_cxx_platform default_host_platform deps deps_query env exported_deps exported_provided_deps extra_arguments extra_kotlinc_arguments fork_mode friend_paths java_version javac kotlin_compiler_plugins labels licenses manifest_file maven_coords never_mark_as_unused_dependency on_unused_dependencies plugins proguard_config provided_deps remove_classes required_for_source_only_abi resources resources_root run_test_separately runtime_deps source source_abi_verification_mode source_only_abi_deps srcs std_err_log_level std_out_log_level target test_case_timeout_ms test_rule_timeout_ms test_type use_cxx_libraries use_dependency_order_classpath use_jvm_abi_gen vm_args within_view   "},{"title":"legacy_toolchain​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#legacy_toolchain","content":"def legacy_toolchain( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, toolchain_name: str.type = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-82","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts default_host_platform labels licenses toolchain_name within_view   "},{"title":"link_group_map​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#link_group_map","content":"def link_group_map( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, map: [(str.type, [(str.type, str.type, [None, str.type], [None, str.type])])] ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-83","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one map   "},{"title":"load_symbols​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#load_symbols","content":"def load_symbols(symbols: {&quot;&quot;: &quot;&quot;}) -&gt; None   "},{"title":"lua_binary​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#lua_binary","content":"def lua_binary( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, main_module: str.type = None, native_starter_library: [None, str.type] = None, package_style: [None, str.type] = None, platform: [None, str.type] = None, platform_deps: [(str.type, [str.type])] = None, python_platform: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-84","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts default_host_platform deps labels licenses main_module native_starter_library package_style platform platform_deps python_platform within_view   "},{"title":"lua_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#lua_library","content":"def lua_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, base_module: [None, str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, platform_deps: [(str.type, [str.type])] = None, srcs: [{str.type: str.type}, [str.type]] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-85","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one base_module contacts default_host_platform deps labels licenses platform_deps srcs within_view   "},{"title":"map​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#map","content":"def map(func: &quot;&quot;, seq: iter(&quot;&quot;)) -&gt; [&quot;&quot;]   "},{"title":"ndk_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#ndk_library","content":"def ndk_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, flags: [str.type] = None, is_asset: bool.type = None, labels: [str.type] = None, licenses: [str.type] = None, srcs: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-86","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts default_host_platform deps flags is_asset labels licenses srcs within_view   "},{"title":"ndk_toolchain​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#ndk_toolchain","content":"def ndk_toolchain( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, cxx_runtime: [None, str.type] = None, cxx_toolchain: str.type, default_host_platform: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, objdump: str.type, shared_runtime_path: [None, str.type] = None, strip_apk_libs_flags: [None, [str.type]] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-87","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts cxx_runtime cxx_toolchain default_host_platform labels licenses objdump shared_runtime_path strip_apk_libs_flags within_view   "},{"title":"ocaml_binary​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#ocaml_binary","content":"def ocaml_binary( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _cxx_toolchain: default_only = None, _ocaml_toolchain: default_only = None, bytecode_only: [None, bool.type] = None, compiler_flags: [str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, linker_flags: [str.type] = None, ocamldep_flags: [str.type] = None, platform: [None, str.type] = None, platform_compiler_flags: [(str.type, [str.type])] = None, platform_deps: [(str.type, [str.type])] = None, platform_linker_flags: [(str.type, [str.type])] = None, srcs: [None, [{str.type: str.type}, [str.type]]] = None, warnings_flags: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-88","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _cxx_toolchain _ocaml_toolchain bytecode_only compiler_flags contacts default_host_platform deps labels licenses linker_flags ocamldep_flags platform platform_compiler_flags platform_deps platform_linker_flags srcs warnings_flags within_view   "},{"title":"ocaml_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#ocaml_library","content":"def ocaml_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _cxx_toolchain: default_only = None, _ocaml_toolchain: default_only = None, bytecode_only: bool.type = None, compiler_flags: [str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, linker_flags: [str.type] = None, native_plugin: bool.type = None, ocamldep_flags: [str.type] = None, platform_compiler_flags: [(str.type, [str.type])] = None, platform_deps: [(str.type, [str.type])] = None, srcs: [None, [{str.type: str.type}, [str.type]]] = None, warnings_flags: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-89","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _cxx_toolchain _ocaml_toolchain bytecode_only compiler_flags contacts default_host_platform deps labels licenses linker_flags native_plugin ocamldep_flags platform_compiler_flags platform_deps srcs warnings_flags within_view   "},{"title":"ocaml_object​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#ocaml_object","content":"def ocaml_object( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _cxx_toolchain: default_only = None, _ocaml_toolchain: default_only = None, bytecode_only: [None, bool.type] = None, compiler_flags: [str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, linker_flags: [str.type] = None, ocamldep_flags: [str.type] = None, platform: [None, str.type] = None, platform_deps: [(str.type, [str.type])] = None, platform_linker_flags: [(str.type, [str.type])] = None, srcs: [None, [{str.type: str.type}, [str.type]]] = None, warnings_flags: [None, str.type] = None, within_view: [None, [str.type]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-90","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _cxx_toolchain _ocaml_toolchain bytecode_only compiler_flags contacts default_host_platform deps labels licenses linker_flags ocamldep_flags platform platform_deps platform_linker_flags srcs warnings_flags within_view   "},{"title":"ocaml_shared​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#ocaml_shared","content":"def ocaml_shared( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _cxx_toolchain: default_only = None, _ocaml_toolchain: default_only = None, bytecode_only: [None, bool.type] = None, compiler_flags: [str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, linker_flags: [str.type] = None, ocamldep_flags: [str.type] = None, platform: [None, str.type] = None, platform_deps: [(str.type, [str.type])] = None, platform_linker_flags: [(str.type, [str.type])] = None, srcs: [None, [{str.type: str.type}, [str.type]]] = None, warnings_flags: [None, str.type] = None, within_view: [None, [str.type]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-91","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _cxx_toolchain _ocaml_toolchain bytecode_only compiler_flags contacts default_host_platform deps labels licenses linker_flags ocamldep_flags platform platform_deps platform_linker_flags srcs warnings_flags within_view   "},{"title":"oncall​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#oncall","content":"def oncall(name: str.type) -&gt; None  Called in a BUCK file to declare the oncall contact details for all the targets defined. Must be called at most once, before any targets have been declared. Errors if called from a .bzl file.  "},{"title":"package​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#package","content":"def package(*, inherit: bool.type = None, visibility: [str.type] = None, within_view: [str.type] = None) -&gt; None   "},{"title":"package_name​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#package_name","content":"def package_name() -&gt; str.type   "},{"title":"partial​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#partial","content":"def partial(func: &quot;&quot;, *args: UNKNOWN, **kwargs: {&quot;&quot;: &quot;&quot;}) -&gt; &quot;function&quot;   "},{"title":"platform​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#platform","content":"def platform( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, constraint_values: [str.type] = None, deps: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-92","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one constraint_values deps within_view   "},{"title":"pprint​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#pprint","content":"def pprint(*args: UNKNOWN) -&gt; None   "},{"title":"prebuilt_apple_framework​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#prebuilt_apple_framework","content":"def prebuilt_apple_framework( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _apple_toolchain: str.type = None, _omnibus_environment: [None, str.type] = None, code_sign_on_copy: [None, bool.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, exported_linker_flags: [str.type] = None, exported_platform_linker_flags: [(str.type, [str.type])] = None, framework: [None, str.type] = None, frameworks: [str.type] = None, labels: [str.type] = None, libraries: [str.type] = None, licenses: [str.type] = None, preferred_linkage: str.type = None, supported_platforms_regex: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-93","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _apple_toolchain _omnibus_environment code_sign_on_copy contacts default_host_platform deps exported_linker_flags exported_platform_linker_flags framework frameworks labels libraries licenses preferred_linkage supported_platforms_regex within_view   "},{"title":"prebuilt_cxx_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#prebuilt_cxx_library","content":"def prebuilt_cxx_library( exported_preprocessor_flags: UNKNOWN = None, versioned_exported_preprocessor_flags: UNKNOWN = None, exported_lang_preprocessor_flags: UNKNOWN = None, versioned_exported_lang_preprocessor_flags: UNKNOWN = None, exported_platform_preprocessor_flags: UNKNOWN = None, versioned_exported_platform_preprocessor_flags: UNKNOWN = None, exported_lang_platform_preprocessor_flags: UNKNOWN = None, versioned_exported_lang_platform_preprocessor_flags: UNKNOWN = None, static_lib: UNKNOWN = None, versioned_static_lib: UNKNOWN = None, static_pic_lib: UNKNOWN = None, versioned_static_pic_lib: UNKNOWN = None, shared_lib: UNKNOWN = None, versioned_shared_lib: UNKNOWN = None, header_dirs: UNKNOWN = None, versioned_header_dirs: UNKNOWN = None, **kwargs: UNKNOWN ) -&gt; UNKNOWN   "},{"title":"prebuilt_cxx_library_group​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#prebuilt_cxx_library_group","content":"def prebuilt_cxx_library_group( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, exported_deps: [str.type] = None, exported_platform_deps: [(str.type, [str.type])] = None, exported_preprocessor_flags: [str.type] = None, import_libs: {str.type: str.type} = None, include_dirs: [str.type] = None, include_in_android_merge_map_output: bool.type = None, labels: [str.type] = None, licenses: [str.type] = None, provided_shared_libs: {str.type: str.type} = None, shared_libs: {str.type: str.type} = None, shared_link: [str.type] = None, static_libs: [str.type] = None, static_link: [str.type] = None, static_pic_libs: [str.type] = None, static_pic_link: [str.type] = None, supported_platforms_regex: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-94","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts default_host_platform deps exported_deps exported_platform_deps exported_preprocessor_flags import_libs include_dirs include_in_android_merge_map_output labels licenses provided_shared_libs shared_libs shared_link static_libs static_link static_pic_libs static_pic_link supported_platforms_regex within_view   "},{"title":"prebuilt_dotnet_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#prebuilt_dotnet_library","content":"def prebuilt_dotnet_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, assembly: str.type, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-95","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one assembly contacts default_host_platform labels licenses within_view   "},{"title":"prebuilt_go_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#prebuilt_go_library","content":"def prebuilt_go_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, exported_deps: [str.type] = None, labels: [str.type] = None, library: str.type, licenses: [str.type] = None, package_name: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-96","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts default_host_platform deps exported_deps labels library licenses package_name within_view   "},{"title":"prebuilt_jar​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#prebuilt_jar","content":"def prebuilt_jar( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _build_only_native_code: default_only = None, _dex_min_sdk_version: [None, int.type] = None, _dex_toolchain: [None, str.type] = None, _prebuilt_jar_toolchain: str.type = None, binary_jar: str.type, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, generate_abi: bool.type = None, javadoc_url: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, maven_coords: [None, str.type] = None, never_mark_as_unused_dependency: bool.type = None, required_for_source_only_abi: bool.type = None, source_jar: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-97","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _build_only_native_code _dex_min_sdk_version _dex_toolchain _prebuilt_jar_toolchain binary_jar contacts default_host_platform deps generate_abi javadoc_url labels licenses maven_coords never_mark_as_unused_dependency required_for_source_only_abi source_jar within_view   "},{"title":"prebuilt_native_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#prebuilt_native_library","content":"def prebuilt_native_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, has_wrap_script: bool.type = None, is_asset: bool.type = None, labels: [str.type] = None, licenses: [str.type] = None, native_libs: str.type, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-98","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts default_host_platform deps has_wrap_script is_asset labels licenses native_libs within_view   "},{"title":"prebuilt_ocaml_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#prebuilt_ocaml_library","content":"def prebuilt_ocaml_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, bytecode_c_libs: [str.type] = None, bytecode_lib: [None, str.type] = None, bytecode_only: bool.type = None, c_libs: [str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, include_dir: [None, str.type] = None, labels: [str.type] = None, lib_dir: str.type = None, lib_name: str.type = None, licenses: [str.type] = None, native_c_libs: [str.type] = None, native_lib: [None, str.type] = None, platform_deps: [(str.type, [str.type])] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-99","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one bytecode_c_libs bytecode_lib bytecode_only c_libs contacts default_host_platform deps include_dir labels lib_dir lib_name licenses native_c_libs native_lib platform_deps within_view   "},{"title":"prebuilt_python_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#prebuilt_python_library","content":"def prebuilt_python_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _create_manifest_for_source_dir: str.type = None, _extract: default_only = None, _python_toolchain: default_only = None, binary_src: str.type, compile: bool.type = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, exclude_deps_from_merged_linking: bool.type = None, ignore_compile_errors: bool.type = None, labels: [str.type] = None, licenses: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-100","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _create_manifest_for_source_dir _extract _python_toolchain binary_src compile contacts default_host_platform deps exclude_deps_from_merged_linking ignore_compile_errors labels licenses within_view   "},{"title":"prebuilt_rust_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#prebuilt_rust_library","content":"def prebuilt_rust_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _cxx_toolchain: default_only = None, _rust_toolchain: default_only = None, contacts: [str.type] = None, crate: str.type = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, link_style: [None, str.type] = None, platform_deps: [(str.type, [str.type])] = None, proc_macro: bool.type = None, rlib: str.type, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-101","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _cxx_toolchain _rust_toolchain contacts crate default_host_platform deps labels licenses link_style platform_deps proc_macro rlib within_view   "},{"title":"print​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#print","content":"def print(*args: UNKNOWN) -&gt; None   "},{"title":"provider​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#provider","content":"def provider(doc: str.type = None, fields: [[str.type], {str.type: str.type}]) -&gt; &quot;provider_callable&quot;   "},{"title":"python : UNKNOWN​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#python--unknown","content":" "},{"title":"python_binary​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#python_binary","content":"def python_binary( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _create_manifest_for_source_dir: str.type = None, _cxx_hacks: default_only = None, _cxx_toolchain: default_only = None, _exec_os_type: default_only = None, _omnibus_environment: [None, str.type] = None, _package_remotely: bool.type = None, _python_toolchain: default_only = None, _target_os_type: default_only = None, allow_huge_dwp: bool.type = None, auto_link_groups: default_only = None, base_module: [None, str.type] = None, binary_linker_flags: default_only = None, bolt_flags: default_only = None, bolt_gdb_index: default_only = None, bolt_profile: default_only = None, build_args: [str.type] = None, compile: [None, bool.type] = None, compiler_flags: [str.type] = None, contacts: [str.type] = None, cxx_main: str.type = None, cxx_platform: [None, str.type] = None, cxx_runtime_type: default_only = None, deduplicate_merged_link_roots: [None, bool.type] = None, default_host_platform: [None, str.type] = None, default_platform: default_only = None, defaults: default_only = None, deps: [str.type] = None, deps_query: default_only = None, devirt_enabled: default_only = None, dummy_omnibus: [None, str.type] = None, enable_distributed_thinlto: bool.type = None, executable_deps: [str.type] = None, executable_name: [None, str.type] = None, extension: [None, str.type] = None, fat_lto: default_only = None, focused_list_target: default_only = None, frameworks: default_only = None, header_namespace: default_only = None, headers: default_only = None, headers_as_raw_headers_mode: default_only = None, include_directories: default_only = None, labels: [str.type] = None, lang_compiler_flags: default_only = None, lang_platform_compiler_flags: default_only = None, lang_platform_preprocessor_flags: default_only = None, lang_preprocessor_flags: default_only = None, libraries: default_only = None, licenses: [str.type] = None, link_deps_query_whole: default_only = None, link_group: [None, str.type] = None, link_group_map: [None, [str.type, [(str.type, [([None, str.type], str.type, [None, str.type], [None, str.type])])]]] = None, link_style: str.type = None, link_whole: default_only = None, linker_extra_outputs: default_only = None, linker_flags: [str.type] = None, main: [None, str.type] = None, main_module: [None, str.type] = None, make_pex: [None, str.type] = None, manifest_module_entries: [None, {str.type: &quot;&quot;}] = None, native_link_strategy: [None, str.type] = None, package_split_dwarf_dwp: bool.type = None, package_style: [None, str.type] = None, par_style: [None, str.type] = None, platform: [None, str.type] = None, platform_compiler_flags: default_only = None, platform_deps: [(str.type, [str.type])] = None, platform_headers: default_only = None, platform_linker_flags: [(str.type, [str.type])] = None, platform_preload_deps: [(str.type, [str.type])] = None, platform_preprocessor_flags: default_only = None, platform_srcs: default_only = None, post_linker_flags: default_only = None, post_platform_linker_flags: default_only = None, precompiled_header: default_only = None, prefer_stripped_native_objects: bool.type = None, prefer_stripped_objects: default_only = None, prefix_header: default_only = None, preload_deps: [str.type] = None, preprocessor_flags: default_only = None, raw_headers: default_only = None, resources: [{str.type: [str.type, str.type]}, [[str.type, str.type]]] = None, static_extension_finder: str.type = None, static_extension_utils: str.type = None, thin_lto: default_only = None, version_universe: [None, str.type] = None, weak_framework_names: default_only = None, within_view: [None, [None, [str.type]]] = None, zip_safe: [None, bool.type] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-102","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _create_manifest_for_source_dir _cxx_hacks _cxx_toolchain _exec_os_type _omnibus_environment _package_remotely _python_toolchain _target_os_type allow_huge_dwp auto_link_groups base_module binary_linker_flags bolt_flags bolt_gdb_index bolt_profile build_args compile compiler_flags contacts cxx_main cxx_platform cxx_runtime_type deduplicate_merged_link_roots default_host_platform default_platform defaults deps deps_query devirt_enabled dummy_omnibus enable_distributed_thinlto executable_deps executable_name extension fat_lto focused_list_target frameworks header_namespace headers headers_as_raw_headers_mode include_directories labels lang_compiler_flags lang_platform_compiler_flags lang_platform_preprocessor_flags lang_preprocessor_flags libraries licenses link_deps_query_whole link_group link_group_map link_style link_whole linker_extra_outputs linker_flags main main_module make_pex manifest_module_entries native_link_strategy package_split_dwarf_dwp package_style par_style platform platform_compiler_flags platform_deps platform_headers platform_linker_flags platform_preload_deps platform_preprocessor_flags platform_srcs post_linker_flags post_platform_linker_flags precompiled_header prefer_stripped_native_objects prefer_stripped_objects prefix_header preload_deps preprocessor_flags raw_headers resources static_extension_finder static_extension_utils thin_lto version_universe weak_framework_names within_view zip_safe   "},{"title":"python_bootstrap_binary​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#python_bootstrap_binary","content":"def python_bootstrap_binary( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _exec_os_type: default_only = None, _python_bootstrap_toolchain: default_only = None, _win_python_wrapper: default_only = None, deps: [str.type] = None, main: str.type ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-103","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _exec_os_type _python_bootstrap_toolchain _win_python_wrapper deps main   "},{"title":"python_bootstrap_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#python_bootstrap_library","content":"def python_bootstrap_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, srcs: [str.type] ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-104","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one srcs   "},{"title":"python_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#python_library","content":"def python_library(srcs: UNKNOWN = None, versioned_srcs: UNKNOWN = None, resources: UNKNOWN = None, versioned_resources: UNKNOWN = None, **kwargs: UNKNOWN) -&gt; UNKNOWN   "},{"title":"python_needed_coverage_test​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#python_needed_coverage_test","content":"def python_needed_coverage_test( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _inject_test_env: default_only = None, contacts: [str.type] = None, env: {str.type: str.type} = None, labels: [str.type] = None, needed_coverage: [(int.type, str.type, [None, str.type])] = None, remote_execution: [None, {str.type: str.type}] = None, test: str.type ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-105","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _inject_test_env contacts env labels needed_coverage remote_execution test   "},{"title":"python_test​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#python_test","content":"def python_test( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _create_manifest_for_source_dir: str.type = None, _cxx_hacks: default_only = None, _cxx_toolchain: default_only = None, _exec_os_type: default_only = None, _inject_test_env: default_only = None, _omnibus_environment: [None, str.type] = None, _python_toolchain: default_only = None, _target_os_type: default_only = None, _test_main: str.type = None, additional_coverage_targets: [str.type] = None, allow_huge_dwp: bool.type = None, auto_link_groups: default_only = None, base_module: [None, str.type] = None, binary_linker_flags: default_only = None, bolt_flags: default_only = None, bolt_gdb_index: default_only = None, bolt_profile: default_only = None, build_args: [str.type] = None, compile: [None, bool.type] = None, compiler_flags: [str.type] = None, contacts: [str.type] = None, cxx_main: str.type = None, cxx_platform: [None, str.type] = None, cxx_runtime_type: default_only = None, deduplicate_merged_link_roots: [None, bool.type] = None, default_host_platform: [None, str.type] = None, default_platform: default_only = None, defaults: default_only = None, deps: [str.type] = None, deps_query: default_only = None, devirt_enabled: default_only = None, dummy_omnibus: [None, str.type] = None, enable_distributed_thinlto: bool.type = None, env: {str.type: str.type} = None, exclude_deps_from_merged_linking: bool.type = None, executable_deps: [str.type] = None, executable_name: [None, str.type] = None, extension: [None, str.type] = None, fat_lto: default_only = None, focused_list_target: default_only = None, frameworks: default_only = None, header_namespace: default_only = None, headers: default_only = None, headers_as_raw_headers_mode: default_only = None, include_directories: default_only = None, labels: [str.type] = None, lang_compiler_flags: default_only = None, lang_platform_compiler_flags: default_only = None, lang_platform_preprocessor_flags: default_only = None, lang_preprocessor_flags: default_only = None, libraries: default_only = None, licenses: [str.type] = None, link_deps_query_whole: default_only = None, link_group: [None, str.type] = None, link_group_map: [None, [str.type, [(str.type, [([None, str.type], str.type, [None, str.type], [None, str.type])])]]] = None, link_style: default_only = None, link_whole: default_only = None, linker_extra_outputs: default_only = None, linker_flags: [str.type] = None, main_module: [None, str.type] = None, make_pex: [None, str.type] = None, manifest_module_entries: [None, {str.type: &quot;&quot;}] = None, native_link_strategy: [None, str.type] = None, needed_coverage: [(int.type, str.type, [None, str.type])] = None, package_split_dwarf_dwp: bool.type = None, package_style: [None, str.type] = None, par_style: [None, str.type] = None, platform: [None, str.type] = None, platform_compiler_flags: default_only = None, platform_deps: [(str.type, [str.type])] = None, platform_headers: default_only = None, platform_linker_flags: [(str.type, [str.type])] = None, platform_preload_deps: [(str.type, [str.type])] = None, platform_preprocessor_flags: default_only = None, platform_resources: [(str.type, [{str.type: str.type}, [str.type]])] = None, platform_srcs: default_only = None, post_linker_flags: default_only = None, post_platform_linker_flags: default_only = None, precompiled_header: default_only = None, prefer_stripped_native_objects: bool.type = None, prefer_stripped_objects: default_only = None, prefix_header: default_only = None, preload_deps: [str.type] = None, preprocessor_flags: default_only = None, raw_headers: default_only = None, remote_execution: [None, {str.type: str.type}] = None, resources: [{str.type: [str.type, str.type]}, [[str.type, str.type]]] = None, runner: [None, str.type] = None, specs: [None, str.type] = None, srcs: [{str.type: str.type}, [str.type]] = None, static_extension_finder: str.type = None, static_extension_utils: str.type = None, test_rule_timeout_ms: [None, int.type] = None, thin_lto: default_only = None, version_universe: [None, str.type] = None, versioned_resources: [None, [({str.type: str.type}, [{str.type: str.type}, [str.type]])]] = None, versioned_srcs: [None, [({str.type: str.type}, [{str.type: str.type}, [str.type]])]] = None, weak_framework_names: default_only = None, within_view: [None, [None, [str.type]]] = None, zip_safe: [None, bool.type] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-106","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _create_manifest_for_source_dir _cxx_hacks _cxx_toolchain _exec_os_type _inject_test_env _omnibus_environment _python_toolchain _target_os_type _test_main additional_coverage_targets allow_huge_dwp auto_link_groups base_module binary_linker_flags bolt_flags bolt_gdb_index bolt_profile build_args compile compiler_flags contacts cxx_main cxx_platform cxx_runtime_type deduplicate_merged_link_roots default_host_platform default_platform defaults deps deps_query devirt_enabled dummy_omnibus enable_distributed_thinlto env exclude_deps_from_merged_linking executable_deps executable_name extension fat_lto focused_list_target frameworks header_namespace headers headers_as_raw_headers_mode include_directories labels lang_compiler_flags lang_platform_compiler_flags lang_platform_preprocessor_flags lang_preprocessor_flags libraries licenses link_deps_query_whole link_group link_group_map link_style link_whole linker_extra_outputs linker_flags main_module make_pex manifest_module_entries native_link_strategy needed_coverage package_split_dwarf_dwp package_style par_style platform platform_compiler_flags platform_deps platform_headers platform_linker_flags platform_preload_deps platform_preprocessor_flags platform_resources platform_srcs post_linker_flags post_platform_linker_flags precompiled_header prefer_stripped_native_objects prefer_stripped_objects prefix_header preload_deps preprocessor_flags raw_headers remote_execution resources runner specs srcs static_extension_finder static_extension_utils test_rule_timeout_ms thin_lto version_universe versioned_resources versioned_srcs weak_framework_names within_view zip_safe   "},{"title":"python_test_runner​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#python_test_runner","content":"def python_test_runner( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, main_module: str.type = None, src: str.type, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-107","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts default_host_platform labels licenses main_module src within_view   "},{"title":"read_config​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#read_config","content":"def read_config(section: str.type, key: str.type, default: [None, &quot;&quot;] = None) -&gt; &quot;&quot;   "},{"title":"read_package_value​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#read_package_value","content":"def read_package_value(key: str.type) -&gt; &quot;&quot;  Read value specified in the PACKAGE file. "},{"title":"Details​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#details-1","content":"Returns None if value is not set.  "},{"title":"read_root_config​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#read_root_config","content":"def read_root_config(section: str.type, key: str.type, default: [None, str.type] = None) -&gt; [None, str.type]   "},{"title":"record​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#record","content":"def record(**kwargs: {str.type: &quot;&quot;}) -&gt; &quot;function&quot;   "},{"title":"regex_match​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#regex_match","content":"def regex_match(regex: str.type, str: str.type) -&gt; bool.type   "},{"title":"remote_file​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#remote_file","content":"def remote_file( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _unzip_tool: default_only = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, out: [None, str.type] = None, sha1: [None, str.type] = None, sha256: [None, str.type] = None, type: [None, str.type] = None, url: str.type, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-108","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _unzip_tool contacts default_host_platform labels licenses out sha1 sha256 type url within_view   "},{"title":"repository_name​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#repository_name","content":"def repository_name() -&gt; str.type   "},{"title":"resource_group_map​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#resource_group_map","content":"def resource_group_map( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, map: [(str.type, [(str.type, str.type, [None, str.type])])] ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-109","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one map   "},{"title":"robolectric_test​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#robolectric_test","content":"def robolectric_test( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _android_toolchain: str.type = None, _build_only_native_code: default_only = None, _inject_test_env: default_only = None, _is_building_android_binary: default_only = None, _java_test_toolchain: default_only = None, _java_toolchain: str.type = None, _kotlin_toolchain: str.type = None, abi_generation_mode: [None, str.type] = None, annotation_processing_tool: [None, str.type] = None, annotation_processor_deps: [str.type] = None, annotation_processor_params: [str.type] = None, annotation_processors: [str.type] = None, contacts: [str.type] = None, cxx_library_whitelist: [str.type] = None, default_cxx_platform: [None, str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, deps_query: [None, str.type] = None, env: {str.type: str.type} = None, exported_deps: [str.type] = None, exported_provided_deps: [str.type] = None, extra_arguments: [str.type] = None, extra_kotlinc_arguments: [str.type] = None, fork_mode: str.type = None, friend_paths: [str.type] = None, java_version: [None, str.type] = None, javac: [None, str.type] = None, kotlin_compiler_plugins: {str.type: {str.type: str.type}} = None, labels: [str.type] = None, language: [None, str.type] = None, licenses: [str.type] = None, locales_for_binary_resources: [str.type] = None, manifest_entries: {str.type: &quot;&quot;} = None, manifest_file: [None, str.type] = None, maven_coords: [None, str.type] = None, never_mark_as_unused_dependency: [None, bool.type] = None, on_unused_dependencies: [None, str.type] = None, plugins: [str.type] = None, preferred_density_for_binary_resources: [None, str.type] = None, proguard_config: [None, str.type] = None, provided_deps: [str.type] = None, remove_classes: [str.type] = None, required_for_source_only_abi: bool.type = None, resource_union_package: [None, str.type] = None, resources: [str.type] = None, resources_root: [None, str.type] = None, robolectric_manifest: str.type, robolectric_runtime_dependencies: [str.type] = None, robolectric_runtime_dependency: [None, str.type] = None, run_test_separately: bool.type = None, runtime_deps: [str.type] = None, source: [None, str.type] = None, source_abi_verification_mode: [None, str.type] = None, source_only_abi_deps: [str.type] = None, srcs: [str.type] = None, std_err_log_level: [None, [str.type, int.type]] = None, std_out_log_level: [None, [str.type, int.type]] = None, target: [None, str.type] = None, test_case_timeout_ms: [None, int.type] = None, test_rule_timeout_ms: [None, int.type] = None, test_type: [None, str.type] = None, use_cxx_libraries: [None, bool.type] = None, use_dependency_order_classpath: [None, bool.type] = None, use_jvm_abi_gen: [None, bool.type] = None, vm_args: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-110","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _android_toolchain _build_only_native_code _inject_test_env _is_building_android_binary _java_test_toolchain _java_toolchain _kotlin_toolchain abi_generation_mode annotation_processing_tool annotation_processor_deps annotation_processor_params annotation_processors contacts cxx_library_whitelist default_cxx_platform default_host_platform deps deps_query env exported_deps exported_provided_deps extra_arguments extra_kotlinc_arguments fork_mode friend_paths java_version javac kotlin_compiler_plugins labels language licenses locales_for_binary_resources manifest_entries manifest_file maven_coords never_mark_as_unused_dependency on_unused_dependencies plugins preferred_density_for_binary_resources proguard_config provided_deps remove_classes required_for_source_only_abi resource_union_package resources resources_root robolectric_manifest robolectric_runtime_dependencies robolectric_runtime_dependency run_test_separately runtime_deps source source_abi_verification_mode source_only_abi_deps srcs std_err_log_level std_out_log_level target test_case_timeout_ms test_rule_timeout_ms test_type use_cxx_libraries use_dependency_order_classpath use_jvm_abi_gen vm_args within_view   "},{"title":"rule​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#rule","content":"def rule( *, impl: &quot;&quot;, attrs: {str.type: &quot;attribute&quot;}, cfg: [None, &quot;&quot;] = None, doc: str.type = None, is_configuration_rule: bool.type = None, is_toolchain_rule: bool.type = None ) -&gt; &quot;&quot;   "},{"title":"rule_exists​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#rule_exists","content":"def rule_exists(name: str.type) -&gt; bool.type  This should be called &quot;target exists&quot;, not &quot;rule exists&quot; (if this should exist at all).  "},{"title":"rust_binary​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#rust_binary","content":"def rust_binary( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _cxx_toolchain: default_only = None, _exec_os_type: default_only = None, _rust_toolchain: default_only = None, _target_os_type: default_only = None, contacts: [str.type] = None, crate: [None, str.type] = None, crate_root: [None, str.type] = None, default_host_platform: [None, str.type] = None, default_platform: [None, str.type] = None, deps: [str.type] = None, edition: [None, str.type] = None, env: {str.type: str.type} = None, features: [str.type] = None, flagged_deps: [(str.type, [str.type])] = None, framework: bool.type = None, incremental_build_mode: [None, str.type] = None, incremental_enabled: bool.type = None, labels: [str.type] = None, licenses: [str.type] = None, link_style: [None, str.type] = None, linker_flags: [str.type] = None, mapped_srcs: {str.type: str.type} = None, named_deps: {str.type: str.type} = None, platform_deps: [(str.type, [str.type])] = None, platform_flagged_deps: [(str.type, [(str.type, [str.type])])] = None, platform_linker_flags: [(str.type, [str.type])] = None, platform_rustc_flags: {str.type: [str.type]} = None, resources: [{str.type: [str.type, str.type]}, [[str.type, str.type]]] = None, rpath: bool.type = None, rustc_flags: [str.type] = None, rustdoc_flags: [str.type] = None, srcs: [str.type] = None, version_universe: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-111","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _cxx_toolchain _exec_os_type _rust_toolchain _target_os_type contacts crate crate_root default_host_platform default_platform deps edition env features flagged_deps framework incremental_build_mode incremental_enabled labels licenses link_style linker_flags mapped_srcs named_deps platform_deps platform_flagged_deps platform_linker_flags platform_rustc_flags resources rpath rustc_flags rustdoc_flags srcs version_universe within_view   "},{"title":"rust_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#rust_library","content":"def rust_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _cxx_toolchain: default_only = None, _exec_os_type: default_only = None, _omnibus_environment: [None, str.type] = None, _rust_toolchain: default_only = None, _target_os_type: default_only = None, contacts: [str.type] = None, crate: [None, str.type] = None, crate_root: [None, str.type] = None, default_host_platform: [None, str.type] = None, default_platform: [None, str.type] = None, deps: [str.type] = None, doc_deps: [str.type] = None, doc_env: {str.type: str.type} = None, doc_linker_flags: [str.type] = None, doc_named_deps: {str.type: str.type} = None, doc_platform_deps: [(str.type, [str.type])] = None, doc_platform_linker_flags: [(str.type, [str.type])] = None, doctests: bool.type = None, edition: [None, str.type] = None, env: {str.type: str.type} = None, features: [str.type] = None, flagged_deps: [(str.type, [str.type])] = None, incremental_build_mode: [None, str.type] = None, incremental_enabled: bool.type = None, labels: [str.type] = None, licenses: [str.type] = None, linker_flags: [str.type] = None, mapped_srcs: {str.type: str.type} = None, named_deps: {str.type: str.type} = None, platform_deps: [(str.type, [str.type])] = None, platform_flagged_deps: [(str.type, [(str.type, [str.type])])] = None, platform_rustc_flags: {str.type: [str.type]} = None, preferred_linkage: str.type = None, proc_macro: bool.type = None, resources: [{str.type: [str.type, str.type]}, [[str.type, str.type]]] = None, rustc_flags: [str.type] = None, rustdoc_flags: [str.type] = None, srcs: [str.type] = None, supports_python_dlopen: [None, bool.type] = None, version_universe: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-112","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _cxx_toolchain _exec_os_type _omnibus_environment _rust_toolchain _target_os_type contacts crate crate_root default_host_platform default_platform deps doc_deps doc_env doc_linker_flags doc_named_deps doc_platform_deps doc_platform_linker_flags doctests edition env features flagged_deps incremental_build_mode incremental_enabled labels licenses linker_flags mapped_srcs named_deps platform_deps platform_flagged_deps platform_rustc_flags preferred_linkage proc_macro resources rustc_flags rustdoc_flags srcs supports_python_dlopen version_universe within_view   "},{"title":"rust_test​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#rust_test","content":"def rust_test( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _cxx_toolchain: default_only = None, _exec_os_type: default_only = None, _inject_test_env: default_only = None, _rust_toolchain: default_only = None, _target_os_type: default_only = None, contacts: [str.type] = None, crate: [None, str.type] = None, crate_root: [None, str.type] = None, default_host_platform: [None, str.type] = None, default_platform: [None, str.type] = None, deps: [str.type] = None, edition: [None, str.type] = None, env: {str.type: str.type} = None, features: [str.type] = None, flagged_deps: [(str.type, [str.type])] = None, framework: bool.type = None, incremental_build_mode: [None, str.type] = None, incremental_enabled: bool.type = None, labels: [str.type] = None, licenses: [str.type] = None, link_style: [None, str.type] = None, linker_flags: [str.type] = None, mapped_srcs: {str.type: str.type} = None, named_deps: {str.type: str.type} = None, platform_deps: [(str.type, [str.type])] = None, platform_flagged_deps: [(str.type, [(str.type, [str.type])])] = None, platform_linker_flags: [(str.type, [str.type])] = None, platform_rustc_flags: {str.type: [str.type]} = None, remote_execution: [None, {str.type: str.type}] = None, resources: [{str.type: [str.type, str.type]}, [[str.type, str.type]]] = None, rpath: bool.type = None, rustc_flags: [str.type] = None, rustdoc_flags: [str.type] = None, srcs: [str.type] = None, version_universe: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-113","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _cxx_toolchain _exec_os_type _inject_test_env _rust_toolchain _target_os_type contacts crate crate_root default_host_platform default_platform deps edition env features flagged_deps framework incremental_build_mode incremental_enabled labels licenses link_style linker_flags mapped_srcs named_deps platform_deps platform_flagged_deps platform_linker_flags platform_rustc_flags remote_execution resources rpath rustc_flags rustdoc_flags srcs version_universe within_view   "},{"title":"scala_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#scala_library","content":"def scala_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, abi_generation_mode: [None, str.type] = None, annotation_processor_deps: [str.type] = None, annotation_processor_params: [str.type] = None, annotation_processors: [str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, exported_deps: [str.type] = None, exported_provided_deps: [str.type] = None, extra_arguments: [str.type] = None, java_version: [None, str.type] = None, javac: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, manifest_file: [None, str.type] = None, maven_coords: [None, str.type] = None, never_mark_as_unused_dependency: [None, bool.type] = None, on_unused_dependencies: [None, str.type] = None, plugins: [str.type] = None, proguard_config: [None, str.type] = None, provided_deps: [str.type] = None, remove_classes: [str.type] = None, required_for_source_only_abi: bool.type = None, resources: [str.type] = None, resources_root: [None, str.type] = None, runtime_deps: [str.type] = None, source: [None, str.type] = None, source_abi_verification_mode: [None, str.type] = None, source_only_abi_deps: [str.type] = None, srcs: [str.type] = None, target: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-114","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one abi_generation_mode annotation_processor_deps annotation_processor_params annotation_processors contacts default_host_platform deps exported_deps exported_provided_deps extra_arguments java_version javac labels licenses manifest_file maven_coords never_mark_as_unused_dependency on_unused_dependencies plugins proguard_config provided_deps remove_classes required_for_source_only_abi resources resources_root runtime_deps source source_abi_verification_mode source_only_abi_deps srcs target within_view   "},{"title":"scala_test​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#scala_test","content":"def scala_test( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, abi_generation_mode: [None, str.type] = None, annotation_processor_deps: [str.type] = None, annotation_processor_params: [str.type] = None, annotation_processors: [str.type] = None, contacts: [str.type] = None, cxx_library_whitelist: [str.type] = None, default_cxx_platform: [None, str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, deps_query: [None, str.type] = None, env: {str.type: str.type} = None, exported_deps: [str.type] = None, exported_provided_deps: [str.type] = None, extra_arguments: [str.type] = None, fork_mode: str.type = None, java_version: [None, str.type] = None, javac: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, manifest_file: [None, str.type] = None, maven_coords: [None, str.type] = None, never_mark_as_unused_dependency: [None, bool.type] = None, on_unused_dependencies: [None, str.type] = None, plugins: [str.type] = None, proguard_config: [None, str.type] = None, provided_deps: [str.type] = None, remove_classes: [str.type] = None, required_for_source_only_abi: bool.type = None, resources: [str.type] = None, resources_root: [None, str.type] = None, run_test_separately: bool.type = None, runtime_deps: [str.type] = None, source: [None, str.type] = None, source_abi_verification_mode: [None, str.type] = None, source_only_abi_deps: [str.type] = None, srcs: [str.type] = None, std_err_log_level: [None, [str.type, int.type]] = None, std_out_log_level: [None, [str.type, int.type]] = None, target: [None, str.type] = None, test_case_timeout_ms: [None, int.type] = None, test_rule_timeout_ms: [None, int.type] = None, test_type: [None, str.type] = None, use_cxx_libraries: [None, bool.type] = None, use_dependency_order_classpath: [None, bool.type] = None, vm_args: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-115","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one abi_generation_mode annotation_processor_deps annotation_processor_params annotation_processors contacts cxx_library_whitelist default_cxx_platform default_host_platform deps deps_query env exported_deps exported_provided_deps extra_arguments fork_mode java_version javac labels licenses manifest_file maven_coords never_mark_as_unused_dependency on_unused_dependencies plugins proguard_config provided_deps remove_classes required_for_source_only_abi resources resources_root run_test_separately runtime_deps source source_abi_verification_mode source_only_abi_deps srcs std_err_log_level std_out_log_level target test_case_timeout_ms test_rule_timeout_ms test_type use_cxx_libraries use_dependency_order_classpath vm_args within_view   "},{"title":"scene_kit_assets​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#scene_kit_assets","content":"def scene_kit_assets( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, path: str.type, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-116","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts default_host_platform labels licenses path within_view   "},{"title":"select​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#select","content":"def select(d: &quot;&quot;) -&gt; &quot;selector&quot;   "},{"title":"select_equal_internal​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#select_equal_internal","content":"def select_equal_internal(left: &quot;&quot;, right: &quot;&quot;) -&gt; bool.type  Tests that two selects are equal to each other. For testing use only.  "},{"title":"select_map​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#select_map","content":"def select_map(d: &quot;&quot;, func: &quot;&quot;) -&gt; &quot;&quot;  Applies a mapping function to a selector. See [StarlarkSelector::select_map].  "},{"title":"select_test​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#select_test","content":"def select_test(d: &quot;&quot;, func: &quot;&quot;) -&gt; bool.type  Applies a test function to a selector. See [StarlarkSelector::select_test].  "},{"title":"sh_binary​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#sh_binary","content":"def sh_binary( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _target_os_type: default_only = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, main: str.type, resources: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-117","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _target_os_type contacts default_host_platform deps labels licenses main resources within_view   "},{"title":"sh_test​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#sh_test","content":"def sh_test( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _inject_test_env: default_only = None, args: [str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, env: {str.type: str.type} = None, labels: [str.type] = None, licenses: [str.type] = None, list_args: [None, [str.type]] = None, list_env: [None, {str.type: str.type}] = None, resources: [str.type] = None, run_args: [str.type] = None, run_env: {str.type: str.type} = None, run_test_separately: bool.type = None, test: [None, [str.type, str.type]] = None, test_rule_timeout_ms: [None, int.type] = None, type: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-118","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _inject_test_env args contacts default_host_platform deps env labels licenses list_args list_env resources run_args run_env run_test_separately test test_rule_timeout_ms type within_view   "},{"title":"sha256​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#sha256","content":"def sha256(val: str.type) -&gt; str.type  Computes a sha256 digest for a string. Returns the hex representation of the digest.  "},{"title":"struct​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#struct","content":"def struct(*args: UNKNOWN, **kwargs: UNKNOWN) -&gt; &quot;struct&quot;   "},{"title":"supermodule_target_graph​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#supermodule_target_graph","content":"def supermodule_target_graph( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, label_pattern: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, on_duplicate_entry: str.type = None, out: str.type = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-119","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts default_host_platform deps label_pattern labels licenses on_duplicate_entry out within_view   "},{"title":"swift_library​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#swift_library","content":"def swift_library( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, bridging_header: [None, str.type] = None, compiler_flags: [str.type] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, deps: [str.type] = None, enable_cxx_interop: bool.type = None, frameworks: [str.type] = None, labels: [str.type] = None, libraries: [str.type] = None, licenses: [str.type] = None, module_name: [None, str.type] = None, preferred_linkage: str.type = None, sdk_modules: [str.type] = None, serialize_debugging_options: bool.type = None, soname: [None, str.type] = None, srcs: [str.type] = None, supported_platforms_regex: [None, str.type] = None, target_sdk_version: [None, str.type] = None, uses_explicit_modules: bool.type = None, version: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-120","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one bridging_header compiler_flags contacts default_host_platform deps enable_cxx_interop frameworks labels libraries licenses module_name preferred_linkage sdk_modules serialize_debugging_options soname srcs supported_platforms_regex target_sdk_version uses_explicit_modules version within_view   "},{"title":"swift_toolchain​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#swift_toolchain","content":"def swift_toolchain( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _internal_platform_path: [None, str.type] = None, _internal_sdk_path: [None, str.type] = None, _swiftc_wrapper: str.type = None, architecture: [None, str.type] = None, can_toolchain_emit_obj_c_header_textually: bool.type = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, explicit_modules_uses_gmodules: bool.type = None, labels: [str.type] = None, licenses: [str.type] = None, platform_path: [None, str.type] = None, prefix_serialized_debug_info: bool.type = None, resource_dir: [None, str.type] = None, runtime_paths_for_bundling: [str.type] = None, runtime_paths_for_linking: [str.type] = None, runtime_run_paths: [str.type] = None, sdk_dependencies_path: [None, str.type] = None, sdk_modules: [str.type] = None, sdk_path: [None, str.type] = None, static_runtime_paths: [str.type] = None, swift_stdlib_tool: str.type, swift_stdlib_tool_flags: [str.type] = None, swiftc: str.type, swiftc_flags: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-121","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _internal_platform_path _internal_sdk_path _swiftc_wrapper architecture can_toolchain_emit_obj_c_header_textually contacts default_host_platform explicit_modules_uses_gmodules labels licenses platform_path prefix_serialized_debug_info resource_dir runtime_paths_for_bundling runtime_paths_for_linking runtime_run_paths sdk_dependencies_path sdk_modules sdk_path static_runtime_paths swift_stdlib_tool swift_stdlib_tool_flags swiftc swiftc_flags within_view   "},{"title":"test_suite​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#test_suite","content":"def test_suite( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, test_deps: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-122","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one contacts default_host_platform labels licenses test_deps within_view   "},{"title":"transition​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#transition","content":"def transition(*, impl: &quot;&quot;, refs: {str.type: str.type}, attrs: [None, [str.type]] = None, split: bool.type = None) -&gt; &quot;transition&quot;   "},{"title":"transitive_set​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#transitive_set","content":"def transitive_set(args_projections: [None, {str.type: &quot;&quot;}] = None, json_projections: [None, {str.type: &quot;&quot;}] = None, reductions: [None, {str.type: &quot;&quot;}] = None) -&gt; &quot;transitive_set_definition&quot;   "},{"title":"versioned_alias​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#versioned_alias","content":"def versioned_alias(versions: UNKNOWN = {}, **kwargs: UNKNOWN) -&gt; UNKNOWN   "},{"title":"warning​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#warning","content":"def warning(x: str.type) -&gt; None  Produce a warning.  "},{"title":"worker_tool​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#worker_tool","content":"def worker_tool( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _worker_tool_runner: default_only = None, args: [str.type, [str.type]] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, env: {str.type: str.type} = None, exe: [None, str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, max_workers: [None, int.type] = None, max_workers_per_thread_percent: [None, int.type] = None, persistent: [None, bool.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-123","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _worker_tool_runner args contacts default_host_platform env exe labels licenses max_workers max_workers_per_thread_percent persistent within_view   "},{"title":"write_package_value​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#write_package_value","content":"def write_package_value(key: str.type, value: &quot;&quot;, *, overwrite: bool.type = None) -&gt; None  Set the value to be accessible in the nested PACKAGE files.  "},{"title":"xcode_postbuild_script​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#xcode_postbuild_script","content":"def xcode_postbuild_script( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, cmd: str.type = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, input_file_lists: [str.type] = None, inputs: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, output_file_lists: [str.type] = None, outputs: [str.type] = None, srcs: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-124","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one cmd contacts default_host_platform input_file_lists inputs labels licenses output_file_lists outputs srcs within_view   "},{"title":"xcode_prebuild_script​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#xcode_prebuild_script","content":"def xcode_prebuild_script( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, cmd: str.type = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, input_file_lists: [str.type] = None, inputs: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, output_file_lists: [str.type] = None, outputs: [str.type] = None, srcs: [str.type] = None, within_view: [None, [None, [str.type]]] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-125","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one cmd contacts default_host_platform input_file_lists inputs labels licenses output_file_lists outputs srcs within_view   "},{"title":"xcode_workspace_config​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#xcode_workspace_config","content":"def xcode_workspace_config( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, action_config_names: {str.type: str.type} = None, additional_scheme_actions: [None, {str.type: {str.type: [str.type]}}] = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, environment_variables: [None, {str.type: {str.type: str.type}}] = None, explicit_runnable_path: [None, str.type] = None, extra_schemes: {str.type: str.type} = None, extra_shallow_targets: [str.type] = None, extra_targets: [str.type] = None, extra_tests: [str.type] = None, is_remote_runnable: [None, bool.type] = None, labels: [str.type] = None, launch_style: [None, str.type] = None, licenses: [str.type] = None, notification_payload_file: [None, str.type] = None, src_target: [None, str.type] = None, was_created_for_app_extension: [None, bool.type] = None, watch_interface: [None, str.type] = None, within_view: [None, [None, [str.type]]] = None, workspace_name: [None, str.type] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-126","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one action_config_names additional_scheme_actions contacts default_host_platform environment_variables explicit_runnable_path extra_schemes extra_shallow_targets extra_targets extra_tests is_remote_runnable labels launch_style licenses notification_payload_file src_target was_created_for_app_extension watch_interface within_view workspace_name   "},{"title":"zip_file​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#zip_file","content":"def zip_file( *, name: str.type, default_target_platform: [None, str.type] = None, target_compatible_with: [str.type] = None, compatible_with: [str.type] = None, exec_compatible_with: [str.type] = None, visibility: [str.type] = None, tests: [label] = None, _zip_file_toolchain: default_only = None, contacts: [str.type] = None, default_host_platform: [None, str.type] = None, entries_to_exclude: [str.type] = None, labels: [str.type] = None, licenses: [str.type] = None, on_duplicate_entry: str.type = None, out: str.type = None, srcs: [str.type] = None, within_view: [None, [None, [str.type]]] = None, zip_srcs: [str.type] = None ) -&gt; None  "},{"title":"Parameters​","type":1,"pageTitle":"prelude.bzl","url":"/docs/generated/starlark/prelude/prelude.bzl/#parameters-127","content":"Name\tDetails name name of the target default_target_platform specifies the default target platform, used when no platforms are specified on the command line target_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration compatible_with a list of constraints that are required to be satisfied for this target to be compatible with a configuration exec_compatible_with a list of constraints that are required to be satisfied for this target to be compatible with an execution platform visibility a list of visibility patterns restricting what targets can depend on this one tests a list of targets that provide tests for this one _zip_file_toolchain contacts default_host_platform entries_to_exclude labels licenses on_duplicate_entry out srcs within_view zip_srcs  "}]